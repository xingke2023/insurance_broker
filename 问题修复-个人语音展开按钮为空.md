# é—®é¢˜ä¿®å¤ï¼šä¸ªäººè¯­éŸ³å±•å¼€æŒ‰é’®ç‚¹å‡»ä¸ºç©º

## ğŸ› é—®é¢˜æè¿°

ç‚¹å‡»"åˆ›å»ºä¸ªäººè¯­éŸ³"çš„å±•å¼€æŒ‰é’®åï¼Œè¡¨å•åŒºåŸŸæ˜¾ç¤ºä¸ºç©ºç™½ã€‚

## ğŸ” é—®é¢˜åŸå› 

åœ¨ä¹‹å‰çš„ä»£ç é‡æ„ä¸­ï¼š
1. åˆ é™¤äº†åŒæ„å£°æ˜ç›¸å…³çš„stateå˜é‡ï¼ˆ`consentText`ã€`consentFile`ã€`isRecordingConsent`ç­‰ï¼‰
2. ä½†UIä»£ç ä¸­ä»ç„¶å¼•ç”¨è¿™äº›æœªå®šä¹‰çš„å˜é‡
3. JavaScriptæŠ¥é”™å¯¼è‡´ç»„ä»¶æ— æ³•æ­£å¸¸æ¸²æŸ“

### å…·ä½“é”™è¯¯

```javascript
// å·²åˆ é™¤çš„å˜é‡
const [consentText, setConsentText] = useState('');
const [consentFile, setConsentFile] = useState(null);
const [isRecordingConsent, setIsRecordingConsent] = useState(false);
const [consentRecordingTime, setConsentRecordingTime] = useState(0);
const [consentMediaRecorder, setConsentMediaRecorder] = useState(null);
const [consentAudioPreview, setConsentAudioPreview] = useState(null);

// ä½†UIä¸­ä»åœ¨ä½¿ç”¨
{consentText || `æˆ‘${voiceTalentName}...`}  // âŒ consentTextæœªå®šä¹‰
{!consentFile ? ... }  // âŒ consentFileæœªå®šä¹‰
{!isRecordingConsent ? ... }  // âŒ isRecordingConsentæœªå®šä¹‰
```

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. ç®€åŒ–Stateå˜é‡

**ä¿ç•™çš„å˜é‡ï¼š**
```javascript
const [voiceName, setVoiceName] = useState('');
const [voiceTalentName, setVoiceTalentName] = useState('');
const [companyName, setCompanyName] = useState('');
const [voiceSampleFile, setVoiceSampleFile] = useState(null);
const [isRecordingSample, setIsRecordingSample] = useState(false);
const [sampleRecordingTime, setSampleRecordingTime] = useState(0);
const [sampleMediaRecorder, setSampleMediaRecorder] = useState(null);
const [sampleAudioPreview, setSampleAudioPreview] = useState(null);
```

**ç§»é™¤çš„å˜é‡ï¼š**
```javascript
// âŒ ä»¥ä¸‹å˜é‡å·²å®Œå…¨ç§»é™¤
const [consentText, setConsentText] = useState('');
const [consentFile, setConsentFile] = useState(null);
const [isRecordingConsent, setIsRecordingConsent] = useState(false);
const [consentRecordingTime, setConsentRecordingTime] = useState(0);
const [consentMediaRecorder, setConsentMediaRecorder] = useState(null);
const [consentAudioPreview, setConsentAudioPreview] = useState(null);
```

### 2. ç®€åŒ–UIè¡¨å•

**æ–°çš„è¡¨å•ç»“æ„ï¼š**

```jsx
{showCreateForm && (
  <div className="bg-white rounded-xl shadow-sm p-6 space-y-4">
    {/* 1. è¯­éŸ³åç§° - å¿…å¡« */}
    <div>
      <label>è¯­éŸ³åç§° <span className="text-red-500">*</span></label>
      <input type="text" value={voiceName} ... />
    </div>

    {/* 2. å¯é€‰å­—æ®µ */}
    <div className="grid grid-cols-2 gap-4">
      <div>
        <label>å§“å <span className="text-gray-400">(å¯é€‰)</span></label>
        <input type="text" value={voiceTalentName} ... />
      </div>
      <div>
        <label>å…¬å¸åç§° <span className="text-gray-400">(å¯é€‰)</span></label>
        <input type="text" value={companyName} ... />
      </div>
    </div>

    {/* 3. è¯­éŸ³æ ·æœ¬ - å¿…å¡« */}
    <div>
      <label>è¯­éŸ³æ ·æœ¬ <span className="text-red-500">*</span></label>
      {/* å½•éŸ³æˆ–ä¸Šä¼  */}
      {!voiceSampleFile ? (
        <>
          <button onClick={startSampleRecording}>å¼€å§‹å½•éŸ³</button>
          <span>æˆ–</span>
          <input type="file" accept="audio/*" />
        </>
      ) : (
        <div>
          <span>âœ“ éŸ³é¢‘å·²å°±ç»ª</span>
          <audio controls src={sampleAudioPreview} />
          <button onClick={clearSampleRecording}>æ¸…é™¤</button>
        </div>
      )}
    </div>

    {/* 4. æäº¤æŒ‰é’® */}
    <button onClick={handleCreatePersonalVoice}>
      åˆ›å»ºä¸ªäººè¯­éŸ³
    </button>
  </div>
)}
```

### 3. ç§»é™¤çš„åŠŸèƒ½å‡½æ•°

```javascript
// âŒ å·²ç§»é™¤
const startConsentRecording = async () => { ... }
const stopConsentRecording = () => { ... }
const clearConsentRecording = () => { ... }

// âœ… ä¿ç•™
const startSampleRecording = async () => { ... }
const stopSampleRecording = () => { ... }
const clearSampleRecording = () => { ... }
```

## ğŸ“‹ æ–°çš„è¡¨å•å­—æ®µ

### å¿…å¡«å­—æ®µ (2ä¸ª)

1. **è¯­éŸ³åç§°** - å¿…å¡«ï¼Œå¸¦çº¢è‰²æ˜Ÿå· (*)
2. **è¯­éŸ³æ ·æœ¬** - å¿…å¡«ï¼Œå¸¦çº¢è‰²æ˜Ÿå· (*)

### å¯é€‰å­—æ®µ (2ä¸ª)

3. **å§“å** - å¯é€‰ï¼Œæ ‡æ³¨"(å¯é€‰)"
4. **å…¬å¸åç§°** - å¯é€‰ï¼Œæ ‡æ³¨"(å¯é€‰)"

## ğŸ¯ ç”¨æˆ·ä½“éªŒæ”¹è¿›

### æ”¹è¿›å‰
- âŒ 5ä¸ªå¿…å¡«å­—æ®µï¼ˆåç§°ã€å§“åã€å…¬å¸ã€åŒæ„å£°æ˜æ–‡æœ¬ã€åŒæ„å£°æ˜éŸ³é¢‘ã€è¯­éŸ³æ ·æœ¬ï¼‰
- âŒ éœ€è¦å½•åˆ¶2æ®µéŸ³é¢‘
- âŒ åŒæ„å£°æ˜æ–‡æœ¬å¿…é¡»ä¸å½•éŸ³å®Œå…¨ä¸€è‡´
- âŒ è¡¨å•å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™

### æ”¹è¿›å
- âœ… 2ä¸ªå¿…å¡«å­—æ®µï¼ˆåç§°ã€è¯­éŸ³æ ·æœ¬ï¼‰
- âœ… åªéœ€å½•åˆ¶1æ®µéŸ³é¢‘
- âœ… æ— æ–‡æœ¬åŒ¹é…éªŒè¯
- âœ… è¡¨å•ç®€æ´ï¼Œæ“ä½œç®€å•

## ğŸ§ª æµ‹è¯•æ­¥éª¤

1. **è®¿é—®é¡µé¢**
   ```
   https://hongkong.xingke888.com/text-to-speech
   ```

2. **åˆ‡æ¢åˆ°"ä¸ªäººè¯­éŸ³"æ ‡ç­¾**

3. **ç‚¹å‡»"å±•å¼€"æŒ‰é’®**
   - âœ… åº”è¯¥æ˜¾ç¤ºå®Œæ•´çš„åˆ›å»ºè¡¨å•
   - âœ… åŒ…å«4ä¸ªå­—æ®µï¼ˆ2å¿…å¡«+2å¯é€‰ï¼‰
   - âœ… æ— JavaScripté”™è¯¯

4. **å¡«å†™è¡¨å•**
   - è¾“å…¥è¯­éŸ³åç§°ï¼ˆå¿…å¡«ï¼‰
   - å¯é€‰ï¼šè¾“å…¥å§“åå’Œå…¬å¸
   - å½•éŸ³æˆ–ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶ï¼ˆå¿…å¡«ï¼‰

5. **æäº¤åˆ›å»º**
   - ç‚¹å‡»"åˆ›å»ºä¸ªäººè¯­éŸ³"æŒ‰é’®
   - ç­‰å¾…30ç§’-5åˆ†é’Ÿ
   - åˆ›å»ºæˆåŠŸåæ˜¾ç¤ºåœ¨ä¸ªäººè¯­éŸ³åˆ—è¡¨

## ğŸ“ ä»£ç å˜æ›´æ–‡ä»¶

### ä¿®æ”¹çš„æ–‡ä»¶

1. **`frontend/src/components/TextToSpeech.jsx`**
   - åˆ é™¤åŒæ„å£°æ˜ç›¸å…³stateå˜é‡
   - åˆ é™¤åŒæ„å£°æ˜ç›¸å…³å‡½æ•°
   - é‡å†™åˆ›å»ºè¡¨å•UIï¼ˆç¬¬602-736è¡Œï¼‰
   - ç®€åŒ–è¡¨å•éªŒè¯é€»è¾‘

2. **`api/personal_voice_views.py`**
   - å·²åœ¨ä¹‹å‰ä¿®æ”¹ï¼Œç§»é™¤åŒæ„å£°æ˜ä¾èµ–
   - å§“åå’Œå…¬å¸è®¾ä¸ºå¯é€‰

### æ„å»º

```bash
cd /var/www/harry-insurance2/frontend
npm run build
```

æ„å»ºæˆåŠŸï¼Œæ— é”™è¯¯ã€‚

## âœ¨ æ€»ç»“

é—®é¢˜å·²å®Œå…¨ä¿®å¤ï¼ç°åœ¨ï¼š

1. âœ… å±•å¼€æŒ‰é’®ç‚¹å‡»æ­£å¸¸æ˜¾ç¤ºè¡¨å•
2. âœ… è¡¨å•åªåŒ…å«å¿…è¦çš„å­—æ®µ
3. âœ… æ— æœªå®šä¹‰å˜é‡é”™è¯¯
4. âœ… ç”¨æˆ·ä½“éªŒå¤§å¹…æå‡
5. âœ… åˆ›å»ºæµç¨‹ç®€åŒ–60%

ç”¨æˆ·ç°åœ¨åªéœ€è¦ï¼š**èµ·ä¸ªåå­— + ä¸Šä¼ ä¸€æ®µéŸ³é¢‘ = å®Œæˆï¼**
