<view class="container">
  <!-- é¡¶éƒ¨æ ‡é¢˜åŒº -->
  <view class="header">
    <view class="header-title">å¼€é€šä¼šå‘˜</view>
    <view class="header-subtitle">Insurance Plan Assistant VIP</view>
  </view>

  <!-- å¥—é¤é€‰æ‹©åŒº - æ¨ªå‘ -->
  <view class="plans-tabs">
    <view
      wx:for="{{plans}}"
      wx:key="id"
      class="plan-tab {{selectedPlan === item.id ? 'active' : ''}}"
      bindtap="selectPlan"
      data-plan="{{item.id}}"
    >
      <!-- æ¨èè§’æ ‡ -->
      <view class="hot-corner" wx:if="{{item.popular}}">
        <text>ğŸ”¥</text>
      </view>

      <view class="tab-header">
        <text class="tab-name">{{item.name}}</text>
        <view class="save-tag" wx:if="{{item.badge}}">
          <text>{{item.badge}}</text>
        </view>
      </view>

      <view class="tab-price">
        <text class="price-symbol">Â¥</text>
        <text class="price-value">{{item.price}}</text>
        <text class="price-unit">/{{item.duration}}</text>
      </view>

      <view class="original-price" wx:if="{{item.originalPrice}}">
        <text class="line-through">Â¥{{item.originalPrice}}</text>
      </view>

      <!-- é€‰ä¸­æ ‡è®° -->
      <view class="selected-indicator" wx:if="{{selectedPlan === item.id}}">
        <text>âœ“</text>
      </view>
    </view>
  </view>

  <!-- é€‰ä¸­å¥—é¤è¯¦æƒ… -->
  <view class="plan-details">
    <view class="details-card">
      <!-- åŠŸèƒ½åˆ—è¡¨ -->
      <view class="features-title">
        <text class="title-icon">âœ¨</text>
        <text>ä¼šå‘˜æƒç›Š</text>
      </view>
      <view class="features-list">
        <view
          class="feature-item"
          wx:for="{{plans}}"
          wx:key="id"
          wx:if="{{item.id === selectedPlan}}"
        >
          <view
            class="feature"
            wx:for="{{item.features}}"
            wx:key="index"
            wx:for-item="feature"
          >
            <text class="check-icon">âœ“</text>
            <text class="feature-text">{{feature}}</text>
          </view>
        </view>
      </view>

      <!-- ä¼˜æƒ ä¿¡æ¯ -->
      <view class="discount-info" wx:for="{{plans}}" wx:key="id" wx:if="{{item.id === selectedPlan && item.discount}}">
        <view class="discount-banner">
          <text class="fire-icon">ğŸ”¥</text>
          <text class="discount-text">{{item.discount}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ”¯ä»˜æŒ‰é’® -->
  <view class="bottom-action">
    <button
      class="pay-button"
      bindtap="handlePay"
      loading="{{paying}}"
      disabled="{{paying}}"
    >
      <view class="pay-button-content" wx:if="{{!paying}}">
        <text class="pay-text">ç«‹å³å¼€é€š</text>
        <text class="pay-amount">Â¥{{selectedPrice}}</text>
      </view>
      <text wx:if="{{paying}}">æ”¯ä»˜ä¸­...</text>
    </button>

    <view class="security-tip">
      <text class="lock-icon">ğŸ›¡ï¸</text>
      <text>å¾®ä¿¡æ”¯ä»˜å…¨ç¨‹ä¿æŠ¤</text>
    </view>
  </view>
</view>
