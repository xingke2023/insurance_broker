var Q_=t=>{throw TypeError(t)};var Ny=(t,e,n)=>e.has(t)||Q_("Cannot "+n);var on=(t,e,n)=>(Ny(t,e,"read from private field"),n?n.call(t):e.get(t)),ua=(t,e,n)=>e.has(t)?Q_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Fr=(t,e,n,r)=>(Ny(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ca=(t,e,n)=>(Ny(t,e,"access private method"),n);var Z_=(t,e,n,r)=>({set _(i){Fr(t,e,i,n)},get _(){return on(t,e,r)}});function IB(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Ji(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cy={exports:{}},rd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function LB(){if(J_)return rd;J_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return rd.Fragment=e,rd.jsx=n,rd.jsxs=n,rd}var eN;function MB(){return eN||(eN=1,Cy.exports=LB()),Cy.exports}var f=MB(),Oy={exports:{}},ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN;function BB(){if(tN)return ct;tN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),b=Symbol.iterator;function y(U){return U===null||typeof U!="object"?null:(U=b&&U[b]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function T(U,Q,I){this.props=U,this.context=Q,this.refs=E,this.updater=I||x}T.prototype.isReactComponent={},T.prototype.setState=function(U,Q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Q,"setState")},T.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function C(){}C.prototype=T.prototype;function N(U,Q,I){this.props=U,this.context=Q,this.refs=E,this.updater=I||x}var P=N.prototype=new C;P.constructor=N,w(P,T.prototype),P.isPureReactComponent=!0;var k=Array.isArray;function j(){}var D={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function Y(U,Q,I){var oe=I.ref;return{$$typeof:t,type:U,key:Q,ref:oe!==void 0?oe:null,props:I}}function X(U,Q){return Y(U.type,Q,U.props)}function z(U){return typeof U=="object"&&U!==null&&U.$$typeof===t}function K(U){var Q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(I){return Q[I]})}var ce=/\/+/g;function te(U,Q){return typeof U=="object"&&U!==null&&U.key!=null?K(""+U.key):Q.toString(36)}function W(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(j,j):(U.status="pending",U.then(function(Q){U.status==="pending"&&(U.status="fulfilled",U.value=Q)},function(Q){U.status==="pending"&&(U.status="rejected",U.reason=Q)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function R(U,Q,I,oe,$){var ie=typeof U;(ie==="undefined"||ie==="boolean")&&(U=null);var me=!1;if(U===null)me=!0;else switch(ie){case"bigint":case"string":case"number":me=!0;break;case"object":switch(U.$$typeof){case t:case e:me=!0;break;case h:return me=U._init,R(me(U._payload),Q,I,oe,$)}}if(me)return $=$(U),me=oe===""?"."+te(U,0):oe,k($)?(I="",me!=null&&(I=me.replace(ce,"$&/")+"/"),R($,Q,I,"",function(Oe){return Oe})):$!=null&&(z($)&&($=X($,I+($.key==null||U&&U.key===$.key?"":(""+$.key).replace(ce,"$&/")+"/")+me)),Q.push($)),1;me=0;var be=oe===""?".":oe+":";if(k(U))for(var J=0;J<U.length;J++)oe=U[J],ie=be+te(oe,J),me+=R(oe,Q,I,ie,$);else if(J=y(U),typeof J=="function")for(U=J.call(U),J=0;!(oe=U.next()).done;)oe=oe.value,ie=be+te(oe,J++),me+=R(oe,Q,I,ie,$);else if(ie==="object"){if(typeof U.then=="function")return R(W(U),Q,I,oe,$);throw Q=String(U),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return me}function B(U,Q,I){if(U==null)return U;var oe=[],$=0;return R(U,oe,"","",function(ie){return Q.call(I,ie,$++)}),oe}function re(U){if(U._status===-1){var Q=U._result;Q=Q(),Q.then(function(I){(U._status===0||U._status===-1)&&(U._status=1,U._result=I)},function(I){(U._status===0||U._status===-1)&&(U._status=2,U._result=I)}),U._status===-1&&(U._status=0,U._result=Q)}if(U._status===1)return U._result.default;throw U._result}var le=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)},M={map:B,forEach:function(U,Q,I){B(U,function(){Q.apply(this,arguments)},I)},count:function(U){var Q=0;return B(U,function(){Q++}),Q},toArray:function(U){return B(U,function(Q){return Q})||[]},only:function(U){if(!z(U))throw Error("React.Children.only expected to receive a single React element child.");return U}};return ct.Activity=p,ct.Children=M,ct.Component=T,ct.Fragment=n,ct.Profiler=i,ct.PureComponent=N,ct.StrictMode=r,ct.Suspense=c,ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,ct.__COMPILER_RUNTIME={__proto__:null,c:function(U){return D.H.useMemoCache(U)}},ct.cache=function(U){return function(){return U.apply(null,arguments)}},ct.cacheSignal=function(){return null},ct.cloneElement=function(U,Q,I){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var oe=w({},U.props),$=U.key;if(Q!=null)for(ie in Q.key!==void 0&&($=""+Q.key),Q)!H.call(Q,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&Q.ref===void 0||(oe[ie]=Q[ie]);var ie=arguments.length-2;if(ie===1)oe.children=I;else if(1<ie){for(var me=Array(ie),be=0;be<ie;be++)me[be]=arguments[be+2];oe.children=me}return Y(U.type,$,oe)},ct.createContext=function(U){return U={$$typeof:s,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:a,_context:U},U},ct.createElement=function(U,Q,I){var oe,$={},ie=null;if(Q!=null)for(oe in Q.key!==void 0&&(ie=""+Q.key),Q)H.call(Q,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&($[oe]=Q[oe]);var me=arguments.length-2;if(me===1)$.children=I;else if(1<me){for(var be=Array(me),J=0;J<me;J++)be[J]=arguments[J+2];$.children=be}if(U&&U.defaultProps)for(oe in me=U.defaultProps,me)$[oe]===void 0&&($[oe]=me[oe]);return Y(U,ie,$)},ct.createRef=function(){return{current:null}},ct.forwardRef=function(U){return{$$typeof:l,render:U}},ct.isValidElement=z,ct.lazy=function(U){return{$$typeof:h,_payload:{_status:-1,_result:U},_init:re}},ct.memo=function(U,Q){return{$$typeof:d,type:U,compare:Q===void 0?null:Q}},ct.startTransition=function(U){var Q=D.T,I={};D.T=I;try{var oe=U(),$=D.S;$!==null&&$(I,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(j,le)}catch(ie){le(ie)}finally{Q!==null&&I.types!==null&&(Q.types=I.types),D.T=Q}},ct.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},ct.use=function(U){return D.H.use(U)},ct.useActionState=function(U,Q,I){return D.H.useActionState(U,Q,I)},ct.useCallback=function(U,Q){return D.H.useCallback(U,Q)},ct.useContext=function(U){return D.H.useContext(U)},ct.useDebugValue=function(){},ct.useDeferredValue=function(U,Q){return D.H.useDeferredValue(U,Q)},ct.useEffect=function(U,Q){return D.H.useEffect(U,Q)},ct.useEffectEvent=function(U){return D.H.useEffectEvent(U)},ct.useId=function(){return D.H.useId()},ct.useImperativeHandle=function(U,Q,I){return D.H.useImperativeHandle(U,Q,I)},ct.useInsertionEffect=function(U,Q){return D.H.useInsertionEffect(U,Q)},ct.useLayoutEffect=function(U,Q){return D.H.useLayoutEffect(U,Q)},ct.useMemo=function(U,Q){return D.H.useMemo(U,Q)},ct.useOptimistic=function(U,Q){return D.H.useOptimistic(U,Q)},ct.useReducer=function(U,Q,I){return D.H.useReducer(U,Q,I)},ct.useRef=function(U){return D.H.useRef(U)},ct.useState=function(U){return D.H.useState(U)},ct.useSyncExternalStore=function(U,Q,I){return D.H.useSyncExternalStore(U,Q,I)},ct.useTransition=function(){return D.H.useTransition()},ct.version="19.2.0",ct}var nN;function qu(){return nN||(nN=1,Oy.exports=BB()),Oy.exports}var A=qu();const Cd=Ji(A),FB=IB({__proto__:null,default:Cd},[A]);var ky={exports:{}},id={},jy={exports:{}},Py={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rN;function UB(){return rN||(rN=1,(function(t){function e(R,B){var re=R.length;R.push(B);e:for(;0<re;){var le=re-1>>>1,M=R[le];if(0<i(M,B))R[le]=B,R[re]=M,re=le;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var B=R[0],re=R.pop();if(re!==B){R[0]=re;e:for(var le=0,M=R.length,U=M>>>1;le<U;){var Q=2*(le+1)-1,I=R[Q],oe=Q+1,$=R[oe];if(0>i(I,re))oe<M&&0>i($,I)?(R[le]=$,R[oe]=re,le=oe):(R[le]=I,R[Q]=re,le=Q);else if(oe<M&&0>i($,re))R[le]=$,R[oe]=re,le=oe;else break e}}return B}function i(R,B){var re=R.sortIndex-B.sortIndex;return re!==0?re:R.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],d=[],h=1,p=null,b=3,y=!1,x=!1,w=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function P(R){for(var B=n(d);B!==null;){if(B.callback===null)r(d);else if(B.startTime<=R)r(d),B.sortIndex=B.expirationTime,e(c,B);else break;B=n(d)}}function k(R){if(w=!1,P(R),!x)if(n(c)!==null)x=!0,j||(j=!0,K());else{var B=n(d);B!==null&&W(k,B.startTime-R)}}var j=!1,D=-1,H=5,Y=-1;function X(){return E?!0:!(t.unstable_now()-Y<H)}function z(){if(E=!1,j){var R=t.unstable_now();Y=R;var B=!0;try{e:{x=!1,w&&(w=!1,C(D),D=-1),y=!0;var re=b;try{t:{for(P(R),p=n(c);p!==null&&!(p.expirationTime>R&&X());){var le=p.callback;if(typeof le=="function"){p.callback=null,b=p.priorityLevel;var M=le(p.expirationTime<=R);if(R=t.unstable_now(),typeof M=="function"){p.callback=M,P(R),B=!0;break t}p===n(c)&&r(c),P(R)}else r(c);p=n(c)}if(p!==null)B=!0;else{var U=n(d);U!==null&&W(k,U.startTime-R),B=!1}}break e}finally{p=null,b=re,y=!1}B=void 0}}finally{B?K():j=!1}}}var K;if(typeof N=="function")K=function(){N(z)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,te=ce.port2;ce.port1.onmessage=z,K=function(){te.postMessage(null)}}else K=function(){T(z,0)};function W(R,B){D=T(function(){R(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(R){switch(b){case 1:case 2:case 3:var B=3;break;default:B=b}var re=b;b=B;try{return R()}finally{b=re}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var re=b;b=R;try{return B()}finally{b=re}},t.unstable_scheduleCallback=function(R,B,re){var le=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?le+re:le):re=le,R){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=re+M,R={id:h++,callback:B,priorityLevel:R,startTime:re,expirationTime:M,sortIndex:-1},re>le?(R.sortIndex=re,e(d,R),n(c)===null&&R===n(d)&&(w?(C(D),D=-1):w=!0,W(k,re-le))):(R.sortIndex=M,e(c,R),x||y||(x=!0,j||(j=!0,K()))),R},t.unstable_shouldYield=X,t.unstable_wrapCallback=function(R){var B=b;return function(){var re=b;b=B;try{return R.apply(this,arguments)}finally{b=re}}}})(Py)),Py}var iN;function HB(){return iN||(iN=1,jy.exports=UB()),jy.exports}var Dy={exports:{}},hr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aN;function zB(){if(aN)return hr;aN=1;var t=qu();function e(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:d,implementation:h}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return hr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hr.createPortal=function(c,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(c,d,null,h)},hr.flushSync=function(c){var d=s.T,h=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=d,r.p=h,r.d.f()}},hr.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(c,d))},hr.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},hr.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),b=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:y}):h==="script"&&r.d.X(c,{crossOrigin:p,integrity:b,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},hr.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(c)},hr.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(c,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},hr.preloadModule=function(c,d){if(typeof c=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(c)},hr.requestFormReset=function(c){r.d.r(c)},hr.unstable_batchedUpdates=function(c,d){return c(d)},hr.useFormState=function(c,d,h){return s.H.useFormState(c,d,h)},hr.useFormStatus=function(){return s.H.useHostTransitionStatus()},hr.version="19.2.0",hr}var sN;function OP(){if(sN)return Dy.exports;sN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Dy.exports=zB(),Dy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oN;function $B(){if(oN)return id;oN=1;var t=HB(),e=qu(),n=OP();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(r(188))}function d(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(r(188));return u!==o?null:o}for(var m=o,g=u;;){var v=m.return;if(v===null)break;var S=v.alternate;if(S===null){if(g=v.return,g!==null){m=g;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===m)return c(v),o;if(S===g)return c(v),u;S=S.sibling}throw Error(r(188))}if(m.return!==g.return)m=v,g=S;else{for(var O=!1,L=v.child;L;){if(L===m){O=!0,m=v,g=S;break}if(L===g){O=!0,g=v,m=S;break}L=L.sibling}if(!O){for(L=S.child;L;){if(L===m){O=!0,m=S,g=v;break}if(L===g){O=!0,g=S,m=v;break}L=L.sibling}if(!O)throw Error(r(189))}}if(m.alternate!==g)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?o:u}function h(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=h(o),u!==null)return u;o=o.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),X=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function K(o){return o===null||typeof o!="object"?null:(o=z&&o[z]||o["@@iterator"],typeof o=="function"?o:null)}var ce=Symbol.for("react.client.reference");function te(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===ce?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case w:return"Fragment";case T:return"Profiler";case E:return"StrictMode";case k:return"Suspense";case j:return"SuspenseList";case Y:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case x:return"Portal";case N:return o.displayName||"Context";case C:return(o._context.displayName||"Context")+".Consumer";case P:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case D:return u=o.displayName||null,u!==null?u:te(o.type)||"Memo";case H:u=o._payload,o=o._init;try{return te(o(u))}catch{}}return null}var W=Array.isArray,R=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},le=[],M=-1;function U(o){return{current:o}}function Q(o){0>M||(o.current=le[M],le[M]=null,M--)}function I(o,u){M++,le[M]=o.current,o.current=u}var oe=U(null),$=U(null),ie=U(null),me=U(null);function be(o,u){switch(I(ie,u),I($,o),I(oe,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?v_(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=v_(u),o=w_(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}Q(oe),I(oe,o)}function J(){Q(oe),Q($),Q(ie)}function Oe(o){o.memoizedState!==null&&I(me,o);var u=oe.current,m=w_(u,o.type);u!==m&&(I($,o),I(oe,m))}function Be(o){$.current===o&&(Q(oe),Q($)),me.current===o&&(Q(me),Jc._currentValue=re)}var se,ze;function Fe(o){if(se===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);se=u&&u[1]||"",ze=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+se+o+ze}var tt=!1;function ee(o,u){if(!o||tt)return"";tt=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(u){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ve){var ge=ve}Reflect.construct(o,[],Ce)}else{try{Ce.call()}catch(ve){ge=ve}o.call(Ce.prototype)}}else{try{throw Error()}catch(ve){ge=ve}(Ce=o())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ve){if(ve&&ge&&typeof ve.stack=="string")return[ve.stack,ge.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=g.DetermineComponentFrameRoot(),O=S[0],L=S[1];if(O&&L){var G=O.split(`
`),fe=L.split(`
`);for(v=g=0;g<G.length&&!G[g].includes("DetermineComponentFrameRoot");)g++;for(;v<fe.length&&!fe[v].includes("DetermineComponentFrameRoot");)v++;if(g===G.length||v===fe.length)for(g=G.length-1,v=fe.length-1;1<=g&&0<=v&&G[g]!==fe[v];)v--;for(;1<=g&&0<=v;g--,v--)if(G[g]!==fe[v]){if(g!==1||v!==1)do if(g--,v--,0>v||G[g]!==fe[v]){var Te=`
`+G[g].replace(" at new "," at ");return o.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",o.displayName)),Te}while(1<=g&&0<=v);break}}}finally{tt=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?Fe(m):""}function ye(o,u){switch(o.tag){case 26:case 27:case 5:return Fe(o.type);case 16:return Fe("Lazy");case 13:return o.child!==u&&u!==null?Fe("Suspense Fallback"):Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 15:return ee(o.type,!1);case 11:return ee(o.type.render,!1);case 1:return ee(o.type,!0);case 31:return Fe("Activity");default:return""}}function He(o){try{var u="",m=null;do u+=ye(o,m),m=o,o=o.return;while(o);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var De=Object.prototype.hasOwnProperty,Ue=t.unstable_scheduleCallback,Ge=t.unstable_cancelCallback,nt=t.unstable_shouldYield,rt=t.unstable_requestPaint,We=t.unstable_now,Ae=t.unstable_getCurrentPriorityLevel,ne=t.unstable_ImmediatePriority,we=t.unstable_UserBlockingPriority,Le=t.unstable_NormalPriority,Ke=t.unstable_LowPriority,ot=t.unstable_IdlePriority,Ot=t.log,vr=t.unstable_setDisableYieldValue,pe=null,ke=null;function ue(o){if(typeof Ot=="function"&&vr(o),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(pe,o)}catch{}}var _e=Math.clz32?Math.clz32:lt,Me=Math.log,vt=Math.LN2;function lt(o){return o>>>=0,o===0?32:31-(Me(o)/vt|0)|0}var Mt=256,mn=262144,Rn=4194304;function dr(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function As(o,u,m){var g=o.pendingLanes;if(g===0)return 0;var v=0,S=o.suspendedLanes,O=o.pingedLanes;o=o.warmLanes;var L=g&134217727;return L!==0?(g=L&~S,g!==0?v=dr(g):(O&=L,O!==0?v=dr(O):m||(m=L&~o,m!==0&&(v=dr(m))))):(L=g&~S,L!==0?v=dr(L):O!==0?v=dr(O):m||(m=g&~o,m!==0&&(v=dr(m)))),v===0?0:u!==0&&u!==v&&(u&S)===0&&(S=v&-v,m=u&-u,S>=m||S===32&&(m&4194048)!==0)?u:v}function Ss(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function m0(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tA(){var o=Rn;return Rn<<=1,(Rn&62914560)===0&&(Rn=4194304),o}function p0(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function fc(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function A6(o,u,m,g,v,S){var O=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var L=o.entanglements,G=o.expirationTimes,fe=o.hiddenUpdates;for(m=O&~m;0<m;){var Te=31-_e(m),Ce=1<<Te;L[Te]=0,G[Te]=-1;var ge=fe[Te];if(ge!==null)for(fe[Te]=null,Te=0;Te<ge.length;Te++){var ve=ge[Te];ve!==null&&(ve.lane&=-536870913)}m&=~Ce}g!==0&&nA(o,g,0),S!==0&&v===0&&o.tag!==0&&(o.suspendedLanes|=S&~(O&~u))}function nA(o,u,m){o.pendingLanes|=u,o.suspendedLanes&=~u;var g=31-_e(u);o.entangledLanes|=u,o.entanglements[g]=o.entanglements[g]|1073741824|m&261930}function rA(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var g=31-_e(m),v=1<<g;v&u|o[g]&u&&(o[g]|=u),m&=~v}}function iA(o,u){var m=u&-u;return m=(m&42)!==0?1:g0(m),(m&(o.suspendedLanes|u))!==0?0:m}function g0(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function b0(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function aA(){var o=B.p;return o!==0?o:(o=window.event,o===void 0?32:q_(o.type))}function sA(o,u){var m=B.p;try{return B.p=o,u()}finally{B.p=m}}var Ts=Math.random().toString(36).slice(2),Jn="__reactFiber$"+Ts,Pr="__reactProps$"+Ts,wl="__reactContainer$"+Ts,y0="__reactEvents$"+Ts,S6="__reactListeners$"+Ts,T6="__reactHandles$"+Ts,oA="__reactResources$"+Ts,mc="__reactMarker$"+Ts;function x0(o){delete o[Jn],delete o[Pr],delete o[y0],delete o[S6],delete o[T6]}function El(o){var u=o[Jn];if(u)return u;for(var m=o.parentNode;m;){if(u=m[wl]||m[Jn]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=C_(o);o!==null;){if(m=o[Jn])return m;o=C_(o)}return u}o=m,m=o.parentNode}return null}function Al(o){if(o=o[Jn]||o[wl]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function pc(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function Sl(o){var u=o[oA];return u||(u=o[oA]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function zn(o){o[mc]=!0}var lA=new Set,uA={};function bo(o,u){Tl(o,u),Tl(o+"Capture",u)}function Tl(o,u){for(uA[o]=u,o=0;o<u.length;o++)lA.add(u[o])}var _6=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cA={},dA={};function N6(o){return De.call(dA,o)?!0:De.call(cA,o)?!1:_6.test(o)?dA[o]=!0:(cA[o]=!0,!1)}function Zh(o,u,m){if(N6(u))if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var g=u.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+m)}}function Jh(o,u,m){if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+m)}}function Pa(o,u,m,g){if(g===null)o.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(u,m,""+g)}}function xi(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function hA(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function C6(o,u,m){var g=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var v=g.get,S=g.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return v.call(this)},set:function(O){m=""+O,S.call(this,O)}}),Object.defineProperty(o,u,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function(O){m=""+O},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function v0(o){if(!o._valueTracker){var u=hA(o)?"checked":"value";o._valueTracker=C6(o,u,""+o[u])}}function fA(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),g="";return o&&(g=hA(o)?o.checked?"true":"false":o.value),o=g,o!==m?(u.setValue(o),!0):!1}function ef(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var O6=/[\n"\\]/g;function vi(o){return o.replace(O6,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function w0(o,u,m,g,v,S,O,L){o.name="",O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?o.type=O:o.removeAttribute("type"),u!=null?O==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+xi(u)):o.value!==""+xi(u)&&(o.value=""+xi(u)):O!=="submit"&&O!=="reset"||o.removeAttribute("value"),u!=null?E0(o,O,xi(u)):m!=null?E0(o,O,xi(m)):g!=null&&o.removeAttribute("value"),v==null&&S!=null&&(o.defaultChecked=!!S),v!=null&&(o.checked=v&&typeof v!="function"&&typeof v!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?o.name=""+xi(L):o.removeAttribute("name")}function mA(o,u,m,g,v,S,O,L){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.type=S),u!=null||m!=null){if(!(S!=="submit"&&S!=="reset"||u!=null)){v0(o);return}m=m!=null?""+xi(m):"",u=u!=null?""+xi(u):m,L||u===o.value||(o.value=u),o.defaultValue=u}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=L?o.checked:!!g,o.defaultChecked=!!g,O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(o.name=O),v0(o)}function E0(o,u,m){u==="number"&&ef(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function _l(o,u,m,g){if(o=o.options,u){u={};for(var v=0;v<m.length;v++)u["$"+m[v]]=!0;for(m=0;m<o.length;m++)v=u.hasOwnProperty("$"+o[m].value),o[m].selected!==v&&(o[m].selected=v),v&&g&&(o[m].defaultSelected=!0)}else{for(m=""+xi(m),u=null,v=0;v<o.length;v++){if(o[v].value===m){o[v].selected=!0,g&&(o[v].defaultSelected=!0);return}u!==null||o[v].disabled||(u=o[v])}u!==null&&(u.selected=!0)}}function pA(o,u,m){if(u!=null&&(u=""+xi(u),u!==o.value&&(o.value=u),m==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=m!=null?""+xi(m):""}function gA(o,u,m,g){if(u==null){if(g!=null){if(m!=null)throw Error(r(92));if(W(g)){if(1<g.length)throw Error(r(93));g=g[0]}m=g}m==null&&(m=""),u=m}m=xi(u),o.defaultValue=m,g=o.textContent,g===m&&g!==""&&g!==null&&(o.value=g),v0(o)}function Nl(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var k6=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bA(o,u,m){var g=u.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?g?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":g?o.setProperty(u,m):typeof m!="number"||m===0||k6.has(u)?u==="float"?o.cssFloat=m:o[u]=(""+m).trim():o[u]=m+"px"}function yA(o,u,m){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,m!=null){for(var g in m)!m.hasOwnProperty(g)||u!=null&&u.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var v in u)g=u[v],u.hasOwnProperty(v)&&m[v]!==g&&bA(o,v,g)}else for(var S in u)u.hasOwnProperty(S)&&bA(o,S,u[S])}function A0(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j6=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),P6=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tf(o){return P6.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Da(){}var S0=null;function T0(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Cl=null,Ol=null;function xA(o){var u=Al(o);if(u&&(o=u.stateNode)){var m=o[Pr]||null;e:switch(o=u.stateNode,u.type){case"input":if(w0(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+vi(""+u)+'"][type="radio"]'),u=0;u<m.length;u++){var g=m[u];if(g!==o&&g.form===o.form){var v=g[Pr]||null;if(!v)throw Error(r(90));w0(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(u=0;u<m.length;u++)g=m[u],g.form===o.form&&fA(g)}break e;case"textarea":pA(o,m.value,m.defaultValue);break e;case"select":u=m.value,u!=null&&_l(o,!!m.multiple,u,!1)}}}var _0=!1;function vA(o,u,m){if(_0)return o(u,m);_0=!0;try{var g=o(u);return g}finally{if(_0=!1,(Cl!==null||Ol!==null)&&($f(),Cl&&(u=Cl,o=Ol,Ol=Cl=null,xA(u),o)))for(u=0;u<o.length;u++)xA(o[u])}}function gc(o,u){var m=o.stateNode;if(m===null)return null;var g=m[Pr]||null;if(g===null)return null;m=g[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(r(231,u,typeof m));return m}var Ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N0=!1;if(Ra)try{var bc={};Object.defineProperty(bc,"passive",{get:function(){N0=!0}}),window.addEventListener("test",bc,bc),window.removeEventListener("test",bc,bc)}catch{N0=!1}var _s=null,C0=null,nf=null;function wA(){if(nf)return nf;var o,u=C0,m=u.length,g,v="value"in _s?_s.value:_s.textContent,S=v.length;for(o=0;o<m&&u[o]===v[o];o++);var O=m-o;for(g=1;g<=O&&u[m-g]===v[S-g];g++);return nf=v.slice(o,1<g?1-g:void 0)}function rf(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function af(){return!0}function EA(){return!1}function Dr(o){function u(m,g,v,S,O){this._reactName=m,this._targetInst=v,this.type=g,this.nativeEvent=S,this.target=O,this.currentTarget=null;for(var L in o)o.hasOwnProperty(L)&&(m=o[L],this[L]=m?m(S):S[L]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?af:EA,this.isPropagationStopped=EA,this}return p(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=af)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=af)},persist:function(){},isPersistent:af}),u}var yo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sf=Dr(yo),yc=p({},yo,{view:0,detail:0}),D6=Dr(yc),O0,k0,xc,of=p({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P0,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==xc&&(xc&&o.type==="mousemove"?(O0=o.screenX-xc.screenX,k0=o.screenY-xc.screenY):k0=O0=0,xc=o),O0)},movementY:function(o){return"movementY"in o?o.movementY:k0}}),AA=Dr(of),R6=p({},of,{dataTransfer:0}),I6=Dr(R6),L6=p({},yc,{relatedTarget:0}),j0=Dr(L6),M6=p({},yo,{animationName:0,elapsedTime:0,pseudoElement:0}),B6=Dr(M6),F6=p({},yo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),U6=Dr(F6),H6=p({},yo,{data:0}),SA=Dr(H6),z6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y6(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=q6[o])?!!u[o]:!1}function P0(){return Y6}var V6=p({},yc,{key:function(o){if(o.key){var u=z6[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=rf(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?$6[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P0,charCode:function(o){return o.type==="keypress"?rf(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?rf(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),G6=Dr(V6),W6=p({},of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TA=Dr(W6),X6=p({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P0}),K6=Dr(X6),Q6=p({},yo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z6=Dr(Q6),J6=p({},of,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),e8=Dr(J6),t8=p({},yo,{newState:0,oldState:0}),n8=Dr(t8),r8=[9,13,27,32],D0=Ra&&"CompositionEvent"in window,vc=null;Ra&&"documentMode"in document&&(vc=document.documentMode);var i8=Ra&&"TextEvent"in window&&!vc,_A=Ra&&(!D0||vc&&8<vc&&11>=vc),NA=" ",CA=!1;function OA(o,u){switch(o){case"keyup":return r8.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kA(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var kl=!1;function a8(o,u){switch(o){case"compositionend":return kA(u);case"keypress":return u.which!==32?null:(CA=!0,NA);case"textInput":return o=u.data,o===NA&&CA?null:o;default:return null}}function s8(o,u){if(kl)return o==="compositionend"||!D0&&OA(o,u)?(o=wA(),nf=C0=_s=null,kl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return _A&&u.locale!=="ko"?null:u.data;default:return null}}var o8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jA(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!o8[o.type]:u==="textarea"}function PA(o,u,m,g){Cl?Ol?Ol.push(g):Ol=[g]:Cl=g,u=Kf(u,"onChange"),0<u.length&&(m=new sf("onChange","change",null,m,g),o.push({event:m,listeners:u}))}var wc=null,Ec=null;function l8(o){m_(o,0)}function lf(o){var u=pc(o);if(fA(u))return o}function DA(o,u){if(o==="change")return u}var RA=!1;if(Ra){var R0;if(Ra){var I0="oninput"in document;if(!I0){var IA=document.createElement("div");IA.setAttribute("oninput","return;"),I0=typeof IA.oninput=="function"}R0=I0}else R0=!1;RA=R0&&(!document.documentMode||9<document.documentMode)}function LA(){wc&&(wc.detachEvent("onpropertychange",MA),Ec=wc=null)}function MA(o){if(o.propertyName==="value"&&lf(Ec)){var u=[];PA(u,Ec,o,T0(o)),vA(l8,u)}}function u8(o,u,m){o==="focusin"?(LA(),wc=u,Ec=m,wc.attachEvent("onpropertychange",MA)):o==="focusout"&&LA()}function c8(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return lf(Ec)}function d8(o,u){if(o==="click")return lf(u)}function h8(o,u){if(o==="input"||o==="change")return lf(u)}function f8(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var ti=typeof Object.is=="function"?Object.is:f8;function Ac(o,u){if(ti(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),g=Object.keys(u);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var v=m[g];if(!De.call(u,v)||!ti(o[v],u[v]))return!1}return!0}function BA(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function FA(o,u){var m=BA(o);o=0;for(var g;m;){if(m.nodeType===3){if(g=o+m.textContent.length,o<=u&&g>=u)return{node:m,offset:u-o};o=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=BA(m)}}function UA(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?UA(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function HA(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=ef(o.document);u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=ef(o.document)}return u}function L0(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var m8=Ra&&"documentMode"in document&&11>=document.documentMode,jl=null,M0=null,Sc=null,B0=!1;function zA(o,u,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;B0||jl==null||jl!==ef(g)||(g=jl,"selectionStart"in g&&L0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Sc&&Ac(Sc,g)||(Sc=g,g=Kf(M0,"onSelect"),0<g.length&&(u=new sf("onSelect","select",null,u,m),o.push({event:u,listeners:g}),u.target=jl)))}function xo(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var Pl={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionrun:xo("Transition","TransitionRun"),transitionstart:xo("Transition","TransitionStart"),transitioncancel:xo("Transition","TransitionCancel"),transitionend:xo("Transition","TransitionEnd")},F0={},$A={};Ra&&($A=document.createElement("div").style,"AnimationEvent"in window||(delete Pl.animationend.animation,delete Pl.animationiteration.animation,delete Pl.animationstart.animation),"TransitionEvent"in window||delete Pl.transitionend.transition);function vo(o){if(F0[o])return F0[o];if(!Pl[o])return o;var u=Pl[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in $A)return F0[o]=u[m];return o}var qA=vo("animationend"),YA=vo("animationiteration"),VA=vo("animationstart"),p8=vo("transitionrun"),g8=vo("transitionstart"),b8=vo("transitioncancel"),GA=vo("transitionend"),WA=new Map,U0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");U0.push("scrollEnd");function Gi(o,u){WA.set(o,u),bo(u,[o])}var uf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},wi=[],Dl=0,H0=0;function cf(){for(var o=Dl,u=H0=Dl=0;u<o;){var m=wi[u];wi[u++]=null;var g=wi[u];wi[u++]=null;var v=wi[u];wi[u++]=null;var S=wi[u];if(wi[u++]=null,g!==null&&v!==null){var O=g.pending;O===null?v.next=v:(v.next=O.next,O.next=v),g.pending=v}S!==0&&XA(m,v,S)}}function df(o,u,m,g){wi[Dl++]=o,wi[Dl++]=u,wi[Dl++]=m,wi[Dl++]=g,H0|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function z0(o,u,m,g){return df(o,u,m,g),hf(o)}function wo(o,u){return df(o,null,null,u),hf(o)}function XA(o,u,m){o.lanes|=m;var g=o.alternate;g!==null&&(g.lanes|=m);for(var v=!1,S=o.return;S!==null;)S.childLanes|=m,g=S.alternate,g!==null&&(g.childLanes|=m),S.tag===22&&(o=S.stateNode,o===null||o._visibility&1||(v=!0)),o=S,S=S.return;return o.tag===3?(S=o.stateNode,v&&u!==null&&(v=31-_e(m),o=S.hiddenUpdates,g=o[v],g===null?o[v]=[u]:g.push(u),u.lane=m|536870912),S):null}function hf(o){if(50<Vc)throw Vc=0,Qb=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var Rl={};function y8(o,u,m,g){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(o,u,m,g){return new y8(o,u,m,g)}function $0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Ia(o,u){var m=o.alternate;return m===null?(m=ni(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function KA(o,u){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,u=m.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function ff(o,u,m,g,v,S){var O=0;if(g=o,typeof o=="function")$0(o)&&(O=1);else if(typeof o=="string")O=AB(o,m,oe.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case Y:return o=ni(31,m,u,v),o.elementType=Y,o.lanes=S,o;case w:return Eo(m.children,v,S,u);case E:O=8,v|=24;break;case T:return o=ni(12,m,u,v|2),o.elementType=T,o.lanes=S,o;case k:return o=ni(13,m,u,v),o.elementType=k,o.lanes=S,o;case j:return o=ni(19,m,u,v),o.elementType=j,o.lanes=S,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case N:O=10;break e;case C:O=9;break e;case P:O=11;break e;case D:O=14;break e;case H:O=16,g=null;break e}O=29,m=Error(r(130,o===null?"null":typeof o,"")),g=null}return u=ni(O,m,u,v),u.elementType=o,u.type=g,u.lanes=S,u}function Eo(o,u,m,g){return o=ni(7,o,g,u),o.lanes=m,o}function q0(o,u,m){return o=ni(6,o,null,u),o.lanes=m,o}function QA(o){var u=ni(18,null,null,0);return u.stateNode=o,u}function Y0(o,u,m){return u=ni(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var ZA=new WeakMap;function Ei(o,u){if(typeof o=="object"&&o!==null){var m=ZA.get(o);return m!==void 0?m:(u={value:o,source:u,stack:He(u)},ZA.set(o,u),u)}return{value:o,source:u,stack:He(u)}}var Il=[],Ll=0,mf=null,Tc=0,Ai=[],Si=0,Ns=null,aa=1,sa="";function La(o,u){Il[Ll++]=Tc,Il[Ll++]=mf,mf=o,Tc=u}function JA(o,u,m){Ai[Si++]=aa,Ai[Si++]=sa,Ai[Si++]=Ns,Ns=o;var g=aa;o=sa;var v=32-_e(g)-1;g&=~(1<<v),m+=1;var S=32-_e(u)+v;if(30<S){var O=v-v%5;S=(g&(1<<O)-1).toString(32),g>>=O,v-=O,aa=1<<32-_e(u)+v|m<<v|g,sa=S+o}else aa=1<<S|m<<v|g,sa=o}function V0(o){o.return!==null&&(La(o,1),JA(o,1,0))}function G0(o){for(;o===mf;)mf=Il[--Ll],Il[Ll]=null,Tc=Il[--Ll],Il[Ll]=null;for(;o===Ns;)Ns=Ai[--Si],Ai[Si]=null,sa=Ai[--Si],Ai[Si]=null,aa=Ai[--Si],Ai[Si]=null}function eS(o,u){Ai[Si++]=aa,Ai[Si++]=sa,Ai[Si++]=Ns,aa=u.id,sa=u.overflow,Ns=o}var er=null,tn=null,_t=!1,Cs=null,Ti=!1,W0=Error(r(519));function Os(o){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _c(Ei(u,o)),W0}function tS(o){var u=o.stateNode,m=o.type,g=o.memoizedProps;switch(u[Jn]=o,u[Pr]=g,m){case"dialog":At("cancel",u),At("close",u);break;case"iframe":case"object":case"embed":At("load",u);break;case"video":case"audio":for(m=0;m<Wc.length;m++)At(Wc[m],u);break;case"source":At("error",u);break;case"img":case"image":case"link":At("error",u),At("load",u);break;case"details":At("toggle",u);break;case"input":At("invalid",u),mA(u,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":At("invalid",u);break;case"textarea":At("invalid",u),gA(u,g.value,g.defaultValue,g.children)}m=g.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||u.textContent===""+m||g.suppressHydrationWarning===!0||y_(u.textContent,m)?(g.popover!=null&&(At("beforetoggle",u),At("toggle",u)),g.onScroll!=null&&At("scroll",u),g.onScrollEnd!=null&&At("scrollend",u),g.onClick!=null&&(u.onclick=Da),u=!0):u=!1,u||Os(o,!0)}function nS(o){for(er=o.return;er;)switch(er.tag){case 5:case 31:case 13:Ti=!1;return;case 27:case 3:Ti=!0;return;default:er=er.return}}function Ml(o){if(o!==er)return!1;if(!_t)return nS(o),_t=!0,!1;var u=o.tag,m;if((m=u!==3&&u!==27)&&((m=u===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||hy(o.type,o.memoizedProps)),m=!m),m&&tn&&Os(o),nS(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));tn=N_(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));tn=N_(o)}else u===27?(u=tn,$s(o.type)?(o=by,by=null,tn=o):tn=u):tn=er?Ni(o.stateNode.nextSibling):null;return!0}function Ao(){tn=er=null,_t=!1}function X0(){var o=Cs;return o!==null&&(Mr===null?Mr=o:Mr.push.apply(Mr,o),Cs=null),o}function _c(o){Cs===null?Cs=[o]:Cs.push(o)}var K0=U(null),So=null,Ma=null;function ks(o,u,m){I(K0,u._currentValue),u._currentValue=m}function Ba(o){o._currentValue=K0.current,Q(K0)}function Q0(o,u,m){for(;o!==null;){var g=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,g!==null&&(g.childLanes|=u)):g!==null&&(g.childLanes&u)!==u&&(g.childLanes|=u),o===m)break;o=o.return}}function Z0(o,u,m,g){var v=o.child;for(v!==null&&(v.return=o);v!==null;){var S=v.dependencies;if(S!==null){var O=v.child;S=S.firstContext;e:for(;S!==null;){var L=S;S=v;for(var G=0;G<u.length;G++)if(L.context===u[G]){S.lanes|=m,L=S.alternate,L!==null&&(L.lanes|=m),Q0(S.return,m,o),g||(O=null);break e}S=L.next}}else if(v.tag===18){if(O=v.return,O===null)throw Error(r(341));O.lanes|=m,S=O.alternate,S!==null&&(S.lanes|=m),Q0(O,m,o),O=null}else O=v.child;if(O!==null)O.return=v;else for(O=v;O!==null;){if(O===o){O=null;break}if(v=O.sibling,v!==null){v.return=O.return,O=v;break}O=O.return}v=O}}function Bl(o,u,m,g){o=null;for(var v=u,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var O=v.alternate;if(O===null)throw Error(r(387));if(O=O.memoizedProps,O!==null){var L=v.type;ti(v.pendingProps.value,O.value)||(o!==null?o.push(L):o=[L])}}else if(v===me.current){if(O=v.alternate,O===null)throw Error(r(387));O.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(o!==null?o.push(Jc):o=[Jc])}v=v.return}o!==null&&Z0(u,o,m,g),u.flags|=262144}function pf(o){for(o=o.firstContext;o!==null;){if(!ti(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function To(o){So=o,Ma=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function tr(o){return rS(So,o)}function gf(o,u){return So===null&&To(o),rS(o,u)}function rS(o,u){var m=u._currentValue;if(u={context:u,memoizedValue:m,next:null},Ma===null){if(o===null)throw Error(r(308));Ma=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Ma=Ma.next=u;return m}var x8=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(m,g){o.push(g)}};this.abort=function(){u.aborted=!0,o.forEach(function(m){return m()})}},v8=t.unstable_scheduleCallback,w8=t.unstable_NormalPriority,An={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function J0(){return{controller:new x8,data:new Map,refCount:0}}function Nc(o){o.refCount--,o.refCount===0&&v8(w8,function(){o.controller.abort()})}var Cc=null,eb=0,Fl=0,Ul=null;function E8(o,u){if(Cc===null){var m=Cc=[];eb=0,Fl=ry(),Ul={status:"pending",value:void 0,then:function(g){m.push(g)}}}return eb++,u.then(iS,iS),u}function iS(){if(--eb===0&&Cc!==null){Ul!==null&&(Ul.status="fulfilled");var o=Cc;Cc=null,Fl=0,Ul=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function A8(o,u){var m=[],g={status:"pending",value:null,reason:null,then:function(v){m.push(v)}};return o.then(function(){g.status="fulfilled",g.value=u;for(var v=0;v<m.length;v++)(0,m[v])(u)},function(v){for(g.status="rejected",g.reason=v,v=0;v<m.length;v++)(0,m[v])(void 0)}),g}var aS=R.S;R.S=function(o,u){zT=We(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&E8(o,u),aS!==null&&aS(o,u)};var _o=U(null);function tb(){var o=_o.current;return o!==null?o:Wt.pooledCache}function bf(o,u){u===null?I(_o,_o.current):I(_o,u.pool)}function sS(){var o=tb();return o===null?null:{parent:An._currentValue,pool:o}}var Hl=Error(r(460)),nb=Error(r(474)),yf=Error(r(542)),xf={then:function(){}};function oS(o){return o=o.status,o==="fulfilled"||o==="rejected"}function lS(o,u,m){switch(m=o[m],m===void 0?o.push(u):m!==u&&(u.then(Da,Da),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,cS(o),o;default:if(typeof u.status=="string")u.then(Da,Da);else{if(o=Wt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(g){if(u.status==="pending"){var v=u;v.status="fulfilled",v.value=g}},function(g){if(u.status==="pending"){var v=u;v.status="rejected",v.reason=g}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,cS(o),o}throw Co=u,Hl}}function No(o){try{var u=o._init;return u(o._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Co=m,Hl):m}}var Co=null;function uS(){if(Co===null)throw Error(r(459));var o=Co;return Co=null,o}function cS(o){if(o===Hl||o===yf)throw Error(r(483))}var zl=null,Oc=0;function vf(o){var u=Oc;return Oc+=1,zl===null&&(zl=[]),lS(zl,o,u)}function kc(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function wf(o,u){throw u.$$typeof===b?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function dS(o){function u(ae,Z){if(o){var he=ae.deletions;he===null?(ae.deletions=[Z],ae.flags|=16):he.push(Z)}}function m(ae,Z){if(!o)return null;for(;Z!==null;)u(ae,Z),Z=Z.sibling;return null}function g(ae){for(var Z=new Map;ae!==null;)ae.key!==null?Z.set(ae.key,ae):Z.set(ae.index,ae),ae=ae.sibling;return Z}function v(ae,Z){return ae=Ia(ae,Z),ae.index=0,ae.sibling=null,ae}function S(ae,Z,he){return ae.index=he,o?(he=ae.alternate,he!==null?(he=he.index,he<Z?(ae.flags|=67108866,Z):he):(ae.flags|=67108866,Z)):(ae.flags|=1048576,Z)}function O(ae){return o&&ae.alternate===null&&(ae.flags|=67108866),ae}function L(ae,Z,he,Ne){return Z===null||Z.tag!==6?(Z=q0(he,ae.mode,Ne),Z.return=ae,Z):(Z=v(Z,he),Z.return=ae,Z)}function G(ae,Z,he,Ne){var Ze=he.type;return Ze===w?Te(ae,Z,he.props.children,Ne,he.key):Z!==null&&(Z.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===H&&No(Ze)===Z.type)?(Z=v(Z,he.props),kc(Z,he),Z.return=ae,Z):(Z=ff(he.type,he.key,he.props,null,ae.mode,Ne),kc(Z,he),Z.return=ae,Z)}function fe(ae,Z,he,Ne){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==he.containerInfo||Z.stateNode.implementation!==he.implementation?(Z=Y0(he,ae.mode,Ne),Z.return=ae,Z):(Z=v(Z,he.children||[]),Z.return=ae,Z)}function Te(ae,Z,he,Ne,Ze){return Z===null||Z.tag!==7?(Z=Eo(he,ae.mode,Ne,Ze),Z.return=ae,Z):(Z=v(Z,he),Z.return=ae,Z)}function Ce(ae,Z,he){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=q0(""+Z,ae.mode,he),Z.return=ae,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return he=ff(Z.type,Z.key,Z.props,null,ae.mode,he),kc(he,Z),he.return=ae,he;case x:return Z=Y0(Z,ae.mode,he),Z.return=ae,Z;case H:return Z=No(Z),Ce(ae,Z,he)}if(W(Z)||K(Z))return Z=Eo(Z,ae.mode,he,null),Z.return=ae,Z;if(typeof Z.then=="function")return Ce(ae,vf(Z),he);if(Z.$$typeof===N)return Ce(ae,gf(ae,Z),he);wf(ae,Z)}return null}function ge(ae,Z,he,Ne){var Ze=Z!==null?Z.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Ze!==null?null:L(ae,Z,""+he,Ne);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case y:return he.key===Ze?G(ae,Z,he,Ne):null;case x:return he.key===Ze?fe(ae,Z,he,Ne):null;case H:return he=No(he),ge(ae,Z,he,Ne)}if(W(he)||K(he))return Ze!==null?null:Te(ae,Z,he,Ne,null);if(typeof he.then=="function")return ge(ae,Z,vf(he),Ne);if(he.$$typeof===N)return ge(ae,Z,gf(ae,he),Ne);wf(ae,he)}return null}function ve(ae,Z,he,Ne,Ze){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return ae=ae.get(he)||null,L(Z,ae,""+Ne,Ze);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case y:return ae=ae.get(Ne.key===null?he:Ne.key)||null,G(Z,ae,Ne,Ze);case x:return ae=ae.get(Ne.key===null?he:Ne.key)||null,fe(Z,ae,Ne,Ze);case H:return Ne=No(Ne),ve(ae,Z,he,Ne,Ze)}if(W(Ne)||K(Ne))return ae=ae.get(he)||null,Te(Z,ae,Ne,Ze,null);if(typeof Ne.then=="function")return ve(ae,Z,he,vf(Ne),Ze);if(Ne.$$typeof===N)return ve(ae,Z,he,gf(Z,Ne),Ze);wf(Z,Ne)}return null}function Ye(ae,Z,he,Ne){for(var Ze=null,kt=null,Xe=Z,yt=Z=0,Tt=null;Xe!==null&&yt<he.length;yt++){Xe.index>yt?(Tt=Xe,Xe=null):Tt=Xe.sibling;var jt=ge(ae,Xe,he[yt],Ne);if(jt===null){Xe===null&&(Xe=Tt);break}o&&Xe&&jt.alternate===null&&u(ae,Xe),Z=S(jt,Z,yt),kt===null?Ze=jt:kt.sibling=jt,kt=jt,Xe=Tt}if(yt===he.length)return m(ae,Xe),_t&&La(ae,yt),Ze;if(Xe===null){for(;yt<he.length;yt++)Xe=Ce(ae,he[yt],Ne),Xe!==null&&(Z=S(Xe,Z,yt),kt===null?Ze=Xe:kt.sibling=Xe,kt=Xe);return _t&&La(ae,yt),Ze}for(Xe=g(Xe);yt<he.length;yt++)Tt=ve(Xe,ae,yt,he[yt],Ne),Tt!==null&&(o&&Tt.alternate!==null&&Xe.delete(Tt.key===null?yt:Tt.key),Z=S(Tt,Z,yt),kt===null?Ze=Tt:kt.sibling=Tt,kt=Tt);return o&&Xe.forEach(function(Ws){return u(ae,Ws)}),_t&&La(ae,yt),Ze}function it(ae,Z,he,Ne){if(he==null)throw Error(r(151));for(var Ze=null,kt=null,Xe=Z,yt=Z=0,Tt=null,jt=he.next();Xe!==null&&!jt.done;yt++,jt=he.next()){Xe.index>yt?(Tt=Xe,Xe=null):Tt=Xe.sibling;var Ws=ge(ae,Xe,jt.value,Ne);if(Ws===null){Xe===null&&(Xe=Tt);break}o&&Xe&&Ws.alternate===null&&u(ae,Xe),Z=S(Ws,Z,yt),kt===null?Ze=Ws:kt.sibling=Ws,kt=Ws,Xe=Tt}if(jt.done)return m(ae,Xe),_t&&La(ae,yt),Ze;if(Xe===null){for(;!jt.done;yt++,jt=he.next())jt=Ce(ae,jt.value,Ne),jt!==null&&(Z=S(jt,Z,yt),kt===null?Ze=jt:kt.sibling=jt,kt=jt);return _t&&La(ae,yt),Ze}for(Xe=g(Xe);!jt.done;yt++,jt=he.next())jt=ve(Xe,ae,yt,jt.value,Ne),jt!==null&&(o&&jt.alternate!==null&&Xe.delete(jt.key===null?yt:jt.key),Z=S(jt,Z,yt),kt===null?Ze=jt:kt.sibling=jt,kt=jt);return o&&Xe.forEach(function(RB){return u(ae,RB)}),_t&&La(ae,yt),Ze}function Yt(ae,Z,he,Ne){if(typeof he=="object"&&he!==null&&he.type===w&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case y:e:{for(var Ze=he.key;Z!==null;){if(Z.key===Ze){if(Ze=he.type,Ze===w){if(Z.tag===7){m(ae,Z.sibling),Ne=v(Z,he.props.children),Ne.return=ae,ae=Ne;break e}}else if(Z.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===H&&No(Ze)===Z.type){m(ae,Z.sibling),Ne=v(Z,he.props),kc(Ne,he),Ne.return=ae,ae=Ne;break e}m(ae,Z);break}else u(ae,Z);Z=Z.sibling}he.type===w?(Ne=Eo(he.props.children,ae.mode,Ne,he.key),Ne.return=ae,ae=Ne):(Ne=ff(he.type,he.key,he.props,null,ae.mode,Ne),kc(Ne,he),Ne.return=ae,ae=Ne)}return O(ae);case x:e:{for(Ze=he.key;Z!==null;){if(Z.key===Ze)if(Z.tag===4&&Z.stateNode.containerInfo===he.containerInfo&&Z.stateNode.implementation===he.implementation){m(ae,Z.sibling),Ne=v(Z,he.children||[]),Ne.return=ae,ae=Ne;break e}else{m(ae,Z);break}else u(ae,Z);Z=Z.sibling}Ne=Y0(he,ae.mode,Ne),Ne.return=ae,ae=Ne}return O(ae);case H:return he=No(he),Yt(ae,Z,he,Ne)}if(W(he))return Ye(ae,Z,he,Ne);if(K(he)){if(Ze=K(he),typeof Ze!="function")throw Error(r(150));return he=Ze.call(he),it(ae,Z,he,Ne)}if(typeof he.then=="function")return Yt(ae,Z,vf(he),Ne);if(he.$$typeof===N)return Yt(ae,Z,gf(ae,he),Ne);wf(ae,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,Z!==null&&Z.tag===6?(m(ae,Z.sibling),Ne=v(Z,he),Ne.return=ae,ae=Ne):(m(ae,Z),Ne=q0(he,ae.mode,Ne),Ne.return=ae,ae=Ne),O(ae)):m(ae,Z)}return function(ae,Z,he,Ne){try{Oc=0;var Ze=Yt(ae,Z,he,Ne);return zl=null,Ze}catch(Xe){if(Xe===Hl||Xe===yf)throw Xe;var kt=ni(29,Xe,null,ae.mode);return kt.lanes=Ne,kt.return=ae,kt}finally{}}}var Oo=dS(!0),hS=dS(!1),js=!1;function rb(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ib(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Ps(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Ds(o,u,m){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Dt&2)!==0){var v=g.pending;return v===null?u.next=u:(u.next=v.next,v.next=u),g.pending=u,u=hf(o),XA(o,null,m),u}return df(o,g,u,m),hf(o)}function jc(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194048)!==0)){var g=u.lanes;g&=o.pendingLanes,m|=g,u.lanes=m,rA(o,m)}}function ab(o,u){var m=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var v=null,S=null;if(m=m.firstBaseUpdate,m!==null){do{var O={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};S===null?v=S=O:S=S.next=O,m=m.next}while(m!==null);S===null?v=S=u:S=S.next=u}else v=S=u;m={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:g.shared,callbacks:g.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}var sb=!1;function Pc(){if(sb){var o=Ul;if(o!==null)throw o}}function Dc(o,u,m,g){sb=!1;var v=o.updateQueue;js=!1;var S=v.firstBaseUpdate,O=v.lastBaseUpdate,L=v.shared.pending;if(L!==null){v.shared.pending=null;var G=L,fe=G.next;G.next=null,O===null?S=fe:O.next=fe,O=G;var Te=o.alternate;Te!==null&&(Te=Te.updateQueue,L=Te.lastBaseUpdate,L!==O&&(L===null?Te.firstBaseUpdate=fe:L.next=fe,Te.lastBaseUpdate=G))}if(S!==null){var Ce=v.baseState;O=0,Te=fe=G=null,L=S;do{var ge=L.lane&-536870913,ve=ge!==L.lane;if(ve?(St&ge)===ge:(g&ge)===ge){ge!==0&&ge===Fl&&(sb=!0),Te!==null&&(Te=Te.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var Ye=o,it=L;ge=u;var Yt=m;switch(it.tag){case 1:if(Ye=it.payload,typeof Ye=="function"){Ce=Ye.call(Yt,Ce,ge);break e}Ce=Ye;break e;case 3:Ye.flags=Ye.flags&-65537|128;case 0:if(Ye=it.payload,ge=typeof Ye=="function"?Ye.call(Yt,Ce,ge):Ye,ge==null)break e;Ce=p({},Ce,ge);break e;case 2:js=!0}}ge=L.callback,ge!==null&&(o.flags|=64,ve&&(o.flags|=8192),ve=v.callbacks,ve===null?v.callbacks=[ge]:ve.push(ge))}else ve={lane:ge,tag:L.tag,payload:L.payload,callback:L.callback,next:null},Te===null?(fe=Te=ve,G=Ce):Te=Te.next=ve,O|=ge;if(L=L.next,L===null){if(L=v.shared.pending,L===null)break;ve=L,L=ve.next,ve.next=null,v.lastBaseUpdate=ve,v.shared.pending=null}}while(!0);Te===null&&(G=Ce),v.baseState=G,v.firstBaseUpdate=fe,v.lastBaseUpdate=Te,S===null&&(v.shared.lanes=0),Bs|=O,o.lanes=O,o.memoizedState=Ce}}function fS(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function mS(o,u){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)fS(m[o],u)}var $l=U(null),Ef=U(0);function pS(o,u){o=Ga,I(Ef,o),I($l,u),Ga=o|u.baseLanes}function ob(){I(Ef,Ga),I($l,$l.current)}function lb(){Ga=Ef.current,Q($l),Q(Ef)}var ri=U(null),_i=null;function Rs(o){var u=o.alternate;I(yn,yn.current&1),I(ri,o),_i===null&&(u===null||$l.current!==null||u.memoizedState!==null)&&(_i=o)}function ub(o){I(yn,yn.current),I(ri,o),_i===null&&(_i=o)}function gS(o){o.tag===22?(I(yn,yn.current),I(ri,o),_i===null&&(_i=o)):Is()}function Is(){I(yn,yn.current),I(ri,ri.current)}function ii(o){Q(ri),_i===o&&(_i=null),Q(yn)}var yn=U(0);function Af(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||py(m)||gy(m)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Fa=0,ft=null,$t=null,Sn=null,Sf=!1,ql=!1,ko=!1,Tf=0,Rc=0,Yl=null,S8=0;function pn(){throw Error(r(321))}function cb(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!ti(o[m],u[m]))return!1;return!0}function db(o,u,m,g,v,S){return Fa=S,ft=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,R.H=o===null||o.memoizedState===null?JS:_b,ko=!1,S=m(g,v),ko=!1,ql&&(S=yS(u,m,g,v)),bS(o),S}function bS(o){R.H=Mc;var u=$t!==null&&$t.next!==null;if(Fa=0,Sn=$t=ft=null,Sf=!1,Rc=0,Yl=null,u)throw Error(r(300));o===null||Tn||(o=o.dependencies,o!==null&&pf(o)&&(Tn=!0))}function yS(o,u,m,g){ft=o;var v=0;do{if(ql&&(Yl=null),Rc=0,ql=!1,25<=v)throw Error(r(301));if(v+=1,Sn=$t=null,o.updateQueue!=null){var S=o.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}R.H=eT,S=u(m,g)}while(ql);return S}function T8(){var o=R.H,u=o.useState()[0];return u=typeof u.then=="function"?Ic(u):u,o=o.useState()[0],($t!==null?$t.memoizedState:null)!==o&&(ft.flags|=1024),u}function hb(){var o=Tf!==0;return Tf=0,o}function fb(o,u,m){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m}function mb(o){if(Sf){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Sf=!1}Fa=0,Sn=$t=ft=null,ql=!1,Rc=Tf=0,Yl=null}function wr(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sn===null?ft.memoizedState=Sn=o:Sn=Sn.next=o,Sn}function xn(){if($t===null){var o=ft.alternate;o=o!==null?o.memoizedState:null}else o=$t.next;var u=Sn===null?ft.memoizedState:Sn.next;if(u!==null)Sn=u,$t=o;else{if(o===null)throw ft.alternate===null?Error(r(467)):Error(r(310));$t=o,o={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Sn===null?ft.memoizedState=Sn=o:Sn=Sn.next=o}return Sn}function _f(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ic(o){var u=Rc;return Rc+=1,Yl===null&&(Yl=[]),o=lS(Yl,o,u),u=ft,(Sn===null?u.memoizedState:Sn.next)===null&&(u=u.alternate,R.H=u===null||u.memoizedState===null?JS:_b),o}function Nf(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ic(o);if(o.$$typeof===N)return tr(o)}throw Error(r(438,String(o)))}function pb(o){var u=null,m=ft.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var g=ft.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(u={data:g.data.map(function(v){return v.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=_f(),ft.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(o),g=0;g<o;g++)m[g]=X;return u.index++,m}function Ua(o,u){return typeof u=="function"?u(o):u}function Cf(o){var u=xn();return gb(u,$t,o)}function gb(o,u,m){var g=o.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=m;var v=o.baseQueue,S=g.pending;if(S!==null){if(v!==null){var O=v.next;v.next=S.next,S.next=O}u.baseQueue=v=S,g.pending=null}if(S=o.baseState,v===null)o.memoizedState=S;else{u=v.next;var L=O=null,G=null,fe=u,Te=!1;do{var Ce=fe.lane&-536870913;if(Ce!==fe.lane?(St&Ce)===Ce:(Fa&Ce)===Ce){var ge=fe.revertLane;if(ge===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Ce===Fl&&(Te=!0);else if((Fa&ge)===ge){fe=fe.next,ge===Fl&&(Te=!0);continue}else Ce={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},G===null?(L=G=Ce,O=S):G=G.next=Ce,ft.lanes|=ge,Bs|=ge;Ce=fe.action,ko&&m(S,Ce),S=fe.hasEagerState?fe.eagerState:m(S,Ce)}else ge={lane:Ce,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},G===null?(L=G=ge,O=S):G=G.next=ge,ft.lanes|=Ce,Bs|=Ce;fe=fe.next}while(fe!==null&&fe!==u);if(G===null?O=S:G.next=L,!ti(S,o.memoizedState)&&(Tn=!0,Te&&(m=Ul,m!==null)))throw m;o.memoizedState=S,o.baseState=O,o.baseQueue=G,g.lastRenderedState=S}return v===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function bb(o){var u=xn(),m=u.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=o;var g=m.dispatch,v=m.pending,S=u.memoizedState;if(v!==null){m.pending=null;var O=v=v.next;do S=o(S,O.action),O=O.next;while(O!==v);ti(S,u.memoizedState)||(Tn=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),m.lastRenderedState=S}return[S,g]}function xS(o,u,m){var g=ft,v=xn(),S=_t;if(S){if(m===void 0)throw Error(r(407));m=m()}else m=u();var O=!ti(($t||v).memoizedState,m);if(O&&(v.memoizedState=m,Tn=!0),v=v.queue,vb(ES.bind(null,g,v,o),[o]),v.getSnapshot!==u||O||Sn!==null&&Sn.memoizedState.tag&1){if(g.flags|=2048,Vl(9,{destroy:void 0},wS.bind(null,g,v,m,u),null),Wt===null)throw Error(r(349));S||(Fa&127)!==0||vS(g,u,m)}return m}function vS(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=ft.updateQueue,u===null?(u=_f(),ft.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function wS(o,u,m,g){u.value=m,u.getSnapshot=g,AS(u)&&SS(o)}function ES(o,u,m){return m(function(){AS(u)&&SS(o)})}function AS(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!ti(o,m)}catch{return!0}}function SS(o){var u=wo(o,2);u!==null&&Br(u,o,2)}function yb(o){var u=wr();if(typeof o=="function"){var m=o;if(o=m(),ko){ue(!0);try{m()}finally{ue(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:o},u}function TS(o,u,m,g){return o.baseState=m,gb(o,$t,typeof g=="function"?g:Ua)}function _8(o,u,m,g,v){if(jf(o))throw Error(r(485));if(o=u.action,o!==null){var S={payload:v,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){S.listeners.push(O)}};R.T!==null?m(!0):S.isTransition=!1,g(S),m=u.pending,m===null?(S.next=u.pending=S,_S(u,S)):(S.next=m.next,u.pending=m.next=S)}}function _S(o,u){var m=u.action,g=u.payload,v=o.state;if(u.isTransition){var S=R.T,O={};R.T=O;try{var L=m(v,g),G=R.S;G!==null&&G(O,L),NS(o,u,L)}catch(fe){xb(o,u,fe)}finally{S!==null&&O.types!==null&&(S.types=O.types),R.T=S}}else try{S=m(v,g),NS(o,u,S)}catch(fe){xb(o,u,fe)}}function NS(o,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(g){CS(o,u,g)},function(g){return xb(o,u,g)}):CS(o,u,m)}function CS(o,u,m){u.status="fulfilled",u.value=m,OS(u),o.state=m,u=o.pending,u!==null&&(m=u.next,m===u?o.pending=null:(m=m.next,u.next=m,_S(o,m)))}function xb(o,u,m){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do u.status="rejected",u.reason=m,OS(u),u=u.next;while(u!==g)}o.action=null}function OS(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function kS(o,u){return u}function jS(o,u){if(_t){var m=Wt.formState;if(m!==null){e:{var g=ft;if(_t){if(tn){t:{for(var v=tn,S=Ti;v.nodeType!==8;){if(!S){v=null;break t}if(v=Ni(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){tn=Ni(v.nextSibling),g=v.data==="F!";break e}}Os(g)}g=!1}g&&(u=m[0])}}return m=wr(),m.memoizedState=m.baseState=u,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:kS,lastRenderedState:u},m.queue=g,m=KS.bind(null,ft,g),g.dispatch=m,g=yb(!1),S=Tb.bind(null,ft,!1,g.queue),g=wr(),v={state:u,dispatch:null,action:o,pending:null},g.queue=v,m=_8.bind(null,ft,v,S,m),v.dispatch=m,g.memoizedState=o,[u,m,!1]}function PS(o){var u=xn();return DS(u,$t,o)}function DS(o,u,m){if(u=gb(o,u,kS)[0],o=Cf(Ua)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var g=Ic(u)}catch(O){throw O===Hl?yf:O}else g=u;u=xn();var v=u.queue,S=v.dispatch;return m!==u.memoizedState&&(ft.flags|=2048,Vl(9,{destroy:void 0},N8.bind(null,v,m),null)),[g,S,o]}function N8(o,u){o.action=u}function RS(o){var u=xn(),m=$t;if(m!==null)return DS(u,m,o);xn(),u=u.memoizedState,m=xn();var g=m.queue.dispatch;return m.memoizedState=o,[u,g,!1]}function Vl(o,u,m,g){return o={tag:o,create:m,deps:g,inst:u,next:null},u=ft.updateQueue,u===null&&(u=_f(),ft.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=o.next=o:(g=m.next,m.next=o,o.next=g,u.lastEffect=o),o}function IS(){return xn().memoizedState}function Of(o,u,m,g){var v=wr();ft.flags|=o,v.memoizedState=Vl(1|u,{destroy:void 0},m,g===void 0?null:g)}function kf(o,u,m,g){var v=xn();g=g===void 0?null:g;var S=v.memoizedState.inst;$t!==null&&g!==null&&cb(g,$t.memoizedState.deps)?v.memoizedState=Vl(u,S,m,g):(ft.flags|=o,v.memoizedState=Vl(1|u,S,m,g))}function LS(o,u){Of(8390656,8,o,u)}function vb(o,u){kf(2048,8,o,u)}function C8(o){ft.flags|=4;var u=ft.updateQueue;if(u===null)u=_f(),ft.updateQueue=u,u.events=[o];else{var m=u.events;m===null?u.events=[o]:m.push(o)}}function MS(o){var u=xn().memoizedState;return C8({ref:u,nextImpl:o}),function(){if((Dt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function BS(o,u){return kf(4,2,o,u)}function FS(o,u){return kf(4,4,o,u)}function US(o,u){if(typeof u=="function"){o=o();var m=u(o);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function HS(o,u,m){m=m!=null?m.concat([o]):null,kf(4,4,US.bind(null,u,o),m)}function wb(){}function zS(o,u){var m=xn();u=u===void 0?null:u;var g=m.memoizedState;return u!==null&&cb(u,g[1])?g[0]:(m.memoizedState=[o,u],o)}function $S(o,u){var m=xn();u=u===void 0?null:u;var g=m.memoizedState;if(u!==null&&cb(u,g[1]))return g[0];if(g=o(),ko){ue(!0);try{o()}finally{ue(!1)}}return m.memoizedState=[g,u],g}function Eb(o,u,m){return m===void 0||(Fa&1073741824)!==0&&(St&261930)===0?o.memoizedState=u:(o.memoizedState=m,o=qT(),ft.lanes|=o,Bs|=o,m)}function qS(o,u,m,g){return ti(m,u)?m:$l.current!==null?(o=Eb(o,m,g),ti(o,u)||(Tn=!0),o):(Fa&42)===0||(Fa&1073741824)!==0&&(St&261930)===0?(Tn=!0,o.memoizedState=m):(o=qT(),ft.lanes|=o,Bs|=o,u)}function YS(o,u,m,g,v){var S=B.p;B.p=S!==0&&8>S?S:8;var O=R.T,L={};R.T=L,Tb(o,!1,u,m);try{var G=v(),fe=R.S;if(fe!==null&&fe(L,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var Te=A8(G,g);Lc(o,u,Te,oi(o))}else Lc(o,u,g,oi(o))}catch(Ce){Lc(o,u,{then:function(){},status:"rejected",reason:Ce},oi())}finally{B.p=S,O!==null&&L.types!==null&&(O.types=L.types),R.T=O}}function O8(){}function Ab(o,u,m,g){if(o.tag!==5)throw Error(r(476));var v=VS(o).queue;YS(o,v,u,re,m===null?O8:function(){return GS(o),m(g)})}function VS(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:re},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:m},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function GS(o){var u=VS(o);u.next===null&&(u=o.alternate.memoizedState),Lc(o,u.next.queue,{},oi())}function Sb(){return tr(Jc)}function WS(){return xn().memoizedState}function XS(){return xn().memoizedState}function k8(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var m=oi();o=Ps(m);var g=Ds(u,o,m);g!==null&&(Br(g,u,m),jc(g,u,m)),u={cache:J0()},o.payload=u;return}u=u.return}}function j8(o,u,m){var g=oi();m={lane:g,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},jf(o)?QS(u,m):(m=z0(o,u,m,g),m!==null&&(Br(m,o,g),ZS(m,u,g)))}function KS(o,u,m){var g=oi();Lc(o,u,m,g)}function Lc(o,u,m,g){var v={lane:g,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(jf(o))QS(u,v);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var O=u.lastRenderedState,L=S(O,m);if(v.hasEagerState=!0,v.eagerState=L,ti(L,O))return df(o,u,v,0),Wt===null&&cf(),!1}catch{}finally{}if(m=z0(o,u,v,g),m!==null)return Br(m,o,g),ZS(m,u,g),!0}return!1}function Tb(o,u,m,g){if(g={lane:2,revertLane:ry(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},jf(o)){if(u)throw Error(r(479))}else u=z0(o,m,g,2),u!==null&&Br(u,o,2)}function jf(o){var u=o.alternate;return o===ft||u!==null&&u===ft}function QS(o,u){ql=Sf=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function ZS(o,u,m){if((m&4194048)!==0){var g=u.lanes;g&=o.pendingLanes,m|=g,u.lanes=m,rA(o,m)}}var Mc={readContext:tr,use:Nf,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};Mc.useEffectEvent=pn;var JS={readContext:tr,use:Nf,useCallback:function(o,u){return wr().memoizedState=[o,u===void 0?null:u],o},useContext:tr,useEffect:LS,useImperativeHandle:function(o,u,m){m=m!=null?m.concat([o]):null,Of(4194308,4,US.bind(null,u,o),m)},useLayoutEffect:function(o,u){return Of(4194308,4,o,u)},useInsertionEffect:function(o,u){Of(4,2,o,u)},useMemo:function(o,u){var m=wr();u=u===void 0?null:u;var g=o();if(ko){ue(!0);try{o()}finally{ue(!1)}}return m.memoizedState=[g,u],g},useReducer:function(o,u,m){var g=wr();if(m!==void 0){var v=m(u);if(ko){ue(!0);try{m(u)}finally{ue(!1)}}}else v=u;return g.memoizedState=g.baseState=v,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:v},g.queue=o,o=o.dispatch=j8.bind(null,ft,o),[g.memoizedState,o]},useRef:function(o){var u=wr();return o={current:o},u.memoizedState=o},useState:function(o){o=yb(o);var u=o.queue,m=KS.bind(null,ft,u);return u.dispatch=m,[o.memoizedState,m]},useDebugValue:wb,useDeferredValue:function(o,u){var m=wr();return Eb(m,o,u)},useTransition:function(){var o=yb(!1);return o=YS.bind(null,ft,o.queue,!0,!1),wr().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,m){var g=ft,v=wr();if(_t){if(m===void 0)throw Error(r(407));m=m()}else{if(m=u(),Wt===null)throw Error(r(349));(St&127)!==0||vS(g,u,m)}v.memoizedState=m;var S={value:m,getSnapshot:u};return v.queue=S,LS(ES.bind(null,g,S,o),[o]),g.flags|=2048,Vl(9,{destroy:void 0},wS.bind(null,g,S,m,u),null),m},useId:function(){var o=wr(),u=Wt.identifierPrefix;if(_t){var m=sa,g=aa;m=(g&~(1<<32-_e(g)-1)).toString(32)+m,u="_"+u+"R_"+m,m=Tf++,0<m&&(u+="H"+m.toString(32)),u+="_"}else m=S8++,u="_"+u+"r_"+m.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:Sb,useFormState:jS,useActionState:jS,useOptimistic:function(o){var u=wr();u.memoizedState=u.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=Tb.bind(null,ft,!0,m),m.dispatch=u,[o,u]},useMemoCache:pb,useCacheRefresh:function(){return wr().memoizedState=k8.bind(null,ft)},useEffectEvent:function(o){var u=wr(),m={impl:o};return u.memoizedState=m,function(){if((Dt&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},_b={readContext:tr,use:Nf,useCallback:zS,useContext:tr,useEffect:vb,useImperativeHandle:HS,useInsertionEffect:BS,useLayoutEffect:FS,useMemo:$S,useReducer:Cf,useRef:IS,useState:function(){return Cf(Ua)},useDebugValue:wb,useDeferredValue:function(o,u){var m=xn();return qS(m,$t.memoizedState,o,u)},useTransition:function(){var o=Cf(Ua)[0],u=xn().memoizedState;return[typeof o=="boolean"?o:Ic(o),u]},useSyncExternalStore:xS,useId:WS,useHostTransitionStatus:Sb,useFormState:PS,useActionState:PS,useOptimistic:function(o,u){var m=xn();return TS(m,$t,o,u)},useMemoCache:pb,useCacheRefresh:XS};_b.useEffectEvent=MS;var eT={readContext:tr,use:Nf,useCallback:zS,useContext:tr,useEffect:vb,useImperativeHandle:HS,useInsertionEffect:BS,useLayoutEffect:FS,useMemo:$S,useReducer:bb,useRef:IS,useState:function(){return bb(Ua)},useDebugValue:wb,useDeferredValue:function(o,u){var m=xn();return $t===null?Eb(m,o,u):qS(m,$t.memoizedState,o,u)},useTransition:function(){var o=bb(Ua)[0],u=xn().memoizedState;return[typeof o=="boolean"?o:Ic(o),u]},useSyncExternalStore:xS,useId:WS,useHostTransitionStatus:Sb,useFormState:RS,useActionState:RS,useOptimistic:function(o,u){var m=xn();return $t!==null?TS(m,$t,o,u):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:pb,useCacheRefresh:XS};eT.useEffectEvent=MS;function Nb(o,u,m,g){u=o.memoizedState,m=m(g,u),m=m==null?u:p({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var Cb={enqueueSetState:function(o,u,m){o=o._reactInternals;var g=oi(),v=Ps(g);v.payload=u,m!=null&&(v.callback=m),u=Ds(o,v,g),u!==null&&(Br(u,o,g),jc(u,o,g))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var g=oi(),v=Ps(g);v.tag=1,v.payload=u,m!=null&&(v.callback=m),u=Ds(o,v,g),u!==null&&(Br(u,o,g),jc(u,o,g))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=oi(),g=Ps(m);g.tag=2,u!=null&&(g.callback=u),u=Ds(o,g,m),u!==null&&(Br(u,o,m),jc(u,o,m))}};function tT(o,u,m,g,v,S,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,O):u.prototype&&u.prototype.isPureReactComponent?!Ac(m,g)||!Ac(v,S):!0}function nT(o,u,m,g){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,g),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,g),u.state!==o&&Cb.enqueueReplaceState(u,u.state,null)}function jo(o,u){var m=u;if("ref"in u){m={};for(var g in u)g!=="ref"&&(m[g]=u[g])}if(o=o.defaultProps){m===u&&(m=p({},m));for(var v in o)m[v]===void 0&&(m[v]=o[v])}return m}function rT(o){uf(o)}function iT(o){console.error(o)}function aT(o){uf(o)}function Pf(o,u){try{var m=o.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(g){setTimeout(function(){throw g})}}function sT(o,u,m){try{var g=o.onCaughtError;g(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Ob(o,u,m){return m=Ps(m),m.tag=3,m.payload={element:null},m.callback=function(){Pf(o,u)},m}function oT(o){return o=Ps(o),o.tag=3,o}function lT(o,u,m,g){var v=m.type.getDerivedStateFromError;if(typeof v=="function"){var S=g.value;o.payload=function(){return v(S)},o.callback=function(){sT(u,m,g)}}var O=m.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(o.callback=function(){sT(u,m,g),typeof v!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var L=g.stack;this.componentDidCatch(g.value,{componentStack:L!==null?L:""})})}function P8(o,u,m,g,v){if(m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(u=m.alternate,u!==null&&Bl(u,m,v,!0),m=ri.current,m!==null){switch(m.tag){case 31:case 13:return _i===null?qf():m.alternate===null&&gn===0&&(gn=3),m.flags&=-257,m.flags|=65536,m.lanes=v,g===xf?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([g]):u.add(g),ey(o,g,v)),!1;case 22:return m.flags|=65536,g===xf?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([g])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([g]):m.add(g)),ey(o,g,v)),!1}throw Error(r(435,m.tag))}return ey(o,g,v),qf(),!1}if(_t)return u=ri.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=v,g!==W0&&(o=Error(r(422),{cause:g}),_c(Ei(o,m)))):(g!==W0&&(u=Error(r(423),{cause:g}),_c(Ei(u,m))),o=o.current.alternate,o.flags|=65536,v&=-v,o.lanes|=v,g=Ei(g,m),v=Ob(o.stateNode,g,v),ab(o,v),gn!==4&&(gn=2)),!1;var S=Error(r(520),{cause:g});if(S=Ei(S,m),Yc===null?Yc=[S]:Yc.push(S),gn!==4&&(gn=2),u===null)return!0;g=Ei(g,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,o=v&-v,m.lanes|=o,o=Ob(m.stateNode,g,o),ab(m,o),!1;case 1:if(u=m.type,S=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Fs===null||!Fs.has(S))))return m.flags|=65536,v&=-v,m.lanes|=v,v=oT(v),lT(v,o,m,g),ab(m,v),!1}m=m.return}while(m!==null);return!1}var kb=Error(r(461)),Tn=!1;function nr(o,u,m,g){u.child=o===null?hS(u,null,m,g):Oo(u,o.child,m,g)}function uT(o,u,m,g,v){m=m.render;var S=u.ref;if("ref"in g){var O={};for(var L in g)L!=="ref"&&(O[L]=g[L])}else O=g;return To(u),g=db(o,u,m,O,S,v),L=hb(),o!==null&&!Tn?(fb(o,u,v),Ha(o,u,v)):(_t&&L&&V0(u),u.flags|=1,nr(o,u,g,v),u.child)}function cT(o,u,m,g,v){if(o===null){var S=m.type;return typeof S=="function"&&!$0(S)&&S.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=S,dT(o,u,S,g,v)):(o=ff(m.type,null,g,u,u.mode,v),o.ref=u.ref,o.return=u,u.child=o)}if(S=o.child,!Bb(o,v)){var O=S.memoizedProps;if(m=m.compare,m=m!==null?m:Ac,m(O,g)&&o.ref===u.ref)return Ha(o,u,v)}return u.flags|=1,o=Ia(S,g),o.ref=u.ref,o.return=u,u.child=o}function dT(o,u,m,g,v){if(o!==null){var S=o.memoizedProps;if(Ac(S,g)&&o.ref===u.ref)if(Tn=!1,u.pendingProps=g=S,Bb(o,v))(o.flags&131072)!==0&&(Tn=!0);else return u.lanes=o.lanes,Ha(o,u,v)}return jb(o,u,m,g,v)}function hT(o,u,m,g){var v=g.children,S=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((u.flags&128)!==0){if(S=S!==null?S.baseLanes|m:m,o!==null){for(g=u.child=o.child,v=0;g!==null;)v=v|g.lanes|g.childLanes,g=g.sibling;g=v&~S}else g=0,u.child=null;return fT(o,u,S,m,g)}if((m&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&bf(u,S!==null?S.cachePool:null),S!==null?pS(u,S):ob(),gS(u);else return g=u.lanes=536870912,fT(o,u,S!==null?S.baseLanes|m:m,m,g)}else S!==null?(bf(u,S.cachePool),pS(u,S),Is(),u.memoizedState=null):(o!==null&&bf(u,null),ob(),Is());return nr(o,u,v,m),u.child}function Bc(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function fT(o,u,m,g,v){var S=tb();return S=S===null?null:{parent:An._currentValue,pool:S},u.memoizedState={baseLanes:m,cachePool:S},o!==null&&bf(u,null),ob(),gS(u),o!==null&&Bl(o,u,g,!0),u.childLanes=v,null}function Df(o,u){return u=If({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function mT(o,u,m){return Oo(u,o.child,null,m),o=Df(u,u.pendingProps),o.flags|=2,ii(u),u.memoizedState=null,o}function D8(o,u,m){var g=u.pendingProps,v=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(_t){if(g.mode==="hidden")return o=Df(u,g),u.lanes=536870912,Bc(null,o);if(ub(u),(o=tn)?(o=__(o,Ti),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ns!==null?{id:aa,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},m=QA(o),m.return=u,u.child=m,er=u,tn=null)):o=null,o===null)throw Os(u);return u.lanes=536870912,null}return Df(u,g)}var S=o.memoizedState;if(S!==null){var O=S.dehydrated;if(ub(u),v)if(u.flags&256)u.flags&=-257,u=mT(o,u,m);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(r(558));else if(Tn||Bl(o,u,m,!1),v=(m&o.childLanes)!==0,Tn||v){if(g=Wt,g!==null&&(O=iA(g,m),O!==0&&O!==S.retryLane))throw S.retryLane=O,wo(o,O),Br(g,o,O),kb;qf(),u=mT(o,u,m)}else o=S.treeContext,tn=Ni(O.nextSibling),er=u,_t=!0,Cs=null,Ti=!1,o!==null&&eS(u,o),u=Df(u,g),u.flags|=4096;return u}return o=Ia(o.child,{mode:g.mode,children:g.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Rf(o,u){var m=u.ref;if(m===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(o===null||o.ref!==m)&&(u.flags|=4194816)}}function jb(o,u,m,g,v){return To(u),m=db(o,u,m,g,void 0,v),g=hb(),o!==null&&!Tn?(fb(o,u,v),Ha(o,u,v)):(_t&&g&&V0(u),u.flags|=1,nr(o,u,m,v),u.child)}function pT(o,u,m,g,v,S){return To(u),u.updateQueue=null,m=yS(u,g,m,v),bS(o),g=hb(),o!==null&&!Tn?(fb(o,u,S),Ha(o,u,S)):(_t&&g&&V0(u),u.flags|=1,nr(o,u,m,S),u.child)}function gT(o,u,m,g,v){if(To(u),u.stateNode===null){var S=Rl,O=m.contextType;typeof O=="object"&&O!==null&&(S=tr(O)),S=new m(g,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Cb,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=g,S.state=u.memoizedState,S.refs={},rb(u),O=m.contextType,S.context=typeof O=="object"&&O!==null?tr(O):Rl,S.state=u.memoizedState,O=m.getDerivedStateFromProps,typeof O=="function"&&(Nb(u,m,O,g),S.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(O=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),O!==S.state&&Cb.enqueueReplaceState(S,S.state,null),Dc(u,g,S,v),Pc(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!0}else if(o===null){S=u.stateNode;var L=u.memoizedProps,G=jo(m,L);S.props=G;var fe=S.context,Te=m.contextType;O=Rl,typeof Te=="object"&&Te!==null&&(O=tr(Te));var Ce=m.getDerivedStateFromProps;Te=typeof Ce=="function"||typeof S.getSnapshotBeforeUpdate=="function",L=u.pendingProps!==L,Te||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(L||fe!==O)&&nT(u,S,g,O),js=!1;var ge=u.memoizedState;S.state=ge,Dc(u,g,S,v),Pc(),fe=u.memoizedState,L||ge!==fe||js?(typeof Ce=="function"&&(Nb(u,m,Ce,g),fe=u.memoizedState),(G=js||tT(u,m,G,g,ge,fe,O))?(Te||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=g,u.memoizedState=fe),S.props=g,S.state=fe,S.context=O,g=G):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),g=!1)}else{S=u.stateNode,ib(o,u),O=u.memoizedProps,Te=jo(m,O),S.props=Te,Ce=u.pendingProps,ge=S.context,fe=m.contextType,G=Rl,typeof fe=="object"&&fe!==null&&(G=tr(fe)),L=m.getDerivedStateFromProps,(fe=typeof L=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==Ce||ge!==G)&&nT(u,S,g,G),js=!1,ge=u.memoizedState,S.state=ge,Dc(u,g,S,v),Pc();var ve=u.memoizedState;O!==Ce||ge!==ve||js||o!==null&&o.dependencies!==null&&pf(o.dependencies)?(typeof L=="function"&&(Nb(u,m,L,g),ve=u.memoizedState),(Te=js||tT(u,m,Te,g,ge,ve,G)||o!==null&&o.dependencies!==null&&pf(o.dependencies))?(fe||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(g,ve,G),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(g,ve,G)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===o.memoizedProps&&ge===o.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&ge===o.memoizedState||(u.flags|=1024),u.memoizedProps=g,u.memoizedState=ve),S.props=g,S.state=ve,S.context=G,g=Te):(typeof S.componentDidUpdate!="function"||O===o.memoizedProps&&ge===o.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&ge===o.memoizedState||(u.flags|=1024),g=!1)}return S=g,Rf(o,u),g=(u.flags&128)!==0,S||g?(S=u.stateNode,m=g&&typeof m.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,o!==null&&g?(u.child=Oo(u,o.child,null,v),u.child=Oo(u,null,m,v)):nr(o,u,m,v),u.memoizedState=S.state,o=u.child):o=Ha(o,u,v),o}function bT(o,u,m,g){return Ao(),u.flags|=256,nr(o,u,m,g),u.child}var Pb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Db(o){return{baseLanes:o,cachePool:sS()}}function Rb(o,u,m){return o=o!==null?o.childLanes&~m:0,u&&(o|=si),o}function yT(o,u,m){var g=u.pendingProps,v=!1,S=(u.flags&128)!==0,O;if((O=S)||(O=o!==null&&o.memoizedState===null?!1:(yn.current&2)!==0),O&&(v=!0,u.flags&=-129),O=(u.flags&32)!==0,u.flags&=-33,o===null){if(_t){if(v?Rs(u):Is(),(o=tn)?(o=__(o,Ti),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:Ns!==null?{id:aa,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},m=QA(o),m.return=u,u.child=m,er=u,tn=null)):o=null,o===null)throw Os(u);return gy(o)?u.lanes=32:u.lanes=536870912,null}var L=g.children;return g=g.fallback,v?(Is(),v=u.mode,L=If({mode:"hidden",children:L},v),g=Eo(g,v,m,null),L.return=u,g.return=u,L.sibling=g,u.child=L,g=u.child,g.memoizedState=Db(m),g.childLanes=Rb(o,O,m),u.memoizedState=Pb,Bc(null,g)):(Rs(u),Ib(u,L))}var G=o.memoizedState;if(G!==null&&(L=G.dehydrated,L!==null)){if(S)u.flags&256?(Rs(u),u.flags&=-257,u=Lb(o,u,m)):u.memoizedState!==null?(Is(),u.child=o.child,u.flags|=128,u=null):(Is(),L=g.fallback,v=u.mode,g=If({mode:"visible",children:g.children},v),L=Eo(L,v,m,null),L.flags|=2,g.return=u,L.return=u,g.sibling=L,u.child=g,Oo(u,o.child,null,m),g=u.child,g.memoizedState=Db(m),g.childLanes=Rb(o,O,m),u.memoizedState=Pb,u=Bc(null,g));else if(Rs(u),gy(L)){if(O=L.nextSibling&&L.nextSibling.dataset,O)var fe=O.dgst;O=fe,g=Error(r(419)),g.stack="",g.digest=O,_c({value:g,source:null,stack:null}),u=Lb(o,u,m)}else if(Tn||Bl(o,u,m,!1),O=(m&o.childLanes)!==0,Tn||O){if(O=Wt,O!==null&&(g=iA(O,m),g!==0&&g!==G.retryLane))throw G.retryLane=g,wo(o,g),Br(O,o,g),kb;py(L)||qf(),u=Lb(o,u,m)}else py(L)?(u.flags|=192,u.child=o.child,u=null):(o=G.treeContext,tn=Ni(L.nextSibling),er=u,_t=!0,Cs=null,Ti=!1,o!==null&&eS(u,o),u=Ib(u,g.children),u.flags|=4096);return u}return v?(Is(),L=g.fallback,v=u.mode,G=o.child,fe=G.sibling,g=Ia(G,{mode:"hidden",children:g.children}),g.subtreeFlags=G.subtreeFlags&65011712,fe!==null?L=Ia(fe,L):(L=Eo(L,v,m,null),L.flags|=2),L.return=u,g.return=u,g.sibling=L,u.child=g,Bc(null,g),g=u.child,L=o.child.memoizedState,L===null?L=Db(m):(v=L.cachePool,v!==null?(G=An._currentValue,v=v.parent!==G?{parent:G,pool:G}:v):v=sS(),L={baseLanes:L.baseLanes|m,cachePool:v}),g.memoizedState=L,g.childLanes=Rb(o,O,m),u.memoizedState=Pb,Bc(o.child,g)):(Rs(u),m=o.child,o=m.sibling,m=Ia(m,{mode:"visible",children:g.children}),m.return=u,m.sibling=null,o!==null&&(O=u.deletions,O===null?(u.deletions=[o],u.flags|=16):O.push(o)),u.child=m,u.memoizedState=null,m)}function Ib(o,u){return u=If({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function If(o,u){return o=ni(22,o,null,u),o.lanes=0,o}function Lb(o,u,m){return Oo(u,o.child,null,m),o=Ib(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function xT(o,u,m){o.lanes|=u;var g=o.alternate;g!==null&&(g.lanes|=u),Q0(o.return,u,m)}function Mb(o,u,m,g,v,S){var O=o.memoizedState;O===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:v,treeForkCount:S}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=g,O.tail=m,O.tailMode=v,O.treeForkCount=S)}function vT(o,u,m){var g=u.pendingProps,v=g.revealOrder,S=g.tail;g=g.children;var O=yn.current,L=(O&2)!==0;if(L?(O=O&1|2,u.flags|=128):O&=1,I(yn,O),nr(o,u,g,m),g=_t?Tc:0,!L&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&xT(o,m,u);else if(o.tag===19)xT(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(v){case"forwards":for(m=u.child,v=null;m!==null;)o=m.alternate,o!==null&&Af(o)===null&&(v=m),m=m.sibling;m=v,m===null?(v=u.child,u.child=null):(v=m.sibling,m.sibling=null),Mb(u,!1,v,m,S,g);break;case"backwards":case"unstable_legacy-backwards":for(m=null,v=u.child,u.child=null;v!==null;){if(o=v.alternate,o!==null&&Af(o)===null){u.child=v;break}o=v.sibling,v.sibling=m,m=v,v=o}Mb(u,!0,m,null,S,g);break;case"together":Mb(u,!1,null,null,void 0,g);break;default:u.memoizedState=null}return u.child}function Ha(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),Bs|=u.lanes,(m&u.childLanes)===0)if(o!==null){if(Bl(o,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,m=Ia(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=Ia(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function Bb(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&pf(o)))}function R8(o,u,m){switch(u.tag){case 3:be(u,u.stateNode.containerInfo),ks(u,An,o.memoizedState.cache),Ao();break;case 27:case 5:Oe(u);break;case 4:be(u,u.stateNode.containerInfo);break;case 10:ks(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,ub(u),null;break;case 13:var g=u.memoizedState;if(g!==null)return g.dehydrated!==null?(Rs(u),u.flags|=128,null):(m&u.child.childLanes)!==0?yT(o,u,m):(Rs(u),o=Ha(o,u,m),o!==null?o.sibling:null);Rs(u);break;case 19:var v=(o.flags&128)!==0;if(g=(m&u.childLanes)!==0,g||(Bl(o,u,m,!1),g=(m&u.childLanes)!==0),v){if(g)return vT(o,u,m);u.flags|=128}if(v=u.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),I(yn,yn.current),g)break;return null;case 22:return u.lanes=0,hT(o,u,m,u.pendingProps);case 24:ks(u,An,o.memoizedState.cache)}return Ha(o,u,m)}function wT(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps)Tn=!0;else{if(!Bb(o,m)&&(u.flags&128)===0)return Tn=!1,R8(o,u,m);Tn=(o.flags&131072)!==0}else Tn=!1,_t&&(u.flags&1048576)!==0&&JA(u,Tc,u.index);switch(u.lanes=0,u.tag){case 16:e:{var g=u.pendingProps;if(o=No(u.elementType),u.type=o,typeof o=="function")$0(o)?(g=jo(o,g),u.tag=1,u=gT(null,u,o,g,m)):(u.tag=0,u=jb(null,u,o,g,m));else{if(o!=null){var v=o.$$typeof;if(v===P){u.tag=11,u=uT(null,u,o,g,m);break e}else if(v===D){u.tag=14,u=cT(null,u,o,g,m);break e}}throw u=te(o)||o,Error(r(306,u,""))}}return u;case 0:return jb(o,u,u.type,u.pendingProps,m);case 1:return g=u.type,v=jo(g,u.pendingProps),gT(o,u,g,v,m);case 3:e:{if(be(u,u.stateNode.containerInfo),o===null)throw Error(r(387));g=u.pendingProps;var S=u.memoizedState;v=S.element,ib(o,u),Dc(u,g,null,m);var O=u.memoizedState;if(g=O.cache,ks(u,An,g),g!==S.cache&&Z0(u,[An],m,!0),Pc(),g=O.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:O.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=bT(o,u,g,m);break e}else if(g!==v){v=Ei(Error(r(424)),u),_c(v),u=bT(o,u,g,m);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(tn=Ni(o.firstChild),er=u,_t=!0,Cs=null,Ti=!0,m=hS(u,null,g,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Ao(),g===v){u=Ha(o,u,m);break e}nr(o,u,g,m)}u=u.child}return u;case 26:return Rf(o,u),o===null?(m=P_(u.type,null,u.pendingProps,null))?u.memoizedState=m:_t||(m=u.type,o=u.pendingProps,g=Qf(ie.current).createElement(m),g[Jn]=u,g[Pr]=o,rr(g,m,o),zn(g),u.stateNode=g):u.memoizedState=P_(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return Oe(u),o===null&&_t&&(g=u.stateNode=O_(u.type,u.pendingProps,ie.current),er=u,Ti=!0,v=tn,$s(u.type)?(by=v,tn=Ni(g.firstChild)):tn=v),nr(o,u,u.pendingProps.children,m),Rf(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&_t&&((v=g=tn)&&(g=cB(g,u.type,u.pendingProps,Ti),g!==null?(u.stateNode=g,er=u,tn=Ni(g.firstChild),Ti=!1,v=!0):v=!1),v||Os(u)),Oe(u),v=u.type,S=u.pendingProps,O=o!==null?o.memoizedProps:null,g=S.children,hy(v,S)?g=null:O!==null&&hy(v,O)&&(u.flags|=32),u.memoizedState!==null&&(v=db(o,u,T8,null,null,m),Jc._currentValue=v),Rf(o,u),nr(o,u,g,m),u.child;case 6:return o===null&&_t&&((o=m=tn)&&(m=dB(m,u.pendingProps,Ti),m!==null?(u.stateNode=m,er=u,tn=null,o=!0):o=!1),o||Os(u)),null;case 13:return yT(o,u,m);case 4:return be(u,u.stateNode.containerInfo),g=u.pendingProps,o===null?u.child=Oo(u,null,g,m):nr(o,u,g,m),u.child;case 11:return uT(o,u,u.type,u.pendingProps,m);case 7:return nr(o,u,u.pendingProps,m),u.child;case 8:return nr(o,u,u.pendingProps.children,m),u.child;case 12:return nr(o,u,u.pendingProps.children,m),u.child;case 10:return g=u.pendingProps,ks(u,u.type,g.value),nr(o,u,g.children,m),u.child;case 9:return v=u.type._context,g=u.pendingProps.children,To(u),v=tr(v),g=g(v),u.flags|=1,nr(o,u,g,m),u.child;case 14:return cT(o,u,u.type,u.pendingProps,m);case 15:return dT(o,u,u.type,u.pendingProps,m);case 19:return vT(o,u,m);case 31:return D8(o,u,m);case 22:return hT(o,u,m,u.pendingProps);case 24:return To(u),g=tr(An),o===null?(v=tb(),v===null&&(v=Wt,S=J0(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=m),v=S),u.memoizedState={parent:g,cache:v},rb(u),ks(u,An,v)):((o.lanes&m)!==0&&(ib(o,u),Dc(u,null,null,m),Pc()),v=o.memoizedState,S=u.memoizedState,v.parent!==g?(v={parent:g,cache:g},u.memoizedState=v,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=v),ks(u,An,g)):(g=S.cache,ks(u,An,g),g!==v.cache&&Z0(u,[An],m,!0))),nr(o,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function za(o){o.flags|=4}function Fb(o,u,m,g,v){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(v&335544128)===v)if(o.stateNode.complete)o.flags|=8192;else if(WT())o.flags|=8192;else throw Co=xf,nb}else o.flags&=-16777217}function ET(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!M_(u))if(WT())o.flags|=8192;else throw Co=xf,nb}function Lf(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?tA():536870912,o.lanes|=u,Kl|=u)}function Fc(o,u){if(!_t)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function nn(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,g=0;if(u)for(var v=o.child;v!==null;)m|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=o,v=v.sibling;else for(v=o.child;v!==null;)m|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=o,v=v.sibling;return o.subtreeFlags|=g,o.childLanes=m,u}function I8(o,u,m){var g=u.pendingProps;switch(G0(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(u),null;case 1:return nn(u),null;case 3:return m=u.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Ba(An),J(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(Ml(u)?za(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,X0())),nn(u),null;case 26:var v=u.type,S=u.memoizedState;return o===null?(za(u),S!==null?(nn(u),ET(u,S)):(nn(u),Fb(u,v,null,g,m))):S?S!==o.memoizedState?(za(u),nn(u),ET(u,S)):(nn(u),u.flags&=-16777217):(o=o.memoizedProps,o!==g&&za(u),nn(u),Fb(u,v,o,g,m)),null;case 27:if(Be(u),m=ie.current,v=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&za(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return nn(u),null}o=oe.current,Ml(u)?tS(u):(o=O_(v,g,m),u.stateNode=o,za(u))}return nn(u),null;case 5:if(Be(u),v=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==g&&za(u);else{if(!g){if(u.stateNode===null)throw Error(r(166));return nn(u),null}if(S=oe.current,Ml(u))tS(u);else{var O=Qf(ie.current);switch(S){case 1:S=O.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:S=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":S=O.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":S=O.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":S=O.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof g.is=="string"?O.createElement("select",{is:g.is}):O.createElement("select"),g.multiple?S.multiple=!0:g.size&&(S.size=g.size);break;default:S=typeof g.is=="string"?O.createElement(v,{is:g.is}):O.createElement(v)}}S[Jn]=u,S[Pr]=g;e:for(O=u.child;O!==null;){if(O.tag===5||O.tag===6)S.appendChild(O.stateNode);else if(O.tag!==4&&O.tag!==27&&O.child!==null){O.child.return=O,O=O.child;continue}if(O===u)break e;for(;O.sibling===null;){if(O.return===null||O.return===u)break e;O=O.return}O.sibling.return=O.return,O=O.sibling}u.stateNode=S;e:switch(rr(S,v,g),v){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&za(u)}}return nn(u),Fb(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,m),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==g&&za(u);else{if(typeof g!="string"&&u.stateNode===null)throw Error(r(166));if(o=ie.current,Ml(u)){if(o=u.stateNode,m=u.memoizedProps,g=null,v=er,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}o[Jn]=u,o=!!(o.nodeValue===m||g!==null&&g.suppressHydrationWarning===!0||y_(o.nodeValue,m)),o||Os(u,!0)}else o=Qf(o).createTextNode(g),o[Jn]=u,u.stateNode=o}return nn(u),null;case 31:if(m=u.memoizedState,o===null||o.memoizedState!==null){if(g=Ml(u),m!==null){if(o===null){if(!g)throw Error(r(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[Jn]=u}else Ao(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;nn(u),o=!1}else m=X0(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),o=!0;if(!o)return u.flags&256?(ii(u),u):(ii(u),null);if((u.flags&128)!==0)throw Error(r(558))}return nn(u),null;case 13:if(g=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(v=Ml(u),g!==null&&g.dehydrated!==null){if(o===null){if(!v)throw Error(r(318));if(v=u.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Jn]=u}else Ao(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;nn(u),v=!1}else v=X0(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=v),v=!0;if(!v)return u.flags&256?(ii(u),u):(ii(u),null)}return ii(u),(u.flags&128)!==0?(u.lanes=m,u):(m=g!==null,o=o!==null&&o.memoizedState!==null,m&&(g=u.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool),S=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(S=g.memoizedState.cachePool.pool),S!==v&&(g.flags|=2048)),m!==o&&m&&(u.child.flags|=8192),Lf(u,u.updateQueue),nn(u),null);case 4:return J(),o===null&&oy(u.stateNode.containerInfo),nn(u),null;case 10:return Ba(u.type),nn(u),null;case 19:if(Q(yn),g=u.memoizedState,g===null)return nn(u),null;if(v=(u.flags&128)!==0,S=g.rendering,S===null)if(v)Fc(g,!1);else{if(gn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(S=Af(o),S!==null){for(u.flags|=128,Fc(g,!1),o=S.updateQueue,u.updateQueue=o,Lf(u,o),u.subtreeFlags=0,o=m,m=u.child;m!==null;)KA(m,o),m=m.sibling;return I(yn,yn.current&1|2),_t&&La(u,g.treeForkCount),u.child}o=o.sibling}g.tail!==null&&We()>Hf&&(u.flags|=128,v=!0,Fc(g,!1),u.lanes=4194304)}else{if(!v)if(o=Af(S),o!==null){if(u.flags|=128,v=!0,o=o.updateQueue,u.updateQueue=o,Lf(u,o),Fc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!S.alternate&&!_t)return nn(u),null}else 2*We()-g.renderingStartTime>Hf&&m!==536870912&&(u.flags|=128,v=!0,Fc(g,!1),u.lanes=4194304);g.isBackwards?(S.sibling=u.child,u.child=S):(o=g.last,o!==null?o.sibling=S:u.child=S,g.last=S)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=We(),o.sibling=null,m=yn.current,I(yn,v?m&1|2:m&1),_t&&La(u,g.treeForkCount),o):(nn(u),null);case 22:case 23:return ii(u),lb(),g=u.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(u.flags|=8192):g&&(u.flags|=8192),g?(m&536870912)!==0&&(u.flags&128)===0&&(nn(u),u.subtreeFlags&6&&(u.flags|=8192)):nn(u),m=u.updateQueue,m!==null&&Lf(u,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==m&&(u.flags|=2048),o!==null&&Q(_o),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Ba(An),nn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function L8(o,u){switch(G0(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return Ba(An),J(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return Be(u),null;case 31:if(u.memoizedState!==null){if(ii(u),u.alternate===null)throw Error(r(340));Ao()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(ii(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ao()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Q(yn),null;case 4:return J(),null;case 10:return Ba(u.type),null;case 22:case 23:return ii(u),lb(),o!==null&&Q(_o),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return Ba(An),null;case 25:return null;default:return null}}function AT(o,u){switch(G0(u),u.tag){case 3:Ba(An),J();break;case 26:case 27:case 5:Be(u);break;case 4:J();break;case 31:u.memoizedState!==null&&ii(u);break;case 13:ii(u);break;case 19:Q(yn);break;case 10:Ba(u.type);break;case 22:case 23:ii(u),lb(),o!==null&&Q(_o);break;case 24:Ba(An)}}function Uc(o,u){try{var m=u.updateQueue,g=m!==null?m.lastEffect:null;if(g!==null){var v=g.next;m=v;do{if((m.tag&o)===o){g=void 0;var S=m.create,O=m.inst;g=S(),O.destroy=g}m=m.next}while(m!==v)}}catch(L){Ht(u,u.return,L)}}function Ls(o,u,m){try{var g=u.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var S=v.next;g=S;do{if((g.tag&o)===o){var O=g.inst,L=O.destroy;if(L!==void 0){O.destroy=void 0,v=u;var G=m,fe=L;try{fe()}catch(Te){Ht(v,G,Te)}}}g=g.next}while(g!==S)}}catch(Te){Ht(u,u.return,Te)}}function ST(o){var u=o.updateQueue;if(u!==null){var m=o.stateNode;try{mS(u,m)}catch(g){Ht(o,o.return,g)}}}function TT(o,u,m){m.props=jo(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(g){Ht(o,u,g)}}function Hc(o,u){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var g=o.stateNode;break;case 30:g=o.stateNode;break;default:g=o.stateNode}typeof m=="function"?o.refCleanup=m(g):m.current=g}}catch(v){Ht(o,u,v)}}function oa(o,u){var m=o.ref,g=o.refCleanup;if(m!==null)if(typeof g=="function")try{g()}catch(v){Ht(o,u,v)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(v){Ht(o,u,v)}else m.current=null}function _T(o){var u=o.type,m=o.memoizedProps,g=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":m.autoFocus&&g.focus();break e;case"img":m.src?g.src=m.src:m.srcSet&&(g.srcset=m.srcSet)}}catch(v){Ht(o,o.return,v)}}function Ub(o,u,m){try{var g=o.stateNode;iB(g,o.type,m,u),g[Pr]=u}catch(v){Ht(o,o.return,v)}}function NT(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&$s(o.type)||o.tag===4}function Hb(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||NT(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&$s(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function zb(o,u,m){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,u):(u=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,u.appendChild(o),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=Da));else if(g!==4&&(g===27&&$s(o.type)&&(m=o.stateNode,u=null),o=o.child,o!==null))for(zb(o,u,m),o=o.sibling;o!==null;)zb(o,u,m),o=o.sibling}function Mf(o,u,m){var g=o.tag;if(g===5||g===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(g!==4&&(g===27&&$s(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(Mf(o,u,m),o=o.sibling;o!==null;)Mf(o,u,m),o=o.sibling}function CT(o){var u=o.stateNode,m=o.memoizedProps;try{for(var g=o.type,v=u.attributes;v.length;)u.removeAttributeNode(v[0]);rr(u,g,m),u[Jn]=o,u[Pr]=m}catch(S){Ht(o,o.return,S)}}var $a=!1,_n=!1,$b=!1,OT=typeof WeakSet=="function"?WeakSet:Set,$n=null;function M8(o,u){if(o=o.containerInfo,cy=im,o=HA(o),L0(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var v=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{m.nodeType,S.nodeType}catch{m=null;break e}var O=0,L=-1,G=-1,fe=0,Te=0,Ce=o,ge=null;t:for(;;){for(var ve;Ce!==m||v!==0&&Ce.nodeType!==3||(L=O+v),Ce!==S||g!==0&&Ce.nodeType!==3||(G=O+g),Ce.nodeType===3&&(O+=Ce.nodeValue.length),(ve=Ce.firstChild)!==null;)ge=Ce,Ce=ve;for(;;){if(Ce===o)break t;if(ge===m&&++fe===v&&(L=O),ge===S&&++Te===g&&(G=O),(ve=Ce.nextSibling)!==null)break;Ce=ge,ge=Ce.parentNode}Ce=ve}m=L===-1||G===-1?null:{start:L,end:G}}else m=null}m=m||{start:0,end:0}}else m=null;for(dy={focusedElem:o,selectionRange:m},im=!1,$n=u;$n!==null;)if(u=$n,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,$n=o;else for(;$n!==null;){switch(u=$n,S=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(m=0;m<o.length;m++)v=o[m],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&S!==null){o=void 0,m=u,v=S.memoizedProps,S=S.memoizedState,g=m.stateNode;try{var Ye=jo(m.type,v);o=g.getSnapshotBeforeUpdate(Ye,S),g.__reactInternalSnapshotBeforeUpdate=o}catch(it){Ht(m,m.return,it)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,m=o.nodeType,m===9)my(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":my(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,$n=o;break}$n=u.return}}function kT(o,u,m){var g=m.flags;switch(m.tag){case 0:case 11:case 15:Ya(o,m),g&4&&Uc(5,m);break;case 1:if(Ya(o,m),g&4)if(o=m.stateNode,u===null)try{o.componentDidMount()}catch(O){Ht(m,m.return,O)}else{var v=jo(m.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(v,u,o.__reactInternalSnapshotBeforeUpdate)}catch(O){Ht(m,m.return,O)}}g&64&&ST(m),g&512&&Hc(m,m.return);break;case 3:if(Ya(o,m),g&64&&(o=m.updateQueue,o!==null)){if(u=null,m.child!==null)switch(m.child.tag){case 27:case 5:u=m.child.stateNode;break;case 1:u=m.child.stateNode}try{mS(o,u)}catch(O){Ht(m,m.return,O)}}break;case 27:u===null&&g&4&&CT(m);case 26:case 5:Ya(o,m),u===null&&g&4&&_T(m),g&512&&Hc(m,m.return);break;case 12:Ya(o,m);break;case 31:Ya(o,m),g&4&&DT(o,m);break;case 13:Ya(o,m),g&4&&RT(o,m),g&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=V8.bind(null,m),hB(o,m))));break;case 22:if(g=m.memoizedState!==null||$a,!g){u=u!==null&&u.memoizedState!==null||_n,v=$a;var S=_n;$a=g,(_n=u)&&!S?Va(o,m,(m.subtreeFlags&8772)!==0):Ya(o,m),$a=v,_n=S}break;case 30:break;default:Ya(o,m)}}function jT(o){var u=o.alternate;u!==null&&(o.alternate=null,jT(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&x0(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var sn=null,Rr=!1;function qa(o,u,m){for(m=m.child;m!==null;)PT(o,u,m),m=m.sibling}function PT(o,u,m){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(pe,m)}catch{}switch(m.tag){case 26:_n||oa(m,u),qa(o,u,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:_n||oa(m,u);var g=sn,v=Rr;$s(m.type)&&(sn=m.stateNode,Rr=!1),qa(o,u,m),Kc(m.stateNode),sn=g,Rr=v;break;case 5:_n||oa(m,u);case 6:if(g=sn,v=Rr,sn=null,qa(o,u,m),sn=g,Rr=v,sn!==null)if(Rr)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(m.stateNode)}catch(S){Ht(m,u,S)}else try{sn.removeChild(m.stateNode)}catch(S){Ht(m,u,S)}break;case 18:sn!==null&&(Rr?(o=sn,S_(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),iu(o)):S_(sn,m.stateNode));break;case 4:g=sn,v=Rr,sn=m.stateNode.containerInfo,Rr=!0,qa(o,u,m),sn=g,Rr=v;break;case 0:case 11:case 14:case 15:Ls(2,m,u),_n||Ls(4,m,u),qa(o,u,m);break;case 1:_n||(oa(m,u),g=m.stateNode,typeof g.componentWillUnmount=="function"&&TT(m,u,g)),qa(o,u,m);break;case 21:qa(o,u,m);break;case 22:_n=(g=_n)||m.memoizedState!==null,qa(o,u,m),_n=g;break;default:qa(o,u,m)}}function DT(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{iu(o)}catch(m){Ht(u,u.return,m)}}}function RT(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{iu(o)}catch(m){Ht(u,u.return,m)}}function B8(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new OT),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new OT),u;default:throw Error(r(435,o.tag))}}function Bf(o,u){var m=B8(o);u.forEach(function(g){if(!m.has(g)){m.add(g);var v=G8.bind(null,o,g);g.then(v,v)}})}function Ir(o,u){var m=u.deletions;if(m!==null)for(var g=0;g<m.length;g++){var v=m[g],S=o,O=u,L=O;e:for(;L!==null;){switch(L.tag){case 27:if($s(L.type)){sn=L.stateNode,Rr=!1;break e}break;case 5:sn=L.stateNode,Rr=!1;break e;case 3:case 4:sn=L.stateNode.containerInfo,Rr=!0;break e}L=L.return}if(sn===null)throw Error(r(160));PT(S,O,v),sn=null,Rr=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)IT(u,o),u=u.sibling}var Wi=null;function IT(o,u){var m=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:Ir(u,o),Lr(o),g&4&&(Ls(3,o,o.return),Uc(3,o),Ls(5,o,o.return));break;case 1:Ir(u,o),Lr(o),g&512&&(_n||m===null||oa(m,m.return)),g&64&&$a&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?g:m.concat(g))));break;case 26:var v=Wi;if(Ir(u,o),Lr(o),g&512&&(_n||m===null||oa(m,m.return)),g&4){var S=m!==null?m.memoizedState:null;if(g=o.memoizedState,m===null)if(g===null)if(o.stateNode===null){e:{g=o.type,m=o.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":S=v.getElementsByTagName("title")[0],(!S||S[mc]||S[Jn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(g),v.head.insertBefore(S,v.querySelector("head > title"))),rr(S,g,m),S[Jn]=o,zn(S),g=S;break e;case"link":var O=I_("link","href",v).get(g+(m.href||""));if(O){for(var L=0;L<O.length;L++)if(S=O[L],S.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&S.getAttribute("rel")===(m.rel==null?null:m.rel)&&S.getAttribute("title")===(m.title==null?null:m.title)&&S.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){O.splice(L,1);break t}}S=v.createElement(g),rr(S,g,m),v.head.appendChild(S);break;case"meta":if(O=I_("meta","content",v).get(g+(m.content||""))){for(L=0;L<O.length;L++)if(S=O[L],S.getAttribute("content")===(m.content==null?null:""+m.content)&&S.getAttribute("name")===(m.name==null?null:m.name)&&S.getAttribute("property")===(m.property==null?null:m.property)&&S.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&S.getAttribute("charset")===(m.charSet==null?null:m.charSet)){O.splice(L,1);break t}}S=v.createElement(g),rr(S,g,m),v.head.appendChild(S);break;default:throw Error(r(468,g))}S[Jn]=o,zn(S),g=S}o.stateNode=g}else L_(v,o.type,o.stateNode);else o.stateNode=R_(v,g,o.memoizedProps);else S!==g?(S===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):S.count--,g===null?L_(v,o.type,o.stateNode):R_(v,g,o.memoizedProps)):g===null&&o.stateNode!==null&&Ub(o,o.memoizedProps,m.memoizedProps)}break;case 27:Ir(u,o),Lr(o),g&512&&(_n||m===null||oa(m,m.return)),m!==null&&g&4&&Ub(o,o.memoizedProps,m.memoizedProps);break;case 5:if(Ir(u,o),Lr(o),g&512&&(_n||m===null||oa(m,m.return)),o.flags&32){v=o.stateNode;try{Nl(v,"")}catch(Ye){Ht(o,o.return,Ye)}}g&4&&o.stateNode!=null&&(v=o.memoizedProps,Ub(o,v,m!==null?m.memoizedProps:v)),g&1024&&($b=!0);break;case 6:if(Ir(u,o),Lr(o),g&4){if(o.stateNode===null)throw Error(r(162));g=o.memoizedProps,m=o.stateNode;try{m.nodeValue=g}catch(Ye){Ht(o,o.return,Ye)}}break;case 3:if(em=null,v=Wi,Wi=Zf(u.containerInfo),Ir(u,o),Wi=v,Lr(o),g&4&&m!==null&&m.memoizedState.isDehydrated)try{iu(u.containerInfo)}catch(Ye){Ht(o,o.return,Ye)}$b&&($b=!1,LT(o));break;case 4:g=Wi,Wi=Zf(o.stateNode.containerInfo),Ir(u,o),Lr(o),Wi=g;break;case 12:Ir(u,o),Lr(o);break;case 31:Ir(u,o),Lr(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Bf(o,g)));break;case 13:Ir(u,o),Lr(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Uf=We()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Bf(o,g)));break;case 22:v=o.memoizedState!==null;var G=m!==null&&m.memoizedState!==null,fe=$a,Te=_n;if($a=fe||v,_n=Te||G,Ir(u,o),_n=Te,$a=fe,Lr(o),g&8192)e:for(u=o.stateNode,u._visibility=v?u._visibility&-2:u._visibility|1,v&&(m===null||G||$a||_n||Po(o)),m=null,u=o;;){if(u.tag===5||u.tag===26){if(m===null){G=m=u;try{if(S=G.stateNode,v)O=S.style,typeof O.setProperty=="function"?O.setProperty("display","none","important"):O.display="none";else{L=G.stateNode;var Ce=G.memoizedProps.style,ge=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;L.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Ye){Ht(G,G.return,Ye)}}}else if(u.tag===6){if(m===null){G=u;try{G.stateNode.nodeValue=v?"":G.memoizedProps}catch(Ye){Ht(G,G.return,Ye)}}}else if(u.tag===18){if(m===null){G=u;try{var ve=G.stateNode;v?T_(ve,!0):T_(G.stateNode,!1)}catch(Ye){Ht(G,G.return,Ye)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}g&4&&(g=o.updateQueue,g!==null&&(m=g.retryQueue,m!==null&&(g.retryQueue=null,Bf(o,m))));break;case 19:Ir(u,o),Lr(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,Bf(o,g)));break;case 30:break;case 21:break;default:Ir(u,o),Lr(o)}}function Lr(o){var u=o.flags;if(u&2){try{for(var m,g=o.return;g!==null;){if(NT(g)){m=g;break}g=g.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var v=m.stateNode,S=Hb(o);Mf(o,S,v);break;case 5:var O=m.stateNode;m.flags&32&&(Nl(O,""),m.flags&=-33);var L=Hb(o);Mf(o,L,O);break;case 3:case 4:var G=m.stateNode.containerInfo,fe=Hb(o);zb(o,fe,G);break;default:throw Error(r(161))}}catch(Te){Ht(o,o.return,Te)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function LT(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;LT(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function Ya(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)kT(o,u.alternate,u),u=u.sibling}function Po(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:Ls(4,u,u.return),Po(u);break;case 1:oa(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&TT(u,u.return,m),Po(u);break;case 27:Kc(u.stateNode);case 26:case 5:oa(u,u.return),Po(u);break;case 22:u.memoizedState===null&&Po(u);break;case 30:Po(u);break;default:Po(u)}o=o.sibling}}function Va(o,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var g=u.alternate,v=o,S=u,O=S.flags;switch(S.tag){case 0:case 11:case 15:Va(v,S,m),Uc(4,S);break;case 1:if(Va(v,S,m),g=S,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(fe){Ht(g,g.return,fe)}if(g=S,v=g.updateQueue,v!==null){var L=g.stateNode;try{var G=v.shared.hiddenCallbacks;if(G!==null)for(v.shared.hiddenCallbacks=null,v=0;v<G.length;v++)fS(G[v],L)}catch(fe){Ht(g,g.return,fe)}}m&&O&64&&ST(S),Hc(S,S.return);break;case 27:CT(S);case 26:case 5:Va(v,S,m),m&&g===null&&O&4&&_T(S),Hc(S,S.return);break;case 12:Va(v,S,m);break;case 31:Va(v,S,m),m&&O&4&&DT(v,S);break;case 13:Va(v,S,m),m&&O&4&&RT(v,S);break;case 22:S.memoizedState===null&&Va(v,S,m),Hc(S,S.return);break;case 30:break;default:Va(v,S,m)}u=u.sibling}}function qb(o,u){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&Nc(m))}function Yb(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Nc(o))}function Xi(o,u,m,g){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)MT(o,u,m,g),u=u.sibling}function MT(o,u,m,g){var v=u.flags;switch(u.tag){case 0:case 11:case 15:Xi(o,u,m,g),v&2048&&Uc(9,u);break;case 1:Xi(o,u,m,g);break;case 3:Xi(o,u,m,g),v&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Nc(o)));break;case 12:if(v&2048){Xi(o,u,m,g),o=u.stateNode;try{var S=u.memoizedProps,O=S.id,L=S.onPostCommit;typeof L=="function"&&L(O,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(G){Ht(u,u.return,G)}}else Xi(o,u,m,g);break;case 31:Xi(o,u,m,g);break;case 13:Xi(o,u,m,g);break;case 23:break;case 22:S=u.stateNode,O=u.alternate,u.memoizedState!==null?S._visibility&2?Xi(o,u,m,g):zc(o,u):S._visibility&2?Xi(o,u,m,g):(S._visibility|=2,Gl(o,u,m,g,(u.subtreeFlags&10256)!==0||!1)),v&2048&&qb(O,u);break;case 24:Xi(o,u,m,g),v&2048&&Yb(u.alternate,u);break;default:Xi(o,u,m,g)}}function Gl(o,u,m,g,v){for(v=v&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var S=o,O=u,L=m,G=g,fe=O.flags;switch(O.tag){case 0:case 11:case 15:Gl(S,O,L,G,v),Uc(8,O);break;case 23:break;case 22:var Te=O.stateNode;O.memoizedState!==null?Te._visibility&2?Gl(S,O,L,G,v):zc(S,O):(Te._visibility|=2,Gl(S,O,L,G,v)),v&&fe&2048&&qb(O.alternate,O);break;case 24:Gl(S,O,L,G,v),v&&fe&2048&&Yb(O.alternate,O);break;default:Gl(S,O,L,G,v)}u=u.sibling}}function zc(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=o,g=u,v=g.flags;switch(g.tag){case 22:zc(m,g),v&2048&&qb(g.alternate,g);break;case 24:zc(m,g),v&2048&&Yb(g.alternate,g);break;default:zc(m,g)}u=u.sibling}}var $c=8192;function Wl(o,u,m){if(o.subtreeFlags&$c)for(o=o.child;o!==null;)BT(o,u,m),o=o.sibling}function BT(o,u,m){switch(o.tag){case 26:Wl(o,u,m),o.flags&$c&&o.memoizedState!==null&&SB(m,Wi,o.memoizedState,o.memoizedProps);break;case 5:Wl(o,u,m);break;case 3:case 4:var g=Wi;Wi=Zf(o.stateNode.containerInfo),Wl(o,u,m),Wi=g;break;case 22:o.memoizedState===null&&(g=o.alternate,g!==null&&g.memoizedState!==null?(g=$c,$c=16777216,Wl(o,u,m),$c=g):Wl(o,u,m));break;default:Wl(o,u,m)}}function FT(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function qc(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var g=u[m];$n=g,HT(g,o)}FT(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)UT(o),o=o.sibling}function UT(o){switch(o.tag){case 0:case 11:case 15:qc(o),o.flags&2048&&Ls(9,o,o.return);break;case 3:qc(o);break;case 12:qc(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Ff(o)):qc(o);break;default:qc(o)}}function Ff(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var g=u[m];$n=g,HT(g,o)}FT(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:Ls(8,u,u.return),Ff(u);break;case 22:m=u.stateNode,m._visibility&2&&(m._visibility&=-3,Ff(u));break;default:Ff(u)}o=o.sibling}}function HT(o,u){for(;$n!==null;){var m=$n;switch(m.tag){case 0:case 11:case 15:Ls(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var g=m.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Nc(m.memoizedState.cache)}if(g=m.child,g!==null)g.return=m,$n=g;else e:for(m=o;$n!==null;){g=$n;var v=g.sibling,S=g.return;if(jT(g),g===m){$n=null;break e}if(v!==null){v.return=S,$n=v;break e}$n=S}}}var F8={getCacheForType:function(o){var u=tr(An),m=u.data.get(o);return m===void 0&&(m=o(),u.data.set(o,m)),m},cacheSignal:function(){return tr(An).controller.signal}},U8=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Wt=null,Et=null,St=0,Ut=0,ai=null,Ms=!1,Xl=!1,Vb=!1,Ga=0,gn=0,Bs=0,Do=0,Gb=0,si=0,Kl=0,Yc=null,Mr=null,Wb=!1,Uf=0,zT=0,Hf=1/0,zf=null,Fs=null,In=0,Us=null,Ql=null,Wa=0,Xb=0,Kb=null,$T=null,Vc=0,Qb=null;function oi(){return(Dt&2)!==0&&St!==0?St&-St:R.T!==null?ry():aA()}function qT(){if(si===0)if((St&536870912)===0||_t){var o=mn;mn<<=1,(mn&3932160)===0&&(mn=262144),si=o}else si=536870912;return o=ri.current,o!==null&&(o.flags|=32),si}function Br(o,u,m){(o===Wt&&(Ut===2||Ut===9)||o.cancelPendingCommit!==null)&&(Zl(o,0),Hs(o,St,si,!1)),fc(o,m),((Dt&2)===0||o!==Wt)&&(o===Wt&&((Dt&2)===0&&(Do|=m),gn===4&&Hs(o,St,si,!1)),la(o))}function YT(o,u,m){if((Dt&6)!==0)throw Error(r(327));var g=!m&&(u&127)===0&&(u&o.expiredLanes)===0||Ss(o,u),v=g?$8(o,u):Jb(o,u,!0),S=g;do{if(v===0){Xl&&!g&&Hs(o,u,0,!1);break}else{if(m=o.current.alternate,S&&!H8(m)){v=Jb(o,u,!1),S=!1;continue}if(v===2){if(S=u,o.errorRecoveryDisabledLanes&S)var O=0;else O=o.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){u=O;e:{var L=o;v=Yc;var G=L.current.memoizedState.isDehydrated;if(G&&(Zl(L,O).flags|=256),O=Jb(L,O,!1),O!==2){if(Vb&&!G){L.errorRecoveryDisabledLanes|=S,Do|=S,v=4;break e}S=Mr,Mr=v,S!==null&&(Mr===null?Mr=S:Mr.push.apply(Mr,S))}v=O}if(S=!1,v!==2)continue}}if(v===1){Zl(o,0),Hs(o,u,0,!0);break}e:{switch(g=o,S=v,S){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Hs(g,u,si,!Ms);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(v=Uf+300-We(),10<v)){if(Hs(g,u,si,!Ms),As(g,0,!0)!==0)break e;Wa=u,g.timeoutHandle=E_(VT.bind(null,g,m,Mr,zf,Wb,u,si,Do,Kl,Ms,S,"Throttled",-0,0),v);break e}VT(g,m,Mr,zf,Wb,u,si,Do,Kl,Ms,S,null,-0,0)}}break}while(!0);la(o)}function VT(o,u,m,g,v,S,O,L,G,fe,Te,Ce,ge,ve){if(o.timeoutHandle=-1,Ce=u.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Da},BT(u,S,Ce);var Ye=(S&62914560)===S?Uf-We():(S&4194048)===S?zT-We():0;if(Ye=TB(Ce,Ye),Ye!==null){Wa=S,o.cancelPendingCommit=Ye(e_.bind(null,o,u,S,m,g,v,O,L,G,Te,Ce,null,ge,ve)),Hs(o,S,O,!fe);return}}e_(o,u,S,m,g,v,O,L,G)}function H8(o){for(var u=o;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var g=0;g<m.length;g++){var v=m[g],S=v.getSnapshot;v=v.value;try{if(!ti(S(),v))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Hs(o,u,m,g){u&=~Gb,u&=~Do,o.suspendedLanes|=u,o.pingedLanes&=~u,g&&(o.warmLanes|=u),g=o.expirationTimes;for(var v=u;0<v;){var S=31-_e(v),O=1<<S;g[S]=-1,v&=~O}m!==0&&nA(o,m,u)}function $f(){return(Dt&6)===0?(Gc(0),!1):!0}function Zb(){if(Et!==null){if(Ut===0)var o=Et.return;else o=Et,Ma=So=null,mb(o),zl=null,Oc=0,o=Et;for(;o!==null;)AT(o.alternate,o),o=o.return;Et=null}}function Zl(o,u){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,oB(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),Wa=0,Zb(),Wt=o,Et=m=Ia(o.current,null),St=u,Ut=0,ai=null,Ms=!1,Xl=Ss(o,u),Vb=!1,Kl=si=Gb=Do=Bs=gn=0,Mr=Yc=null,Wb=!1,(u&8)!==0&&(u|=u&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=u;0<g;){var v=31-_e(g),S=1<<v;u|=o[v],g&=~S}return Ga=u,cf(),m}function GT(o,u){ft=null,R.H=Mc,u===Hl||u===yf?(u=uS(),Ut=3):u===nb?(u=uS(),Ut=4):Ut=u===kb?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ai=u,Et===null&&(gn=1,Pf(o,Ei(u,o.current)))}function WT(){var o=ri.current;return o===null?!0:(St&4194048)===St?_i===null:(St&62914560)===St||(St&536870912)!==0?o===_i:!1}function XT(){var o=R.H;return R.H=Mc,o===null?Mc:o}function KT(){var o=R.A;return R.A=F8,o}function qf(){gn=4,Ms||(St&4194048)!==St&&ri.current!==null||(Xl=!0),(Bs&134217727)===0&&(Do&134217727)===0||Wt===null||Hs(Wt,St,si,!1)}function Jb(o,u,m){var g=Dt;Dt|=2;var v=XT(),S=KT();(Wt!==o||St!==u)&&(zf=null,Zl(o,u)),u=!1;var O=gn;e:do try{if(Ut!==0&&Et!==null){var L=Et,G=ai;switch(Ut){case 8:Zb(),O=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(u=!0);var fe=Ut;if(Ut=0,ai=null,Jl(o,L,G,fe),m&&Xl){O=0;break e}break;default:fe=Ut,Ut=0,ai=null,Jl(o,L,G,fe)}}z8(),O=gn;break}catch(Te){GT(o,Te)}while(!0);return u&&o.shellSuspendCounter++,Ma=So=null,Dt=g,R.H=v,R.A=S,Et===null&&(Wt=null,St=0,cf()),O}function z8(){for(;Et!==null;)QT(Et)}function $8(o,u){var m=Dt;Dt|=2;var g=XT(),v=KT();Wt!==o||St!==u?(zf=null,Hf=We()+500,Zl(o,u)):Xl=Ss(o,u);e:do try{if(Ut!==0&&Et!==null){u=Et;var S=ai;t:switch(Ut){case 1:Ut=0,ai=null,Jl(o,u,S,1);break;case 2:case 9:if(oS(S)){Ut=0,ai=null,ZT(u);break}u=function(){Ut!==2&&Ut!==9||Wt!==o||(Ut=7),la(o)},S.then(u,u);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:oS(S)?(Ut=0,ai=null,ZT(u)):(Ut=0,ai=null,Jl(o,u,S,7));break;case 5:var O=null;switch(Et.tag){case 26:O=Et.memoizedState;case 5:case 27:var L=Et;if(O?M_(O):L.stateNode.complete){Ut=0,ai=null;var G=L.sibling;if(G!==null)Et=G;else{var fe=L.return;fe!==null?(Et=fe,Yf(fe)):Et=null}break t}}Ut=0,ai=null,Jl(o,u,S,5);break;case 6:Ut=0,ai=null,Jl(o,u,S,6);break;case 8:Zb(),gn=6;break e;default:throw Error(r(462))}}q8();break}catch(Te){GT(o,Te)}while(!0);return Ma=So=null,R.H=g,R.A=v,Dt=m,Et!==null?0:(Wt=null,St=0,cf(),gn)}function q8(){for(;Et!==null&&!nt();)QT(Et)}function QT(o){var u=wT(o.alternate,o,Ga);o.memoizedProps=o.pendingProps,u===null?Yf(o):Et=u}function ZT(o){var u=o,m=u.alternate;switch(u.tag){case 15:case 0:u=pT(m,u,u.pendingProps,u.type,void 0,St);break;case 11:u=pT(m,u,u.pendingProps,u.type.render,u.ref,St);break;case 5:mb(u);default:AT(m,u),u=Et=KA(u,Ga),u=wT(m,u,Ga)}o.memoizedProps=o.pendingProps,u===null?Yf(o):Et=u}function Jl(o,u,m,g){Ma=So=null,mb(u),zl=null,Oc=0;var v=u.return;try{if(P8(o,v,u,m,St)){gn=1,Pf(o,Ei(m,o.current)),Et=null;return}}catch(S){if(v!==null)throw Et=v,S;gn=1,Pf(o,Ei(m,o.current)),Et=null;return}u.flags&32768?(_t||g===1?o=!0:Xl||(St&536870912)!==0?o=!1:(Ms=o=!0,(g===2||g===9||g===3||g===6)&&(g=ri.current,g!==null&&g.tag===13&&(g.flags|=16384))),JT(u,o)):Yf(u)}function Yf(o){var u=o;do{if((u.flags&32768)!==0){JT(u,Ms);return}o=u.return;var m=I8(u.alternate,u,Ga);if(m!==null){Et=m;return}if(u=u.sibling,u!==null){Et=u;return}Et=u=o}while(u!==null);gn===0&&(gn=5)}function JT(o,u){do{var m=L8(o.alternate,o);if(m!==null){m.flags&=32767,Et=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(o=o.sibling,o!==null)){Et=o;return}Et=o=m}while(o!==null);gn=6,Et=null}function e_(o,u,m,g,v,S,O,L,G){o.cancelPendingCommit=null;do Vf();while(In!==0);if((Dt&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(S=u.lanes|u.childLanes,S|=H0,A6(o,m,S,O,L,G),o===Wt&&(Et=Wt=null,St=0),Ql=u,Us=o,Wa=m,Xb=S,Kb=v,$T=g,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,W8(Le,function(){return a_(),null})):(o.callbackNode=null,o.callbackPriority=0),g=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||g){g=R.T,R.T=null,v=B.p,B.p=2,O=Dt,Dt|=4;try{M8(o,u,m)}finally{Dt=O,B.p=v,R.T=g}}In=1,t_(),n_(),r_()}}function t_(){if(In===1){In=0;var o=Us,u=Ql,m=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||m){m=R.T,R.T=null;var g=B.p;B.p=2;var v=Dt;Dt|=4;try{IT(u,o);var S=dy,O=HA(o.containerInfo),L=S.focusedElem,G=S.selectionRange;if(O!==L&&L&&L.ownerDocument&&UA(L.ownerDocument.documentElement,L)){if(G!==null&&L0(L)){var fe=G.start,Te=G.end;if(Te===void 0&&(Te=fe),"selectionStart"in L)L.selectionStart=fe,L.selectionEnd=Math.min(Te,L.value.length);else{var Ce=L.ownerDocument||document,ge=Ce&&Ce.defaultView||window;if(ge.getSelection){var ve=ge.getSelection(),Ye=L.textContent.length,it=Math.min(G.start,Ye),Yt=G.end===void 0?it:Math.min(G.end,Ye);!ve.extend&&it>Yt&&(O=Yt,Yt=it,it=O);var ae=FA(L,it),Z=FA(L,Yt);if(ae&&Z&&(ve.rangeCount!==1||ve.anchorNode!==ae.node||ve.anchorOffset!==ae.offset||ve.focusNode!==Z.node||ve.focusOffset!==Z.offset)){var he=Ce.createRange();he.setStart(ae.node,ae.offset),ve.removeAllRanges(),it>Yt?(ve.addRange(he),ve.extend(Z.node,Z.offset)):(he.setEnd(Z.node,Z.offset),ve.addRange(he))}}}}for(Ce=[],ve=L;ve=ve.parentNode;)ve.nodeType===1&&Ce.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<Ce.length;L++){var Ne=Ce[L];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}im=!!cy,dy=cy=null}finally{Dt=v,B.p=g,R.T=m}}o.current=u,In=2}}function n_(){if(In===2){In=0;var o=Us,u=Ql,m=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||m){m=R.T,R.T=null;var g=B.p;B.p=2;var v=Dt;Dt|=4;try{kT(o,u.alternate,u)}finally{Dt=v,B.p=g,R.T=m}}In=3}}function r_(){if(In===4||In===3){In=0,rt();var o=Us,u=Ql,m=Wa,g=$T;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?In=5:(In=0,Ql=Us=null,i_(o,o.pendingLanes));var v=o.pendingLanes;if(v===0&&(Fs=null),b0(m),u=u.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(pe,u,void 0,(u.current.flags&128)===128)}catch{}if(g!==null){u=R.T,v=B.p,B.p=2,R.T=null;try{for(var S=o.onRecoverableError,O=0;O<g.length;O++){var L=g[O];S(L.value,{componentStack:L.stack})}}finally{R.T=u,B.p=v}}(Wa&3)!==0&&Vf(),la(o),v=o.pendingLanes,(m&261930)!==0&&(v&42)!==0?o===Qb?Vc++:(Vc=0,Qb=o):Vc=0,Gc(0)}}function i_(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Nc(u)))}function Vf(){return t_(),n_(),r_(),a_()}function a_(){if(In!==5)return!1;var o=Us,u=Xb;Xb=0;var m=b0(Wa),g=R.T,v=B.p;try{B.p=32>m?32:m,R.T=null,m=Kb,Kb=null;var S=Us,O=Wa;if(In=0,Ql=Us=null,Wa=0,(Dt&6)!==0)throw Error(r(331));var L=Dt;if(Dt|=4,UT(S.current),MT(S,S.current,O,m),Dt=L,Gc(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(pe,S)}catch{}return!0}finally{B.p=v,R.T=g,i_(o,u)}}function s_(o,u,m){u=Ei(m,u),u=Ob(o.stateNode,u,2),o=Ds(o,u,2),o!==null&&(fc(o,2),la(o))}function Ht(o,u,m){if(o.tag===3)s_(o,o,m);else for(;u!==null;){if(u.tag===3){s_(u,o,m);break}else if(u.tag===1){var g=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Fs===null||!Fs.has(g))){o=Ei(m,o),m=oT(2),g=Ds(u,m,2),g!==null&&(lT(m,g,u,o),fc(g,2),la(g));break}}u=u.return}}function ey(o,u,m){var g=o.pingCache;if(g===null){g=o.pingCache=new U8;var v=new Set;g.set(u,v)}else v=g.get(u),v===void 0&&(v=new Set,g.set(u,v));v.has(m)||(Vb=!0,v.add(m),o=Y8.bind(null,o,u,m),u.then(o,o))}function Y8(o,u,m){var g=o.pingCache;g!==null&&g.delete(u),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,Wt===o&&(St&m)===m&&(gn===4||gn===3&&(St&62914560)===St&&300>We()-Uf?(Dt&2)===0&&Zl(o,0):Gb|=m,Kl===St&&(Kl=0)),la(o)}function o_(o,u){u===0&&(u=tA()),o=wo(o,u),o!==null&&(fc(o,u),la(o))}function V8(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),o_(o,m)}function G8(o,u){var m=0;switch(o.tag){case 31:case 13:var g=o.stateNode,v=o.memoizedState;v!==null&&(m=v.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(u),o_(o,m)}function W8(o,u){return Ue(o,u)}var Gf=null,eu=null,ty=!1,Wf=!1,ny=!1,zs=0;function la(o){o!==eu&&o.next===null&&(eu===null?Gf=eu=o:eu=eu.next=o),Wf=!0,ty||(ty=!0,K8())}function Gc(o,u){if(!ny&&Wf){ny=!0;do for(var m=!1,g=Gf;g!==null;){if(o!==0){var v=g.pendingLanes;if(v===0)var S=0;else{var O=g.suspendedLanes,L=g.pingedLanes;S=(1<<31-_e(42|o)+1)-1,S&=v&~(O&~L),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(m=!0,d_(g,S))}else S=St,S=As(g,g===Wt?S:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(S&3)===0||Ss(g,S)||(m=!0,d_(g,S));g=g.next}while(m);ny=!1}}function X8(){l_()}function l_(){Wf=ty=!1;var o=0;zs!==0&&sB()&&(o=zs);for(var u=We(),m=null,g=Gf;g!==null;){var v=g.next,S=u_(g,u);S===0?(g.next=null,m===null?Gf=v:m.next=v,v===null&&(eu=m)):(m=g,(o!==0||(S&3)!==0)&&(Wf=!0)),g=v}In!==0&&In!==5||Gc(o),zs!==0&&(zs=0)}function u_(o,u){for(var m=o.suspendedLanes,g=o.pingedLanes,v=o.expirationTimes,S=o.pendingLanes&-62914561;0<S;){var O=31-_e(S),L=1<<O,G=v[O];G===-1?((L&m)===0||(L&g)!==0)&&(v[O]=m0(L,u)):G<=u&&(o.expiredLanes|=L),S&=~L}if(u=Wt,m=St,m=As(o,o===u?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g=o.callbackNode,m===0||o===u&&(Ut===2||Ut===9)||o.cancelPendingCommit!==null)return g!==null&&g!==null&&Ge(g),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||Ss(o,m)){if(u=m&-m,u===o.callbackPriority)return u;switch(g!==null&&Ge(g),b0(m)){case 2:case 8:m=we;break;case 32:m=Le;break;case 268435456:m=ot;break;default:m=Le}return g=c_.bind(null,o),m=Ue(m,g),o.callbackPriority=u,o.callbackNode=m,u}return g!==null&&g!==null&&Ge(g),o.callbackPriority=2,o.callbackNode=null,2}function c_(o,u){if(In!==0&&In!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(Vf()&&o.callbackNode!==m)return null;var g=St;return g=As(o,o===Wt?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),g===0?null:(YT(o,g,u),u_(o,We()),o.callbackNode!=null&&o.callbackNode===m?c_.bind(null,o):null)}function d_(o,u){if(Vf())return null;YT(o,u,!0)}function K8(){lB(function(){(Dt&6)!==0?Ue(ne,X8):l_()})}function ry(){if(zs===0){var o=Fl;o===0&&(o=Mt,Mt<<=1,(Mt&261888)===0&&(Mt=256)),zs=o}return zs}function h_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:tf(""+o)}function f_(o,u){var m=u.ownerDocument.createElement("input");return m.name=u.name,m.value=u.value,o.id&&m.setAttribute("form",o.id),u.parentNode.insertBefore(m,u),o=new FormData(o),m.parentNode.removeChild(m),o}function Q8(o,u,m,g,v){if(u==="submit"&&m&&m.stateNode===v){var S=h_((v[Pr]||null).action),O=g.submitter;O&&(u=(u=O[Pr]||null)?h_(u.formAction):O.getAttribute("formAction"),u!==null&&(S=u,O=null));var L=new sf("action","action",null,g,v);o.push({event:L,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(zs!==0){var G=O?f_(v,O):new FormData(v);Ab(m,{pending:!0,data:G,method:v.method,action:S},null,G)}}else typeof S=="function"&&(L.preventDefault(),G=O?f_(v,O):new FormData(v),Ab(m,{pending:!0,data:G,method:v.method,action:S},S,G))},currentTarget:v}]})}}for(var iy=0;iy<U0.length;iy++){var ay=U0[iy],Z8=ay.toLowerCase(),J8=ay[0].toUpperCase()+ay.slice(1);Gi(Z8,"on"+J8)}Gi(qA,"onAnimationEnd"),Gi(YA,"onAnimationIteration"),Gi(VA,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(p8,"onTransitionRun"),Gi(g8,"onTransitionStart"),Gi(b8,"onTransitionCancel"),Gi(GA,"onTransitionEnd"),Tl("onMouseEnter",["mouseout","mouseover"]),Tl("onMouseLeave",["mouseout","mouseover"]),Tl("onPointerEnter",["pointerout","pointerover"]),Tl("onPointerLeave",["pointerout","pointerover"]),bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bo("onBeforeInput",["compositionend","keypress","textInput","paste"]),bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wc));function m_(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var g=o[m],v=g.event;g=g.listeners;e:{var S=void 0;if(u)for(var O=g.length-1;0<=O;O--){var L=g[O],G=L.instance,fe=L.currentTarget;if(L=L.listener,G!==S&&v.isPropagationStopped())break e;S=L,v.currentTarget=fe;try{S(v)}catch(Te){uf(Te)}v.currentTarget=null,S=G}else for(O=0;O<g.length;O++){if(L=g[O],G=L.instance,fe=L.currentTarget,L=L.listener,G!==S&&v.isPropagationStopped())break e;S=L,v.currentTarget=fe;try{S(v)}catch(Te){uf(Te)}v.currentTarget=null,S=G}}}}function At(o,u){var m=u[y0];m===void 0&&(m=u[y0]=new Set);var g=o+"__bubble";m.has(g)||(p_(u,o,2,!1),m.add(g))}function sy(o,u,m){var g=0;u&&(g|=4),p_(m,o,g,u)}var Xf="_reactListening"+Math.random().toString(36).slice(2);function oy(o){if(!o[Xf]){o[Xf]=!0,lA.forEach(function(m){m!=="selectionchange"&&(eB.has(m)||sy(m,!1,o),sy(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[Xf]||(u[Xf]=!0,sy("selectionchange",!1,u))}}function p_(o,u,m,g){switch(q_(u)){case 2:var v=CB;break;case 8:v=OB;break;default:v=Ey}m=v.bind(null,u,m,o),v=void 0,!N0||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(v=!0),g?v!==void 0?o.addEventListener(u,m,{capture:!0,passive:v}):o.addEventListener(u,m,!0):v!==void 0?o.addEventListener(u,m,{passive:v}):o.addEventListener(u,m,!1)}function ly(o,u,m,g,v){var S=g;if((u&1)===0&&(u&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var L=g.stateNode.containerInfo;if(L===v)break;if(O===4)for(O=g.return;O!==null;){var G=O.tag;if((G===3||G===4)&&O.stateNode.containerInfo===v)return;O=O.return}for(;L!==null;){if(O=El(L),O===null)return;if(G=O.tag,G===5||G===6||G===26||G===27){g=S=O;continue e}L=L.parentNode}}g=g.return}vA(function(){var fe=S,Te=T0(m),Ce=[];e:{var ge=WA.get(o);if(ge!==void 0){var ve=sf,Ye=o;switch(o){case"keypress":if(rf(m)===0)break e;case"keydown":case"keyup":ve=G6;break;case"focusin":Ye="focus",ve=j0;break;case"focusout":Ye="blur",ve=j0;break;case"beforeblur":case"afterblur":ve=j0;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=AA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=I6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=K6;break;case qA:case YA:case VA:ve=B6;break;case GA:ve=Z6;break;case"scroll":case"scrollend":ve=D6;break;case"wheel":ve=e8;break;case"copy":case"cut":case"paste":ve=U6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=TA;break;case"toggle":case"beforetoggle":ve=n8}var it=(u&4)!==0,Yt=!it&&(o==="scroll"||o==="scrollend"),ae=it?ge!==null?ge+"Capture":null:ge;it=[];for(var Z=fe,he;Z!==null;){var Ne=Z;if(he=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||he===null||ae===null||(Ne=gc(Z,ae),Ne!=null&&it.push(Xc(Z,Ne,he))),Yt)break;Z=Z.return}0<it.length&&(ge=new ve(ge,Ye,null,m,Te),Ce.push({event:ge,listeners:it}))}}if((u&7)===0){e:{if(ge=o==="mouseover"||o==="pointerover",ve=o==="mouseout"||o==="pointerout",ge&&m!==S0&&(Ye=m.relatedTarget||m.fromElement)&&(El(Ye)||Ye[wl]))break e;if((ve||ge)&&(ge=Te.window===Te?Te:(ge=Te.ownerDocument)?ge.defaultView||ge.parentWindow:window,ve?(Ye=m.relatedTarget||m.toElement,ve=fe,Ye=Ye?El(Ye):null,Ye!==null&&(Yt=a(Ye),it=Ye.tag,Ye!==Yt||it!==5&&it!==27&&it!==6)&&(Ye=null)):(ve=null,Ye=fe),ve!==Ye)){if(it=AA,Ne="onMouseLeave",ae="onMouseEnter",Z="mouse",(o==="pointerout"||o==="pointerover")&&(it=TA,Ne="onPointerLeave",ae="onPointerEnter",Z="pointer"),Yt=ve==null?ge:pc(ve),he=Ye==null?ge:pc(Ye),ge=new it(Ne,Z+"leave",ve,m,Te),ge.target=Yt,ge.relatedTarget=he,Ne=null,El(Te)===fe&&(it=new it(ae,Z+"enter",Ye,m,Te),it.target=he,it.relatedTarget=Yt,Ne=it),Yt=Ne,ve&&Ye)t:{for(it=tB,ae=ve,Z=Ye,he=0,Ne=ae;Ne;Ne=it(Ne))he++;Ne=0;for(var Ze=Z;Ze;Ze=it(Ze))Ne++;for(;0<he-Ne;)ae=it(ae),he--;for(;0<Ne-he;)Z=it(Z),Ne--;for(;he--;){if(ae===Z||Z!==null&&ae===Z.alternate){it=ae;break t}ae=it(ae),Z=it(Z)}it=null}else it=null;ve!==null&&g_(Ce,ge,ve,it,!1),Ye!==null&&Yt!==null&&g_(Ce,Yt,Ye,it,!0)}}e:{if(ge=fe?pc(fe):window,ve=ge.nodeName&&ge.nodeName.toLowerCase(),ve==="select"||ve==="input"&&ge.type==="file")var kt=DA;else if(jA(ge))if(RA)kt=h8;else{kt=c8;var Xe=u8}else ve=ge.nodeName,!ve||ve.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?fe&&A0(fe.elementType)&&(kt=DA):kt=d8;if(kt&&(kt=kt(o,fe))){PA(Ce,kt,m,Te);break e}Xe&&Xe(o,ge,fe),o==="focusout"&&fe&&ge.type==="number"&&fe.memoizedProps.value!=null&&E0(ge,"number",ge.value)}switch(Xe=fe?pc(fe):window,o){case"focusin":(jA(Xe)||Xe.contentEditable==="true")&&(jl=Xe,M0=fe,Sc=null);break;case"focusout":Sc=M0=jl=null;break;case"mousedown":B0=!0;break;case"contextmenu":case"mouseup":case"dragend":B0=!1,zA(Ce,m,Te);break;case"selectionchange":if(m8)break;case"keydown":case"keyup":zA(Ce,m,Te)}var yt;if(D0)e:{switch(o){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else kl?OA(o,m)&&(Tt="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Tt="onCompositionStart");Tt&&(_A&&m.locale!=="ko"&&(kl||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&kl&&(yt=wA()):(_s=Te,C0="value"in _s?_s.value:_s.textContent,kl=!0)),Xe=Kf(fe,Tt),0<Xe.length&&(Tt=new SA(Tt,o,null,m,Te),Ce.push({event:Tt,listeners:Xe}),yt?Tt.data=yt:(yt=kA(m),yt!==null&&(Tt.data=yt)))),(yt=i8?a8(o,m):s8(o,m))&&(Tt=Kf(fe,"onBeforeInput"),0<Tt.length&&(Xe=new SA("onBeforeInput","beforeinput",null,m,Te),Ce.push({event:Xe,listeners:Tt}),Xe.data=yt)),Q8(Ce,o,fe,m,Te)}m_(Ce,u)})}function Xc(o,u,m){return{instance:o,listener:u,currentTarget:m}}function Kf(o,u){for(var m=u+"Capture",g=[];o!==null;){var v=o,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=gc(o,m),v!=null&&g.unshift(Xc(o,v,S)),v=gc(o,u),v!=null&&g.push(Xc(o,v,S))),o.tag===3)return g;o=o.return}return[]}function tB(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function g_(o,u,m,g,v){for(var S=u._reactName,O=[];m!==null&&m!==g;){var L=m,G=L.alternate,fe=L.stateNode;if(L=L.tag,G!==null&&G===g)break;L!==5&&L!==26&&L!==27||fe===null||(G=fe,v?(fe=gc(m,S),fe!=null&&O.unshift(Xc(m,fe,G))):v||(fe=gc(m,S),fe!=null&&O.push(Xc(m,fe,G)))),m=m.return}O.length!==0&&o.push({event:u,listeners:O})}var nB=/\r\n?/g,rB=/\u0000|\uFFFD/g;function b_(o){return(typeof o=="string"?o:""+o).replace(nB,`
`).replace(rB,"")}function y_(o,u){return u=b_(u),b_(o)===u}function qt(o,u,m,g,v,S){switch(m){case"children":typeof g=="string"?u==="body"||u==="textarea"&&g===""||Nl(o,g):(typeof g=="number"||typeof g=="bigint")&&u!=="body"&&Nl(o,""+g);break;case"className":Jh(o,"class",g);break;case"tabIndex":Jh(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Jh(o,m,g);break;case"style":yA(o,g,S);break;case"data":if(u!=="object"){Jh(o,"data",g);break}case"src":case"href":if(g===""&&(u!=="a"||m!=="href")){o.removeAttribute(m);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(m);break}g=tf(""+g),o.setAttribute(m,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(m==="formAction"?(u!=="input"&&qt(o,u,"name",v.name,v,null),qt(o,u,"formEncType",v.formEncType,v,null),qt(o,u,"formMethod",v.formMethod,v,null),qt(o,u,"formTarget",v.formTarget,v,null)):(qt(o,u,"encType",v.encType,v,null),qt(o,u,"method",v.method,v,null),qt(o,u,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(m);break}g=tf(""+g),o.setAttribute(m,g);break;case"onClick":g!=null&&(o.onclick=Da);break;case"onScroll":g!=null&&At("scroll",o);break;case"onScrollEnd":g!=null&&At("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(v.children!=null)throw Error(r(60));o.innerHTML=m}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}m=tf(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,""+g):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":g===!0?o.setAttribute(m,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(m,g):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(m,g):o.removeAttribute(m);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(m):o.setAttribute(m,g);break;case"popover":At("beforetoggle",o),At("toggle",o),Zh(o,"popover",g);break;case"xlinkActuate":Pa(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Pa(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Pa(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Pa(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Pa(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Pa(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Pa(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Pa(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Pa(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Zh(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=j6.get(m)||m,Zh(o,m,g))}}function uy(o,u,m,g,v,S){switch(m){case"style":yA(o,g,S);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(m=g.__html,m!=null){if(v.children!=null)throw Error(r(60));o.innerHTML=m}}break;case"children":typeof g=="string"?Nl(o,g):(typeof g=="number"||typeof g=="bigint")&&Nl(o,""+g);break;case"onScroll":g!=null&&At("scroll",o);break;case"onScrollEnd":g!=null&&At("scrollend",o);break;case"onClick":g!=null&&(o.onclick=Da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!uA.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(v=m.endsWith("Capture"),u=m.slice(2,v?m.length-7:void 0),S=o[Pr]||null,S=S!=null?S[m]:null,typeof S=="function"&&o.removeEventListener(u,S,v),typeof g=="function")){typeof S!="function"&&S!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(u,g,v);break e}m in o?o[m]=g:g===!0?o.setAttribute(m,""):Zh(o,m,g)}}}function rr(o,u,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",o),At("load",o);var g=!1,v=!1,S;for(S in m)if(m.hasOwnProperty(S)){var O=m[S];if(O!=null)switch(S){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:qt(o,u,S,O,m,null)}}v&&qt(o,u,"srcSet",m.srcSet,m,null),g&&qt(o,u,"src",m.src,m,null);return;case"input":At("invalid",o);var L=S=O=v=null,G=null,fe=null;for(g in m)if(m.hasOwnProperty(g)){var Te=m[g];if(Te!=null)switch(g){case"name":v=Te;break;case"type":O=Te;break;case"checked":G=Te;break;case"defaultChecked":fe=Te;break;case"value":S=Te;break;case"defaultValue":L=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(137,u));break;default:qt(o,u,g,Te,m,null)}}mA(o,S,L,G,fe,O,v,!1);return;case"select":At("invalid",o),g=O=S=null;for(v in m)if(m.hasOwnProperty(v)&&(L=m[v],L!=null))switch(v){case"value":S=L;break;case"defaultValue":O=L;break;case"multiple":g=L;default:qt(o,u,v,L,m,null)}u=S,m=O,o.multiple=!!g,u!=null?_l(o,!!g,u,!1):m!=null&&_l(o,!!g,m,!0);return;case"textarea":At("invalid",o),S=v=g=null;for(O in m)if(m.hasOwnProperty(O)&&(L=m[O],L!=null))switch(O){case"value":g=L;break;case"defaultValue":v=L;break;case"children":S=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(r(91));break;default:qt(o,u,O,L,m,null)}gA(o,g,v,S);return;case"option":for(G in m)if(m.hasOwnProperty(G)&&(g=m[G],g!=null))switch(G){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:qt(o,u,G,g,m,null)}return;case"dialog":At("beforetoggle",o),At("toggle",o),At("cancel",o),At("close",o);break;case"iframe":case"object":At("load",o);break;case"video":case"audio":for(g=0;g<Wc.length;g++)At(Wc[g],o);break;case"image":At("error",o),At("load",o);break;case"details":At("toggle",o);break;case"embed":case"source":case"link":At("error",o),At("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in m)if(m.hasOwnProperty(fe)&&(g=m[fe],g!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:qt(o,u,fe,g,m,null)}return;default:if(A0(u)){for(Te in m)m.hasOwnProperty(Te)&&(g=m[Te],g!==void 0&&uy(o,u,Te,g,m,void 0));return}}for(L in m)m.hasOwnProperty(L)&&(g=m[L],g!=null&&qt(o,u,L,g,m,null))}function iB(o,u,m,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,O=null,L=null,G=null,fe=null,Te=null;for(ve in m){var Ce=m[ve];if(m.hasOwnProperty(ve)&&Ce!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":G=Ce;default:g.hasOwnProperty(ve)||qt(o,u,ve,null,g,Ce)}}for(var ge in g){var ve=g[ge];if(Ce=m[ge],g.hasOwnProperty(ge)&&(ve!=null||Ce!=null))switch(ge){case"type":S=ve;break;case"name":v=ve;break;case"checked":fe=ve;break;case"defaultChecked":Te=ve;break;case"value":O=ve;break;case"defaultValue":L=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,u));break;default:ve!==Ce&&qt(o,u,ge,ve,g,Ce)}}w0(o,O,L,G,fe,Te,S,v);return;case"select":ve=O=L=ge=null;for(S in m)if(G=m[S],m.hasOwnProperty(S)&&G!=null)switch(S){case"value":break;case"multiple":ve=G;default:g.hasOwnProperty(S)||qt(o,u,S,null,g,G)}for(v in g)if(S=g[v],G=m[v],g.hasOwnProperty(v)&&(S!=null||G!=null))switch(v){case"value":ge=S;break;case"defaultValue":L=S;break;case"multiple":O=S;default:S!==G&&qt(o,u,v,S,g,G)}u=L,m=O,g=ve,ge!=null?_l(o,!!m,ge,!1):!!g!=!!m&&(u!=null?_l(o,!!m,u,!0):_l(o,!!m,m?[]:"",!1));return;case"textarea":ve=ge=null;for(L in m)if(v=m[L],m.hasOwnProperty(L)&&v!=null&&!g.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:qt(o,u,L,null,g,v)}for(O in g)if(v=g[O],S=m[O],g.hasOwnProperty(O)&&(v!=null||S!=null))switch(O){case"value":ge=v;break;case"defaultValue":ve=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==S&&qt(o,u,O,v,g,S)}pA(o,ge,ve);return;case"option":for(var Ye in m)if(ge=m[Ye],m.hasOwnProperty(Ye)&&ge!=null&&!g.hasOwnProperty(Ye))switch(Ye){case"selected":o.selected=!1;break;default:qt(o,u,Ye,null,g,ge)}for(G in g)if(ge=g[G],ve=m[G],g.hasOwnProperty(G)&&ge!==ve&&(ge!=null||ve!=null))switch(G){case"selected":o.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:qt(o,u,G,ge,g,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var it in m)ge=m[it],m.hasOwnProperty(it)&&ge!=null&&!g.hasOwnProperty(it)&&qt(o,u,it,null,g,ge);for(fe in g)if(ge=g[fe],ve=m[fe],g.hasOwnProperty(fe)&&ge!==ve&&(ge!=null||ve!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,u));break;default:qt(o,u,fe,ge,g,ve)}return;default:if(A0(u)){for(var Yt in m)ge=m[Yt],m.hasOwnProperty(Yt)&&ge!==void 0&&!g.hasOwnProperty(Yt)&&uy(o,u,Yt,void 0,g,ge);for(Te in g)ge=g[Te],ve=m[Te],!g.hasOwnProperty(Te)||ge===ve||ge===void 0&&ve===void 0||uy(o,u,Te,ge,g,ve);return}}for(var ae in m)ge=m[ae],m.hasOwnProperty(ae)&&ge!=null&&!g.hasOwnProperty(ae)&&qt(o,u,ae,null,g,ge);for(Ce in g)ge=g[Ce],ve=m[Ce],!g.hasOwnProperty(Ce)||ge===ve||ge==null&&ve==null||qt(o,u,Ce,ge,g,ve)}function x_(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function aB(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,m=performance.getEntriesByType("resource"),g=0;g<m.length;g++){var v=m[g],S=v.transferSize,O=v.initiatorType,L=v.duration;if(S&&L&&x_(O)){for(O=0,L=v.responseEnd,g+=1;g<m.length;g++){var G=m[g],fe=G.startTime;if(fe>L)break;var Te=G.transferSize,Ce=G.initiatorType;Te&&x_(Ce)&&(G=G.responseEnd,O+=Te*(G<L?1:(L-fe)/(G-fe)))}if(--g,u+=8*(S+O)/(v.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var cy=null,dy=null;function Qf(o){return o.nodeType===9?o:o.ownerDocument}function v_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function w_(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function hy(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var fy=null;function sB(){var o=window.event;return o&&o.type==="popstate"?o===fy?!1:(fy=o,!0):(fy=null,!1)}var E_=typeof setTimeout=="function"?setTimeout:void 0,oB=typeof clearTimeout=="function"?clearTimeout:void 0,A_=typeof Promise=="function"?Promise:void 0,lB=typeof queueMicrotask=="function"?queueMicrotask:typeof A_<"u"?function(o){return A_.resolve(null).then(o).catch(uB)}:E_;function uB(o){setTimeout(function(){throw o})}function $s(o){return o==="head"}function S_(o,u){var m=u,g=0;do{var v=m.nextSibling;if(o.removeChild(m),v&&v.nodeType===8)if(m=v.data,m==="/$"||m==="/&"){if(g===0){o.removeChild(v),iu(u);return}g--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")g++;else if(m==="html")Kc(o.ownerDocument.documentElement);else if(m==="head"){m=o.ownerDocument.head,Kc(m);for(var S=m.firstChild;S;){var O=S.nextSibling,L=S.nodeName;S[mc]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&S.rel.toLowerCase()==="stylesheet"||m.removeChild(S),S=O}}else m==="body"&&Kc(o.ownerDocument.body);m=v}while(m);iu(u)}function T_(o,u){var m=o;o=0;do{var g=m.nextSibling;if(m.nodeType===1?u?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(u?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),g&&g.nodeType===8)if(m=g.data,m==="/$"){if(o===0)break;o--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||o++;m=g}while(m)}function my(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var m=u;switch(u=u.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":my(m),x0(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function cB(o,u,m,g){for(;o.nodeType===1;){var v=m;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[mc])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(S=o.getAttribute("rel"),S==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(S!==v.rel||o.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||o.getAttribute("title")!==(v.title==null?null:v.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(S=o.getAttribute("src"),(S!==(v.src==null?null:v.src)||o.getAttribute("type")!==(v.type==null?null:v.type)||o.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&o.getAttribute("name")===S)return o}else return o;if(o=Ni(o.nextSibling),o===null)break}return null}function dB(o,u,m){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Ni(o.nextSibling),o===null))return null;return o}function __(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Ni(o.nextSibling),o===null))return null;return o}function py(o){return o.data==="$?"||o.data==="$~"}function gy(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function hB(o,u){var m=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||m.readyState!=="loading")u();else{var g=function(){u(),m.removeEventListener("DOMContentLoaded",g)};m.addEventListener("DOMContentLoaded",g),o._reactRetry=g}}function Ni(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var by=null;function N_(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"||m==="/&"){if(u===0)return Ni(o.nextSibling);u--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||u++}o=o.nextSibling}return null}function C_(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(u===0)return o;u--}else m!=="/$"&&m!=="/&"||u++}o=o.previousSibling}return null}function O_(o,u,m){switch(u=Qf(m),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Kc(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);x0(o)}var Ci=new Map,k_=new Set;function Zf(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var Xa=B.d;B.d={f:fB,r:mB,D:pB,C:gB,L:bB,m:yB,X:vB,S:xB,M:wB};function fB(){var o=Xa.f(),u=$f();return o||u}function mB(o){var u=Al(o);u!==null&&u.tag===5&&u.type==="form"?GS(u):Xa.r(o)}var tu=typeof document>"u"?null:document;function j_(o,u,m){var g=tu;if(g&&typeof u=="string"&&u){var v=vi(u);v='link[rel="'+o+'"][href="'+v+'"]',typeof m=="string"&&(v+='[crossorigin="'+m+'"]'),k_.has(v)||(k_.add(v),o={rel:o,crossOrigin:m,href:u},g.querySelector(v)===null&&(u=g.createElement("link"),rr(u,"link",o),zn(u),g.head.appendChild(u)))}}function pB(o){Xa.D(o),j_("dns-prefetch",o,null)}function gB(o,u){Xa.C(o,u),j_("preconnect",o,u)}function bB(o,u,m){Xa.L(o,u,m);var g=tu;if(g&&o&&u){var v='link[rel="preload"][as="'+vi(u)+'"]';u==="image"&&m&&m.imageSrcSet?(v+='[imagesrcset="'+vi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(v+='[imagesizes="'+vi(m.imageSizes)+'"]')):v+='[href="'+vi(o)+'"]';var S=v;switch(u){case"style":S=nu(o);break;case"script":S=ru(o)}Ci.has(S)||(o=p({rel:"preload",href:u==="image"&&m&&m.imageSrcSet?void 0:o,as:u},m),Ci.set(S,o),g.querySelector(v)!==null||u==="style"&&g.querySelector(Qc(S))||u==="script"&&g.querySelector(Zc(S))||(u=g.createElement("link"),rr(u,"link",o),zn(u),g.head.appendChild(u)))}}function yB(o,u){Xa.m(o,u);var m=tu;if(m&&o){var g=u&&typeof u.as=="string"?u.as:"script",v='link[rel="modulepreload"][as="'+vi(g)+'"][href="'+vi(o)+'"]',S=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ru(o)}if(!Ci.has(S)&&(o=p({rel:"modulepreload",href:o},u),Ci.set(S,o),m.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Zc(S)))return}g=m.createElement("link"),rr(g,"link",o),zn(g),m.head.appendChild(g)}}}function xB(o,u,m){Xa.S(o,u,m);var g=tu;if(g&&o){var v=Sl(g).hoistableStyles,S=nu(o);u=u||"default";var O=v.get(S);if(!O){var L={loading:0,preload:null};if(O=g.querySelector(Qc(S)))L.loading=5;else{o=p({rel:"stylesheet",href:o,"data-precedence":u},m),(m=Ci.get(S))&&yy(o,m);var G=O=g.createElement("link");zn(G),rr(G,"link",o),G._p=new Promise(function(fe,Te){G.onload=fe,G.onerror=Te}),G.addEventListener("load",function(){L.loading|=1}),G.addEventListener("error",function(){L.loading|=2}),L.loading|=4,Jf(O,u,g)}O={type:"stylesheet",instance:O,count:1,state:L},v.set(S,O)}}}function vB(o,u){Xa.X(o,u);var m=tu;if(m&&o){var g=Sl(m).hoistableScripts,v=ru(o),S=g.get(v);S||(S=m.querySelector(Zc(v)),S||(o=p({src:o,async:!0},u),(u=Ci.get(v))&&xy(o,u),S=m.createElement("script"),zn(S),rr(S,"link",o),m.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(v,S))}}function wB(o,u){Xa.M(o,u);var m=tu;if(m&&o){var g=Sl(m).hoistableScripts,v=ru(o),S=g.get(v);S||(S=m.querySelector(Zc(v)),S||(o=p({src:o,async:!0,type:"module"},u),(u=Ci.get(v))&&xy(o,u),S=m.createElement("script"),zn(S),rr(S,"link",o),m.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},g.set(v,S))}}function P_(o,u,m,g){var v=(v=ie.current)?Zf(v):null;if(!v)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(u=nu(m.href),m=Sl(v).hoistableStyles,g=m.get(u),g||(g={type:"style",instance:null,count:0,state:null},m.set(u,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=nu(m.href);var S=Sl(v).hoistableStyles,O=S.get(o);if(O||(v=v.ownerDocument||v,O={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(o,O),(S=v.querySelector(Qc(o)))&&!S._p&&(O.instance=S,O.state.loading=5),Ci.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ci.set(o,m),S||EB(v,o,m,O.state))),u&&g===null)throw Error(r(528,""));return O}if(u&&g!==null)throw Error(r(529,""));return null;case"script":return u=m.async,m=m.src,typeof m=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=ru(m),m=Sl(v).hoistableScripts,g=m.get(u),g||(g={type:"script",instance:null,count:0,state:null},m.set(u,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function nu(o){return'href="'+vi(o)+'"'}function Qc(o){return'link[rel="stylesheet"]['+o+"]"}function D_(o){return p({},o,{"data-precedence":o.precedence,precedence:null})}function EB(o,u,m,g){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?g.loading=1:(u=o.createElement("link"),g.preload=u,u.addEventListener("load",function(){return g.loading|=1}),u.addEventListener("error",function(){return g.loading|=2}),rr(u,"link",m),zn(u),o.head.appendChild(u))}function ru(o){return'[src="'+vi(o)+'"]'}function Zc(o){return"script[async]"+o}function R_(o,u,m){if(u.count++,u.instance===null)switch(u.type){case"style":var g=o.querySelector('style[data-href~="'+vi(m.href)+'"]');if(g)return u.instance=g,zn(g),g;var v=p({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),zn(g),rr(g,"style",v),Jf(g,m.precedence,o),u.instance=g;case"stylesheet":v=nu(m.href);var S=o.querySelector(Qc(v));if(S)return u.state.loading|=4,u.instance=S,zn(S),S;g=D_(m),(v=Ci.get(v))&&yy(g,v),S=(o.ownerDocument||o).createElement("link"),zn(S);var O=S;return O._p=new Promise(function(L,G){O.onload=L,O.onerror=G}),rr(S,"link",g),u.state.loading|=4,Jf(S,m.precedence,o),u.instance=S;case"script":return S=ru(m.src),(v=o.querySelector(Zc(S)))?(u.instance=v,zn(v),v):(g=m,(v=Ci.get(S))&&(g=p({},m),xy(g,v)),o=o.ownerDocument||o,v=o.createElement("script"),zn(v),rr(v,"link",g),o.head.appendChild(v),u.instance=v);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(g=u.instance,u.state.loading|=4,Jf(g,m.precedence,o));return u.instance}function Jf(o,u,m){for(var g=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,S=v,O=0;O<g.length;O++){var L=g[O];if(L.dataset.precedence===u)S=L;else if(S!==v)break}S?S.parentNode.insertBefore(o,S.nextSibling):(u=m.nodeType===9?m.head:m,u.insertBefore(o,u.firstChild))}function yy(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function xy(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var em=null;function I_(o,u,m){if(em===null){var g=new Map,v=em=new Map;v.set(m,g)}else v=em,g=v.get(m),g||(g=new Map,v.set(m,g));if(g.has(o))return g;for(g.set(o,null),m=m.getElementsByTagName(o),v=0;v<m.length;v++){var S=m[v];if(!(S[mc]||S[Jn]||o==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var O=S.getAttribute(u)||"";O=o+O;var L=g.get(O);L?L.push(S):g.set(O,[S])}}return g}function L_(o,u,m){o=o.ownerDocument||o,o.head.insertBefore(m,u==="title"?o.querySelector("head > title"):null)}function AB(o,u,m){if(m===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function M_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function SB(o,u,m,g){if(m.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var v=nu(g.href),S=u.querySelector(Qc(v));if(S){u=S._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=tm.bind(o),u.then(o,o)),m.state.loading|=4,m.instance=S,zn(S);return}S=u.ownerDocument||u,g=D_(g),(v=Ci.get(v))&&yy(g,v),S=S.createElement("link"),zn(S);var O=S;O._p=new Promise(function(L,G){O.onload=L,O.onerror=G}),rr(S,"link",g),m.instance=S}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(m,u),(u=m.state.preload)&&(m.state.loading&3)===0&&(o.count++,m=tm.bind(o),u.addEventListener("load",m),u.addEventListener("error",m))}}var vy=0;function TB(o,u){return o.stylesheets&&o.count===0&&rm(o,o.stylesheets),0<o.count||0<o.imgCount?function(m){var g=setTimeout(function(){if(o.stylesheets&&rm(o,o.stylesheets),o.unsuspend){var S=o.unsuspend;o.unsuspend=null,S()}},6e4+u);0<o.imgBytes&&vy===0&&(vy=62500*aB());var v=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&rm(o,o.stylesheets),o.unsuspend)){var S=o.unsuspend;o.unsuspend=null,S()}},(o.imgBytes>vy?50:800)+u);return o.unsuspend=m,function(){o.unsuspend=null,clearTimeout(g),clearTimeout(v)}}:null}function tm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var nm=null;function rm(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,nm=new Map,u.forEach(_B,o),nm=null,tm.call(o))}function _B(o,u){if(!(u.state.loading&4)){var m=nm.get(o);if(m)var g=m.get(null);else{m=new Map,nm.set(o,m);for(var v=o.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var O=v[S];(O.nodeName==="LINK"||O.getAttribute("media")!=="not all")&&(m.set(O.dataset.precedence,O),g=O)}g&&m.set(null,g)}v=u.instance,O=v.getAttribute("data-precedence"),S=m.get(O)||g,S===g&&m.set(null,v),m.set(O,v),this.count++,g=tm.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),S?S.parentNode.insertBefore(v,S.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(v,o.firstChild)),u.state.loading|=4}}var Jc={$$typeof:N,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function NB(o,u,m,g,v,S,O,L,G){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=p0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p0(0),this.hiddenUpdates=p0(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function B_(o,u,m,g,v,S,O,L,G,fe,Te,Ce){return o=new NB(o,u,m,O,G,fe,Te,Ce,L),u=1,S===!0&&(u|=24),S=ni(3,null,null,u),o.current=S,S.stateNode=o,u=J0(),u.refCount++,o.pooledCache=u,u.refCount++,S.memoizedState={element:g,isDehydrated:m,cache:u},rb(S),o}function F_(o){return o?(o=Rl,o):Rl}function U_(o,u,m,g,v,S){v=F_(v),g.context===null?g.context=v:g.pendingContext=v,g=Ps(u),g.payload={element:m},S=S===void 0?null:S,S!==null&&(g.callback=S),m=Ds(o,g,u),m!==null&&(Br(m,o,u),jc(m,o,u))}function H_(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function wy(o,u){H_(o,u),(o=o.alternate)&&H_(o,u)}function z_(o){if(o.tag===13||o.tag===31){var u=wo(o,67108864);u!==null&&Br(u,o,67108864),wy(o,67108864)}}function $_(o){if(o.tag===13||o.tag===31){var u=oi();u=g0(u);var m=wo(o,u);m!==null&&Br(m,o,u),wy(o,u)}}var im=!0;function CB(o,u,m,g){var v=R.T;R.T=null;var S=B.p;try{B.p=2,Ey(o,u,m,g)}finally{B.p=S,R.T=v}}function OB(o,u,m,g){var v=R.T;R.T=null;var S=B.p;try{B.p=8,Ey(o,u,m,g)}finally{B.p=S,R.T=v}}function Ey(o,u,m,g){if(im){var v=Ay(g);if(v===null)ly(o,u,g,am,m),Y_(o,g);else if(jB(v,o,u,m,g))g.stopPropagation();else if(Y_(o,g),u&4&&-1<kB.indexOf(o)){for(;v!==null;){var S=Al(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var O=dr(S.pendingLanes);if(O!==0){var L=S;for(L.pendingLanes|=2,L.entangledLanes|=2;O;){var G=1<<31-_e(O);L.entanglements[1]|=G,O&=~G}la(S),(Dt&6)===0&&(Hf=We()+500,Gc(0))}}break;case 31:case 13:L=wo(S,2),L!==null&&Br(L,S,2),$f(),wy(S,2)}if(S=Ay(g),S===null&&ly(o,u,g,am,m),S===v)break;v=S}v!==null&&g.stopPropagation()}else ly(o,u,g,null,m)}}function Ay(o){return o=T0(o),Sy(o)}var am=null;function Sy(o){if(am=null,o=El(o),o!==null){var u=a(o);if(u===null)o=null;else{var m=u.tag;if(m===13){if(o=s(u),o!==null)return o;o=null}else if(m===31){if(o=l(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return am=o,null}function q_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ae()){case ne:return 2;case we:return 8;case Le:case Ke:return 32;case ot:return 268435456;default:return 32}default:return 32}}var Ty=!1,qs=null,Ys=null,Vs=null,ed=new Map,td=new Map,Gs=[],kB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Y_(o,u){switch(o){case"focusin":case"focusout":qs=null;break;case"dragenter":case"dragleave":Ys=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":ed.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":td.delete(u.pointerId)}}function nd(o,u,m,g,v,S){return o===null||o.nativeEvent!==S?(o={blockedOn:u,domEventName:m,eventSystemFlags:g,nativeEvent:S,targetContainers:[v]},u!==null&&(u=Al(u),u!==null&&z_(u)),o):(o.eventSystemFlags|=g,u=o.targetContainers,v!==null&&u.indexOf(v)===-1&&u.push(v),o)}function jB(o,u,m,g,v){switch(u){case"focusin":return qs=nd(qs,o,u,m,g,v),!0;case"dragenter":return Ys=nd(Ys,o,u,m,g,v),!0;case"mouseover":return Vs=nd(Vs,o,u,m,g,v),!0;case"pointerover":var S=v.pointerId;return ed.set(S,nd(ed.get(S)||null,o,u,m,g,v)),!0;case"gotpointercapture":return S=v.pointerId,td.set(S,nd(td.get(S)||null,o,u,m,g,v)),!0}return!1}function V_(o){var u=El(o.target);if(u!==null){var m=a(u);if(m!==null){if(u=m.tag,u===13){if(u=s(m),u!==null){o.blockedOn=u,sA(o.priority,function(){$_(m)});return}}else if(u===31){if(u=l(m),u!==null){o.blockedOn=u,sA(o.priority,function(){$_(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function sm(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=Ay(o.nativeEvent);if(m===null){m=o.nativeEvent;var g=new m.constructor(m.type,m);S0=g,m.target.dispatchEvent(g),S0=null}else return u=Al(m),u!==null&&z_(u),o.blockedOn=m,!1;u.shift()}return!0}function G_(o,u,m){sm(o)&&m.delete(u)}function PB(){Ty=!1,qs!==null&&sm(qs)&&(qs=null),Ys!==null&&sm(Ys)&&(Ys=null),Vs!==null&&sm(Vs)&&(Vs=null),ed.forEach(G_),td.forEach(G_)}function om(o,u){o.blockedOn===u&&(o.blockedOn=null,Ty||(Ty=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,PB)))}var lm=null;function W_(o){lm!==o&&(lm=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){lm===o&&(lm=null);for(var u=0;u<o.length;u+=3){var m=o[u],g=o[u+1],v=o[u+2];if(typeof g!="function"){if(Sy(g||m)===null)continue;break}var S=Al(m);S!==null&&(o.splice(u,3),u-=3,Ab(S,{pending:!0,data:v,method:m.method,action:g},g,v))}}))}function iu(o){function u(G){return om(G,o)}qs!==null&&om(qs,o),Ys!==null&&om(Ys,o),Vs!==null&&om(Vs,o),ed.forEach(u),td.forEach(u);for(var m=0;m<Gs.length;m++){var g=Gs[m];g.blockedOn===o&&(g.blockedOn=null)}for(;0<Gs.length&&(m=Gs[0],m.blockedOn===null);)V_(m),m.blockedOn===null&&Gs.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(g=0;g<m.length;g+=3){var v=m[g],S=m[g+1],O=v[Pr]||null;if(typeof S=="function")O||W_(m);else if(O){var L=null;if(S&&S.hasAttribute("formAction")){if(v=S,O=S[Pr]||null)L=O.formAction;else if(Sy(v)!==null)continue}else L=O.action;typeof L=="function"?m[g+1]=L:(m.splice(g,3),g-=3),W_(m)}}}function X_(){function o(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(O){return v=O})},focusReset:"manual",scroll:"manual"})}function u(){v!==null&&(v(),v=null),g||setTimeout(m,20)}function m(){if(!g&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,v=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(m,100),function(){g=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),v!==null&&(v(),v=null)}}}function _y(o){this._internalRoot=o}um.prototype.render=_y.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var m=u.current,g=oi();U_(m,g,o,u,null,null)},um.prototype.unmount=_y.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;U_(o.current,2,null,o,null,null),$f(),u[wl]=null}};function um(o){this._internalRoot=o}um.prototype.unstable_scheduleHydration=function(o){if(o){var u=aA();o={blockedOn:null,target:o,priority:u};for(var m=0;m<Gs.length&&u!==0&&u<Gs[m].priority;m++);Gs.splice(m,0,o),m===0&&V_(o)}};var K_=e.version;if(K_!=="19.2.0")throw Error(r(527,K_,"19.2.0"));B.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=d(u),o=o!==null?h(o):null,o=o===null?null:o.stateNode,o};var DB={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{pe=cm.inject(DB),ke=cm}catch{}}return id.createRoot=function(o,u){if(!i(o))throw Error(r(299));var m=!1,g="",v=rT,S=iT,O=aT;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(O=u.onRecoverableError)),u=B_(o,1,!1,null,null,m,g,null,v,S,O,X_),o[wl]=u.current,oy(o),new _y(u)},id.hydrateRoot=function(o,u,m){if(!i(o))throw Error(r(299));var g=!1,v="",S=rT,O=iT,L=aT,G=null;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(v=m.identifierPrefix),m.onUncaughtError!==void 0&&(S=m.onUncaughtError),m.onCaughtError!==void 0&&(O=m.onCaughtError),m.onRecoverableError!==void 0&&(L=m.onRecoverableError),m.formState!==void 0&&(G=m.formState)),u=B_(o,1,!0,u,m??null,g,v,G,S,O,L,X_),u.context=F_(null),m=u.current,g=oi(),g=g0(g),v=Ps(g),v.callback=null,Ds(m,v,g),m=g,u.current.lanes=m,fc(u,m),la(u),o[wl]=u.current,oy(o),new um(u)},id.version="19.2.0",id}var lN;function qB(){if(lN)return ky.exports;lN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ky.exports=$B(),ky.exports}var YB=qB();/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var uN="popstate";function VB(t={}){function e(r,i){let{pathname:a,search:s,hash:l}=r.location;return V1("",{pathname:a,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gd(i)}return WB(e,n,null,t)}function dn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ui(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GB(){return Math.random().toString(36).substring(2,10)}function cN(t,e){return{usr:t.state,key:t.key,idx:e}}function V1(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Yu(e):e,state:n,key:e&&e.key||r||GB()}}function Gd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Yu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function WB(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,s=i.history,l="POP",c=null,d=h();d==null&&(d=0,s.replaceState({...s.state,idx:d},""));function h(){return(s.state||{idx:null}).idx}function p(){l="POP";let E=h(),T=E==null?null:E-d;d=E,c&&c({action:l,location:w.location,delta:T})}function b(E,T){l="PUSH";let C=V1(w.location,E,T);d=h()+1;let N=cN(C,d),P=w.createHref(C);try{s.pushState(N,"",P)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(P)}a&&c&&c({action:l,location:w.location,delta:1})}function y(E,T){l="REPLACE";let C=V1(w.location,E,T);d=h();let N=cN(C,d),P=w.createHref(C);s.replaceState(N,"",P),a&&c&&c({action:l,location:w.location,delta:0})}function x(E){return XB(E)}let w={get action(){return l},get location(){return t(i,s)},listen(E){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(uN,p),c=E,()=>{i.removeEventListener(uN,p),c=null}},createHref(E){return e(i,E)},createURL:x,encodeLocation(E){let T=x(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:y,go(E){return s.go(E)}};return w}function XB(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),dn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Gd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function kP(t,e,n="/"){return KB(t,e,n,!1)}function KB(t,e,n,r){let i=typeof e=="string"?Yu(e):e,a=ls(i.pathname||"/",n);if(a==null)return null;let s=jP(t);QB(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let d=lF(a);l=sF(s[c],d,r)}return l}function jP(t,e=[],n=[],r="",i=!1){let a=(s,l,c=i,d)=>{let h={relativePath:d===void 0?s.path||"":d,caseSensitive:s.caseSensitive===!0,childrenIndex:l,route:s};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;dn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let p=as([r,h.relativePath]),b=n.concat(h);s.children&&s.children.length>0&&(dn(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),jP(s.children,e,b,p,c)),!(s.path==null&&!s.index)&&e.push({path:p,score:iF(p,s.index),routesMeta:b})};return t.forEach((s,l)=>{if(s.path===""||!s.path?.includes("?"))a(s,l);else for(let c of PP(s.path))a(s,l,!0,c)}),e}function PP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let s=PP(r.join("/")),l=[];return l.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...s),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function QB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var ZB=/^:[\w-]+$/,JB=3,eF=2,tF=1,nF=10,rF=-2,dN=t=>t==="*";function iF(t,e){let n=t.split("/"),r=n.length;return n.some(dN)&&(r+=rF),e&&(r+=eF),n.filter(i=>!dN(i)).reduce((i,a)=>i+(ZB.test(a)?JB:a===""?tF:nF),r)}function aF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sF(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",s=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=ap({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),b=c.route;if(!p&&d&&n&&!r[r.length-1].route.index&&(p=ap({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:as([a,p.pathname]),pathnameBase:hF(as([a,p.pathnameBase])),route:b}),p.pathnameBase!=="/"&&(a=as([a,p.pathnameBase]))}return s}function ap(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oF(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:p},b)=>{if(h==="*"){let x=l[b]||"";s=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const y=l[b];return p&&!y?d[h]=void 0:d[h]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:s,pattern:t}}function oF(t,e=!1,n=!0){Ui(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function lF(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ui(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ls(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function uF(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Yu(t):t;return{pathname:n?n.startsWith("/")?n:cF(n,e):e,search:fF(r),hash:mF(i)}}function cF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ry(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function dF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kw(t){let e=dF(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function jw(t,e,n,r=!1){let i;typeof t=="string"?i=Yu(t):(i={...t},dn(!i.pathname||!i.pathname.includes("?"),Ry("?","pathname","search",i)),dn(!i.pathname||!i.pathname.includes("#"),Ry("#","pathname","hash",i)),dn(!i.search||!i.search.includes("#"),Ry("#","search","hash",i)));let a=t===""||i.pathname==="",s=a?"/":i.pathname,l;if(s==null)l=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let b=s.split("/");for(;b[0]==="..";)b.shift(),p-=1;i.pathname=b.join("/")}l=p>=0?e[p]:"/"}let c=uF(i,l),d=s&&s!=="/"&&s.endsWith("/"),h=(a||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var as=t=>t.join("/").replace(/\/\/+/g,"/"),hF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var DP=["POST","PUT","PATCH","DELETE"];new Set(DP);var gF=["GET",...DP];new Set(gF);var Vu=A.createContext(null);Vu.displayName="DataRouter";var ug=A.createContext(null);ug.displayName="DataRouterState";A.createContext(!1);var RP=A.createContext({isTransitioning:!1});RP.displayName="ViewTransition";var bF=A.createContext(new Map);bF.displayName="Fetchers";var yF=A.createContext(null);yF.displayName="Await";var ea=A.createContext(null);ea.displayName="Navigation";var vh=A.createContext(null);vh.displayName="Location";var ta=A.createContext({outlet:null,matches:[],isDataRoute:!1});ta.displayName="Route";var Pw=A.createContext(null);Pw.displayName="RouteError";function xF(t,{relative:e}={}){dn(Gu(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(ea),{hash:i,pathname:a,search:s}=wh(t,{relative:e}),l=a;return n!=="/"&&(l=a==="/"?n:as([n,a])),r.createHref({pathname:l,search:s,hash:i})}function Gu(){return A.useContext(vh)!=null}function ps(){return dn(Gu(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(vh).location}var IP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LP(t){A.useContext(ea).static||A.useLayoutEffect(t)}function qi(){let{isDataRoute:t}=A.useContext(ta);return t?PF():vF()}function vF(){dn(Gu(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(Vu),{basename:e,navigator:n}=A.useContext(ea),{matches:r}=A.useContext(ta),{pathname:i}=ps(),a=JSON.stringify(kw(r)),s=A.useRef(!1);return LP(()=>{s.current=!0}),A.useCallback((c,d={})=>{if(Ui(s.current,IP),!s.current)return;if(typeof c=="number"){n.go(c);return}let h=jw(c,JSON.parse(a),i,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:as([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,a,i,t])}A.createContext(null);function MP(){let{matches:t}=A.useContext(ta),e=t[t.length-1];return e?e.params:{}}function wh(t,{relative:e}={}){let{matches:n}=A.useContext(ta),{pathname:r}=ps(),i=JSON.stringify(kw(n));return A.useMemo(()=>jw(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function wF(t,e){return BP(t,e)}function BP(t,e,n,r,i){dn(Gu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=A.useContext(ea),{matches:s}=A.useContext(ta),l=s[s.length-1],c=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",p=l&&l.route;{let C=p&&p.path||"";FP(d,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let b=ps(),y;if(e){let C=typeof e=="string"?Yu(e):e;dn(h==="/"||C.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${C.pathname}" was given in the \`location\` prop.`),y=C}else y=b;let x=y.pathname||"/",w=x;if(h!=="/"){let C=h.replace(/^\//,"").split("/");w="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=kP(t,{pathname:w});Ui(p||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Ui(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=_F(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:as([h,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?h:as([h,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),s,n,r,i);return e&&T?A.createElement(vh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function EF(){let t=jF(),e=pF(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,s)}var AF=A.createElement(EF,null),SF=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement(ta.Provider,{value:this.props.routeContext},A.createElement(Pw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function TF({routeContext:t,match:e,children:n}){let r=A.useContext(Vu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(ta.Provider,{value:t},n)}function _F(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,s=n?.errors;if(s!=null){let d=a.findIndex(h=>h.route.id&&s?.[h.route.id]!==void 0);dn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<a.length;d++){let h=a[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=d),h.route.id){let{loaderData:p,errors:b}=n,y=h.route.loader&&!p.hasOwnProperty(h.route.id)&&(!b||b[h.route.id]===void 0);if(h.route.lazy||y){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((d,h,p)=>{let b,y=!1,x=null,w=null;n&&(b=s&&h.route.id?s[h.route.id]:void 0,x=h.route.errorElement||AF,l&&(c<0&&p===0?(FP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):c===p&&(y=!0,w=h.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,p+1)),T=()=>{let C;return b?C=x:y?C=w:h.route.Component?C=A.createElement(h.route.Component,null):h.route.element?C=h.route.element:C=d,A.createElement(TF,{match:h,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:C})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?A.createElement(SF,{location:n.location,revalidation:n.revalidation,component:x,error:b,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0},unstable_onError:r}):T()},null)}function Dw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NF(t){let e=A.useContext(Vu);return dn(e,Dw(t)),e}function CF(t){let e=A.useContext(ug);return dn(e,Dw(t)),e}function OF(t){let e=A.useContext(ta);return dn(e,Dw(t)),e}function Rw(t){let e=OF(t),n=e.matches[e.matches.length-1];return dn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function kF(){return Rw("useRouteId")}function jF(){let t=A.useContext(Pw),e=CF("useRouteError"),n=Rw("useRouteError");return t!==void 0?t:e.errors?.[n]}function PF(){let{router:t}=NF("useNavigate"),e=Rw("useNavigate"),n=A.useRef(!1);return LP(()=>{n.current=!0}),A.useCallback(async(i,a={})=>{Ui(n.current,IP),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var hN={};function FP(t,e,n){!e&&!hN[t]&&(hN[t]=!0,Ui(!1,n))}A.memo(DF);function DF({routes:t,future:e,state:n,unstable_onError:r}){return BP(t,void 0,n,r,e)}function RF({to:t,replace:e,state:n,relative:r}){dn(Gu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=A.useContext(ea);Ui(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=A.useContext(ta),{pathname:s}=ps(),l=qi(),c=jw(t,kw(a),s,r==="path"),d=JSON.stringify(c);return A.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:r})},[l,d,r,e,n]),null}function qn(t){dn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function IF({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){dn(!Gu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=t.replace(/^\/*/,"/"),l=A.useMemo(()=>({basename:s,navigator:i,static:a,future:{}}),[s,i,a]);typeof n=="string"&&(n=Yu(n));let{pathname:c="/",search:d="",hash:h="",state:p=null,key:b="default"}=n,y=A.useMemo(()=>{let x=ls(c,s);return x==null?null:{location:{pathname:x,search:d,hash:h,state:p,key:b},navigationType:r}},[s,c,d,h,p,b,r]);return Ui(y!=null,`<Router basename="${s}"> is not able to match the URL "${c}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:A.createElement(ea.Provider,{value:l},A.createElement(vh.Provider,{children:e,value:y}))}function LF({children:t,location:e}){return wF(G1(t),e)}function G1(t,e=[]){let n=[];return A.Children.forEach(t,(r,i)=>{if(!A.isValidElement(r))return;let a=[...e,i];if(r.type===A.Fragment){n.push.apply(n,G1(r.props.children,a));return}dn(r.type===qn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),dn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=G1(r.props.children,a)),n.push(s)}),n}var $m="get",qm="application/x-www-form-urlencoded";function cg(t){return t!=null&&typeof t.tagName=="string"}function MF(t){return cg(t)&&t.tagName.toLowerCase()==="button"}function BF(t){return cg(t)&&t.tagName.toLowerCase()==="form"}function FF(t){return cg(t)&&t.tagName.toLowerCase()==="input"}function UF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function HF(t,e){return t.button===0&&(!e||e==="_self")&&!UF(t)}function W1(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function zF(t,e){let n=W1(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var dm=null;function $F(){if(dm===null)try{new FormData(document.createElement("form"),0),dm=!1}catch{dm=!0}return dm}var qF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Iy(t){return t!=null&&!qF.has(t)?(Ui(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qm}"`),null):t}function YF(t,e){let n,r,i,a,s;if(BF(t)){let l=t.getAttribute("action");r=l?ls(l,e):null,n=t.getAttribute("method")||$m,i=Iy(t.getAttribute("enctype"))||qm,a=new FormData(t)}else if(MF(t)||FF(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?ls(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||$m,i=Iy(t.getAttribute("formenctype"))||Iy(l.getAttribute("enctype"))||qm,a=new FormData(l,t),!$F()){let{name:d,type:h,value:p}=t;if(h==="image"){let b=d?`${d}.`:"";a.append(`${b}x`,"0"),a.append(`${b}y`,"0")}else d&&a.append(d,p)}}else{if(cg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=$m,r=null,i=qm,s=t}return a&&i==="text/plain"&&(s=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Iw(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function VF(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&ls(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function GF(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function WF(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function XF(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let s=await GF(a,n);return s.links?s.links():[]}return[]}));return JF(r.flat(1).filter(WF).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function fN(t,e,n,r,i,a){let s=(c,d)=>n[d]?c.route.id!==n[d].route.id:!0,l=(c,d)=>n[d].pathname!==c.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==c.params["*"];return a==="assets"?e.filter((c,d)=>s(c,d)||l(c,d)):a==="data"?e.filter((c,d)=>{let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(s(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function KF(t,e,{includeHydrateFallback:n}={}){return QF(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function QF(t){return[...new Set(t)]}function ZF(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function JF(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(ZF(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function UP(){let t=A.useContext(Vu);return Iw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function eU(){let t=A.useContext(ug);return Iw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Lw=A.createContext(void 0);Lw.displayName="FrameworkContext";function HP(){let t=A.useContext(Lw);return Iw(t,"You must render this element inside a <HydratedRouter> element"),t}function tU(t,e){let n=A.useContext(Lw),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,b=A.useRef(null);A.useEffect(()=>{if(t==="render"&&s(!0),t==="viewport"){let w=T=>{T.forEach(C=>{s(C.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return b.current&&E.observe(b.current),()=>{E.disconnect()}}},[t]),A.useEffect(()=>{if(r){let w=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(w)}}},[r]);let y=()=>{i(!0)},x=()=>{i(!1),s(!1)};return n?t!=="intent"?[a,b,{}]:[a,b,{onFocus:ad(l,y),onBlur:ad(c,x),onMouseEnter:ad(d,y),onMouseLeave:ad(h,x),onTouchStart:ad(p,y)}]:[!1,b,{}]}function ad(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function nU({page:t,...e}){let{router:n}=UP(),r=A.useMemo(()=>kP(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(iU,{page:t,matches:r,...e}):null}function rU(t){let{manifest:e,routeModules:n}=HP(),[r,i]=A.useState([]);return A.useEffect(()=>{let a=!1;return XF(t,e,n).then(s=>{a||i(s)}),()=>{a=!0}},[t,e,n]),r}function iU({page:t,matches:e,...n}){let r=ps(),{manifest:i,routeModules:a}=HP(),{basename:s}=UP(),{loaderData:l,matches:c}=eU(),d=A.useMemo(()=>fN(t,e,c,i,r,"data"),[t,e,c,i,r]),h=A.useMemo(()=>fN(t,e,c,i,r,"assets"),[t,e,c,i,r]),p=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let x=new Set,w=!1;if(e.forEach(T=>{let C=i.routes[T.route.id];!C||!C.hasLoader||(!d.some(N=>N.route.id===T.route.id)&&T.route.id in l&&a[T.route.id]?.shouldRevalidate||C.hasClientLoader?w=!0:x.add(T.route.id))}),x.size===0)return[];let E=VF(t,s,"data");return w&&x.size>0&&E.searchParams.set("_routes",e.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[E.pathname+E.search]},[s,l,r,i,d,e,t,a]),b=A.useMemo(()=>KF(h,i),[h,i]),y=rU(h);return A.createElement(A.Fragment,null,p.map(x=>A.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...n})),b.map(x=>A.createElement("link",{key:x,rel:"modulepreload",href:x,...n})),y.map(({key:x,link:w})=>A.createElement("link",{key:x,nonce:n.nonce,...w})))}function aU(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var zP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{zP&&(window.__reactRouterVersion="7.9.5")}catch{}function sU({basename:t,children:e,window:n}){let r=A.useRef();r.current==null&&(r.current=VB({window:n,v5Compat:!0}));let i=r.current,[a,s]=A.useState({action:i.action,location:i.location}),l=A.useCallback(c=>{A.startTransition(()=>s(c))},[s]);return A.useLayoutEffect(()=>i.listen(l),[i,l]),A.createElement(IF,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var $P=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qP=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:s,state:l,target:c,to:d,preventScrollReset:h,viewTransition:p,...b},y){let{basename:x}=A.useContext(ea),w=typeof d=="string"&&$P.test(d),E,T=!1;if(typeof d=="string"&&w&&(E=d,zP))try{let Y=new URL(window.location.href),X=d.startsWith("//")?new URL(Y.protocol+d):new URL(d),z=ls(X.pathname,x);X.origin===Y.origin&&z!=null?d=z+X.search+X.hash:T=!0}catch{Ui(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=xF(d,{relative:i}),[N,P,k]=tU(r,b),j=cU(d,{replace:s,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:p});function D(Y){e&&e(Y),Y.defaultPrevented||j(Y)}let H=A.createElement("a",{...b,...k,href:E||C,onClick:T||a?e:D,ref:aU(y,P),target:c,"data-discover":!w&&n==="render"?"true":void 0});return N&&!w?A.createElement(A.Fragment,null,H,A.createElement(nU,{page:C})):H});qP.displayName="Link";var oU=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:s,viewTransition:l,children:c,...d},h){let p=wh(s,{relative:d.relative}),b=ps(),y=A.useContext(ug),{navigator:x,basename:w}=A.useContext(ea),E=y!=null&&gU(p)&&l===!0,T=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,C=b.pathname,N=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(C=C.toLowerCase(),N=N?N.toLowerCase():null,T=T.toLowerCase()),N&&w&&(N=ls(N,w)||N);const P=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let k=C===T||!i&&C.startsWith(T)&&C.charAt(P)==="/",j=N!=null&&(N===T||!i&&N.startsWith(T)&&N.charAt(T.length)==="/"),D={isActive:k,isPending:j,isTransitioning:E},H=k?e:void 0,Y;typeof r=="function"?Y=r(D):Y=[r,k?"active":null,j?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let X=typeof a=="function"?a(D):a;return A.createElement(qP,{...d,"aria-current":H,className:Y,ref:h,style:X,to:s,viewTransition:l},typeof c=="function"?c(D):c)});oU.displayName="NavLink";var lU=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:s=$m,action:l,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:p,...b},y)=>{let x=mU(),w=pU(l,{relative:d}),E=s.toLowerCase()==="get"?"get":"post",T=typeof l=="string"&&$P.test(l),C=N=>{if(c&&c(N),N.defaultPrevented)return;N.preventDefault();let P=N.nativeEvent.submitter,k=P?.getAttribute("formmethod")||s;x(P||N.currentTarget,{fetcherKey:e,method:k,navigate:n,replace:i,state:a,relative:d,preventScrollReset:h,viewTransition:p})};return A.createElement("form",{ref:y,method:E,action:w,onSubmit:r?c:C,...b,"data-discover":!T&&t==="render"?"true":void 0})});lU.displayName="Form";function uU(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YP(t){let e=A.useContext(Vu);return dn(e,uU(t)),e}function cU(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s}={}){let l=qi(),c=ps(),d=wh(t,{relative:a});return A.useCallback(h=>{if(HF(h,e)){h.preventDefault();let p=n!==void 0?n:Gd(c)===Gd(d);l(t,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:s})}},[c,l,d,n,r,e,t,i,a,s])}function dU(t){Ui(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=A.useRef(W1(t)),n=A.useRef(!1),r=ps(),i=A.useMemo(()=>zF(r.search,n.current?null:e.current),[r.search]),a=qi(),s=A.useCallback((l,c)=>{const d=W1(typeof l=="function"?l(new URLSearchParams(i)):l);n.current=!0,a("?"+d,c)},[a,i]);return[i,s]}var hU=0,fU=()=>`__${String(++hU)}__`;function mU(){let{router:t}=YP("useSubmit"),{basename:e}=A.useContext(ea),n=kF();return A.useCallback(async(r,i={})=>{let{action:a,method:s,encType:l,formData:c,body:d}=YF(r,e);if(i.navigate===!1){let h=i.fetcherKey||fU();await t.fetch(h,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||s,formEncType:i.encType||l,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||s,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function pU(t,{relative:e}={}){let{basename:n}=A.useContext(ea),r=A.useContext(ta);dn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...wh(t||".",{relative:e})},s=ps();if(t==null){a.search=s.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(h=>h==="")){l.delete("index"),c.filter(p=>p).forEach(p=>l.append("index",p));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:as([n,a.pathname])),Gd(a)}function gU(t,{relative:e}={}){let n=A.useContext(RP);dn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=YP("useViewTransitionState"),i=wh(t,{relative:e});if(!n.isTransitioning)return!1;let a=ls(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=ls(n.nextLocation.pathname,r)||n.nextLocation.pathname;return ap(i.pathname,s)!=null||ap(i.pathname,a)!=null}var Mw=OP();function VP(t,e){return function(){return t.apply(e,arguments)}}const{toString:bU}=Object.prototype,{getPrototypeOf:Bw}=Object,{iterator:dg,toStringTag:GP}=Symbol,hg=(t=>e=>{const n=bU.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),na=t=>(t=t.toLowerCase(),e=>hg(e)===t),fg=t=>e=>typeof e===t,{isArray:Wu}=Array,Du=fg("undefined");function Eh(t){return t!==null&&!Du(t)&&t.constructor!==null&&!Du(t.constructor)&&Xr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const WP=na("ArrayBuffer");function yU(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&WP(t.buffer),e}const xU=fg("string"),Xr=fg("function"),XP=fg("number"),Ah=t=>t!==null&&typeof t=="object",vU=t=>t===!0||t===!1,Ym=t=>{if(hg(t)!=="object")return!1;const e=Bw(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(GP in t)&&!(dg in t)},wU=t=>{if(!Ah(t)||Eh(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},EU=na("Date"),AU=na("File"),SU=na("Blob"),TU=na("FileList"),_U=t=>Ah(t)&&Xr(t.pipe),NU=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Xr(t.append)&&((e=hg(t))==="formdata"||e==="object"&&Xr(t.toString)&&t.toString()==="[object FormData]"))},CU=na("URLSearchParams"),[OU,kU,jU,PU]=["ReadableStream","Request","Response","Headers"].map(na),DU=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sh(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Wu(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(Eh(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),s=a.length;let l;for(r=0;r<s;r++)l=a[r],e.call(null,t[l],l,t)}}function KP(t,e){if(Eh(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const Bo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,QP=t=>!Du(t)&&t!==Bo;function X1(){const{caseless:t,skipUndefined:e}=QP(this)&&this||{},n={},r=(i,a)=>{const s=t&&KP(n,a)||a;Ym(n[s])&&Ym(i)?n[s]=X1(n[s],i):Ym(i)?n[s]=X1({},i):Wu(i)?n[s]=i.slice():(!e||!Du(i))&&(n[s]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Sh(arguments[i],r);return n}const RU=(t,e,n,{allOwnKeys:r}={})=>(Sh(e,(i,a)=>{n&&Xr(i)?t[a]=VP(i,n):t[a]=i},{allOwnKeys:r}),t),IU=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),LU=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},MU=(t,e,n,r)=>{let i,a,s;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)s=i[a],(!r||r(s,t,e))&&!l[s]&&(e[s]=t[s],l[s]=!0);t=n!==!1&&Bw(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},BU=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},FU=t=>{if(!t)return null;if(Wu(t))return t;let e=t.length;if(!XP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},UU=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Bw(Uint8Array)),HU=(t,e)=>{const r=(t&&t[dg]).call(t);let i;for(;(i=r.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},zU=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},$U=na("HTMLFormElement"),qU=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),mN=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),YU=na("RegExp"),ZP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Sh(n,(i,a)=>{let s;(s=e(i,a,t))!==!1&&(r[a]=s||i)}),Object.defineProperties(t,r)},VU=t=>{ZP(t,(e,n)=>{if(Xr(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Xr(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},GU=(t,e)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return Wu(t)?r(t):r(String(t).split(e)),n},WU=()=>{},XU=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function KU(t){return!!(t&&Xr(t.append)&&t[GP]==="FormData"&&t[dg])}const QU=t=>{const e=new Array(10),n=(r,i)=>{if(Ah(r)){if(e.indexOf(r)>=0)return;if(Eh(r))return r;if(!("toJSON"in r)){e[i]=r;const a=Wu(r)?[]:{};return Sh(r,(s,l)=>{const c=n(s,i+1);!Du(c)&&(a[l]=c)}),e[i]=void 0,a}}return r};return n(t,0)},ZU=na("AsyncFunction"),JU=t=>t&&(Ah(t)||Xr(t))&&Xr(t.then)&&Xr(t.catch),JP=((t,e)=>t?setImmediate:e?((n,r)=>(Bo.addEventListener("message",({source:i,data:a})=>{i===Bo&&a===n&&r.length&&r.shift()()},!1),i=>{r.push(i),Bo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Xr(Bo.postMessage)),e7=typeof queueMicrotask<"u"?queueMicrotask.bind(Bo):typeof process<"u"&&process.nextTick||JP,t7=t=>t!=null&&Xr(t[dg]),xe={isArray:Wu,isArrayBuffer:WP,isBuffer:Eh,isFormData:NU,isArrayBufferView:yU,isString:xU,isNumber:XP,isBoolean:vU,isObject:Ah,isPlainObject:Ym,isEmptyObject:wU,isReadableStream:OU,isRequest:kU,isResponse:jU,isHeaders:PU,isUndefined:Du,isDate:EU,isFile:AU,isBlob:SU,isRegExp:YU,isFunction:Xr,isStream:_U,isURLSearchParams:CU,isTypedArray:UU,isFileList:TU,forEach:Sh,merge:X1,extend:RU,trim:DU,stripBOM:IU,inherits:LU,toFlatObject:MU,kindOf:hg,kindOfTest:na,endsWith:BU,toArray:FU,forEachEntry:HU,matchAll:zU,isHTMLForm:$U,hasOwnProperty:mN,hasOwnProp:mN,reduceDescriptors:ZP,freezeMethods:VU,toObjectSet:GU,toCamelCase:qU,noop:WU,toFiniteNumber:XU,findKey:KP,global:Bo,isContextDefined:QP,isSpecCompliantForm:KU,toJSONObject:QU,isAsyncFn:ZU,isThenable:JU,setImmediate:JP,asap:e7,isIterable:t7};function pt(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}xe.inherits(pt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.status}}});const eD=pt.prototype,tD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{tD[t]={value:t}});Object.defineProperties(pt,tD);Object.defineProperty(eD,"isAxiosError",{value:!0});pt.from=(t,e,n,r,i,a)=>{const s=Object.create(eD);xe.toFlatObject(t,s,function(h){return h!==Error.prototype},d=>d!=="isAxiosError");const l=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return pt.call(s,l,c,n,r,i),t&&s.cause==null&&Object.defineProperty(s,"cause",{value:t,configurable:!0}),s.name=t&&t.name||"Error",a&&Object.assign(s,a),s};const n7=null;function K1(t){return xe.isPlainObject(t)||xe.isArray(t)}function nD(t){return xe.endsWith(t,"[]")?t.slice(0,-2):t}function pN(t,e,n){return t?t.concat(e).map(function(i,a){return i=nD(i),!n&&a?"["+i+"]":i}).join(n?".":""):e}function r7(t){return xe.isArray(t)&&!t.some(K1)}const i7=xe.toFlatObject(xe,{},null,function(e){return/^is[A-Z]/.test(e)});function mg(t,e,n){if(!xe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=xe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,E){return!xe.isUndefined(E[w])});const r=n.metaTokens,i=n.visitor||h,a=n.dots,s=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(e);if(!xe.isFunction(i))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(xe.isDate(x))return x.toISOString();if(xe.isBoolean(x))return x.toString();if(!c&&xe.isBlob(x))throw new pt("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(x)||xe.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,w,E){let T=x;if(x&&!E&&typeof x=="object"){if(xe.endsWith(w,"{}"))w=r?w:w.slice(0,-2),x=JSON.stringify(x);else if(xe.isArray(x)&&r7(x)||(xe.isFileList(x)||xe.endsWith(w,"[]"))&&(T=xe.toArray(x)))return w=nD(w),T.forEach(function(N,P){!(xe.isUndefined(N)||N===null)&&e.append(s===!0?pN([w],P,a):s===null?w:w+"[]",d(N))}),!1}return K1(x)?!0:(e.append(pN(E,w,a),d(x)),!1)}const p=[],b=Object.assign(i7,{defaultVisitor:h,convertValue:d,isVisitable:K1});function y(x,w){if(!xe.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+w.join("."));p.push(x),xe.forEach(x,function(T,C){(!(xe.isUndefined(T)||T===null)&&i.call(e,T,xe.isString(C)?C.trim():C,w,b))===!0&&y(T,w?w.concat(C):[C])}),p.pop()}}if(!xe.isObject(t))throw new TypeError("data must be an object");return y(t),e}function gN(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Fw(t,e){this._pairs=[],t&&mg(t,this,e)}const rD=Fw.prototype;rD.append=function(e,n){this._pairs.push([e,n])};rD.toString=function(e){const n=e?function(r){return e.call(this,r,gN)}:gN;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function a7(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function iD(t,e,n){if(!e)return t;const r=n&&n.encode||a7;xe.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let a;if(i?a=i(e,n):a=xe.isURLSearchParams(e)?e.toString():new Fw(e,n).toString(r),a){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class bN{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){xe.forEach(this.handlers,function(r){r!==null&&e(r)})}}const aD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s7=typeof URLSearchParams<"u"?URLSearchParams:Fw,o7=typeof FormData<"u"?FormData:null,l7=typeof Blob<"u"?Blob:null,u7={isBrowser:!0,classes:{URLSearchParams:s7,FormData:o7,Blob:l7},protocols:["http","https","file","blob","url","data"]},Uw=typeof window<"u"&&typeof document<"u",Q1=typeof navigator=="object"&&navigator||void 0,c7=Uw&&(!Q1||["ReactNative","NativeScript","NS"].indexOf(Q1.product)<0),d7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",h7=Uw&&window.location.href||"http://localhost",f7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Uw,hasStandardBrowserEnv:c7,hasStandardBrowserWebWorkerEnv:d7,navigator:Q1,origin:h7},Symbol.toStringTag,{value:"Module"})),pr={...f7,...u7};function m7(t,e){return mg(t,new pr.classes.URLSearchParams,{visitor:function(n,r,i,a){return pr.isNode&&xe.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function p7(t){return xe.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function g7(t){const e={},n=Object.keys(t);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],e[a]=t[a];return e}function sD(t){function e(n,r,i,a){let s=n[a++];if(s==="__proto__")return!0;const l=Number.isFinite(+s),c=a>=n.length;return s=!s&&xe.isArray(i)?i.length:s,c?(xe.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!l):((!i[s]||!xe.isObject(i[s]))&&(i[s]=[]),e(n,r,i[s],a)&&xe.isArray(i[s])&&(i[s]=g7(i[s])),!l)}if(xe.isFormData(t)&&xe.isFunction(t.entries)){const n={};return xe.forEachEntry(t,(r,i)=>{e(p7(r),i,n,0)}),n}return null}function b7(t,e,n){if(xe.isString(t))try{return(e||JSON.parse)(t),xe.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Th={transitional:aD,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=xe.isObject(e);if(a&&xe.isHTMLForm(e)&&(e=new FormData(e)),xe.isFormData(e))return i?JSON.stringify(sD(e)):e;if(xe.isArrayBuffer(e)||xe.isBuffer(e)||xe.isStream(e)||xe.isFile(e)||xe.isBlob(e)||xe.isReadableStream(e))return e;if(xe.isArrayBufferView(e))return e.buffer;if(xe.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return m7(e,this.formSerializer).toString();if((l=xe.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return mg(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),b7(e)):e}],transformResponse:[function(e){const n=this.transitional||Th.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(xe.isResponse(e)||xe.isReadableStream(e))return e;if(e&&xe.isString(e)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(l){if(s)throw l.name==="SyntaxError"?pt.from(l,pt.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pr.classes.FormData,Blob:pr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],t=>{Th.headers[t]={}});const y7=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),x7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||e[n]&&y7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},yN=Symbol("internals");function sd(t){return t&&String(t).trim().toLowerCase()}function Vm(t){return t===!1||t==null?t:xe.isArray(t)?t.map(Vm):String(t)}function v7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const w7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ly(t,e,n,r,i){if(xe.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!xe.isString(e)){if(xe.isString(r))return e.indexOf(r)!==-1;if(xe.isRegExp(r))return r.test(e)}}function E7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function A7(t,e){const n=xe.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,a,s){return this[r].call(this,e,i,a,s)},configurable:!0})})}let Kr=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function a(l,c,d){const h=sd(c);if(!h)throw new Error("header name must be a non-empty string");const p=xe.findKey(i,h);(!p||i[p]===void 0||d===!0||d===void 0&&i[p]!==!1)&&(i[p||c]=Vm(l))}const s=(l,c)=>xe.forEach(l,(d,h)=>a(d,h,c));if(xe.isPlainObject(e)||e instanceof this.constructor)s(e,n);else if(xe.isString(e)&&(e=e.trim())&&!w7(e))s(x7(e),n);else if(xe.isObject(e)&&xe.isIterable(e)){let l={},c,d;for(const h of e){if(!xe.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?xe.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}s(l,n)}else e!=null&&a(n,e,r);return this}get(e,n){if(e=sd(e),e){const r=xe.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return v7(i);if(xe.isFunction(n))return n.call(this,i,r);if(xe.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=sd(e),e){const r=xe.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Ly(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function a(s){if(s=sd(s),s){const l=xe.findKey(r,s);l&&(!n||Ly(r,r[l],l,n))&&(delete r[l],i=!0)}}return xe.isArray(e)?e.forEach(a):a(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!e||Ly(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const n=this,r={};return xe.forEach(this,(i,a)=>{const s=xe.findKey(r,a);if(s){n[s]=Vm(i),delete n[a];return}const l=e?E7(a):String(a).trim();l!==a&&delete n[a],n[l]=Vm(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return xe.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&xe.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[yN]=this[yN]={accessors:{}}).accessors,i=this.prototype;function a(s){const l=sd(s);r[l]||(A7(i,s),r[l]=!0)}return xe.isArray(e)?e.forEach(a):a(e),this}};Kr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xe.reduceDescriptors(Kr.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});xe.freezeMethods(Kr);function My(t,e){const n=this||Th,r=e||n,i=Kr.from(r.headers);let a=r.data;return xe.forEach(t,function(l){a=l.call(n,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function oD(t){return!!(t&&t.__CANCEL__)}function Xu(t,e,n){pt.call(this,t??"canceled",pt.ERR_CANCELED,e,n),this.name="CanceledError"}xe.inherits(Xu,pt,{__CANCEL__:!0});function lD(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new pt("Request failed with status code "+n.status,[pt.ERR_BAD_REQUEST,pt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function S7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function T7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,a=0,s;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),h=r[a];s||(s=d),n[i]=c,r[i]=d;let p=a,b=0;for(;p!==i;)b+=n[p++],p=p%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),d-s<e)return;const y=h&&d-h;return y?Math.round(b*1e3/y):void 0}}function _7(t,e){let n=0,r=1e3/e,i,a;const s=(d,h=Date.now())=>{n=h,i=null,a&&(clearTimeout(a),a=null),t(...d)};return[(...d)=>{const h=Date.now(),p=h-n;p>=r?s(d,h):(i=d,a||(a=setTimeout(()=>{a=null,s(i)},r-p)))},()=>i&&s(i)]}const sp=(t,e,n=3)=>{let r=0;const i=T7(50,250);return _7(a=>{const s=a.loaded,l=a.lengthComputable?a.total:void 0,c=s-r,d=i(c),h=s<=l;r=s;const p={loaded:s,total:l,progress:l?s/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-s)/d:void 0,event:a,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(p)},n)},xN=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},vN=t=>(...e)=>xe.asap(()=>t(...e)),N7=pr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,pr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(pr.origin),pr.navigator&&/(msie|trident)/i.test(pr.navigator.userAgent)):()=>!0,C7=pr.hasStandardBrowserEnv?{write(t,e,n,r,i,a,s){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(e)}`];xe.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),xe.isString(r)&&l.push(`path=${r}`),xe.isString(i)&&l.push(`domain=${i}`),a===!0&&l.push("secure"),xe.isString(s)&&l.push(`SameSite=${s}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function O7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function k7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function uD(t,e,n){let r=!O7(e);return t&&(r||n==!1)?k7(t,e):e}const wN=t=>t instanceof Kr?{...t}:t;function rl(t,e){e=e||{};const n={};function r(d,h,p,b){return xe.isPlainObject(d)&&xe.isPlainObject(h)?xe.merge.call({caseless:b},d,h):xe.isPlainObject(h)?xe.merge({},h):xe.isArray(h)?h.slice():h}function i(d,h,p,b){if(xe.isUndefined(h)){if(!xe.isUndefined(d))return r(void 0,d,p,b)}else return r(d,h,p,b)}function a(d,h){if(!xe.isUndefined(h))return r(void 0,h)}function s(d,h){if(xe.isUndefined(h)){if(!xe.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function l(d,h,p){if(p in e)return r(d,h);if(p in t)return r(void 0,d)}const c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(d,h,p)=>i(wN(d),wN(h),p,!0)};return xe.forEach(Object.keys({...t,...e}),function(h){const p=c[h]||i,b=p(t[h],e[h],h);xe.isUndefined(b)&&p!==l||(n[h]=b)}),n}const cD=t=>{const e=rl({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:l}=e;if(e.headers=s=Kr.from(s),e.url=iD(uD(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),xe.isFormData(n)){if(pr.hasStandardBrowserEnv||pr.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(xe.isFunction(n.getHeaders)){const c=n.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([h,p])=>{d.includes(h.toLowerCase())&&s.set(h,p)})}}if(pr.hasStandardBrowserEnv&&(r&&xe.isFunction(r)&&(r=r(e)),r||r!==!1&&N7(e.url))){const c=i&&a&&C7.read(a);c&&s.set(i,c)}return e},j7=typeof XMLHttpRequest<"u",P7=j7&&function(t){return new Promise(function(n,r){const i=cD(t);let a=i.data;const s=Kr.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=i,h,p,b,y,x;function w(){y&&y(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let E=new XMLHttpRequest;E.open(i.method.toUpperCase(),i.url,!0),E.timeout=i.timeout;function T(){if(!E)return;const N=Kr.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:N,config:t,request:E};lD(function(D){n(D),w()},function(D){r(D),w()},k),E=null}"onloadend"in E?E.onloadend=T:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(T)},E.onabort=function(){E&&(r(new pt("Request aborted",pt.ECONNABORTED,t,E)),E=null)},E.onerror=function(P){const k=P&&P.message?P.message:"Network Error",j=new pt(k,pt.ERR_NETWORK,t,E);j.event=P||null,r(j),E=null},E.ontimeout=function(){let P=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||aD;i.timeoutErrorMessage&&(P=i.timeoutErrorMessage),r(new pt(P,k.clarifyTimeoutError?pt.ETIMEDOUT:pt.ECONNABORTED,t,E)),E=null},a===void 0&&s.setContentType(null),"setRequestHeader"in E&&xe.forEach(s.toJSON(),function(P,k){E.setRequestHeader(k,P)}),xe.isUndefined(i.withCredentials)||(E.withCredentials=!!i.withCredentials),l&&l!=="json"&&(E.responseType=i.responseType),d&&([b,x]=sp(d,!0),E.addEventListener("progress",b)),c&&E.upload&&([p,y]=sp(c),E.upload.addEventListener("progress",p),E.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(h=N=>{E&&(r(!N||N.type?new Xu(null,t,E):N),E.abort(),E=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const C=S7(i.url);if(C&&pr.protocols.indexOf(C)===-1){r(new pt("Unsupported protocol "+C+":",pt.ERR_BAD_REQUEST,t));return}E.send(a||null)})},D7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const a=function(d){if(!i){i=!0,l();const h=d instanceof Error?d:this.reason;r.abort(h instanceof pt?h:new Xu(h instanceof Error?h.message:h))}};let s=e&&setTimeout(()=>{s=null,a(new pt(`timeout ${e} of ms exceeded`,pt.ETIMEDOUT))},e);const l=()=>{t&&(s&&clearTimeout(s),s=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),t=null)};t.forEach(d=>d.addEventListener("abort",a));const{signal:c}=r;return c.unsubscribe=()=>xe.asap(l),c}},R7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},I7=async function*(t,e){for await(const n of L7(t))yield*R7(n,e)},L7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},EN=(t,e,n,r)=>{const i=I7(t,e);let a=0,s,l=c=>{s||(s=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await i.next();if(d){l(),c.close();return}let p=h.byteLength;if(n){let b=a+=p;n(b)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},AN=64*1024,{isFunction:hm}=xe,M7=(({Request:t,Response:e})=>({Request:t,Response:e}))(xe.global),{ReadableStream:SN,TextEncoder:TN}=xe.global,_N=(t,...e)=>{try{return!!t(...e)}catch{return!1}},B7=t=>{t=xe.merge.call({skipUndefined:!0},M7,t);const{fetch:e,Request:n,Response:r}=t,i=e?hm(e):typeof fetch=="function",a=hm(n),s=hm(r);if(!i)return!1;const l=i&&hm(SN),c=i&&(typeof TN=="function"?(x=>w=>x.encode(w))(new TN):async x=>new Uint8Array(await new n(x).arrayBuffer())),d=a&&l&&_N(()=>{let x=!1;const w=new n(pr.origin,{body:new SN,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!w}),h=s&&l&&_N(()=>xe.isReadableStream(new r("").body)),p={stream:h&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!p[x]&&(p[x]=(w,E)=>{let T=w&&w[x];if(T)return T.call(w);throw new pt(`Response type '${x}' is not supported`,pt.ERR_NOT_SUPPORT,E)})});const b=async x=>{if(x==null)return 0;if(xe.isBlob(x))return x.size;if(xe.isSpecCompliantForm(x))return(await new n(pr.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(xe.isArrayBufferView(x)||xe.isArrayBuffer(x))return x.byteLength;if(xe.isURLSearchParams(x)&&(x=x+""),xe.isString(x))return(await c(x)).byteLength},y=async(x,w)=>{const E=xe.toFiniteNumber(x.getContentLength());return E??b(w)};return async x=>{let{url:w,method:E,data:T,signal:C,cancelToken:N,timeout:P,onDownloadProgress:k,onUploadProgress:j,responseType:D,headers:H,withCredentials:Y="same-origin",fetchOptions:X}=cD(x),z=e||fetch;D=D?(D+"").toLowerCase():"text";let K=D7([C,N&&N.toAbortSignal()],P),ce=null;const te=K&&K.unsubscribe&&(()=>{K.unsubscribe()});let W;try{if(j&&d&&E!=="get"&&E!=="head"&&(W=await y(H,T))!==0){let U=new n(w,{method:"POST",body:T,duplex:"half"}),Q;if(xe.isFormData(T)&&(Q=U.headers.get("content-type"))&&H.setContentType(Q),U.body){const[I,oe]=xN(W,sp(vN(j)));T=EN(U.body,AN,I,oe)}}xe.isString(Y)||(Y=Y?"include":"omit");const R=a&&"credentials"in n.prototype,B={...X,signal:K,method:E.toUpperCase(),headers:H.normalize().toJSON(),body:T,duplex:"half",credentials:R?Y:void 0};ce=a&&new n(w,B);let re=await(a?z(ce,X):z(w,B));const le=h&&(D==="stream"||D==="response");if(h&&(k||le&&te)){const U={};["status","statusText","headers"].forEach($=>{U[$]=re[$]});const Q=xe.toFiniteNumber(re.headers.get("content-length")),[I,oe]=k&&xN(Q,sp(vN(k),!0))||[];re=new r(EN(re.body,AN,I,()=>{oe&&oe(),te&&te()}),U)}D=D||"text";let M=await p[xe.findKey(p,D)||"text"](re,x);return!le&&te&&te(),await new Promise((U,Q)=>{lD(U,Q,{data:M,headers:Kr.from(re.headers),status:re.status,statusText:re.statusText,config:x,request:ce})})}catch(R){throw te&&te(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new pt("Network Error",pt.ERR_NETWORK,x,ce),{cause:R.cause||R}):pt.from(R,R&&R.code,x,ce)}}},F7=new Map,dD=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:i}=e,a=[r,i,n];let s=a.length,l=s,c,d,h=F7;for(;l--;)c=a[l],d=h.get(c),d===void 0&&h.set(c,d=l?new Map:B7(e)),h=d;return d};dD();const Hw={http:n7,xhr:P7,fetch:{get:dD}};xe.forEach(Hw,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const NN=t=>`- ${t}`,U7=t=>xe.isFunction(t)||t===null||t===!1;function H7(t,e){t=xe.isArray(t)?t:[t];const{length:n}=t;let r,i;const a={};for(let s=0;s<n;s++){r=t[s];let l;if(i=r,!U7(r)&&(i=Hw[(l=String(r)).toLowerCase()],i===void 0))throw new pt(`Unknown adapter '${l}'`);if(i&&(xe.isFunction(i)||(i=i.get(e))))break;a[l||"#"+s]=i}if(!i){const s=Object.entries(a).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=n?s.length>1?`since :
`+s.map(NN).join(`
`):" "+NN(s[0]):"as no adapter specified";throw new pt("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i}const hD={getAdapter:H7,adapters:Hw};function By(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xu(null,t)}function CN(t){return By(t),t.headers=Kr.from(t.headers),t.data=My.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),hD.getAdapter(t.adapter||Th.adapter,t)(t).then(function(r){return By(t),r.data=My.call(t,t.transformResponse,r),r.headers=Kr.from(r.headers),r},function(r){return oD(r)||(By(t),r&&r.response&&(r.response.data=My.call(t,t.transformResponse,r.response),r.response.headers=Kr.from(r.response.headers))),Promise.reject(r)})}const fD="1.13.1",pg={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{pg[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const ON={};pg.transitional=function(e,n,r){function i(a,s){return"[Axios v"+fD+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,l)=>{if(e===!1)throw new pt(i(s," has been removed"+(n?" in "+n:"")),pt.ERR_DEPRECATED);return n&&!ON[s]&&(ON[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,s,l):!0}};pg.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function z7(t,e,n){if(typeof t!="object")throw new pt("options must be an object",pt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const a=r[i],s=e[a];if(s){const l=t[a],c=l===void 0||s(l,a,t);if(c!==!0)throw new pt("option "+a+" must be "+c,pt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new pt("Unknown option "+a,pt.ERR_BAD_OPTION)}}const Gm={assertOptions:z7,validators:pg},da=Gm.validators;let Xo=class{constructor(e){this.defaults=e||{},this.interceptors={request:new bN,response:new bN}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=rl(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&Gm.assertOptions(r,{silentJSONParsing:da.transitional(da.boolean),forcedJSONParsing:da.transitional(da.boolean),clarifyTimeoutError:da.transitional(da.boolean)},!1),i!=null&&(xe.isFunction(i)?n.paramsSerializer={serialize:i}:Gm.assertOptions(i,{encode:da.function,serialize:da.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Gm.assertOptions(n,{baseUrl:da.spelling("baseURL"),withXsrfToken:da.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=a&&xe.merge(a.common,a[n.method]);a&&xe.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),n.headers=Kr.concat(s,a);const l=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(c=c&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const d=[];this.interceptors.response.forEach(function(w){d.push(w.fulfilled,w.rejected)});let h,p=0,b;if(!c){const x=[CN.bind(this),void 0];for(x.unshift(...l),x.push(...d),b=x.length,h=Promise.resolve(n);p<b;)h=h.then(x[p++],x[p++]);return h}b=l.length;let y=n;for(;p<b;){const x=l[p++],w=l[p++];try{y=x(y)}catch(E){w.call(this,E);break}}try{h=CN.call(this,y)}catch(x){return Promise.reject(x)}for(p=0,b=d.length;p<b;)h=h.then(d[p++],d[p++]);return h}getUri(e){e=rl(this.defaults,e);const n=uD(e.baseURL,e.url,e.allowAbsoluteUrls);return iD(n,e.params,e.paramsSerializer)}};xe.forEach(["delete","get","head","options"],function(e){Xo.prototype[e]=function(n,r){return this.request(rl(r||{},{method:e,url:n,data:(r||{}).data}))}});xe.forEach(["post","put","patch"],function(e){function n(r){return function(a,s,l){return this.request(rl(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Xo.prototype[e]=n(),Xo.prototype[e+"Form"]=n(!0)});let $7=class mD{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(l=>{r.subscribe(l),a=l}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},e(function(a,s,l){r.reason||(r.reason=new Xu(a,s,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new mD(function(i){e=i}),cancel:e}}};function q7(t){return function(n){return t.apply(null,n)}}function Y7(t){return xe.isObject(t)&&t.isAxiosError===!0}const Z1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Z1).forEach(([t,e])=>{Z1[e]=t});function pD(t){const e=new Xo(t),n=VP(Xo.prototype.request,e);return xe.extend(n,Xo.prototype,e,{allOwnKeys:!0}),xe.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return pD(rl(t,i))},n}const ut=pD(Th);ut.Axios=Xo;ut.CanceledError=Xu;ut.CancelToken=$7;ut.isCancel=oD;ut.VERSION=fD;ut.toFormData=mg;ut.AxiosError=pt;ut.Cancel=ut.CanceledError;ut.all=function(e){return Promise.all(e)};ut.spread=q7;ut.isAxiosError=Y7;ut.mergeConfig=rl;ut.AxiosHeaders=Kr;ut.formToJSON=t=>sD(xe.isHTMLForm(t)?new FormData(t):t);ut.getAdapter=hD.getAdapter;ut.HttpStatusCode=Z1;ut.default=ut;const{Axios:ppe,AxiosError:gpe,CanceledError:bpe,isCancel:ype,CancelToken:xpe,VERSION:vpe,all:wpe,Cancel:Epe,isAxiosError:Ape,spread:Spe,toFormData:Tpe,AxiosHeaders:_pe,HttpStatusCode:Npe,formToJSON:Cpe,getAdapter:Ope,mergeConfig:kpe}=ut,V7=()=>{const t=window.location.hostname;if(console.log(":",t),t==="localhost"||t==="127.0.0.1")return console.log("localhost API"),"http://localhost:8007";const e=window.location.origin;return console.log("Nginx API:",e),e},gt=V7(),gD=`${gt}/api`;console.log("API:",{API_BASE_URL:gt,API_URL:gD});let od=!1,J1=[];const kN=(t,e=null)=>{J1.forEach(n=>{t?n.reject(t):n.resolve(e)}),J1=[]},G7=t=>{ut.interceptors.request.use(e=>{const n=localStorage.getItem("access_token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>Promise.reject(e)),ut.interceptors.response.use(e=>e,async e=>{const n=e.config;if(e.response?.status===401&&!n._retry){if(od)return new Promise((i,a)=>{J1.push({resolve:i,reject:a})}).then(i=>(n.headers.Authorization=`Bearer ${i}`,ut(n))).catch(i=>Promise.reject(i));n._retry=!0,od=!0;const r=localStorage.getItem("refresh_token");if(!r)return console.error("No refresh token found, logging out"),od=!1,t&&t(),Promise.reject(e);try{const i=await ut.post(`${gt}/api/auth/token/refresh/`,{refresh:r}),{access:a}=i.data;return localStorage.setItem("access_token",a),ut.defaults.headers.common.Authorization=`Bearer ${a}`,kN(null,a),od=!1,n.headers.Authorization=`Bearer ${a}`,ut(n)}catch(i){return console.error("Token refresh failed, logging out",i),kN(i,null),od=!1,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),t&&t(),Promise.reject(i)}}return Promise.reject(e)})},bD=A.createContext(null),ka=()=>{const t=A.useContext(bD);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},W7=({children:t})=>{const[e,n]=A.useState(null),[r,i]=A.useState(!0),[a,s]=A.useState(localStorage.getItem("access_token"));A.useEffect(()=>{G7(()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),delete ut.defaults.headers.common.Authorization,s(null),n(null),window.location.href="/"})},[]),A.useEffect(()=>{(async()=>{console.log(" [AuthContext] ..."),console.log(" [AuthContext] URL:",window.location.href),console.log(" [AuthContext] WebView:",window.__wxjs_environment==="miniprogram");const x=new URLSearchParams(window.location.search).get("miniapp_token");if(x){console.log(" [AuthContext] token:",x.substring(0,20)+"...");const w=await d(x);w.success?console.log(" [AuthContext] ID:",w.userData?.id):console.error(" [AuthContext] :",w.error);const E=new URL(window.location);E.searchParams.delete("miniapp_token"),window.history.replaceState({},"",E)}else{console.log(" [AuthContext] token");const w=localStorage.getItem("access_token"),E=localStorage.getItem("user");w&&E?(s(w),n(JSON.parse(E)),ut.defaults.headers.common.Authorization=`Bearer ${w}`,console.log(" [AuthContext] ID:",JSON.parse(E)?.id)):console.log(" [AuthContext] ")}console.log(" [AuthContext] loading=false"),i(!1)})()},[]);const l=async(b,y)=>{try{const x=await ut.post(`${gt}/api/auth/login/`,{username:b,password:y}),{user:w,tokens:E}=x.data;return localStorage.setItem("access_token",E.access),localStorage.setItem("refresh_token",E.refresh),localStorage.setItem("user",JSON.stringify(w)),s(E.access),n(w),ut.defaults.headers.common.Authorization=`Bearer ${E.access}`,{success:!0}}catch(x){return{success:!1,error:x.response?.data?.error||""}}},c=async(b,y,x,w)=>{try{const E=await ut.post(`${gt}/api/auth/register/`,{username:b,email:y,password:x,full_name:w}),{user:T,tokens:C}=E.data;return localStorage.setItem("access_token",C.access),localStorage.setItem("refresh_token",C.refresh),localStorage.setItem("user",JSON.stringify(T)),s(C.access),n(T),ut.defaults.headers.common.Authorization=`Bearer ${C.access}`,{success:!0}}catch(E){return{success:!1,error:E.response?.data?.error||""}}},d=async b=>{try{console.log(" [loginWithToken] token..."),ut.defaults.headers.common.Authorization=`Bearer ${b}`;const x=(await ut.get(`${gt}/api/auth/profile/`)).data;return console.log(" [loginWithToken] :",x),localStorage.setItem("access_token",b),localStorage.setItem("user",JSON.stringify(x)),s(b),n(x),console.log(" [loginWithToken] "),{success:!0,userData:x}}catch(y){return console.error(" [loginWithToken] Token:",y),{success:!1,error:y.response?.data?.error||"Token"}}},p={user:e,token:a,loading:r,login:l,loginWithToken:d,register:c,logout:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("user"),delete ut.defaults.headers.common.Authorization,s(null),n(null)},isAuthenticated:!!e};return f.jsx(bD.Provider,{value:p,children:t})},X7=()=>{const t=typeof window<"u"&&typeof window.wx<"u"&&typeof window.wx.miniProgram<"u",e=typeof window<"u"&&window.__wxjs_environment==="miniprogram",r=(navigator.userAgent||"").toLowerCase().indexOf("miniprogram")>-1;return t||e||r},yD=t=>{console.log(" [miniProgramUtils] "),typeof window.wx<"u"&&window.wx.miniProgram?window.wx.miniProgram.reLaunch({url:"/pages/login/login",success:()=>{console.log(" [miniProgramUtils] ")},fail:e=>{console.error(" [miniProgramUtils] :",e),t&&t()}}):(console.warn(" [miniProgramUtils] wx.miniProgram "),t&&t())},K7=(t,e)=>{if(console.log(" [miniProgramUtils] "),t&&typeof t=="function"){console.log(" [miniProgramUtils]  Web ");try{t(),console.log(" [miniProgramUtils] Web ")}catch(n){console.error(" [miniProgramUtils]  Web :",n)}}typeof window.wx<"u"&&window.wx.miniProgram?(console.log(" [miniProgramUtils]  reLaunch "),window.wx.miniProgram.reLaunch({url:"/pages/login/login?logout=1",success:()=>{console.log(" [miniProgramUtils] reLaunch ")},fail:n=>{console.error(" [miniProgramUtils] reLaunch :",n),console.error("  :",JSON.stringify(n)),console.log(" [miniProgramUtils]  redirectTo "),window.wx.miniProgram.redirectTo({url:"/pages/login/login?logout=1",success:()=>{console.log(" [miniProgramUtils] redirectTo ")},fail:r=>{console.error(" [miniProgramUtils] redirectTo :",r),e&&e()}})}})):(console.error(" [miniProgramUtils] wx.miniProgram "),console.error("  window.wx:",typeof window.wx),console.error("  window.wx.miniProgram:",typeof window.wx?.miniProgram),e&&e())};function Ur({children:t}){const{user:e,loading:n}=ka(),r=qi();return A.useEffect(()=>{n||e||(console.log(" [ProtectedRoute] "),X7()?(console.log(" [ProtectedRoute] "),yD(()=>{console.log(" [ProtectedRoute] "),r("/",{replace:!0})})):(console.log(" [ProtectedRoute] "),r("/",{replace:!0})))},[e,n,r]),n?f.jsx("div",{className:"min-h-screen bg-blue-100 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"}),f.jsx("p",{className:"mt-4 text-gray-600 text-sm font-medium",children:"..."})]})}):e?t:null}const st=t=>typeof t=="string",ld=()=>{let t,e;const n=new Promise((r,i)=>{t=r,e=i});return n.resolve=t,n.reject=e,n},jN=t=>t==null?"":""+t,Q7=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},Z7=/###/g,PN=t=>t&&t.indexOf("###")>-1?t.replace(Z7,"."):t,DN=t=>!t||st(t),Id=(t,e,n)=>{const r=st(e)?e.split("."):e;let i=0;for(;i<r.length-1;){if(DN(t))return{};const a=PN(r[i]);!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={},++i}return DN(t)?{}:{obj:t,k:PN(r[i])}},RN=(t,e,n)=>{const{obj:r,k:i}=Id(t,e,Object);if(r!==void 0||e.length===1){r[i]=n;return}let a=e[e.length-1],s=e.slice(0,e.length-1),l=Id(t,s,Object);for(;l.obj===void 0&&s.length;)a=`${s[s.length-1]}.${a}`,s=s.slice(0,s.length-1),l=Id(t,s,Object),l?.obj&&typeof l.obj[`${l.k}.${a}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${a}`]=n},J7=(t,e,n,r)=>{const{obj:i,k:a}=Id(t,e,Object);i[a]=i[a]||[],i[a].push(n)},op=(t,e)=>{const{obj:n,k:r}=Id(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},e9=(t,e,n)=>{const r=op(t,n);return r!==void 0?r:op(e,n)},xD=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?st(t[r])||t[r]instanceof String||st(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):xD(t[r],e[r],n):t[r]=e[r]);return t},au=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var t9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const n9=t=>st(t)?t.replace(/[&<>"'\/]/g,e=>t9[e]):t;class r9{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const i9=[" ",",","?","!",";"],a9=new r9(20),s9=(t,e,n)=>{e=e||"",n=n||"";const r=i9.filter(s=>e.indexOf(s)<0&&n.indexOf(s)<0);if(r.length===0)return!0;const i=a9.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let a=!i.test(t);if(!a){const s=t.indexOf(n);s>0&&!i.test(t.substring(0,s))&&(a=!0)}return a},ev=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let i=t;for(let a=0;a<r.length;){if(!i||typeof i!="object")return;let s,l="";for(let c=a;c<r.length;++c)if(c!==a&&(l+=n),l+=r[c],s=i[l],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<r.length-1)continue;a+=c-a+1;break}i=s}return i},Wd=t=>t?.replace("_","-"),o9={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console?.[t]?.apply?.(console,e)}};class lp{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||o9,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,i){return i&&!this.debug?null:(st(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new lp(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new lp(this.logger,e)}}var va=new lp;let gg=class{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([i,a])=>{for(let s=0;s<a;s++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,a])=>{for(let s=0;s<a;s++)i.apply(i,[e,...n])})}};class IN extends gg{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,i={}){const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,n],r&&(Array.isArray(r)?l.push(...r):st(r)&&a?l.push(...r.split(a)):l.push(r)));const c=op(this.data,l);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=l[0],n=l[1],r=l.slice(2).join(".")),c||!s||!st(r)?c:ev(this.data?.[e]?.[n],r,a)}addResource(e,n,r,i,a={silent:!1}){const s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let l=[e,n];r&&(l=l.concat(s?r.split(s):r)),e.indexOf(".")>-1&&(l=e.split("."),i=n,n=l[1]),this.addNamespaces(n),RN(this.data,l,i),a.silent||this.emit("added",e,n,r,i)}addResources(e,n,r,i={silent:!1}){for(const a in r)(st(r[a])||Array.isArray(r[a]))&&this.addResource(e,n,a,r[a],{silent:!0});i.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,i,a,s={silent:!1,skipCopy:!1}){let l=[e,n];e.indexOf(".")>-1&&(l=e.split("."),i=r,r=n,n=l[1]),this.addNamespaces(n);let c=op(this.data,l)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?xD(c,r,a):c={...c,...r},RN(this.data,l,c),s.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var vD={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,i){return t.forEach(a=>{e=this.processors[a]?.process(e,n,r,i)??e}),e}};const wD=Symbol("i18next/PATH_KEY");function l9(){const t=[],e=Object.create(null);let n;return e.get=(r,i)=>(n?.revoke?.(),i===wD?t:(t.push(i),n=Proxy.revocable(r,e),n.proxy)),Proxy.revocable(Object.create(null),e).proxy}function tv(t,e){const{[wD]:n}=t(l9());return n.join(e?.keySeparator??".")}const LN={},Fy=t=>!st(t)&&typeof t!="boolean"&&typeof t!="number";class up extends gg{constructor(e,n={}){super(),Q7(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=va.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const i=this.resolve(e,r);if(i?.res===void 0)return!1;const a=Fy(i.res);return!(r.returnObjects===!1&&a)}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let a=n.ns||this.options.defaultNS||[];const s=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!s9(e,r,i);if(s&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:st(a)?[a]:a};const d=e.split(r);(r!==i||r===i&&this.options.ns.indexOf(d[0])>-1)&&(a=d.shift()),e=d.join(i)}return{key:e,namespaces:st(a)?[a]:a}}translate(e,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),e==null)return"";typeof e=="function"&&(e=tv(e,{...this.options,...i})),Array.isArray(e)||(e=[String(e)]);const a=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(e[e.length-1],i),d=c[c.length-1];let h=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const p=i.lng||this.language,b=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p?.toLowerCase()==="cimode")return b?a?{res:`${d}${h}${l}`,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:`${d}${h}${l}`:a?{res:l,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:l;const y=this.resolve(e,i);let x=y?.res;const w=y?.usedKey||l,E=y?.exactUsedKey||l,T=["[object Number]","[object Function]","[object RegExp]"],C=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,P=i.count!==void 0&&!st(i.count),k=up.hasDefaultValue(i),j=P?this.pluralResolver.getSuffix(p,i.count,i):"",D=i.ordinal&&P?this.pluralResolver.getSuffix(p,i.count,{ordinal:!1}):"",H=P&&!i.ordinal&&i.count===0,Y=H&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${j}`]||i[`defaultValue${D}`]||i.defaultValue;let X=x;N&&!x&&k&&(X=Y);const z=Fy(X),K=Object.prototype.toString.apply(X);if(N&&X&&z&&T.indexOf(K)<0&&!(st(C)&&Array.isArray(X))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const ce=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,X,{...i,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return a?(y.res=ce,y.usedParams=this.getUsedParamsDetails(i),y):ce}if(s){const ce=Array.isArray(X),te=ce?[]:{},W=ce?E:w;for(const R in X)if(Object.prototype.hasOwnProperty.call(X,R)){const B=`${W}${s}${R}`;k&&!x?te[R]=this.translate(B,{...i,defaultValue:Fy(Y)?Y[R]:void 0,joinArrays:!1,ns:c}):te[R]=this.translate(B,{...i,joinArrays:!1,ns:c}),te[R]===B&&(te[R]=X[R])}x=te}}else if(N&&st(C)&&Array.isArray(x))x=x.join(C),x&&(x=this.extendTranslation(x,e,i,r));else{let ce=!1,te=!1;!this.isValidLookup(x)&&k&&(ce=!0,x=Y),this.isValidLookup(x)||(te=!0,x=l);const R=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&te?void 0:x,B=k&&Y!==x&&this.options.updateMissing;if(te||ce||B){if(this.logger.log(B?"updateKey":"missingKey",p,d,l,B?Y:x),s){const U=this.resolve(l,{...i,keySeparator:!1});U&&U.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let re=[];const le=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&le&&le[0])for(let U=0;U<le.length;U++)re.push(le[U]);else this.options.saveMissingTo==="all"?re=this.languageUtils.toResolveHierarchy(i.lng||this.language):re.push(i.lng||this.language);const M=(U,Q,I)=>{const oe=k&&I!==x?I:R;this.options.missingKeyHandler?this.options.missingKeyHandler(U,d,Q,oe,B,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(U,d,Q,oe,B,i),this.emit("missingKey",U,d,Q,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&P?re.forEach(U=>{const Q=this.pluralResolver.getSuffixes(U,i);H&&i[`defaultValue${this.options.pluralSeparator}zero`]&&Q.indexOf(`${this.options.pluralSeparator}zero`)<0&&Q.push(`${this.options.pluralSeparator}zero`),Q.forEach(I=>{M([U],l+I,i[`defaultValue${I}`]||Y)})}):M(re,l,Y))}x=this.extendTranslation(x,e,i,y,r),te&&x===l&&this.options.appendNamespaceToMissingKey&&(x=`${d}${h}${l}`),(te||ce)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${h}${l}`:l,ce?x:void 0,i))}return a?(y.res=x,y.usedParams=this.getUsedParamsDetails(i),y):x}extendTranslation(e,n,r,i,a){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=st(e)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let h=r.replace&&!st(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,r.lng||this.language||i.usedLng,r),c){const p=e.match(this.interpolator.nestingRegexp),b=p&&p.length;d<b&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>a?.[0]===p[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,l=st(s)?[s]:s;return e!=null&&l?.length&&r.applyPostProcessor!==!1&&(e=vD.handle(l,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,i,a,s,l;return st(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(c,n),h=d.key;i=h;let p=d.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const b=n.count!==void 0&&!st(n.count),y=b&&!n.ordinal&&n.count===0,x=n.context!==void 0&&(st(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(E=>{this.isValidLookup(r)||(l=E,!LN[`${w[0]}-${E}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(LN[`${w[0]}-${E}`]=!0,this.logger.warn(`key "${i}" for languages "${w.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(T=>{if(this.isValidLookup(r))return;s=T;const C=[h];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(C,h,T,E,n);else{let P;b&&(P=this.pluralResolver.getSuffix(T,n.count,n));const k=`${this.options.pluralSeparator}zero`,j=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(b&&(n.ordinal&&P.indexOf(j)===0&&C.push(h+P.replace(j,this.options.pluralSeparator)),C.push(h+P),y&&C.push(h+k)),x){const D=`${h}${this.options.contextSeparator||"_"}${n.context}`;C.push(D),b&&(n.ordinal&&P.indexOf(j)===0&&C.push(D+P.replace(j,this.options.pluralSeparator)),C.push(D+P),y&&C.push(D+k))}}let N;for(;N=C.pop();)this.isValidLookup(r)||(a=N,r=this.getResource(T,E,N,n))}))})}),{res:r,usedKey:i,exactUsedKey:a,usedLng:s,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,n,r,i):this.resourceStore.getResource(e,n,r,i)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!st(e.replace);let i=r?e.replace:e;if(r&&typeof e.count<"u"&&(i.count=e.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const a of n)delete i[a]}return i}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class MN{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=va.create("languageUtils")}getScriptPartFromCode(e){if(e=Wd(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Wd(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(st(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const a=this.getLanguagePartFromCode(r);if(this.isSupportedCode(a))return n=a;n=this.options.supportedLngs.find(s=>{if(s===a)return s;if(!(s.indexOf("-")<0&&a.indexOf("-")<0)&&(s.indexOf("-")>0&&a.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===a||s.indexOf(a)===0&&a.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),st(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),i=[],a=s=>{s&&(this.isSupportedCode(s)?i.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return st(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(e))):st(e)&&a(this.formatLanguageCode(e)),r.forEach(s=>{i.indexOf(s)<0&&a(this.formatLanguageCode(s))}),i}}const BN={zero:0,one:1,two:2,few:3,many:4,other:5},FN={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class u9{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=va.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=Wd(e==="dev"?"en":e),i=n.ordinal?"ordinal":"cardinal",a=JSON.stringify({cleanedCode:r,type:i});if(a in this.pluralRulesCache)return this.pluralRulesCache[a];let s;try{s=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),FN;if(!e.match(/-|_/))return FN;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,n)}return this.pluralRulesCache[a]=s,s}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(i=>`${n}${i}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,a)=>BN[i]-BN[a]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(e,n,r={}){const i=this.getRule(e,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const UN=(t,e,n,r=".",i=!0)=>{let a=e9(t,e,n);return!a&&i&&st(n)&&(a=ev(t,n,r),a===void 0&&(a=ev(e,n,r))),a},Uy=t=>t.replace(/\$/g,"$$$$");class c9{constructor(e={}){this.logger=va.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:a,prefixEscaped:s,suffix:l,suffixEscaped:c,formatSeparator:d,unescapeSuffix:h,unescapePrefix:p,nestingPrefix:b,nestingPrefixEscaped:y,nestingSuffix:x,nestingSuffixEscaped:w,nestingOptionsSeparator:E,maxReplaces:T,alwaysFormat:C}=e.interpolation;this.escape=n!==void 0?n:n9,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=a?au(a):s||"{{",this.suffix=l?au(l):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=h?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=b?au(b):y||au("$t("),this.nestingSuffix=x?au(x):w||au(")"),this.nestingOptionsSeparator=E||",",this.maxReplaces=T||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,n,r,i){let a,s,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=y=>{if(y.indexOf(this.formatSeparator)<0){const T=UN(n,c,y,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,r,{...i,...n,interpolationkey:y}):T}const x=y.split(this.formatSeparator),w=x.shift().trim(),E=x.join(this.formatSeparator).trim();return this.format(UN(n,c,w,this.options.keySeparator,this.options.ignoreJSONStructure),E,r,{...i,...n,interpolationkey:w})};this.resetRegExp();const h=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,p=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:y=>Uy(y)},{regex:this.regexp,safeValue:y=>this.escapeValue?Uy(this.escape(y)):Uy(y)}].forEach(y=>{for(l=0;a=y.regex.exec(e);){const x=a[1].trim();if(s=d(x),s===void 0)if(typeof h=="function"){const E=h(e,a,i);s=st(E)?E:""}else if(i&&Object.prototype.hasOwnProperty.call(i,x))s="";else if(p){s=a[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${e}`),s="";else!st(s)&&!this.useRawValueToEscape&&(s=jN(s));const w=y.safeValue(s);if(e=e.replace(a[0],w),p?(y.regex.lastIndex+=s.length,y.regex.lastIndex-=a[0].length):y.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,n,r={}){let i,a,s;const l=(c,d)=>{const h=this.nestingOptionsSeparator;if(c.indexOf(h)<0)return c;const p=c.split(new RegExp(`${h}[ ]*{`));let b=`{${p[1]}`;c=p[0],b=this.interpolate(b,s);const y=b.match(/'/g),x=b.match(/"/g);((y?.length??0)%2===0&&!x||x.length%2!==0)&&(b=b.replace(/'/g,'"'));try{s=JSON.parse(b),d&&(s={...d,...s})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,w),`${c}${h}${b}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;i=this.nestingRegexp.exec(e);){let c=[];s={...r},s=s.replace&&!st(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const d=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(d!==-1&&(c=i[1].slice(d).split(this.formatSeparator).map(h=>h.trim()).filter(Boolean),i[1]=i[1].slice(0,d)),a=n(l.call(this,i[1].trim(),s),s),a&&i[0]===e&&!st(a))return a;st(a)||(a=jN(a)),a||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),a=""),c.length&&(a=c.reduce((h,p)=>this.format(h,p,r.lng,{...r,interpolationkey:i[1].trim()}),a.trim())),e=e.replace(i[0],a),this.regexp.lastIndex=0}return e}}const d9=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);e==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):e==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(s=>{if(s){const[l,...c]=s.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),h=l.trim();n[h]||(n[h]=d),d==="false"&&(n[h]=!1),d==="true"&&(n[h]=!0),isNaN(d)||(n[h]=parseInt(d,10))}})}return{formatName:e,formatOptions:n}},HN=t=>{const e={};return(n,r,i)=>{let a=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(a={...a,[i.interpolationkey]:void 0});const s=r+JSON.stringify(a);let l=e[s];return l||(l=t(Wd(r),i),e[s]=l),l(n)}},h9=t=>(e,n,r)=>t(Wd(n),r)(e);class f9{constructor(e={}){this.logger=va.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?HN:h9;this.formats={number:r((i,a)=>{const s=new Intl.NumberFormat(i,{...a});return l=>s.format(l)}),currency:r((i,a)=>{const s=new Intl.NumberFormat(i,{...a,style:"currency"});return l=>s.format(l)}),datetime:r((i,a)=>{const s=new Intl.DateTimeFormat(i,{...a});return l=>s.format(l)}),relativetime:r((i,a)=>{const s=new Intl.RelativeTimeFormat(i,{...a});return l=>s.format(l,a.range||"day")}),list:r((i,a)=>{const s=new Intl.ListFormat(i,{...a});return l=>s.format(l)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=HN(n)}format(e,n,r,i={}){const a=n.split(this.formatSeparator);if(a.length>1&&a[0].indexOf("(")>1&&a[0].indexOf(")")<0&&a.find(l=>l.indexOf(")")>-1)){const l=a.findIndex(c=>c.indexOf(")")>-1);a[0]=[a[0],...a.splice(1,l)].join(this.formatSeparator)}return a.reduce((l,c)=>{const{formatName:d,formatOptions:h}=d9(c);if(this.formats[d]){let p=l;try{const b=i?.formatParams?.[i.interpolationkey]||{},y=b.locale||b.lng||i.locale||i.lng||r;p=this.formats[d](l,y,{...h,...i,...b})}catch(b){this.logger.warn(b)}return p}else this.logger.warn(`there was no format function for ${d}`);return l},e)}}const m9=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class p9 extends gg{constructor(e,n,r,i={}){super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=va.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(e,n,r,i){const a={},s={},l={},c={};return e.forEach(d=>{let h=!0;n.forEach(p=>{const b=`${d}|${p}`;!r.reload&&this.store.hasResourceBundle(d,p)?this.state[b]=2:this.state[b]<0||(this.state[b]===1?s[b]===void 0&&(s[b]=!0):(this.state[b]=1,h=!1,s[b]===void 0&&(s[b]=!0),a[b]===void 0&&(a[b]=!0),c[p]===void 0&&(c[p]=!0)))}),h||(l[d]=!0)}),(Object.keys(a).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(a),pending:Object.keys(s),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const i=e.split("|"),a=i[0],s=i[1];n&&this.emit("failedLoading",a,s,n),!n&&r&&this.store.addResourceBundle(a,s,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const l={};this.queue.forEach(c=>{J7(c.loaded,[a],s),m9(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{l[d]||(l[d]={});const h=c.loaded[d];h.length&&h.forEach(p=>{l[d][p]===void 0&&(l[d][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r,i=0,a=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:i,wait:a,callback:s});return}this.readingCalls++;const l=(d,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(d&&h&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,i+1,a*2,s)},a);return}s(d,h)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const d=c(e,n);d&&typeof d.then=="function"?d.then(h=>l(null,h)).catch(l):l(null,d)}catch(d){l(d)}return}return c(e,n,l)}prepareLoading(e,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();st(e)&&(e=this.languageUtils.toResolveHierarchy(e)),st(n)&&(n=[n]);const a=this.queueLoad(e,n,r,i);if(!a.toLoad.length)return a.pending.length||i(),null;a.toLoad.forEach(s=>{this.loadOne(s)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),i=r[0],a=r[1];this.read(i,a,"read",void 0,void 0,(s,l)=>{s&&this.logger.warn(`${n}loading namespace ${a} for language ${i} failed`,s),!s&&l&&this.logger.log(`${n}loaded namespace ${a} for language ${i}`,l),this.loaded(e,s,l)})}saveMissing(e,n,r,i,a,s={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...s,isUpdate:a},d=this.backend.create.bind(this.backend);if(d.length<6)try{let h;d.length===5?h=d(e,n,r,i,c):h=d(e,n,r,i),h&&typeof h.then=="function"?h.then(p=>l(null,p)).catch(l):l(null,h)}catch(h){l(h)}else d(e,n,r,i,l,c)}!e||!e[0]||this.store.addResource(e[0],n,r,i)}}}const zN=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),st(t[1])&&(e.defaultValue=t[1]),st(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),$N=t=>(st(t.ns)&&(t.ns=[t.ns]),st(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),st(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs?.indexOf?.("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t),fm=()=>{},g9=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Xd extends gg{constructor(e={},n){if(super(),this.options=$N(e),this.services={},this.logger=va,this.modules={external:[]},g9(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(st(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=zN();this.options={...r,...this.options,...$N(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?va.init(i(this.modules.logger),this.options):va.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=f9;const h=new MN(this.options);this.store=new IN(this.options.resources,this.options);const p=this.services;p.logger=va,p.resourceStore=this.store,p.languageUtils=h,p.pluralResolver=new u9(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(p.formatter=i(d),p.formatter.init&&p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new c9(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new p9(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(y,...x)=>{this.emit(y,...x)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new up(this.services,this.options),this.translator.on("*",(y,...x)=>{this.emit(y,...x)}),this.modules.external.forEach(y=>{y.init&&y.init(this)})}if(this.format=this.options.interpolation.format,n||(n=fm),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...h)=>this.store[d](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...h)=>(this.store[d](...h),this)});const l=ld(),c=()=>{const d=(h,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),n(h,p)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(e,n=fm){let r=n;const i=st(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const a=[],s=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&a.indexOf(d)<0&&a.push(d)})};i?s(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(l=>s(l)),this.services.backendConnector.load(a,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,n,r){const i=ld();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=fm),this.services.backendConnector.reload(e,n,a=>{i.resolve(),r(a)}),i}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&vD.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=ld();this.emit("languageChanging",e);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},a=(l,c)=>{c?this.isLanguageChangingTo===e&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...d)=>this.t(...d)),n&&n(l,(...d)=>this.t(...d))},s=l=>{!e&&!l&&this.services.languageDetector&&(l=[]);const c=st(l)?l:l&&l[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(st(l)?[l]:l);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,h=>{a(h,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),r}getFixedT(e,n,r){const i=(a,s,...l)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([a,s].concat(l)):c={...s},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const d=this.options.keySeparator||".";let h;return c.keyPrefix&&Array.isArray(a)?h=a.map(p=>(typeof p=="function"&&(p=tv(p,{...this.options,...s})),`${c.keyPrefix}${d}${p}`)):(typeof a=="function"&&(a=tv(a,{...this.options,...s})),h=c.keyPrefix?`${c.keyPrefix}${d}${a}`:a),this.t(h,c)};return st(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,a=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(l,c)=>{const d=this.services.backendConnector.state[`${l}|${c}`];return d===-1||d===0||d===2};if(n.precheck){const l=n.precheck(this,s);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,e)&&(!i||s(a,e)))}loadNamespaces(e,n){const r=ld();return this.options.ns?(st(e)&&(e=[e]),e.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=ld();st(e)&&(e=[e]);const i=this.options.preload||[],a=e.filter(s=>i.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return a.length?(this.options.preload=i.concat(a),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const i=new Intl.Locale(e);if(i&&i.getTextInfo){const a=i.getTextInfo();if(a&&a.direction)return a.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new MN(zN());return e.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Xd(e,n)}cloneInstance(e={},n=fm){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const i={...this.options,...e,isClone:!0},a=new Xd(i);if((e.debug!==void 0||e.prefix!==void 0)&&(a.logger=a.logger.clone(e)),["store","services","language"].forEach(l=>{a[l]=this[l]}),a.services={...this.services},a.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},r){const l=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((h,p)=>(h[p]={...c[d][p]},h),c[d]),c),{});a.store=new IN(l,i),a.services.resourceStore=a.store}return a.translator=new up(a.services,i),a.translator.on("*",(l,...c)=>{a.emit(l,...c)}),a.init(i,n),a.translator.options=i,a.translator.backendConnector.services.utils={hasLoadedNamespace:a.hasLoadedNamespace.bind(a)},a}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const gr=Xd.createInstance();gr.createInstance=Xd.createInstance;gr.createInstance;gr.dir;gr.init;gr.loadResources;gr.reloadResources;gr.use;gr.changeLanguage;gr.getFixedT;gr.t;gr.exists;gr.setDefaultNamespace;gr.hasLoadedNamespace;gr.loadNamespaces;gr.loadLanguages;const b9=(t,e,n,r)=>{const i=[n,{code:e,...r||{}}];if(t?.services?.logger?.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);il(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),t?.services?.logger?.warn?t.services.logger.warn(...i):console?.warn&&console.warn(...i)},qN={},ED=(t,e,n,r)=>{il(n)&&qN[n]||(il(n)&&(qN[n]=new Date),b9(t,e,n,r))},AD=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},nv=(t,e,n)=>{t.loadNamespaces(e,AD(t,n))},YN=(t,e,n,r)=>{if(il(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return nv(t,n,r);n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,AD(t,r))},y9=(t,e,n={})=>!e.languages||!e.languages.length?(ED(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,t))return!1}}),il=t=>typeof t=="string",x9=t=>typeof t=="object"&&t!==null,v9=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,w9={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},E9=t=>w9[t],A9=t=>t.replace(v9,E9);let rv={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:A9};const S9=(t={})=>{rv={...rv,...t}},T9=()=>rv;let SD;const _9=t=>{SD=t},N9=()=>SD,C9={type:"3rdParty",init(t){S9(t.options.react),_9(t)}},O9=A.createContext();class k9{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Hy={exports:{}},zy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VN;function j9(){if(VN)return zy;VN=1;var t=qu();function e(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function l(p,b){var y=b(),x=r({inst:{value:y,getSnapshot:b}}),w=x[0].inst,E=x[1];return a(function(){w.value=y,w.getSnapshot=b,c(w)&&E({inst:w})},[p,y,b]),i(function(){return c(w)&&E({inst:w}),p(function(){c(w)&&E({inst:w})})},[p]),s(y),y}function c(p){var b=p.getSnapshot;p=p.value;try{var y=b();return!n(p,y)}catch{return!0}}function d(p,b){return b()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return zy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,zy}var GN;function TD(){return GN||(GN=1,Hy.exports=j9()),Hy.exports}var P9=TD();const D9=(t,e)=>il(e)?e:x9(e)&&il(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,R9={t:D9,ready:!1},I9=()=>()=>{},L9=(t,e={})=>{const{i18n:n}=e,{i18n:r,defaultNS:i}=A.useContext(O9)||{},a=n||r||N9();a&&!a.reportNamespaces&&(a.reportNamespaces=new k9),a||ED(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const s=A.useMemo(()=>({...T9(),...a?.options?.react,...e}),[a,e]),{useSuspense:l,keyPrefix:c}=s,d=A.useMemo(()=>{const P=i||a?.options?.defaultNS;return il(P)?[P]:P||["translation"]},[t,i,a]);a?.reportNamespaces?.addUsedNamespaces?.(d);const h=A.useRef(0),p=A.useCallback(P=>{if(!a)return I9;const{bindI18n:k,bindI18nStore:j}=s,D=()=>{h.current+=1,P()};return k&&a.on(k,D),j&&a.store.on(j,D),()=>{k&&k.split(" ").forEach(H=>a.off(H,D)),j&&j.split(" ").forEach(H=>a.store.off(H,D))}},[a,s]),b=A.useRef(),y=A.useCallback(()=>{if(!a)return R9;const P=!!(a.isInitialized||a.initializedStoreOnce)&&d.every(X=>y9(X,a,s)),k=e.lng||a.language,j=h.current,D=b.current;if(D&&D.ready===P&&D.lng===k&&D.keyPrefix===c&&D.revision===j)return D;const Y={t:a.getFixedT(k,s.nsMode==="fallback"?d:d[0],c),ready:P,lng:k,keyPrefix:c,revision:j};return b.current=Y,Y},[a,d,c,s,e.lng]),[x,w]=A.useState(0),{t:E,ready:T}=P9.useSyncExternalStore(p,y,y);A.useEffect(()=>{if(a&&!T&&!l){const P=()=>w(k=>k+1);e.lng?YN(a,e.lng,d,P):nv(a,d,P)}},[a,e.lng,d,T,l,x]);const C=a||{},N=A.useMemo(()=>{const P=[E,C,T];return P.t=E,P.i18n=C,P.ready=T,P},[E,C,T]);if(a&&l&&!T)throw new Promise(P=>{const k=()=>P();e.lng?YN(a,e.lng,d,k):nv(a,d,k)});return N};function co(){const t=qi();return n=>{if(n.startsWith("/")){t(n);return}const i={home:"/",dashboard:"/dashboard",policies:"/policies","plan-analyzer":"/plan-analyzer","plan-analyzer-2":"/plan-analyzer-2","plan-management":"/plan-management"}[n]||`/${n}`;t(i)}}function M9({onSwitchToRegister:t,onClose:e}){const[n,r]=A.useState({username:"",password:""}),[i,a]=A.useState(""),[s,l]=A.useState(!1),{login:c}=ka(),d=p=>{r({...n,[p.target.name]:p.target.value}),a("")},h=async p=>{p.preventDefault(),l(!0),a("");const b=await c(n.username,n.password);b.success?e():a(b.error),l(!1)};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8 relative",children:[f.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f.jsx("h2",{className:"text-3xl font-bold text-navy-800 mb-2",children:""}),f.jsx("p",{className:"text-gray-700 mb-6",children:""}),i&&f.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:i}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"text",name:"username",value:n.username,onChange:d,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:""})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"password",name:"password",value:n.password,onChange:d,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:""})]}),f.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary-600 to-blue-600 text-white py-3 rounded-lg font-semibold hover:from-primary-700 hover:to-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:s?"...":""})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsxs("p",{className:"text-gray-700",children:[""," ",f.jsx("button",{onClick:t,className:"text-primary-600 hover:text-primary-700 font-semibold",children:""})]})})]})})}function B9({onSwitchToLogin:t,onClose:e}){const[n,r]=A.useState({username:"",email:"",full_name:"",password:"",confirmPassword:""}),[i,a]=A.useState(""),[s,l]=A.useState(!1),{register:c}=ka(),d=p=>{r({...n,[p.target.name]:p.target.value}),a("")},h=async p=>{if(p.preventDefault(),l(!0),a(""),n.password!==n.confirmPassword){a(""),l(!1);return}if(n.password.length<6){a("6"),l(!1);return}const b=await c(n.username,n.email,n.password,n.full_name);b.success?e():a(b.error),l(!1)};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-8 relative max-h-screen overflow-y-auto",children:[f.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:""}),f.jsx("p",{className:"text-gray-600 mb-6",children:""}),i&&f.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:i}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),f.jsx("input",{type:"text",name:"username",value:n.username,onChange:d,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),f.jsx("input",{type:"email",name:"email",value:n.email,onChange:d,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"your@email.com"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"text",name:"full_name",value:n.full_name,onChange:d,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),f.jsx("input",{type:"password",name:"password",value:n.password,onChange:d,required:!0,minLength:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"6"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" *"}),f.jsx("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:d,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:""})]}),f.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary-600 to-blue-600 text-white py-3 rounded-lg font-semibold hover:from-primary-700 hover:to-blue-700 transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",children:s?"...":""})]}),f.jsx("div",{className:"mt-6 text-center",children:f.jsxs("p",{className:"text-gray-700",children:[""," ",f.jsx("button",{onClick:t,className:"text-primary-600 hover:text-primary-700 font-semibold",children:""})]})})]})})}const F9={"zh-CN":{translation:{"header.title":"AI","header.subtitle":"AI",login:"",register:"",welcome:"",dashboard:"","home.badge":"AI","home.hero.title":"","home.hero.titleHighlight":"","home.hero.description":"AI","feature.planAssistant.title":"","feature.planAssistant.subtitle":"AI","feature.planAssistant.description":"AI","feature.planAssistant.button":"","feature.planAssistant.feat1":"","feature.planAssistant.feat2":"","feature.planAssistant.feat3":"","feature.planAssistant.feat4":"","feature.planAssistant.feat5":"","feature.planAssistant.feat6":"AI","feature.aiWriting.title":"","feature.aiWriting.subtitle":"AI","feature.aiWriting.description":"AI","feature.aiWriting.button":"","feature.aiWriting.feat1":"AI","feature.aiWriting.feat2":"","feature.aiWriting.feat3":"","feature.aiWriting.feat4":"SEO","feature.aiWriting.feat5":"","feature.aiWriting.feat6":"","highlight.title":"","highlight.subtitle":"","highlight.speed.title":"","highlight.speed.desc":"AI","highlight.analysis.title":"","highlight.analysis.desc":"95%","highlight.ai.title":"AI","highlight.ai.desc":"AI","stats.users":"","stats.docs":"","stats.accuracy":"","stats.service":"","cta.title":"","cta.subtitle":"AI","cta.start":"","cta.register":"","cta.login":"","footer.title":"","footer.desc":"AI","footer.products":"","footer.planTool":"","footer.writingTool":"","footer.dataAnalysis":"","footer.support":"","footer.helpCenter":"","footer.tutorials":"","footer.contact":"","footer.about":"","footer.aboutUs":"","footer.privacy":"","footer.terms":"","footer.copyright":" 2025 HONGKONG MACRODATA TECHNOLOGY LIMITED. All rights reserved.","hero.title":"AI","search.placeholder":"...","category.all":"","category.analysis":"","category.management":"","category.marketing":"","category.calculation":"","category.training":"","category.finance":"","category.service":"","category.storage":"","category.compliance":"","category.underwriting":"","category.claims":"","tools.discover":"","tools.subtitle":"","tools.use":"","tools.noResults":"","tools.tryOther":"","tool.underwriting":"","tool.underwriting.desc":"AI","tool.calculator":"","tool.calculator.desc":"","tool.crm":"CRM","tool.crm.desc":"","tool.policy":"","tool.policy.desc":"","tool.analytics":"","tool.analytics.desc":"","tool.claims":"","tool.claims.desc":"","tool.compliance":"","tool.compliance.desc":"","tool.renewal":"","tool.renewal.desc":"","tool.aiwriting":"","tool.aiwriting.desc":"AI","tool.training":"","tool.training.desc":"","tool.commission":"","tool.commission.desc":"","tool.customer":"","tool.customer.desc":"AI","tool.storage":"","tool.storage.desc":"","tool.plananalyzer":"","tool.plananalyzer.desc":"AI","tool.planmanage":"","tool.planmanage.desc":"","stats.tools":"","stats.users":"","stats.efficiency":"","stats.satisfaction":"","footer.about":"","footer.about.desc":"","footer.products":"","footer.underwriting":"","footer.claims":"","footer.analytics":"","footer.customer":"","footer.help":"","footer.docs":"","footer.videos":"","footer.faq":"","footer.contact":"","footer.contactInfo":"","footer.phone":"852 62645180","footer.email":"client@xingke888.com","footer.hours":" 9:00-18:00","footer.copyright":" 2025 HONGKONG MACRODATA TECHNOLOGY LIMITED. All rights reserved."}},"zh-TW":{translation:{"header.title":"AI","header.subtitle":"AI",login:"",register:"",welcome:"",dashboard:"","home.badge":"AI","home.hero.title":"","home.hero.titleHighlight":"","home.hero.description":"AI","feature.planAssistant.title":"","feature.planAssistant.subtitle":"AI","feature.planAssistant.description":"AI","feature.planAssistant.button":"","feature.planAssistant.feat1":"","feature.planAssistant.feat2":"","feature.planAssistant.feat3":"","feature.planAssistant.feat4":"","feature.planAssistant.feat5":"","feature.planAssistant.feat6":"AI","feature.aiWriting.title":"","feature.aiWriting.subtitle":"AI","feature.aiWriting.description":"AI","feature.aiWriting.button":"","feature.aiWriting.feat1":"AI","feature.aiWriting.feat2":"","feature.aiWriting.feat3":"","feature.aiWriting.feat4":"SEO","feature.aiWriting.feat5":"","feature.aiWriting.feat6":"","highlight.title":"","highlight.subtitle":"","highlight.speed.title":"","highlight.speed.desc":"AI","highlight.analysis.title":"","highlight.analysis.desc":"95%","highlight.ai.title":"AI","highlight.ai.desc":"AI","stats.users":"","stats.docs":"","stats.accuracy":"","stats.service":"","cta.title":"","cta.subtitle":"AI","cta.start":"","cta.register":"","cta.login":"","footer.title":"","footer.desc":"AI","footer.products":"","footer.planTool":"","footer.writingTool":"","footer.dataAnalysis":"","footer.support":"","footer.helpCenter":"","footer.tutorials":"","footer.contact":"","footer.about":"","footer.aboutUs":"","footer.privacy":"","footer.terms":"","footer.copyright":" 2025 HONGKONG MACRODATA TECHNOLOGY LIMITED. All rights reserved.","hero.title":"AI","search.placeholder":"...","category.all":"","category.analysis":"","category.management":"","category.marketing":"","category.calculation":"","category.training":"","category.finance":"","category.service":"","category.storage":"","category.compliance":"","category.underwriting":"","category.claims":"","tools.discover":"","tools.subtitle":"","tools.use":"","tools.noResults":"","tools.tryOther":"","tool.underwriting":"","tool.underwriting.desc":"AI","tool.calculator":"","tool.calculator.desc":"","tool.crm":"CRM","tool.crm.desc":"","tool.policy":"","tool.policy.desc":"","tool.analytics":"","tool.analytics.desc":"","tool.claims":"","tool.claims.desc":"","tool.compliance":"","tool.compliance.desc":"","tool.renewal":"","tool.renewal.desc":"","tool.aiwriting":"","tool.aiwriting.desc":"AI","tool.training":"","tool.training.desc":"","tool.commission":"","tool.commission.desc":"","tool.customer":"","tool.customer.desc":"AI","tool.storage":"","tool.storage.desc":"","tool.plananalyzer":"","tool.plananalyzer.desc":"AI","tool.planmanage":"","tool.planmanage.desc":"","stats.tools":"","stats.users":"","stats.efficiency":"","stats.satisfaction":"","footer.about":"","footer.about.desc":"","footer.products":"","footer.underwriting":"","footer.claims":"","footer.analytics":"","footer.customer":"","footer.help":"","footer.docs":"","footer.videos":"","footer.faq":"","footer.contact":"","footer.contactInfo":"","footer.phone":"852 62645180","footer.email":"client@xingke888.com","footer.hours":" 9:00-18:00","footer.copyright":" 2025 HONGKONG MACRODATA TECHNOLOGY LIMITED. All rights reserved."}},en:{translation:{"header.title":"AI-Powered Toolkit for Hong Kong Insurance Broker","header.subtitle":"AI-Driven Solutions for the Insurance Industry",login:"Login",register:"Register",welcome:"Welcome, ",dashboard:"Dashboard","home.badge":"AI-Driven Insurance Tool Platform","home.hero.title":"Make Insurance Business","home.hero.titleHighlight":"Smarter and More Efficient","home.hero.description":"An AI-powered tool platform built for insurance professionals, providing core features such as plan analysis and content creation to help you improve efficiency and focus on customer service.","feature.planAssistant.title":"Insurance Plan Assistant","feature.planAssistant.subtitle":"AI-Powered Insurance Plan Analysis Expert","feature.planAssistant.description":"Upload insurance plans, AI automatically recognizes and extracts key information, supports multi-plan comparison analysis, provides multi-round conversational Q&A, helps you quickly understand complex insurance terms and benefit calculations, and provides optimal recommendations for clients.","feature.planAssistant.button":"Get Started","feature.planAssistant.feat1":"High-precision intelligent recognition of plan content","feature.planAssistant.feat2":"Intelligent extraction of insured information and premium data","feature.planAssistant.feat3":"Policy year benefit statistics and analysis","feature.planAssistant.feat4":"Multi-plan comparison and analysis reports","feature.planAssistant.feat5":"Automatic calculation and comparison of return rates","feature.planAssistant.feat6":"AI assistant to query and explain plan terms","feature.aiWriting.title":"Insurance Content AI Writing & Publishing Tool","feature.aiWriting.subtitle":"AI-Powered Content Creation and Multi-Platform Publishing","feature.aiWriting.description":"One-stop insurance marketing content creation platform, AI intelligently generates professional content, supports one-click publishing to multiple platforms, enhancing your marketing efficiency.","feature.aiWriting.button":"Try Now","feature.aiWriting.feat1":"AI-powered insurance content generation","feature.aiWriting.feat2":"Multiple style template options","feature.aiWriting.feat3":"One-click publishing to multiple platforms","feature.aiWriting.feat4":"SEO optimization suggestions","feature.aiWriting.feat5":"Content scheduling management","feature.aiWriting.feat6":"Data analysis and insights","highlight.title":"Why Choose Us?","highlight.subtitle":"Professional, Efficient, Intelligent Insurance Tool Platform","highlight.speed.title":"Lightning Fast","highlight.speed.desc":"AI streaming output, real-time feedback, no waiting, boost productivity","highlight.analysis.title":"Smart Analysis","highlight.analysis.desc":"Automatic document recognition, extract key information with up to 95% accuracy","highlight.ai.title":"AI Empowered","highlight.ai.desc":"Using latest AI technology, continuous optimization and upgrades, always staying ahead","stats.users":"Active Users","stats.docs":"Documents Analyzed","stats.accuracy":"Accuracy","stats.service":"Online Service","cta.title":"Ready to Get Started?","cta.subtitle":"Register now for free to experience our AI-driven insurance tool platform","cta.start":"Get Started","cta.register":"Free Sign Up","cta.login":"Login Now","footer.title":"Insurance Tool Platform","footer.desc":"AI-Driven Professional Insurance Tools","footer.products":"Products","footer.planTool":"Plan Assistant","footer.writingTool":"Content Tools","footer.dataAnalysis":"Data Analytics","footer.support":"Support","footer.helpCenter":"Help Center","footer.tutorials":"Tutorials","footer.contact":"Contact Us","footer.about":"About","footer.aboutUs":"About Us","footer.privacy":"Privacy Policy","footer.terms":"Terms of Service","footer.copyright":" 2025 HONGKONG MACRODATA TECHNOLOGY LIMITED. All rights reserved.","hero.title":"AI-Powered Tools to Significantly Boost Productivity","search.placeholder":"Search for tools or features...","category.all":"All","category.analysis":"Analytics","category.management":"Management","category.marketing":"Marketing","category.calculation":"Calculation","category.training":"Training","category.finance":"Finance","category.service":"Service","category.storage":"Storage","category.compliance":"Compliance","category.underwriting":"Underwriting","category.claims":"Claims","tools.discover":"Discover Tools","tools.subtitle":"Choose professional tools that fit your business needs","tools.use":"Use Now","tools.noResults":"No matching tools found","tools.tryOther":"Try searching with different keywords","tool.underwriting":"Smart Underwriting Assistant","tool.underwriting.desc":"AI-based intelligent underwriting system for quick risk assessment and improved efficiency","tool.calculator":"Premium Calculator","tool.calculator.desc":"Accurate premium calculation tool supporting multiple insurance products and rate models","tool.crm":"Customer Relationship Management CRM","tool.crm.desc":"Comprehensive customer relationship management to enhance service quality","tool.policy":"Policy Management","tool.policy.desc":"Efficient full lifecycle policy management system","tool.analytics":"Data Analytics Dashboard","tool.analytics.desc":"Visual data analysis for business trends and opportunities insights","tool.claims":"Claims Review System","tool.claims.desc":"Intelligent claims review for improved processing efficiency and accuracy","tool.compliance":"Compliance Checker","tool.compliance.desc":"Automated compliance checks to ensure regulatory adherence","tool.renewal":"Renewal Reminder System","tool.renewal.desc":"Smart renewal reminders to improve retention rates and customer satisfaction","tool.aiwriting":"Insurance Content AI Writing & Publishing System","tool.aiwriting.desc":"AI-driven insurance marketing content creation with one-click multi-platform publishing","tool.training":"Training & Learning Platform","tool.training.desc":"Professional insurance knowledge training and examination system","tool.commission":"Commission Calculation System","tool.commission.desc":"Precise commission calculation and settlement management system","tool.customer":"Online Customer Service System","tool.customer.desc":"AI-assisted intelligent customer service system for enhanced customer experience with accurate responses","tool.storage":"Document Cloud Storage","tool.storage.desc":"Secure cloud storage and management system for insurance documents","tool.plananalyzer":"Plan Analysis Tool","tool.plananalyzer.desc":"AI-powered intelligent parsing of policy documents with automatic key information extraction and analysis reports","tool.planmanage":"Plan Management","tool.planmanage.desc":"View and manage all saved insurance plan documents","stats.tools":"Professional Tools","stats.users":"Active Users","stats.efficiency":"Efficiency Boost","stats.satisfaction":"Satisfaction","footer.about":"About Us","footer.about.desc":"Dedicated to providing professional digital tools and solutions for insurance professionals","footer.products":"Products & Services","footer.underwriting":"Underwriting Tools","footer.claims":"Claims System","footer.analytics":"Data Analytics","footer.customer":"Customer Management","footer.help":"Help Center","footer.docs":"Documentation","footer.videos":"Video Tutorials","footer.faq":"FAQ","footer.contact":"Contact Us","footer.contactInfo":"Contact Information","footer.phone":"Phone: 852 62645180","footer.email":"Email: client@xingke888.com","footer.hours":"Hours: Monday - Friday 9:00-18:00","footer.copyright":" 2025 HONGKONG MACRODATA TECHNOLOGY LIMITED. All rights reserved."}}};gr.use(C9).init({resources:F9,lng:"zh-TW",fallbackLng:"zh-TW",interpolation:{escapeValue:!1}});/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),H9=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),WN=t=>{const e=H9(t);return e.charAt(0).toUpperCase()+e.slice(1)},_D=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),z9=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $9={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:s,...l},c)=>A.createElement("svg",{ref:c,...$9,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:_D("lucide",i),...!a&&!z9(l)&&{"aria-hidden":"true"},...l},[...s.map(([d,h])=>A.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=(t,e)=>{const n=A.forwardRef(({className:r,...i},a)=>A.createElement(q9,{ref:a,iconNode:e,className:_D(`lucide-${U9(WN(t))}`,`lucide-${t}`,r),...i}));return n.displayName=WN(t),n};/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Kd=Ft("arrow-left",Y9);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],G9=Ft("arrow-right",V9);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],X9=Ft("award",W9);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fo=Ft("chevron-down",K9);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Uo=Ft("chevron-up",Q9);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ld=Ft("circle-alert",Z9);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J9=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Qd=Ft("circle-check-big",J9);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tH=Ft("circle-check",eH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ns=Ft("clock",nH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rH=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],iH=Ft("dollar-sign",rH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],XN=Ft("eye",aH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Vr=Ft("file-text",sH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],lH=Ft("git-compare",oH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ND=Ft("list",uH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cH=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Bt=Ft("loader-circle",cH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Wm=Ft("message-square",dH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],fH=Ft("pen-tool",hH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],iv=Ft("refresh-cw",mH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],gH=Ft("save",pH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],yH=Ft("search",bH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],vH=Ft("send",xH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wH=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],mm=Ft("sparkles",wH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],KN=Ft("table",EH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],SH=Ft("target",AH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],zw=Ft("trash-2",TH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],NH=Ft("trending-up",_H);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],cp=Ft("upload",CH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],kH=Ft("user",OH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ru=Ft("x",jH);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],DH=Ft("zap",PH);function QN(){const t=co(),{t:e,i18n:n}=L9(),[r,i]=A.useState(!1),[a,s]=A.useState(!1),{user:l,isAuthenticated:c}=ka(),d=p=>{n.changeLanguage(p)},h=[{id:"plan-assistant",title:e("feature.planAssistant.title"),subtitle:e("feature.planAssistant.subtitle"),description:e("feature.planAssistant.description"),icon:Wm,color:"from-blue-600 to-cyan-600",features:[e("feature.planAssistant.feat1"),e("feature.planAssistant.feat2"),e("feature.planAssistant.feat3"),e("feature.planAssistant.feat4"),e("feature.planAssistant.feat5"),e("feature.planAssistant.feat6")],action:()=>{c?t("plan-management"):i(!0)},buttonText:e("feature.planAssistant.button"),image:"/plan-assistant.svg"},{id:"ai-writing",title:e("feature.aiWriting.title"),subtitle:e("feature.aiWriting.subtitle"),description:e("feature.aiWriting.description"),icon:fH,color:"from-purple-600 to-pink-600",features:[e("feature.aiWriting.feat1"),e("feature.aiWriting.feat2"),e("feature.aiWriting.feat3"),e("feature.aiWriting.feat4"),e("feature.aiWriting.feat5"),e("feature.aiWriting.feat6")],action:()=>window.open("https://ai.hongkong-insurance.com/","_blank"),buttonText:e("feature.aiWriting.button"),image:"/ai-writing.svg"}];return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-blue-50 to-slate-100",children:[f.jsx("header",{className:"bg-gradient-to-r from-navy-700 to-primary-700 shadow-lg sticky top-0 z-50 border-b border-primary-800",children:f.jsx("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 lg:px-8 py-3 sm:py-4",children:f.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2 sm:gap-0",children:[f.jsxs("div",{className:"flex items-center justify-end sm:order-2 gap-1 sm:gap-2 md:gap-3",children:[f.jsxs("select",{value:n.language,onChange:p=>d(p.target.value),className:"px-2 py-1 sm:px-3 sm:py-2 bg-white border border-primary-300 rounded-lg text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-primary-400 text-navy-700",children:[f.jsx("option",{value:"zh-TW",children:""}),f.jsx("option",{value:"zh-CN",children:""}),f.jsx("option",{value:"en",children:"EN"})]}),c?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:"text-xs sm:text-sm text-white hidden md:inline",children:[e("welcome"),l?.full_name]}),f.jsx("button",{onClick:()=>t("dashboard"),className:"px-2 py-1 sm:px-3 sm:py-2 md:px-4 bg-white text-primary-700 rounded-lg hover:bg-blue-50 transition-all text-xs sm:text-sm font-semibold whitespace-nowrap",children:e("dashboard")})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>i(!0),className:"px-2 py-1 sm:px-3 sm:py-2 md:px-4 text-white hover:text-blue-100 transition-all text-xs sm:text-sm font-medium whitespace-nowrap",children:e("login")}),f.jsx("button",{onClick:()=>s(!0),className:"px-2 py-1 sm:px-3 sm:py-2 md:px-4 bg-white text-primary-700 rounded-lg hover:bg-blue-50 transition-all text-xs sm:text-sm font-semibold whitespace-nowrap",children:e("register")})]})]}),f.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 sm:order-1",children:[f.jsx("div",{className:"w-10 h-10 sm:w-14 sm:h-14 md:w-16 md:h-16 lg:w-18 lg:h-18 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center flex-shrink-0 shadow-lg",children:f.jsx(mm,{className:"w-5 h-5 sm:w-7 sm:h-7 md:w-8 md:h-8 lg:w-9 lg:h-9 text-white"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h1",{className:"text-2xl sm:text-3xl md:text-3xl lg:text-4xl xl:text-4xl font-bold text-white leading-tight",children:e("header.title")}),f.jsx("p",{className:"text-xs sm:text-sm text-blue-100 hidden sm:block",children:e("header.subtitle")})]})]})]})})}),f.jsxs("section",{className:"relative py-10 sm:py-16 md:py-20 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary-500/15 via-blue-600/15 to-navy-500/15"}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:f.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[f.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 sm:px-4 sm:py-2 bg-primary-100 text-primary-700 rounded-full text-xs sm:text-sm font-semibold mb-4 sm:mb-6 border border-primary-200",children:[f.jsx(mm,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e("home.badge")]}),f.jsxs("h1",{className:`text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-navy-800 mb-4 sm:mb-6 px-2 ${n.language==="en"?"":"whitespace-nowrap"}`,children:[e("home.hero.title")," ",f.jsx("span",{className:"bg-gradient-to-r from-primary-600 via-blue-600 to-navy-600 bg-clip-text text-transparent",children:e("home.hero.titleHighlight")})]}),f.jsx("p",{className:"text-sm sm:text-base md:text-lg lg:text-xl text-gray-700 leading-relaxed px-4",children:e("home.hero.description")})]})})]}),f.jsx("section",{className:"py-8 sm:py-10 bg-gradient-to-b from-white to-slate-50",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 md:gap-8",children:h.map(p=>f.jsxs("div",{className:"bg-white border-2 border-primary-200 rounded-2xl p-4 sm:p-6 md:p-8 hover:border-primary-400 hover:shadow-xl transition-all",children:[f.jsxs("div",{className:`inline-flex items-center gap-1.5 sm:gap-2 px-3 py-1.5 sm:px-4 sm:py-2 bg-gradient-to-r ${p.color} text-white rounded-full text-xs sm:text-sm font-semibold mb-3 sm:mb-4 shadow-md`,children:[f.jsx(p.icon,{className:"w-3 h-3 sm:w-4 sm:h-4"}),f.jsx("span",{className:"hidden sm:inline",children:p.subtitle})]}),f.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold text-navy-800 mb-2 sm:mb-3",children:p.title}),f.jsx("p",{className:"text-sm sm:text-base text-gray-700 mb-4 sm:mb-6 leading-relaxed",children:p.description}),f.jsx("div",{className:"space-y-1.5 sm:space-y-2 mb-4 sm:mb-6",children:p.features.map((b,y)=>f.jsxs("div",{className:"flex items-start gap-1.5 sm:gap-2",children:[f.jsx(tH,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500 flex-shrink-0 mt-0.5"}),f.jsx("span",{className:"text-xs sm:text-sm text-gray-700",children:b})]},y))}),f.jsxs("button",{onClick:p.action,className:`group w-full px-4 py-2.5 sm:px-6 sm:py-3 bg-gradient-to-r ${p.color} text-white rounded-xl hover:shadow-lg transition-all text-sm sm:text-base font-semibold flex items-center justify-center gap-2`,children:[p.buttonText,f.jsx(G9,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:translate-x-1 transition-transform"})]})]},p.id))})})}),f.jsx("section",{className:"py-12 sm:py-16 md:py-20 bg-gradient-to-r from-navy-700 via-primary-600 to-navy-700 text-white",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[f.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-2 sm:mb-4",children:e("highlight.title")}),f.jsx("p",{className:"text-sm sm:text-base md:text-xl text-blue-100",children:e("highlight.subtitle")})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 md:gap-8",children:[f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 sm:p-8 hover:bg-white/20 transition-all border border-white/20",children:[f.jsx(DH,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 mb-3 sm:mb-4"}),f.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-2 sm:mb-3",children:e("highlight.speed.title")}),f.jsx("p",{className:"text-sm sm:text-base text-blue-100",children:e("highlight.speed.desc")})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 sm:p-8 hover:bg-white/20 transition-all border border-white/20",children:[f.jsx(Vr,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 mb-3 sm:mb-4"}),f.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-2 sm:mb-3",children:e("highlight.analysis.title")}),f.jsx("p",{className:"text-sm sm:text-base text-blue-100",children:e("highlight.analysis.desc")})]}),f.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-6 sm:p-8 hover:bg-white/20 transition-all sm:col-span-2 md:col-span-1 border border-white/20",children:[f.jsx(mm,{className:"w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 mb-3 sm:mb-4"}),f.jsx("h3",{className:"text-lg sm:text-xl md:text-2xl font-bold mb-2 sm:mb-3",children:e("highlight.ai.title")}),f.jsx("p",{className:"text-sm sm:text-base text-blue-100",children:e("highlight.ai.desc")})]})]})]})}),f.jsx("section",{className:"py-12 sm:py-16 md:py-20 bg-white",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 md:gap-8 text-center",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-600 to-blue-600 bg-clip-text text-transparent mb-1 sm:mb-2",children:"10K+"}),f.jsx("div",{className:"text-xs sm:text-sm md:text-base text-gray-700",children:e("stats.users")})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-navy-600 to-primary-600 bg-clip-text text-transparent mb-1 sm:mb-2",children:"50K+"}),f.jsx("div",{className:"text-xs sm:text-sm md:text-base text-gray-700",children:e("stats.docs")})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-blue-600 to-primary-500 bg-clip-text text-transparent mb-1 sm:mb-2",children:"95%"}),f.jsx("div",{className:"text-xs sm:text-sm md:text-base text-gray-700",children:e("stats.accuracy")})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-bold bg-gradient-to-r from-primary-600 to-navy-600 bg-clip-text text-transparent mb-1 sm:mb-2",children:"24/7"}),f.jsx("div",{className:"text-xs sm:text-sm md:text-base text-gray-700",children:e("stats.service")})]})]})})}),f.jsx("section",{className:"py-12 sm:py-16 md:py-20 bg-gradient-to-br from-navy-800 to-navy-900 text-white",children:f.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[f.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold mb-4 sm:mb-6",children:e("cta.title")}),f.jsx("p",{className:"text-sm sm:text-base md:text-xl text-blue-100 mb-6 sm:mb-8 px-4",children:e("cta.subtitle")}),f.jsx("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center px-4",children:c?f.jsx("button",{onClick:()=>t("plan-management"),className:"px-6 py-3 sm:px-8 sm:py-4 bg-white text-primary-700 rounded-xl hover:bg-blue-50 transition-all text-base sm:text-lg font-bold shadow-lg",children:e("cta.start")}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>s(!0),className:"px-6 py-3 sm:px-8 sm:py-4 bg-gradient-to-r from-primary-500 to-blue-600 text-white rounded-xl hover:from-primary-600 hover:to-blue-700 transition-all text-base sm:text-lg font-bold shadow-lg",children:e("cta.register")}),f.jsx("button",{onClick:()=>i(!0),className:"px-6 py-3 sm:px-8 sm:py-4 bg-white/10 backdrop-blur-lg text-white rounded-xl hover:bg-white/20 transition-all text-base sm:text-lg font-semibold border-2 border-white/30",children:e("cta.login")})]})})]})}),f.jsx("footer",{className:"bg-navy-900 text-gray-300 py-8 sm:py-12 border-t border-navy-800",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-6 sm:gap-8 mb-6 sm:mb-8",children:[f.jsxs("div",{className:"col-span-2 sm:col-span-2 md:col-span-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[f.jsx("div",{className:"w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-br from-primary-600 to-blue-700 rounded-lg flex items-center justify-center shadow-md",children:f.jsx(mm,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),f.jsx("span",{className:"text-white text-sm sm:text-base font-bold",children:e("footer.title")})]}),f.jsx("p",{className:"text-xs sm:text-sm text-gray-400",children:e("footer.desc")})]}),f.jsxs("div",{children:[f.jsx("h5",{className:"text-white font-semibold mb-3 sm:mb-4 text-sm sm:text-base",children:e("footer.products")}),f.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.planTool")})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.writingTool")})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.dataAnalysis")})})]})]}),f.jsxs("div",{children:[f.jsx("h5",{className:"text-white font-semibold mb-3 sm:mb-4 text-sm sm:text-base",children:e("footer.support")}),f.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.helpCenter")})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.tutorials")})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.contact")})})]})]}),f.jsxs("div",{children:[f.jsx("h5",{className:"text-white font-semibold mb-3 sm:mb-4 text-sm sm:text-base",children:e("footer.about")}),f.jsxs("ul",{className:"space-y-1.5 sm:space-y-2 text-xs sm:text-sm",children:[f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.aboutUs")})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.privacy")})}),f.jsx("li",{children:f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.terms")})})]})]})]}),f.jsx("div",{className:"border-t border-navy-800 pt-6 sm:pt-8 text-center text-xs sm:text-sm",children:f.jsx("p",{className:"text-gray-400",children:e("footer.copyright")})})]})}),r&&f.jsx(M9,{onClose:()=>i(!1),onSwitchToRegister:()=>{i(!1),s(!0)}}),a&&f.jsx(B9,{onClose:()=>s(!1),onSwitchToLogin:()=>{s(!1),i(!0)}})]})}const RH=gD,Ro=ut.create({baseURL:RH,headers:{"Content-Type":"application/json"}}),pm={getAllPolicies:()=>Ro.get("/policies/"),getPolicy:t=>Ro.get(`/policies/${t}/`),createPolicy:t=>Ro.post("/policies/",t),updatePolicy:(t,e)=>Ro.put(`/policies/${t}/`,e),deletePolicy:t=>Ro.delete(`/policies/${t}/`),getActivePolicies:()=>Ro.get("/policies/active_policies/"),cancelPolicy:t=>Ro.post(`/policies/${t}/cancel_policy/`)};function IH(){const t=co(),[e,n]=A.useState([]),[r,i]=A.useState(!0),[a,s]=A.useState(null),[l,c]=A.useState(!1),[d,h]=A.useState({policy_number:"",customer_name:"",policy_type:"",premium:"",start_date:"",end_date:"",status:"active"});A.useEffect(()=>{p()},[]);const p=async()=>{try{i(!0);const T=await pm.getAllPolicies();n(T.data.results||T.data),s(null)}catch(T){s(": "+T.message)}finally{i(!1)}},b=T=>{const{name:C,value:N}=T.target;h(P=>({...P,[C]:N}))},y=async T=>{T.preventDefault();try{await pm.createPolicy(d),c(!1),h({policy_number:"",customer_name:"",policy_type:"",premium:"",start_date:"",end_date:"",status:"active"}),p()}catch(C){s(": "+C.message)}},x=async T=>{if(window.confirm("?"))try{await pm.cancelPolicy(T),p()}catch(C){s(": "+C.message)}},w=async T=>{if(window.confirm("?"))try{await pm.deletePolicy(T),p()}catch(C){s(": "+C.message)}},E=T=>{const C={active:"bg-green-100 text-green-800",expired:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800"},N={active:"",expired:"",cancelled:""};return f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${C[T]}`,children:N[T]})};return r?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"text-xl text-gray-600",children:"..."})}):f.jsxs("div",{className:"container mx-auto px-4 py-8",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{className:"flex items-center space-x-4",children:[t&&f.jsxs("button",{onClick:()=>t("home"),className:"text-blue-600 hover:text-blue-800 font-medium flex items-center space-x-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),f.jsx("span",{children:""})]}),f.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:""})]}),f.jsx("button",{onClick:()=>c(!l),className:"bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200",children:l?"":""})]}),a&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:a}),l&&f.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[f.jsx("h2",{className:"text-xl font-semibold mb-4",children:""}),f.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"text",name:"policy_number",value:d.policy_number,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"text",name:"customer_name",value:d.customer_name,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"text",name:"policy_type",value:d.policy_type,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"number",name:"premium",value:d.premium,onChange:b,required:!0,step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"date",name:"start_date",value:d.start_date,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:""}),f.jsx("input",{type:"date",name:"end_date",value:d.end_date,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),f.jsx("div",{className:"md:col-span-2",children:f.jsx("button",{type:"submit",className:"w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200",children:""})})]})]}),f.jsx("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:f.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[f.jsx("thead",{className:"bg-gray-50",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?f.jsx("tr",{children:f.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:""})}):e.map(T=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T.policy_number}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T.customer_name}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T.policy_type}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["",parseFloat(T.premium).toFixed(2)]}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T.start_date}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:E(T.status)}),f.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[T.status==="active"&&f.jsx("button",{onClick:()=>x(T.id),className:"text-yellow-600 hover:text-yellow-900 mr-3",children:""}),f.jsx("button",{onClick:()=>w(T.id),className:"text-red-600 hover:text-red-900",children:""})]})]},T.id))})]})})]})}function LH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const ud=A.forwardRef(LH);function MH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const fl=A.forwardRef(MH);function BH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const FH=A.forwardRef(BH);function UH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}const $y=A.forwardRef(UH);function HH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const ZN=A.forwardRef(HH);function zH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"}))}const $H=A.forwardRef(zH);function qH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const YH=A.forwardRef(qH);function VH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const GH=A.forwardRef(VH);function WH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"}))}const JN=A.forwardRef(WH);function XH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Ko=A.forwardRef(XH);function KH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const eC=A.forwardRef(KH);function QH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const ZH=A.forwardRef(QH);function JH({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const qy=A.forwardRef(JH);function ez({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))}const tC=A.forwardRef(ez);function tz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Qo=A.forwardRef(tz);function nz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const dp=A.forwardRef(nz);function rz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Zd=A.forwardRef(rz);function iz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Tr=A.forwardRef(iz);function az({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"}))}const Yy=A.forwardRef(az);function sz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Eu=A.forwardRef(sz);function oz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const lz=A.forwardRef(oz);function uz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const nC=A.forwardRef(uz);function cz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const Vy=A.forwardRef(cz);function dz({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const hz=A.forwardRef(dz);function fz(){const t=co(),{user:e,logout:n,loading:r}=ka(),[i,a]=A.useState(!1),[s,l]=A.useState({full_name:"",email:"",nickname:""}),[c,d]=A.useState(!1),[h,p]=A.useState(!1),[b,y]=A.useState(1),[x,w]=A.useState(!1),[E,T]=A.useState(!0),[C,N]=A.useState(null),[P,k]=A.useState(!1),[j,D]=A.useState(!1);A.useEffect(()=>{const W=setTimeout(()=>{T(!1)},800);return()=>clearTimeout(W)},[]),A.useEffect(()=>{(async()=>{try{const R=localStorage.getItem("access_token");if(!R)return;const B=await ut.get(`${gt}/api/ip-image/saved`,{headers:{Authorization:`Bearer ${R}`}});B.data.status==="success"&&B.data.has_saved&&N(B.data.data)}catch(R){console.error("IP:",R)}})()},[]),A.useEffect(()=>{if(console.log(" [Dashboard]  JS-SDK"),console.log(" [Dashboard] window.wx :",typeof window.wx),console.log(" [Dashboard] window.wx.miniProgram :",typeof window.wx?.miniProgram),typeof window<"u"){const W=()=>{typeof window.wx<"u"&&window.wx.miniProgram?(console.log(" [Dashboard]  JS-SDK "),console.log(" [Dashboard] wx.miniProgram :",Object.keys(window.wx.miniProgram))):(console.log(" [Dashboard]  JS-SDK ..."),setTimeout(W,100))};setTimeout(W,100)}},[]),A.useEffect(()=>{if(console.log(" [Dashboard] useEffect  - "),console.log("  - loading:",r),console.log("  - user:",e?`(${e.id})`:""),console.log("  - isLoggingOut:",P),r){console.log("   AuthContext ");return}if(P){console.log("   ");return}if(new URLSearchParams(window.location.search).has("miniapp_token")){console.log("   URLminiapp_token");return}const B=Y();if(console.log("  - :",B),B&&!e){console.log(" [Dashboard] ,");const re=setTimeout(()=>{console.log(" [Dashboard] "),yD()},500);return()=>clearTimeout(re)}else console.log(" [Dashboard] ")},[e,r,P]);const H=()=>{typeof wx<"u"&&wx.miniProgram?wx.miniProgram.navigateTo({url:"/pages/payment/payment?amount=1"}):alert(`

""`)},Y=()=>{const W=typeof window<"u"&&typeof window.wx<"u"&&typeof window.wx.miniProgram<"u",R=typeof window<"u"&&window.__wxjs_environment==="miniprogram",B=navigator.userAgent||"",re=B.toLowerCase().indexOf("miniprogram")>-1;return console.log(" [Dashboard] :"),console.log("  - window.wx :",typeof window.wx<"u"),console.log("  - window.wx.miniProgram :",W),console.log("  - __wxjs_environment:",window.__wxjs_environment),console.log("  - UserAgent:",B),console.log("  - UserAgentminiprogram:",re),W||R||re},X=[{name:"",icon:eC,action:()=>t("plan-management"),color:"from-primary-600 to-blue-600",show:!0},{name:"IP",icon:Tr,action:()=>t("ip-image-generator"),color:"from-pink-600 to-purple-600",show:!0},{name:"IP",icon:Ko,action:()=>t("content-image-generator"),color:"from-indigo-600 to-blue-600",show:!0},{name:"",icon:Tr,action:()=>t("video-projects"),color:"from-orange-600 to-red-600",show:!0},{name:"IP",icon:JN,action:()=>t("text-to-speech"),color:"from-blue-600 to-cyan-600",show:!0},{name:"",icon:eC,action:()=>t("media-library"),color:"from-green-600 to-emerald-600",show:!0},{name:"",icon:ZH,action:()=>window.open("https://write.xingke888.com/editor","_blank"),color:"from-navy-600 to-primary-600",show:!0},{name:"",icon:JN,action:H,color:"from-purple-600 to-pink-600",show:!1}].filter(W=>W.show),z=()=>{console.log(" [Dashboard] "),console.log(" [Dashboard] :",e),console.log(" [Dashboard] :",e?.wechat),console.log(" [Dashboard] :",e?.wechat?.nickname),l({full_name:e?.full_name||"",email:e?.email||"",nickname:e?.wechat?.nickname||""}),a(!0)},K=async()=>{try{d(!0);const W=localStorage.getItem("access_token");if(!W){alert("");return}const R=await ut.put(`${gt}/api/auth/profile/`,{full_name:s.full_name,email:s.email},{headers:{Authorization:`Bearer ${W}`}});e?.wechat&&s.nickname&&s.nickname!==e.wechat.nickname&&await ut.post(`${gt}/api/wechat/update-profile`,{nickname:s.nickname},{headers:{Authorization:`Bearer ${W}`}});const B={...e,email:R.data.user.email,full_name:R.data.user.full_name,first_name:R.data.user.first_name,last_name:R.data.user.last_name};e?.wechat&&s.nickname&&(B.wechat={...e.wechat,nickname:s.nickname}),localStorage.setItem("user",JSON.stringify(B)),a(!1),alert(""),window.location.reload()}catch(W){console.error(":",W);const R=W.response?.data?.error||W.response?.data?.message||"";alert(R)}finally{d(!1)}},ce=()=>{console.log("=========================================="),console.log(" [Dashboard] "),console.log(" [Dashboard] :",e),console.log(" [Dashboard] :",e?.wechat?"":""),k(!0),console.log(" [Dashboard]  isLoggingOut = true");const W=e?.wechat!==void 0&&e?.wechat!==null;console.log(" [Dashboard] isWeChatUser:",W);const R=Y();console.log(" [Dashboard] isInMiniProgram():",R),console.log(" [Dashboard] window.wx:",typeof window.wx),console.log(" [Dashboard] window.wx.miniProgram:",typeof window.wx?.miniProgram),W&&R?(console.log(" [Dashboard]   + "),console.log(" [Dashboard] "),K7(n,()=>{console.log(" [Dashboard]  "),alert(""),k(!1)})):(console.log(" [Dashboard]  "),console.log(" [Dashboard] "),n(),t("home")),console.log("==========================================")},te=async()=>{try{w(!0);const W=await ut.post(`${gt}/api/payment/create-jsapi`,{amount:b,description:""});if(W.data.code===200){const R=W.data.data.payment;if(typeof WeixinJSBridge>"u"){alert("JS-SDK");return}WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:R.appId,timeStamp:R.timeStamp,nonceStr:R.nonceStr,package:R.package,signType:R.signType,paySign:R.paySign},function(B){B.err_msg==="get_brand_wcpay_request:ok"?(alert(""),p(!1)):B.err_msg==="get_brand_wcpay_request:cancel"?alert(""):alert(""+B.err_msg)})}else alert(W.data.message||"")}catch(W){console.error(":",W),alert(W.response?.data?.message||"")}finally{w(!1)}};return E?f.jsx("div",{className:"min-h-screen bg-blue-100 flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"}),f.jsx("p",{className:"mt-4 text-gray-600 text-sm font-medium",children:"..."})]})}):f.jsxs("div",{className:"min-h-screen bg-blue-100",children:[f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[f.jsxs("div",{className:"mb-5",children:[f.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-0.5",children:["",e?.wechat?.nickname||e?.full_name]}),f.jsx("p",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric",weekday:"long"})})]}),f.jsx("div",{className:"mb-5",children:f.jsx("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 border-2 border-purple-200 rounded-2xl p-6 shadow-sm hover:shadow-md transition-all",children:f.jsxs("div",{className:"flex items-center gap-4",children:[C?f.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>D(!0),children:[f.jsx("img",{src:C.generated_image_url,alt:"IP",className:"w-24 h-24 sm:w-28 sm:h-28 rounded-2xl object-cover shadow-lg ring-4 ring-white transition-all group-hover:ring-purple-400 group-hover:shadow-xl"}),f.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 rounded-2xl transition-all flex items-center justify-center",children:f.jsx("svg",{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}):f.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-2xl bg-gradient-to-br from-purple-400 to-pink-400 shadow-lg ring-4 ring-white flex items-center justify-center",children:f.jsx(Tr,{className:"w-12 h-12 text-white"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("div",{className:"flex items-center gap-2 mb-2",children:f.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"IP"})}),f.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:C?C.prompt||"IP":"IP"}),f.jsx("div",{className:"flex gap-2 flex-wrap",children:C?f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:()=>D(!0),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-white border-2 border-purple-300 text-purple-700 rounded-lg hover:bg-purple-50 transition-all text-sm font-medium shadow-sm",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),""]}),f.jsxs("button",{onClick:()=>t("ip-image-generator"),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all text-sm font-medium shadow-sm hover:shadow-md",children:[f.jsx(Tr,{className:"w-4 h-4"}),""]})]}):f.jsxs("button",{onClick:()=>t("ip-image-generator"),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all text-sm font-medium shadow-sm hover:shadow-md",children:[f.jsx(Tr,{className:"w-4 h-4"}),""]})})]})]})})}),f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:f.jsxs("div",{className:"lg:col-span-3",children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:""}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:X.map((W,R)=>f.jsxs("button",{onClick:W.action,className:"bg-white border border-blue-100 rounded-lg p-6 hover:border-blue-400 hover:shadow-md transition-all flex items-center gap-4 text-left group relative overflow-hidden min-h-[120px]",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),f.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center flex-shrink-0 shadow-sm group-hover:shadow-md group-hover:scale-105 transition-all relative z-10",children:f.jsx(W.icon,{className:"w-7 h-7 text-white"})}),f.jsxs("div",{className:"flex-1 relative z-10",children:[f.jsx("h4",{className:"text-base font-bold text-gray-900 group-hover:text-blue-600 transition-colors",children:W.name}),f.jsx("p",{className:"text-sm text-gray-500 mt-1 font-medium",children:""})]}),f.jsx("div",{className:"text-gray-400 group-hover:text-blue-500 transition-colors relative z-10",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},R))})]})}),f.jsxs("div",{className:"mt-5 bg-white border border-gray-200 rounded-lg shadow-sm",children:[f.jsx("div",{className:"px-5 py-3 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:f.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:""})}),f.jsxs("div",{className:"p-4",children:[e?.wechat&&f.jsx("div",{className:"mb-3 pb-3 border-b border-gray-100",children:f.jsxs("div",{className:"flex items-center space-x-2.5",children:[e.wechat.avatar?f.jsx("img",{src:e.wechat.avatar,alt:"",className:"h-10 w-10 rounded-full object-cover ring-2 ring-blue-100",onError:W=>{W.target.style.display="none",W.target.nextSibling.style.display="flex"}}):null,f.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center text-white text-sm font-semibold ring-2 ring-blue-100 shadow-sm",style:{display:e.wechat.avatar?"none":"flex"},children:e.wechat.nickname?.charAt(0).toUpperCase()}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center space-x-1.5",children:[f.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e.wechat.nickname}),f.jsx("span",{className:"px-1.5 py-0.5 bg-green-50 text-green-600 text-xs rounded font-medium border border-green-200",children:""})]}),f.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:""})]})]})}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center py-1.5 border-b border-gray-100",children:[f.jsx("label",{className:"text-xs font-medium text-gray-500 w-20",children:""}),f.jsx("p",{className:"text-sm text-gray-900 flex-1",children:e?.full_name})]}),f.jsxs("div",{className:"flex items-center py-1.5 border-b border-gray-100",children:[f.jsx("label",{className:"text-xs font-medium text-gray-500 w-20",children:""}),f.jsx("p",{className:"text-sm text-gray-900 flex-1 break-all",children:e?.email})]}),e?.wechat&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center py-1.5 border-b border-gray-100",children:[f.jsx("label",{className:"text-xs font-medium text-gray-500 w-20",children:""}),f.jsx("p",{className:"text-sm text-gray-900 flex-1",children:e.wechat.nickname})]}),e.wechat.phone&&f.jsxs("div",{className:"flex items-center py-1.5 border-b border-gray-100",children:[f.jsx("label",{className:"text-xs font-medium text-gray-500 w-20",children:""}),f.jsx("p",{className:"text-sm text-gray-900 flex-1",children:e.wechat.phone})]})]})]}),f.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:f.jsx("button",{onClick:z,className:"w-full px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-sm hover:shadow",children:""})})]})]}),f.jsx("div",{className:"mt-4 flex justify-center",children:f.jsx("button",{onClick:ce,className:"px-6 py-2 text-sm bg-white text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-red-600 hover:border-red-300 transition-colors font-medium",children:""})})]}),h&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-auto border border-gray-200",children:[f.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""})}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"space-y-5",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:""}),f.jsx("input",{type:"number",min:"0.01",step:"0.01",value:b,onChange:W=>y(parseFloat(W.target.value)||0),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xl font-semibold text-center"})]}),f.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-blue-900",children:""}),f.jsx("p",{className:"text-xs text-blue-700 mt-0.5",children:""})]})]})}),f.jsxs("div",{className:"text-xs text-gray-500 space-y-1.5 bg-gray-50 rounded-lg p-3",children:[f.jsx("p",{children:" "}),f.jsx("p",{children:" "}),f.jsx("p",{children:" "})]})]}),f.jsxs("div",{className:"flex space-x-3 mt-6",children:[f.jsx("button",{onClick:()=>p(!1),disabled:x,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 font-medium text-sm",children:""}),f.jsx("button",{onClick:te,disabled:x||b<=0,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 font-medium text-sm",children:x?f.jsx("span",{children:"..."}):f.jsxs(f.Fragment,{children:[f.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{d:"M8.5 2A5.5 5.5 0 003 7.5v9A5.5 5.5 0 008.5 22h7a5.5 5.5 0 005.5-5.5v-9A5.5 5.5 0 0015.5 2h-7zm0 2h7A3.5 3.5 0 0119 7.5v9a3.5 3.5 0 01-3.5 3.5h-7A3.5 3.5 0 015 16.5v-9A3.5 3.5 0 018.5 4z"})}),f.jsx("span",{children:""})]})})]})]})]})}),i&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-auto border border-gray-200",children:[f.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:f.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:""})}),f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"space-y-5",children:[e?.wechat&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:""}),f.jsx("input",{type:"text",value:s.nickname,onChange:W=>l({...s,nickname:W.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"",maxLength:100}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1.5 flex items-center",children:[f.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),""]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:""}),f.jsx("input",{type:"text",value:s.full_name,onChange:W=>l({...s,full_name:W.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:""})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:""}),f.jsx("input",{type:"email",value:s.email,onChange:W=>l({...s,email:W.target.value}),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:""})]})]}),f.jsxs("div",{className:"flex space-x-3 mt-6",children:[f.jsx("button",{onClick:()=>a(!1),disabled:c,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 font-medium text-sm",children:""}),f.jsx("button",{onClick:K,disabled:c,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm",children:c?"...":""})]})]})]})}),j&&C&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>D(!1),children:f.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",children:[f.jsx("button",{onClick:()=>D(!1),className:"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors",children:f.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-2xl",onClick:W=>W.stopPropagation(),children:[f.jsx("img",{src:C.generated_image_url,alt:"IP",className:"w-full h-auto object-contain max-h-[80vh]"}),C.prompt&&f.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 border-t border-gray-200",children:f.jsx("p",{className:"text-sm text-gray-700 text-center",children:C.prompt})})]}),f.jsx("p",{className:"text-white text-center mt-4 text-sm",children:""})]})})]})}const Ar=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),av=[.001,0,0,.001,0,0],Gy=1.35,hi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},to={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Jd="pdfjs_internal_editor_",ht={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Nt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},mz={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},sv={TRIANGLES:1,LATTICE:2},ir={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Cn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},fu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},bg={ERRORS:0,WARNINGS:1,INFOS:5},eh={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},cd={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},pz={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let yg=bg.WARNINGS;function gz(t){Number.isInteger(t)&&(yg=t)}function bz(){return yg}function xg(t){yg>=bg.INFOS&&console.info(`Info: ${t}`)}function dt(t){yg>=bg.WARNINGS&&console.warn(`Warning: ${t}`)}function Xt(t){throw new Error(t)}function Ct(t,e){t||Xt(e)}function yz(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function CD(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"&&(n.addDefaultProtocol&&t.startsWith("www.")&&t.match(/\./g)?.length>=2&&(t=`http://${t}`),n.tryConvertEncoding))try{t=Az(t)}catch{}const r=e?URL.parse(t,e):URL.parse(t);return yz(r)?r:null}function OD(t,e,n=!1){const r=URL.parse(t);return r?(r.hash=e,r.href):n&&CD(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function bt(t,e,n,r=!1){return Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const ml=(function(){function e(n,r){this.message=n,this.name=r}return e.prototype=new Error,e.constructor=e,e})();class rC extends ml{constructor(e,n){super(e,"PasswordException"),this.code=n}}class Wy extends ml{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class ov extends ml{constructor(e){super(e,"InvalidPDFException")}}class hp extends ml{constructor(e,n,r){super(e,"ResponseException"),this.status=n,this.missing=r}}class xz extends ml{constructor(e){super(e,"FormatError")}}class so extends ml{constructor(e){super(e,"AbortException")}}function kD(t){(typeof t!="object"||t?.length===void 0)&&Xt("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const r=[];for(let i=0;i<e;i+=n){const a=Math.min(i+n,e),s=t.subarray(i,a);r.push(String.fromCharCode.apply(null,s))}return r.join("")}function _h(t){typeof t!="string"&&Xt("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let r=0;r<e;++r)n[r]=t.charCodeAt(r)&255;return n}function vz(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function wz(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function Ez(){try{return new Function(""),!0}catch{return!1}}class ur{static get isLittleEndian(){return bt(this,"isLittleEndian",wz())}static get isEvalSupported(){return bt(this,"isEvalSupported",Ez())}static get isOffscreenCanvasSupported(){return bt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return bt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return bt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return bt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return bt(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return bt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Xy=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class Ve{static makeHexColor(e,n,r){return`#${Xy[e]}${Xy[n]}${Xy[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let r;e[0]?(e[0]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[3],n[3]*=e[3]):(r=n[0],n[0]=n[1],n[1]=r,r=n[2],n[2]=n[3],n[3]=r,e[1]<0&&(r=n[1],n[1]=n[3],n[3]=r),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(r=n[0],n[0]=n[2],n[2]=r),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,r=0){const i=e[r],a=e[r+1];e[r]=i*n[0]+a*n[2]+n[4],e[r+1]=i*n[1]+a*n[3]+n[5]}static applyTransformToBezier(e,n,r=0){const i=n[0],a=n[1],s=n[2],l=n[3],c=n[4],d=n[5];for(let h=0;h<6;h+=2){const p=e[r+h],b=e[r+h+1];e[r+h]=p*i+b*s+c,e[r+h+1]=p*a+b*l+d}}static applyInverseTransform(e,n){const r=e[0],i=e[1],a=n[0]*n[3]-n[1]*n[2];e[0]=(r*n[3]-i*n[2]+n[2]*n[5]-n[4]*n[3])/a,e[1]=(-r*n[1]+i*n[0]+n[4]*n[1]-n[5]*n[0])/a}static axialAlignedBoundingBox(e,n,r){const i=n[0],a=n[1],s=n[2],l=n[3],c=n[4],d=n[5],h=e[0],p=e[1],b=e[2],y=e[3];let x=i*h+c,w=x,E=i*b+c,T=E,C=l*p+d,N=C,P=l*y+d,k=P;if(a!==0||s!==0){const j=a*h,D=a*b,H=s*p,Y=s*y;x+=H,T+=H,E+=Y,w+=Y,C+=j,k+=j,P+=D,N+=D}r[0]=Math.min(r[0],x,E,w,T),r[1]=Math.min(r[1],C,P,N,k),r[2]=Math.max(r[2],x,E,w,T),r[3]=Math.max(r[3],C,P,N,k)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const r=e[0],i=e[1],a=e[2],s=e[3],l=r**2+i**2,c=r*a+i*s,d=a**2+s**2,h=(l+d)/2,p=Math.sqrt(h**2-(l*d-c**2));n[0]=Math.sqrt(h+p||1),n[1]=Math.sqrt(h-p||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const r=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(r>i)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return a>s?null:[r,a,i,s]}static pointBoundingBox(e,n,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],n),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],n)}static rectBoundingBox(e,n,r,i,a){a[0]=Math.min(a[0],e,r),a[1]=Math.min(a[1],n,i),a[2]=Math.max(a[2],e,r),a[3]=Math.max(a[3],n,i)}static#e(e,n,r,i,a,s,l,c,d,h){if(d<=0||d>=1)return;const p=1-d,b=d*d,y=b*d,x=p*(p*(p*e+3*d*n)+3*b*r)+y*i,w=p*(p*(p*a+3*d*s)+3*b*l)+y*c;h[0]=Math.min(h[0],x),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],x),h[3]=Math.max(h[3],w)}static#t(e,n,r,i,a,s,l,c,d,h,p,b){if(Math.abs(d)<1e-12){Math.abs(h)>=1e-12&&this.#e(e,n,r,i,a,s,l,c,-p/h,b);return}const y=h**2-4*p*d;if(y<0)return;const x=Math.sqrt(y),w=2*d;this.#e(e,n,r,i,a,s,l,c,(-h+x)/w,b),this.#e(e,n,r,i,a,s,l,c,(-h-x)/w,b)}static bezierBoundingBox(e,n,r,i,a,s,l,c,d){d[0]=Math.min(d[0],e,l),d[1]=Math.min(d[1],n,c),d[2]=Math.max(d[2],e,l),d[3]=Math.max(d[3],n,c),this.#t(e,r,a,l,n,i,s,c,3*(-e+3*(r-a)+l),6*(e-2*r+a),3*(r-e),d),this.#t(e,r,a,l,n,i,s,c,3*(-n+3*(i-s)+c),6*(n-2*i+s),3*(i-n),d)}}function Az(t){return decodeURIComponent(escape(t))}let Ky=null,iC=null;function Sz(t){return Ky||(Ky=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,iC=new Map([["","t"]])),t.replaceAll(Ky,(e,n,r)=>n?n.normalize("NFKC"):iC.get(r))}function jD(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),kD(t)}const gu="pdfjs_internal_id_";function Tz(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,i,...a]=n;if(!t(r)&&!Number.isInteger(r)||!e(i))return!1;const s=a.length;let l=!0;switch(i.name){case"XYZ":if(s<2||s>3)return!1;break;case"Fit":case"FitB":return s===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(s>1)return!1;break;case"FitR":if(s!==4)return!1;l=!1;break;default:return!1}for(const c of a)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Sr(t,e,n){return Math.min(Math.max(t,e),n)}function PD(t){return Uint8Array.prototype.toBase64?t.toBase64():btoa(kD(t))}function _z(t){return Uint8Array.fromBase64?Uint8Array.fromBase64(t):_h(atob(t))}typeof Promise.try!="function"&&(Promise.try=function(t,...e){return new Promise(n=>{n(t(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});class th{static textContent(e){const n=[],r={items:n,styles:Object.create(null)};function i(a){if(!a)return;let s=null;const l=a.name;if(l==="#text")s=a.value;else if(th.shouldBuildText(l))a?.attributes?.textContent?s=a.attributes.textContent:a.value&&(s=a.value);else return;if(s!==null&&n.push({str:s}),!!a.children)for(const c of a.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class DD{static setupStorage(e,n,r,i,a){const s=i.getValue(n,{value:null});switch(r.name){case"textarea":if(s.value!==null&&(e.textContent=s.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(n,{value:l.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(s.value===r.attributes.xfaOn?e.setAttribute("checked",!0):s.value===r.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",l=>{i.setValue(n,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(s.value!==null&&e.setAttribute("value",s.value),a==="print")break;e.addEventListener("input",l=>{i.setValue(n,{value:l.target.value})})}break;case"select":if(s.value!==null){e.setAttribute("value",s.value);for(const l of r.children)l.attributes.value===s.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,d=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(n,{value:d})});break}}static setAttributes({html:e,element:n,storage:r=null,intent:i,linkService:a}){const{attributes:s}=n,l=e instanceof HTMLAnchorElement;s.type==="radio"&&(s.name=`${s.name}-${i}`);for(const[c,d]of Object.entries(s))if(d!=null)switch(c){case"class":d.length&&e.setAttribute(c,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,d)}l&&a.addLinkAttributes(e,s.href,s.newWindow),r&&s.dataId&&this.setupStorage(e,s.dataId,n,r)}static render(e){const n=e.annotationStorage,r=e.linkService,i=e.xfaHtml,a=e.intent||"display",s=document.createElement(i.name);i.attributes&&this.setAttributes({html:s,element:i,intent:a,linkService:r});const l=a!=="richText",c=e.div;if(c.append(s),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=p}l&&c.setAttribute("class","xfaLayer xfaFont");const d=[];if(i.children.length===0){if(i.value){const p=document.createTextNode(i.value);s.append(p),l&&th.shouldBuildText(i.name)&&d.push(p)}return{textDivs:d}}const h=[[i,-1,s]];for(;h.length>0;){const[p,b,y]=h.at(-1);if(b+1===p.children.length){h.pop();continue}const x=p.children[++h.at(-1)[1]];if(x===null)continue;const{name:w}=x;if(w==="#text"){const T=document.createTextNode(x.value);d.push(T),y.append(T);continue}const E=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,w):document.createElement(w);if(y.append(E),x.attributes&&this.setAttributes({html:E,element:x,storage:n,intent:a,linkService:r}),x.children?.length>0)h.push([x,-1,E]);else if(x.value){const T=document.createTextNode(x.value);l&&th.shouldBuildText(w)&&d.push(T),E.append(T)}}for(const p of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const Ka="http://www.w3.org/2000/svg";class Iu{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Nh(t,e="text"){if(Od(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(i.response);return}n(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class Ch{constructor({viewBox:e,userUnit:n,scale:r,rotation:i,offsetX:a=0,offsetY:s=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=n,this.scale=r,this.rotation=i,this.offsetX=a,this.offsetY=s,r*=n;const c=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let h,p,b,y;switch(i%=360,i<0&&(i+=360),i){case 180:h=-1,p=0,b=0,y=1;break;case 90:h=0,p=1,b=1,y=0;break;case 270:h=0,p=-1,b=-1,y=0;break;case 0:h=1,p=0,b=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(b=-b,y=-y);let x,w,E,T;h===0?(x=Math.abs(d-e[1])*r+a,w=Math.abs(c-e[0])*r+s,E=(e[3]-e[1])*r,T=(e[2]-e[0])*r):(x=Math.abs(c-e[0])*r+a,w=Math.abs(d-e[1])*r+s,E=(e[2]-e[0])*r,T=(e[3]-e[1])*r),this.transform=[h*r,p*r,b*r,y*r,x-h*r*c-b*r*d,w-p*r*c-y*r*d],this.width=E,this.height=T}get rawDims(){const e=this.viewBox;return bt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:a=!1}={}){return new Ch({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:a})}convertToViewportPoint(e,n){const r=[e,n];return Ve.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const n=[e[0],e[1]];Ve.applyTransform(n,this.transform);const r=[e[2],e[3]];return Ve.applyTransform(r,this.transform),[n[0],n[1],r[0],r[1]]}convertToPdfPoint(e,n){const r=[e,n];return Ve.applyInverseTransform(r,this.transform),r}}class $w extends ml{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function vg(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function qw(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function Nz(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function Cz(t,e="document.pdf"){if(typeof t!="string")return e;if(vg(t))return dt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(t);if(!r)return e;const i=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},a=/\.pdf$/i,s=r.pathname.split("/").at(-1);if(a.test(s))return i(s);if(r.searchParams.size>0){const l=Array.from(r.searchParams.values()).reverse();for(const d of l)if(a.test(d))return i(d);const c=Array.from(r.searchParams.keys()).reverse();for(const d of c)if(a.test(d))return i(d)}if(r.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(c)return i(c[0])}return e}class aC{started=Object.create(null);times=[];time(e){e in this.started&&dt(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||dt(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:r}of this.times)n=Math.max(r.length,n);for(const{name:r,start:i,end:a}of this.times)e.push(`${r.padEnd(n)} ${a-i}ms
`);return e.join("")}}function Od(t,e){const n=e?URL.parse(t,e):URL.parse(t);return n?.protocol==="http:"||n?.protocol==="https:"}function Hi(t){t.preventDefault()}function bn(t){t.preventDefault(),t.stopPropagation()}function Oz(t){console.log("Deprecated API usage: "+t)}class lv{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#e.exec(e);if(!n)return null;const r=parseInt(n[1],10);let i=parseInt(n[2],10);i=i>=1&&i<=12?i-1:0;let a=parseInt(n[3],10);a=a>=1&&a<=31?a:1;let s=parseInt(n[4],10);s=s>=0&&s<=23?s:0;let l=parseInt(n[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(n[6],10);c=c>=0&&c<=59?c:0;const d=n[7]||"Z";let h=parseInt(n[8],10);h=h>=0&&h<=23?h:0;let p=parseInt(n[9],10)||0;return p=p>=0&&p<=59?p:0,d==="-"?(s+=h,l+=p):d==="+"&&(s-=h,l-=p),new Date(Date.UTC(r,i,a,s,l,c))}}function kz(t,{scale:e=1,rotation:n=0}){const{width:r,height:i}=t.attributes.style,a=[0,0,parseInt(r),parseInt(i)];return new Ch({viewBox:a,userUnit:1,scale:e,rotation:n})}function Oh(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(dt(`Not a valid color format: "${t}"`),[0,0,0])}function jz(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const r=window.getComputedStyle(e).color;t.set(n,Oh(r))}e.remove()}function hn(t){const{a:e,b:n,c:r,d:i,e:a,f:s}=t.getTransform();return[e,n,r,i,a,s]}function ha(t){const{a:e,b:n,c:r,d:i,e:a,f:s}=t.getTransform().invertSelf();return[e,n,r,i,a,s]}function al(t,e,n=!1,r=!0){if(e instanceof Ch){const{pageWidth:i,pageHeight:a}=e.rawDims,{style:s}=t,l=ur.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,d=`var(--total-scale-factor) * ${a}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,p=l?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!n||e.rotation%180===0?(s.width=h,s.height=p):(s.width=p,s.height=h)}r&&t.setAttribute("data-main-rotation",e.rotation)}class Aa{constructor(){const{pixelRatio:e}=Aa;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,r,i,a=-1){let s=1/0,l=1/0,c=1/0;r=Aa.capPixels(r,a),r>0&&(s=Math.sqrt(r/(e*n))),i!==-1&&(l=i/e,c=i/n);const d=Math.min(s,l,c);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,r):r}return e}}const uv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Pz{static get isDarkMode(){return bt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Dz{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),bt(this,"commentForegroundColor",Oh(r))}}function Rz(t,e,n,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return t=Math.round(t*r+i),e=Math.round(e*r+i),n=Math.round(n*r+i),[t,e,n]}function sC(t,e){const n=t[0]/255,r=t[1]/255,i=t[2]/255,a=Math.max(n,r,i),s=Math.min(n,r,i),l=(a+s)/2;if(a===s)e[0]=e[1]=0;else{const c=a-s;switch(e[1]=l<.5?c/(a+s):c/(2-a-s),a){case n:e[0]=((r-i)/c+(r<i?6:0))*60;break;case r:e[0]=((i-n)/c+2)*60;break;case i:e[0]=((n-r)/c+4)*60;break}}e[2]=l}function cv(t,e){const n=t[0],r=t[1],i=t[2],a=(1-Math.abs(2*i-1))*r,s=a*(1-Math.abs(n/60%2-1)),l=i-a/2;switch(Math.floor(n/60)){case 0:e[0]=a+l,e[1]=s+l,e[2]=l;break;case 1:e[0]=s+l,e[1]=a+l,e[2]=l;break;case 2:e[0]=l,e[1]=a+l,e[2]=s+l;break;case 3:e[0]=l,e[1]=s+l,e[2]=a+l;break;case 4:e[0]=s+l,e[1]=l,e[2]=a+l;break;case 5:case 6:e[0]=a+l,e[1]=l,e[2]=s+l;break}}function oC(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function lC(t,e,n){cv(t,n),n.map(oC);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];cv(e,n),n.map(oC);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const uC=new Map;function Iz(t,e){const n=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=uC.get(n);if(r)return r;const i=new Float32Array(9),a=i.subarray(0,3),s=i.subarray(3,6);sC(t,s);const l=i.subarray(6,9);sC(e,l);const c=l[2]<.5,d=c?12:4.5;if(s[2]=c?Math.sqrt(s[2]):1-Math.sqrt(1-s[2]),lC(s,l,a)<d){let h,p;c?(h=s[2],p=1):(h=0,p=s[2]);const b=.005;for(;p-h>b;){const y=s[2]=(h+p)/2;c===lC(s,l,a)<d?h=y:p=y}s[2]=c?p:h}return cv(s,a),r=Ve.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),uC.set(n,r),r}function RD({html:t,dir:e,className:n},r){const i=document.createDocumentFragment();if(typeof t=="string"){const a=document.createElement("p");a.dir=e||"auto";const s=t.split(/(?:\r\n?|\n)/);for(let l=0,c=s.length;l<c;++l){const d=s[l];a.append(document.createTextNode(d)),l<c-1&&a.append(document.createElement("br"))}i.append(a)}else DD.render({xfaHtml:t,div:i,intent:"richText"});i.firstChild.classList.add("richText",n),r.append(i)}function ID(t){const e=new Path2D;if(!t)return e;for(let n=0,r=t.length;n<r;)switch(t[n++]){case cd.moveTo:e.moveTo(t[n++],t[n++]);break;case cd.lineTo:e.lineTo(t[n++],t[n++]);break;case cd.curveTo:e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);break;case cd.quadraticCurveTo:e.quadraticCurveTo(t[n++],t[n++],t[n++],t[n++]);break;case cd.closePath:e.closePath();break;default:dt(`Unrecognized drawing path operator: ${t[n-1]}`);break}return e}class Md{#e=null;#t=null;#r;#n=null;#s=null;#a=null;#i=null;#o=null;static#u=null;constructor(e){this.#r=e,Md.#u||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=this.#r._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",Hi,{signal:n}),e.addEventListener("pointerdown",Md.#l,{signal:n}));const r=this.#n=document.createElement("div");r.className="buttons",e.append(r);const i=this.#r.toolbarPosition;if(i){const{style:a}=e,s=this.#r._uiManager.direction==="ltr"?1-i[0]:i[0];a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#r._focusEventsAllowed=!1,bn(e)}#d(e){this.#r._focusEventsAllowed=!0,bn(e)}#f(e){const n=this.#r._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",Hi,{signal:n}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=this.#r,r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",Md.#u[e]),this.#f(r)&&r.addEventListener("click",i=>{n.delete()},{signal:n._signal}),this.#n.append(r)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const n=await e.render();this.#f(n),this.#n.append(n,this.#g),this.#s=e}addComment(e,n=null){if(this.#a)return;const r=e.renderForToolbar();if(!r)return;this.#f(r);const i=this.#i=this.#g;n?(this.#n.insertBefore(r,n),this.#n.insertBefore(i,n)):this.#n.append(r,i),this.#a=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const n=e.renderButton();this.#f(n),this.#n.append(n,this.#g)}async addEditSignatureButton(e){const n=this.#o=await e.renderEditButton(this.#r);this.#f(n),this.#n.append(n,this.#g)}removeButton(e){switch(e){case"comment":this.#a?.removeToolbarCommentButton(),this.#a=null,this.#i?.remove(),this.#i=null;break}}async addButton(e,n){switch(e){case"colorPicker":n&&this.addColorPicker(n);break;case"altText":n&&await this.addAltText(n);break;case"editSignature":n&&await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":n&&this.addComment(n);break}}async addButtonBefore(e,n,r){if(!n&&e==="comment")return;const i=this.#n.querySelector(r);i&&e==="comment"&&this.addComment(n,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Lz{#e=null;#t=null;#r;constructor(e){this.#r=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const n=this.#r._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",Hi,{signal:n});const r=this.#e=document.createElement("div");return r.className="buttons",e.append(r),this.#r.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#r.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#r.highlightSelection("floating_button")}),e}#s(e,n){let r=0,i=0;for(const a of e){const s=a.y+a.height;if(s<r)continue;const l=a.x+(n?a.width:0);if(s>r){i=l,r=s;continue}n?l>i&&(i=l):l<i&&(i=l)}return[n?1-i:i,r]}show(e,n,r){const[i,a]=this.#s(n,r),{style:s}=this.#t||=this.#n();e.append(this.#t),s.insetInlineEnd=`${100*i}%`,s.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#a(e,n,r,i){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",n);const s=document.createElement("span");a.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",r);const l=this.#r._signal;l instanceof AbortSignal&&!l.aborted&&(a.addEventListener("contextmenu",Hi,{signal:l}),a.addEventListener("click",i,{signal:l})),this.#e.append(a)}}function LD(t,e,n){for(const r of n)e.addEventListener(r,t[r].bind(t))}class It{static#e=NaN;static#t=null;static#r=NaN;static#n=null;static initializeAndAddPointerId(e){(It.#t||=new Set).add(e)}static setPointer(e,n){It.#e||=n,It.#n??=e}static setTimeStamp(e){It.#r=e}static isSamePointerId(e){return It.#e===e}static isSamePointerIdOrRemove(e){return It.#e===e?!0:(It.#t?.delete(e),!1)}static isSamePointerType(e){return It.#n===e}static isInitializedAndDifferentPointerType(e){return It.#n!==null&&!It.isSamePointerType(e)}static isSameTimeStamp(e){return It.#r===e}static isUsingMultiplePointers(){return It.#t?.size>=1}static clearPointerType(){It.#n=null}static clearPointerIds(){It.#e=NaN,It.#t=null}static clearTimeStamp(){It.#r=NaN}}class Mz{#e=0;get id(){return`${Jd}${this.#e++}`}}class Yw{#e=jD();#t=0;#r=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const a=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return bt(this,"_isSVGFittingCanvas",a)}async#n(e,n){this.#r||=new Map;let r=this.#r.get(e);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof n=="string"?(r.url=n,i=await Nh(n,"blob")):n instanceof File?i=r.file=n:n instanceof Blob&&(i=n),i.type==="image/svg+xml"){const a=Yw._isSVGFittingCanvas,s=new FileReader,l=new Image,c=new Promise((d,h)=>{l.onload=()=>{r.bitmap=l,r.isSvg=!0,d()},s.onload=async()=>{const p=r.svgUrl=s.result;l.src=await a?`${p}#svgView(preserveAspectRatio(none))`:p},l.onerror=s.onerror=h});s.readAsDataURL(i),await c}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){dt(i),r=null}return this.#r.set(e,r),r&&this.#r.set(r.id,r),r}async getFromFile(e){const{lastModified:n,name:r,size:i,type:a}=e;return this.#n(`${n}_${r}_${i}_${a}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,n){const r=await n;return this.#n(e,r)}async getFromId(e){this.#r||=new Map;const n=this.#r.get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:r}=n;return delete n.blobPromise,this.getFromBlob(n.id,r)}return this.getFromUrl(n.url)}getFromCanvas(e,n){this.#r||=new Map;let r=this.#r.get(e);if(r?.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(n.width,n.height);return i.getContext("2d").drawImage(n,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#r.set(e,r),this.#r.set(r.id,r),r}getSvgUrl(e){const n=this.#r.get(e);return n?.isSvg?n.svgUrl:null}deleteId(e){this.#r||=new Map;const n=this.#r.get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:r}=n;if(!n.url&&!n.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=i.convertToBlob()}r.close?.(),n.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class Bz{#e=[];#t=!1;#r;#n=-1;constructor(e=128){this.#r=e}add({cmd:e,undo:n,post:r,mustExec:i,type:a=NaN,overwriteIfSameType:s=!1,keepUndo:l=!1}){if(i&&e(),this.#t)return;const c={cmd:e,undo:n,post:r,type:a};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(c);return}if(s&&this.#e[this.#n].type===a){l&&(c.undo=this.#e[this.#n].undo),this.#e[this.#n]=c;return}const d=this.#n+1;d===this.#r?this.#e.splice(0,1):(this.#n=d,d<this.#e.length&&this.#e.splice(d)),this.#e.push(c)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:n}=this.#e[this.#n];e(),n?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:n}=this.#e[this.#n];e(),n?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let n=this.#n;n>=0;n--)if(this.#e[n].type!==e){this.#e.splice(n+1,this.#n-n),this.#n=n;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class kh{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=ur.platform;for(const[r,i,a={}]of e)for(const s of r){const l=s.startsWith("mac+");n&&l?(this.callbacks.set(s.slice(4),{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1))):!n&&!l&&(this.callbacks.set(s,{callback:i,options:a}),this.allKeys.add(s.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(e,n){if(!this.allKeys.has(n.key))return;const r=this.callbacks.get(this.#e(n));if(!r)return;const{callback:i,options:{bubbles:a=!1,args:s=[],checker:l=null}}=r;l&&!l(e,n)||(i.bind(e,...s,n)(),a||bn(n))}}class Vw{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return jz(e),bt(this,"_colors",e)}convert(e){const n=Oh(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[r,i]of this._colors)if(i.every((a,s)=>a===n[s]))return Vw._colorsMapping.get(r);return n}getHexCode(e){const n=this._colors.get(e);return n?Ve.makeHexColor(...n):e}}class oo{#e=new AbortController;#t=null;#r=null;#n=new Map;#s=new Map;#a=null;#i=null;#o=null;#u=new Bz;#l=null;#h=null;#d=null;#f=0;#g=new Set;#p=null;#c=null;#m=new Set;_editorUndoBar=null;#b=!1;#x=!1;#y=!1;#T=null;#A=null;#w=null;#N=null;#v=!1;#S=null;#k=new Mz;#C=!1;#O=!1;#M=!1;#P=null;#R=null;#B=null;#I=null;#q=null;#_=ht.NONE;#E=new Set;#D=null;#F=null;#H=null;#G=null;#V=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#z=[0,0];#L=null;#Y=null;#Z=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=oo.prototype,n=s=>s.#Y.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&s.hasSomethingToControl(),r=(s,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return bt(this,"_keyboardManager",new kh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(s,{target:l})=>!(l instanceof HTMLButtonElement)&&s.#Y.contains(l)&&!s.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(s,{target:l})=>!(l instanceof HTMLButtonElement)&&s.#Y.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:n}]]))}constructor(e,n,r,i,a,s,l,c,d,h,p,b,y,x,w,E){const T=this._signal=this.#e.signal;this.#Y=e,this.#Z=n,this.#J=r,this.#a=i,this.#l=a,this.#F=s,this.#V=c,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:T}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),l._on("setpreference",this.onSetPreference.bind(this),{signal:T}),l._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:T}),window.addEventListener("pointerdown",()=>{this.#O=!0},{capture:!0,signal:T}),window.addEventListener("pointerup",()=>{this.#O=!1},{capture:!0,signal:T}),this.#se(),this.#he(),this.#te(),this.#i=c.annotationStorage,this.#T=c.filterFactory,this.#H=d,this.#N=h||null,this.#b=p,this.#x=b,this.#y=y,this.#q=x||null,this.viewParameters={realScale:Iu.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=E!==!1,a?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#n.clear(),this.#m.clear(),this.#I?.clear(),this.#t=null,this.#E.clear(),this.#u.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#F?.destroy(),this.#S?.hide(),this.#S=null,this.#B?.destroy(),this.#B=null,this.#r=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy(),this.#V=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#q}get useNewAltTextFlow(){return this.#x}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return bt(this,"hcmFilter",this.#H?this.#T.addHCMFilter(this.#H.foreground,this.#H.background):"none")}get direction(){return bt(this,"direction",getComputedStyle(this.#Y).direction)}get _highlightColors(){return bt(this,"_highlightColors",this.#N?new Map(this.#N.split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return bt(this,"highlightColors",null);const n=new Map,r=!!this.#H;for(const[i,a]of e){const s=i.endsWith("_HCM");if(r&&s){n.set(i.replace("_HCM",""),a);continue}!r&&!s&&n.set(i,a)}return bt(this,"highlightColors",n)}get highlightColorNames(){return bt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,n=!1){this.#a?.editAltText(this,e,n)}hasCommentManager(){return!!this.#l}editComment(e,n,r,i){this.#l?.showDialog(this,e,n,r,i)}selectComment(e,n){this.#s.get(e)?.getEditorByUID(n)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,n,r=void 0){this.#l?.toggleCommentPopup(e,n,r)}makeCommentColor(e,n){return e&&this.#l?.makeCommentColor(e,n)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#s.has(e-1))return;const{resolve:n,promise:r}=Promise.withResolvers(),i=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",i),n())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){this.#F?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#F}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":this.#y=n;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#Y.focus()}findParent(e,n){for(const r of this.#s.values()){const{x:i,y:a,width:s,height:l}=r.div.getBoundingClientRect();if(e>=i&&e<=i+s&&n>=a&&n<=a+l)return r}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Iu.PDF_TO_CSS_UNITS;for(const n of this.#m)n.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const r of this.#s.values())if(r.hasTextLayer(e))return r;return null}highlightSelection(e="",n=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:l}=r,c=r.toString(),h=this.#Q(r).closest(".textLayer"),p=this.getSelectionBoxes(h);if(!p)return;r.empty();const b=this.#ee(h),y=this.#_===ht.NONE,x=()=>{const w=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:p,anchorNode:i,anchorOffset:a,focusNode:s,focusOffset:l,text:c});y&&this.showAllEditors("highlight",!0,!0),n&&w?.editComment()};if(y){this.switchToMode(ht.HIGHLIGHT,x);return}x()}commentSelection(e=""){this.highlightSelection(e,!0)}#ie(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=this.#Q(e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(this.#S||=new Lz(this),this.#S.show(r,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#i)return null;const n=`${Jd}${e}`,r=this.#i.getRawValue(n);return r&&this.#i.remove(n),r}addToAnnotationStorage(e){!e.isEmpty()&&this.#i&&!this.#i.has(e.id)&&this.#i.setValue(e.id,e)}a11yAlert(e,n=null){const r=this.#J;r&&(r.setAttribute("data-l10n-id",e),n?r.setAttribute("data-l10n-args",JSON.stringify(n)):r.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#D&&(this.#S?.hide(),this.#D=null,this.#j({hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===this.#D)return;const i=this.#Q(e).closest(".textLayer");if(!i){this.#D&&(this.#S?.hide(),this.#D=null,this.#j({hasSelectedText:!1}));return}if(this.#S?.hide(),this.#D=n,this.#j({hasSelectedText:!0}),!(this.#_!==ht.HIGHLIGHT&&this.#_!==ht.NONE)&&(this.#_===ht.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#v=this.isShiftKeyDown,!this.isShiftKeyDown)){const a=this.#_===ht.HIGHLIGHT?this.#ee(i):null;if(a?.toggleDrawing(),this.#O){const s=new AbortController,l=this.combinedSignal(s),c=d=>{d.type==="pointerup"&&d.button!==0||(s.abort(),a?.toggleDrawing(!0),d.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}else a?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#_===ht.HIGHLIGHT?this.highlightSelection(e):this.#b&&this.#ie()}#se(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#oe(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#v&&(this.#v=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of this.#E)if(n.div.contains(e)){this.#R=[n,e],n._focusEventsAllowed=!1;break}}focus(){if(!this.#R)return;const[e,n]=this.#R;this.#R=null,n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#te(){if(this.#P)return;this.#P=new AbortController;const e=this.combinedSignal(this.#P);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ue(){this.#P?.abort(),this.#P=null}#ce(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#de(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ue(),this.setEditingState(!1)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const r of this.#c)if(r.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const r of this.#c)if(r.isHandlingMimeForPasting(n.type)){r.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of this.#E){const i=r.serialize(!0);i&&n.push(i)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const a of n.items)for(const s of this.#c)if(s.isHandlingMimeForPasting(a.type)){s.paste(a,this.currentLayer);return}let r=n.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(a){dt(`paste: "${a.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const a=[];for(const c of r){const d=await i.deserialize(c);if(!d)return;a.push(d)}const s=()=>{for(const c of a)this.#ne(c);this.#re(a)},l=()=>{for(const c of a)c.remove()};this.addCommands({cmd:s,undo:l,mustExec:!0})}catch(a){dt(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#_!==ht.NONE&&!this.isEditorHandlingKeyboard&&oo._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#v&&(this.#v=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#j(e){Object.entries(e).some(([r,i])=>this.#W[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,e)}),this.#_===ht.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#$([[Nt.HIGHLIGHT_FREE,!0]]))}#$(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ce(),this.#j({isEditing:this.#_!==ht.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:this.#u.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#j({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#c){this.#c=e;for(const n of this.#c)this.#$(n.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#s.set(e.pageIndex,e),this.#C?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,n=null,r=!1,i=!1,a=!1){if(this.#_!==e&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#_===ht.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#_=e,e===ht.NONE){this.setEditingState(!1),this.#me();for(const s of this.#n.values())s.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const s of this.#n.values())s.addStandaloneCommentButton();e===ht.SIGNATURE&&await this.#F?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const s of this.#s.values())s.updateMode(e);if(e===ht.POPUP){this.#r||=await this.#V.getAnnotationsByType(new Set(this.#c.map(c=>c._editorType)));const s=new Set,l=[];for(const c of this.#n.values()){const{annotationElementId:d,hasComment:h,deleted:p}=c;d&&s.add(d),h&&!p&&l.push(c.getData())}for(const c of this.#r){const{id:d,popupRef:h,contentsObj:p}=c;h&&p?.str&&!s.has(d)&&!this.#g.has(d)&&l.push(c)}this.#l?.showSidebar(l)}if(!n){r&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const s of this.#n.values())s.uid===n?(this.setSelected(s),a?s.editComment():i?s.enterInEditMode():s.focus()):s.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#_&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(this.#c){switch(e){case Nt.CREATE:this.currentLayer.addNewEditor(n);return;case Nt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#G||=new Map).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const r of this.#E)r.updateParams(e,n);else for(const r of this.#c)r.updateDefaultParams(e,n)}}showAllEditors(e,n,r=!1){for(const a of this.#n.values())a.editorType===e&&a.show(n);(this.#G?.get(Nt.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#$([[Nt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(this.#M!==e){this.#M=e;for(const n of this.#s.values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#C){this.#C=!0;const e=[];for(const n of this.#s.values())e.push(n.enable());await Promise.all(e);for(const n of this.#n.values())n.enable()}}#me(){if(this.unselectAll(),this.#C){this.#C=!1;for(const e of this.#s.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const n of this.#n.values())n.pageIndex===e&&(yield n)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#I?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#i?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const n=this.#s.get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#$(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#E);return e}updateUI(e){this.#pe===e&&this.#$(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#$(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#E.has(e)){this.#E.delete(e),e.unselect(),this.#j({hasSelectedEditor:this.hasSelection});return}this.#E.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#j({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(const n of this.#E)n!==e&&n.unselect();this.#E.clear(),this.#E.add(e),e.select(),this.#$(e.propertiesToUpdate),this.#j({hasSelectedEditor:!0})}isSelected(e){return this.#E.has(e)}get firstSelectedEditor(){return this.#E.values().next().value}unselect(e){e.unselect(),this.#E.delete(e),this.#j({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#E.size!==0}get isEnterHandled(){return this.#E.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#u.undo(),this.#j({hasSomethingToUndo:this.#u.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#u.redo(),this.#j({hasSomethingToUndo:!0,hasSomethingToRedo:this.#u.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#u.add(e),this.#j({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#u.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...this.#E],r=()=>{this._editorUndoBar?.show(i,n.length===1?n[0].editorType:n.length);for(const a of n)a.remove()},i=()=>{for(const a of n)this.#ne(a)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#re(e){for(const n of this.#E)n.unselect();this.#E.clear();for(const n of e)n.isEmpty()||(this.#E.add(n),n.select());this.#j({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#E)e.commit();this.#re(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#_!==ht.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#E)e.unselect();this.#E.clear(),this.#j({hasSelectedEditor:!1})}}translateSelectedEditors(e,n,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;this.#z[0]+=e,this.#z[1]+=n;const[i,a]=this.#z,s=[...this.#E],l=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#z[0]=this.#z[1]=0,this.addCommands({cmd:()=>{for(const c of s)this.#n.has(c.id)&&(c.translateInPage(i,a),c.translationDone())},undo:()=>{for(const c of s)this.#n.has(c.id)&&(c.translateInPage(-i,-a),c.translationDone())},mustExec:!1})},l);for(const c of s)c.translateInPage(e,n),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#E)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let n=!1;for(const[{x:i,y:a,pageIndex:s},l]of e)l.newX=i,l.newY=a,l.newPageIndex=s,n||=i!==l.savedX||a!==l.savedY||s!==l.savedPageIndex;if(!n)return!1;const r=(i,a,s,l)=>{if(this.#n.has(i.id)){const c=this.#s.get(l);c?i._setParentAndPosition(c,a,s):(i.pageIndex=l,i.x=a,i.y=s)}};return this.addCommands({cmd:()=>{for(const[i,{newX:a,newY:s,newPageIndex:l}]of e)r(i,a,s,l)},undo:()=>{for(const[i,{savedX:a,savedY:s,savedPageIndex:l}]of e)r(i,a,s,l)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(this.#p)for(const r of this.#p.keys())r.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#E.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#_}isEditingMode(){return this.#_!==ht.NONE}get imageManager(){return bt(this,"imageManager",new Yw)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let d=0,h=n.rangeCount;d<h;d++)if(!e.contains(n.getRangeAt(d).commonAncestorContainer))return null;const{x:r,y:i,width:a,height:s}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(d,h,p,b)=>({x:(h-i)/s,y:1-(d+p-r)/a,width:b/s,height:p/a});break;case"180":l=(d,h,p,b)=>({x:1-(d+p-r)/a,y:1-(h+b-i)/s,width:p/a,height:b/s});break;case"270":l=(d,h,p,b)=>({x:1-(h+b-i)/s,y:(d-r)/a,width:b/s,height:p/a});break;default:l=(d,h,p,b)=>({x:(d-r)/a,y:(h-i)/s,width:p/a,height:b/s});break}const c=[];for(let d=0,h=n.rangeCount;d<h;d++){const p=n.getRangeAt(d);if(!p.collapsed)for(const{x:b,y,width:x,height:w}of p.getClientRects())x===0||w===0||c.push(l(b,y,x,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:n}){(this.#o||=new Map).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const n=this.#o?.get(e.data.id);if(!n)return;const r=this.#i.getRawValue(n);r&&(this.#_===ht.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,n,r){const i=this.#I?.get(e);i&&(i.setCanvas(n,r),this.#I.delete(e))}addMissingCanvas(e,n){(this.#I||=new Map).set(e,n)}}class ga{#e=null;#t=!1;#r=null;#n=null;#s=null;#a=null;#i=!1;#o=null;#u=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,ga.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){ga._l10n??=e}async render(){const e=this.#r=document.createElement("button");e.className="altText",e.tabIndex="0";const n=this.#n=document.createElement("span");e.append(n),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",ga.#f.missing),n.setAttribute("data-l10n-id",ga.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=this.#u._uiManager._signal;e.addEventListener("contextmenu",Hi,{signal:r}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#i=!0,i(a))},{signal:r}),await this.#p(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#r&&(this.#r.focus({focusVisible:this.#i}),this.#i=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await ga._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#u.div.append(n)}this.#o.classList.toggle("hidden",!e)}serialize(e){let n=this.#e;return!e&&this.#l===n&&(n=this.#h),{altText:n,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:a=!1}){r&&(this.#l=r,this.#h=i),!(this.#e===e&&this.#t===n)&&(a||(this.#e=e,this.#t=n),this.#p())}toggle(e=!1){this.#r&&(!e&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#r?.remove(),this.#r=null,this.#n=null,this.#s=null,this.#o?.remove(),this.#o=null}async#p(){const e=this.#r;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",ga.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ga.#f[`${this.#g}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#s;if(!n){this.#s=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#u.id}`;const i=100,a=this.#u._uiManager._signal;a.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#s.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:a}),e.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#s?.classList.remove("show")},{signal:a})}this.#t?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#e),n.parentNode||e.append(n),this.#u.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class gm{#e=null;#t=null;#r=!1;#n=null;#s=null;#a=null;#i=null;#o=null;#u=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const n=this.#n.commentButtonPosition;if(n){const{style:r}=e;r.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const i=this.#n.commentButtonColor;i&&(r.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:n,height:r}=this.#e.getBoundingClientRect(),{x:i,y:a,width:s,height:l}=this.#n.parent.boundingClientRect;return[(e-i)/s,(n+r-a)/l]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:n}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=n)}#h(e,n){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const r=this.#n._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",Hi,{signal:r}),n&&(e.addEventListener("focusin",a=>{this.#n._focusEventsAllowed=!1,bn(a)},{capture:!0,signal:r}),e.addEventListener("focusout",a=>{this.#n._focusEventsAllowed=!0,bn(a)},{capture:!0,signal:r})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:r});const i=a=>{a.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(this.#r=!0,i(a))},{signal:r}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:r}),e}edit(e){const n=this.commentPopupPositionInLayer;let r,i;if(n)[r,i]=n;else{[r,i]=this.#n.commentButtonPosition;const{width:h,height:p,x:b,y}=this.#n;r=b+r*h,i=y+i*p}const a=this.#n.parent.boundingClientRect,{x:s,y:l,width:c,height:d}=a;this.#n._uiManager.editComment(this.#n,s+r*c,l+i*d,{...e,parentDimensions:a})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#r}),this.#r=!1)}isDeleted(){return this.#u||this.#i===""}isEmpty(){return this.#i===null}hasBeenEdited(){return this.isDeleted()||this.#i!==this.#s}serialize(){return this.data}get data(){return{text:this.#i,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#i&&(this.#a=null),e===null){this.#i="",this.#u=!0;return}this.#i=e,this.#o=new Date,this.#u=!1}setInitialText(e,n=null){this.#s=e,this.data=e,this.#o=null,this.#a=n}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#i="",this.#a=null,this.#o=null,this.#n=null,this.#r=!1,this.#u=!1}}class wg{#e;#t=!1;#r=null;#n;#s;#a;#i;#o=null;#u;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:a=null,onPinchEnd:s=null,signal:l}){this.#e=e,this.#r=r,this.#n=n,this.#s=i,this.#a=a,this.#i=s,this.#h=new AbortController,this.#u=AbortSignal.any([l,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#u})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Aa.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,a=AbortSignal.any([this.#u,i.signal]),s=this.#e,l={capture:!0,signal:a,passive:!1},c=d=>{d.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};s.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(bn(d),c(d))},l),s.addEventListener("pointerup",c,l),s.addEventListener("pointercancel",c,l);return}if(!this.#d){this.#d=new AbortController;const i=AbortSignal.any([this.#u,this.#d.signal]),a=this.#e,s={signal:i,capture:!1,passive:!1};a.addEventListener("touchmove",this.#g.bind(this),s);const l=this.#p.bind(this);a.addEventListener("touchend",l,s),a.addEventListener("touchcancel",l,s),s.capture=!0,a.addEventListener("pointerdown",bn,s),a.addEventListener("pointermove",bn,s),a.addEventListener("pointercancel",bn,s),a.addEventListener("pointerup",bn,s),this.#s?.()}if(bn(e),e.touches.length!==2||this.#r?.()){this.#l=null;return}let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]),this.#l={touch0X:n.screenX,touch0Y:n.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;bn(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:i,screenY:a}=n,{screenX:s,screenY:l}=r,c=this.#l,{touch0X:d,touch0Y:h,touch1X:p,touch1Y:b}=c,y=p-d,x=b-h,w=s-i,E=l-a,T=Math.hypot(w,E)||1,C=Math.hypot(y,x)||1;if(!this.#t&&Math.abs(C-T)<=wg.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=a,c.touch1X=s,c.touch1Y=l,!this.#t){this.#t=!0;return}const N=[(i+s)/2,(a+l)/2];this.#a?.(N,C,T)}#p(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#i?.()),this.#l&&(bn(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class Je{#e=null;#t=null;#r=null;#n=null;#s=null;#a=!1;#i=null;#o="";#u=null;#l=null;#h=null;#d=null;#f=null;#g="";#p=!1;#c=null;#m=!1;#b=!1;#x=!1;#y=null;#T=0;#A=0;#w=null;#N=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#v=!1;#S=Je._zIndex++;static _borderLineWidth=-1;static _colorManager=new Vw;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Je.prototype._resizeWithKeyboard,n=oo.TRANSLATE_SMALL,r=oo.TRANSLATE_BIG;return bt(this,"_resizerKeyboardManager",new kh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],Je.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:n,rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[a,s];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return bt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new Fz({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(Je._l10n??=e,Je._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Je._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);Je._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){Xt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#v}set _isDraggable(e){this.#v=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#L(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,r,i){const[a,s]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/a,this.y=(n+i)/s,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[r,i]=this.parentDimensions;this.setAt(e*r,n*i,this.width*r,this.height*i),this._onTranslated()}#k([e,n],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,n){this.#k(this.parentDimensions,e,n)}translateInPage(e,n){this.#c||=[this.x,this.y,this.width,this.height],this.#k(this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){this.#c||=[this.x,this.y,this.width,this.height];const{div:r,parentDimensions:[i,a]}=this;if(this.x+=e/i,this.y+=n/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:l}=this;const[c,d]=this.getBaseTranslation();s+=c,l+=d;const{style:h}=r;h.left=`${(100*s).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(s,l),r.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!this.#c&&(this.#c[0]!==this.x||this.#c[1]!==this.y)}get _hasBeenResized(){return!!this.#c&&(this.#c[2]!==this.width||this.#c[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:r}=Je,i=r/e,a=r/n;switch(this.rotation){case 90:return[-i,a];case 180:return[i,a];case 270:return[i,-a];default:return[-i,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[r,i]}=this;let{x:a,y:s,width:l,height:c}=this;if(l*=r,c*=i,a*=r,s*=i,this._mustFixPosition)switch(e){case 0:a=Sr(a,0,r-l),s=Sr(s,0,i-c);break;case 90:a=Sr(a,0,r-c),s=Sr(s,l,i);break;case 180:a=Sr(a,l,r),s=Sr(s,c,i);break;case 270:a=Sr(a,c,r),s=Sr(s,0,i-l);break}this.x=a/=r,this.y=s/=i;const[d,h]=this.getBaseTranslation();a+=d,s+=h,n.left=`${(100*a).toFixed(2)}%`,n.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}static#C(e,n,r){switch(r){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}}screenToPageTranslation(e,n){return Je.#C(e,n,this.parentRotation)}pageTranslationToScreen(e,n){return Je.#C(e,n,360-this.parentRotation)}#O(e){switch(e){case 90:{const[n,r]=this.pageDimensions;return[0,-n/r,r/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,r]=this.pageDimensions;return[0,n/r,-r/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,r]}=this;return[n*e,r*e]}setDims(){const{div:{style:e},width:n,height:r}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#M(){if(this.#u)return;this.#u=document.createElement("div"),this.#u.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const r of e){const i=document.createElement("div");this.#u.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#P.bind(this,r),{signal:n}),i.addEventListener("contextmenu",Hi,{signal:n}),i.tabIndex=-1}this.div.prepend(this.#u)}#P(e,n){n.preventDefault();const{isMac:r}=ur.platform;if(n.button!==0||n.ctrlKey&&r)return;this.#r?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[n.screenX,n.screenY];const a=new AbortController,s=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,e),{passive:!0,capture:!0,signal:s}),window.addEventListener("touchmove",bn,{passive:!1,signal:s}),window.addEventListener("contextmenu",Hi,{signal:s}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const d=()=>{a.abort(),this.parent.togglePointerEvents(!0),this.#r?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=l,this.div.style.cursor=c,this.#B()};window.addEventListener("pointerup",d,{signal:s}),window.addEventListener("blur",d,{signal:s})}#R(e,n,r,i){this.width=r,this.height=i,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#h)return;const{savedX:e,savedY:n,savedWidth:r,savedHeight:i}=this.#h;this.#h=null;const a=this.x,s=this.y,l=this.width,c=this.height;a===e&&s===n&&l===r&&c===i||this.addCommands({cmd:this.#R.bind(this,a,s,l,c),undo:this.#R.bind(this,e,n,r,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#I(e,n){const[r,i]=this.parentDimensions,a=this.x,s=this.y,l=this.width,c=this.height,d=Je.MIN_SIZE/r,h=Je.MIN_SIZE/i,p=this.#O(this.rotation),b=(R,B)=>[p[0]*R+p[2]*B,p[1]*R+p[3]*B],y=this.#O(360-this.rotation),x=(R,B)=>[y[0]*R+y[2]*B,y[1]*R+y[3]*B];let w,E,T=!1,C=!1;switch(e){case"topLeft":T=!0,w=(R,B)=>[0,0],E=(R,B)=>[R,B];break;case"topMiddle":w=(R,B)=>[R/2,0],E=(R,B)=>[R/2,B];break;case"topRight":T=!0,w=(R,B)=>[R,0],E=(R,B)=>[0,B];break;case"middleRight":C=!0,w=(R,B)=>[R,B/2],E=(R,B)=>[0,B/2];break;case"bottomRight":T=!0,w=(R,B)=>[R,B],E=(R,B)=>[0,0];break;case"bottomMiddle":w=(R,B)=>[R/2,B],E=(R,B)=>[R/2,0];break;case"bottomLeft":T=!0,w=(R,B)=>[0,B],E=(R,B)=>[R,0];break;case"middleLeft":C=!0,w=(R,B)=>[0,B/2],E=(R,B)=>[R,B/2];break}const N=w(l,c),P=E(l,c);let k=b(...P);const j=Je._round(a+k[0]),D=Je._round(s+k[1]);let H=1,Y=1,X,z;if(n.fromKeyboard)({deltaX:X,deltaY:z}=n);else{const{screenX:R,screenY:B}=n,[re,le]=this.#l;[X,z]=this.screenToPageTranslation(R-re,B-le),this.#l[0]=R,this.#l[1]=B}if([X,z]=x(X/r,z/i),T){const R=Math.hypot(l,c);H=Y=Math.max(Math.min(Math.hypot(P[0]-N[0]-X,P[1]-N[1]-z)/R,1/l,1/c),d/l,h/c)}else C?H=Sr(Math.abs(P[0]-N[0]-X),d,1)/l:Y=Sr(Math.abs(P[1]-N[1]-z),h,1)/c;const K=Je._round(l*H),ce=Je._round(c*Y);k=b(...E(K,ce));const te=j-k[0],W=D-k[1];this.#c||=[this.x,this.y,this.width,this.height],this.width=K,this.height=ce,this.x=te,this.y=W,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#r?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new Md(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,r]of e)await this._editToolbar.addButton(n,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#r?.destroy()}addContainer(e){const n=this._editToolbar?.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#r||(ga.initialize(Je._l10n),this.#r=new ga(this),this.#e&&(this.#r.data=this.#e,this.#e=null)),this.#r}get altTextData(){return this.#r?.data}set altTextData(e){this.#r&&(this.#r.data=e)}get guessedAltText(){return this.#r?.guessedText}async setGuessedAltText(e){await this.#r?.setGuessedText(e)}serializeAltText(e){return this.#r?.serialize(e)}hasAltText(){return!!this.#r&&!this.#r.isEmpty()}hasAltTextData(){return this.#r?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new gm(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#s){this._uiManager.isEditingMode()&&this.#s.classList.remove("hidden");return}this.hasComment&&(this.#s=this.#n.renderForStandalone(),this.div.append(this.#s))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#s=null}hideStandaloneCommentButton(){this.#s?.classList.add("hidden")}get comment(){const{data:{richText:e,text:n,date:r,deleted:i}}=this.#n;return{text:n,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new gm(this),this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:r}){if(!n||(this.#n||=new gm(this),this.#n.setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new gm(this),this.#n.edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[a]=this.pageDimensions,[s]=this.pageTranslation,l=s+a+1,c=i-100,d=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,d,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){this.#n.data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#a?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#H();const[n,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/r).toFixed(2)}%`);const[i,a]=this.getInitialTranslation();return this.translate(i,a),LD(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#N||=new wg({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#q.bind(this),onPinching:this.#_.bind(this),onPinchEnd:this.#E.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#q(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#r?.toggle(!1),this.parent.togglePointerEvents(!1)}#_(e,n,r){let a=.7*(r/n)+1-.7;if(a===1)return;const s=this.#O(this.rotation),l=(j,D)=>[s[0]*j+s[2]*D,s[1]*j+s[3]*D],[c,d]=this.parentDimensions,h=this.x,p=this.y,b=this.width,y=this.height,x=Je.MIN_SIZE/c,w=Je.MIN_SIZE/d;a=Math.max(Math.min(a,1/b,1/y),x/b,w/y);const E=Je._round(b*a),T=Je._round(y*a);if(E===b&&T===y)return;this.#c||=[h,p,b,y];const C=l(b/2,y/2),N=Je._round(h+C[0]),P=Je._round(p+C[1]),k=l(E/2,T/2);this.x=N-k[0],this.y=P-k[1],this.width=E,this.height=T,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#E(){this.#r?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:n}=ur.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#F(e);return}this.#D(e)}#D(e){const{isMac:n}=ur.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#F(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,a=this._uiManager.combinedSignal(i),s={capture:!0,passive:!1,signal:a},l=d=>{i.abort(),this.#i=null,this.#p=!1,this._uiManager.endDragSession()||this.#D(d),r&&this._onStopDragging()};n&&(this.#T=e.clientX,this.#A=e.clientY,this.#i=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",d=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:p,pointerId:b}=d;if(b!==this.#i){bn(d);return}const[y,x]=this.screenToPageTranslation(h-this.#T,p-this.#A);this.#T=h,this.#A=p,this._uiManager.dragSelectedEditors(y,x)},s),window.addEventListener("touchmove",bn,s),window.addEventListener("pointerdown",d=>{d.pointerType===this.#o&&(this.#N||d.isPrimary)&&l(d),bn(d)},s));const c=d=>{if(!this.#i||this.#i===d.pointerId){l(d);return}bn(d)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,n,r){e.changeParent(this),this.x=n,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,r=this.rotation){const i=this.parentScale,[a,s]=this.pageDimensions,[l,c]=this.pageTranslation,d=e/i,h=n/i,p=this.x*a,b=this.y*s,y=this.width*a,x=this.height*s;switch(r){case 0:return[p+d+l,s-b-h-x+c,p+d+y+l,s-b-h+c];case 90:return[p+h+l,s-b+d+c,p+h+x+l,s-b+d+y+c];case 180:return[p-d-y+l,s-b+h+c,p-d+l,s-b+h+x+c];case 270:return[p-h-x+l,s-b-d-y+c,p-h+l,s-b-d+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[r,i,a,s]=e,l=a-r,c=s-i;switch(this.rotation){case 0:return[r,n-s,l,c];case 90:return[r,n-i,c,l];case 180:return[a,n-i,l,c];case 270:return[a,n-s,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Je._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:r,opacity:i,deleted:a,richText:s},uid:l,pageIndex:c,creationDate:d,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:d,modificationDate:r||h,popupRef:!a,color:n,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#x}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:a,innerWidth:s}=window;return n<s&&i>0&&e<a&&r>0}#H(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#H()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,n=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,n,r){const i=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[a,s]=i.pageDimensions,[l,c,d,h]=i.getRectInCurrentCoords(e.rect,s);return i.x=l/a,i.y=c/s,i.width=d/a,i.height=h/s,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#L(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#N?.destroy(),this.#N=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#M(),this.#u.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[r,i,a,s]=this.getPDFRect();return[Je._round(r+(a-r)*e),Je._round(i+(s-i)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#u.children;if(!this.#t){this.#t=Array.from(n);const s=this.#G.bind(this),l=this.#V.bind(this),c=this._uiManager._signal;for(const d of this.#t){const h=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",s,{signal:c}),d.addEventListener("blur",l,{signal:c}),d.addEventListener("focus",this.#W.bind(this,h),{signal:c}),d.setAttribute("data-l10n-id",Je._l10nResizer[h])}}const r=this.#t[0];let i=0;for(const s of n){if(s===r)break;i++}const a=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(a!==i){if(a<i)for(let l=0;l<i-a;l++)this.#u.append(this.#u.firstChild);else if(a>i)for(let l=0;l<a-i;l++)this.#u.firstChild.before(this.#u.lastChild);let s=0;for(const l of n){const d=this.#t[s++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",Je._l10nResizer[d])}}this.#z(0),this.#x=!0,this.#u.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#G(e){Je._resizerKeyboardManager.exec(this,e)}#V(e){this.#x&&e.relatedTarget?.parentNode!==this.#u&&this.#L()}#W(e){this.#g=this.#x?e:""}#z(e){if(this.#t)for(const n of this.#t)n.tabIndex=e}_resizeWithKeyboard(e,n){this.#x&&this.#I(this.#g,{deltaX:e,deltaY:n,fromKeyboard:!0})}#L(){this.#x=!1,this.#z(-1),this.#B()}_stopResizingWithKeyboard(){this.#L(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#r?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#u?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#r?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#m}set isEditing(e){this.#m=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){this.#w||=new Map;const{action:r}=e;let i=this.#w.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(r),this.#w.size===0&&(this.#w=null)},Je._telemetryTimeout),this.#w.set(r,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const r=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),r.before(n)}return n}resetAnnotationElement(e){const{firstChild:n}=e.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class Fz extends Je{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const cC=3285377520,Oi=4294901760,fa=65535;class MD{constructor(e){this.h1=e?e&4294967295:cC,this.h2=e?e&4294967295:cC}update(e){let n,r;if(typeof e=="string"){n=new Uint8Array(e.length*2),r=0;for(let w=0,E=e.length;w<E;w++){const T=e.charCodeAt(w);T<=255?n[r++]=T:(n[r++]=T>>>8,n[r++]=T&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),r=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,a=r-i*4,s=new Uint32Array(n.buffer,0,i);let l=0,c=0,d=this.h1,h=this.h2;const p=3432918353,b=461845907,y=p&fa,x=b&fa;for(let w=0;w<i;w++)w&1?(l=s[w],l=l*p&Oi|l*y&fa,l=l<<15|l>>>17,l=l*b&Oi|l*x&fa,d^=l,d=d<<13|d>>>19,d=d*5+3864292196):(c=s[w],c=c*p&Oi|c*y&fa,c=c<<15|c>>>17,c=c*b&Oi|c*x&fa,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,a){case 3:l^=n[i*4+2]<<16;case 2:l^=n[i*4+1]<<8;case 1:l^=n[i*4],l=l*p&Oi|l*y&fa,l=l<<15|l>>>17,l=l*b&Oi|l*x&fa,i&1?d^=l:h^=l}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&Oi|e*36045&fa,n=n*4283543511&Oi|((n<<16|e>>>16)*2950163797&Oi)>>>16,e^=n>>>1,e=e*444984403&Oi|e*60499&fa,n=n*3301882366&Oi|((n<<16|e>>>16)*3120437893&Oi)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const dv=Object.freeze({map:null,hash:"",transfer:void 0});class Gw{#e=!1;#t=null;#r=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const r=this.#n.get(e);return r===void 0?n:Object.assign(n,r)}getRawValue(e){return this.#n.get(e)}remove(e){const n=this.#n.get(e);if(n!==void 0&&(n instanceof Je&&this.#r.delete(n.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of this.#n.values())if(r instanceof Je)return;this.onAnnotationEditor(null)}}setValue(e,n){const r=this.#n.get(e);let i=!1;if(r!==void 0)for(const[a,s]of Object.entries(n))r[a]!==s&&(i=!0,r[a]=s);else i=!0,this.#n.set(e,n);i&&this.#s(),n instanceof Je&&((this.#r||=new Map).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new BD(this)}get serializable(){if(this.#n.size===0)return dv;const e=new Map,n=new MD,r=[],i=Object.create(null);let a=!1;for(const[s,l]of this.#n){const c=l instanceof Je?l.serialize(!1,i):l;c&&(e.set(s,c),n.update(`${s}:${JSON.stringify(c)}`),a||=!!c.bitmap)}if(a)for(const s of e.values())s.bitmap&&r.push(s.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:r}:dv}get editorStats(){let e=null;const n=new Map;let r=0,i=0;for(const a of this.#n.values()){if(!(a instanceof Je)){a.popup&&(a.popup.deleted?i+=1:r+=1);continue}a.isCommentDeleted?i+=1:a.hasEditedComment&&(r+=1);const s=a.telemetryFinalData;if(!s)continue;const{type:l}=s;n.has(l)||n.set(l,Object.getPrototypeOf(a).constructor),e||=Object.create(null);const c=e[l]||=new Map;for(const[d,h]of Object.entries(s)){if(d==="type")continue;let p=c.get(d);p||(p=new Map,c.set(d,p));const b=p.get(h)??0;p.set(h,b+1)}}if((i>0||r>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:r}),!e)return null;for(const[a,s]of n)e[a]=s.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,n){const r=this.#r?.get(e);return r?(r.updateFromAnnotationLayer(n),!0):!1}getEditor(e){return this.#r?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#r)for(const n of this.#r.values())n.serialize()&&e.push(n.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class BD extends Gw{#e;constructor(e){super();const{map:n,hash:r,transfer:i}=e.serializable,a=structuredClone(n,i?{transfer:i}:null);this.#e={map:a,hash:r,transfer:i}}get print(){Xt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return bt(this,"modifiedIds",{ids:new Set,hash:""})}}class Uz{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:r}){if(!(!e||this.#e.has(e.loadedName))){if(Ct(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:a,style:s}=e,l=new FontFace(i,a,s);this.addNativeFontFace(l);try{await l.load(),this.#e.add(i),r?.(e)}catch{dt(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Xt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw dt(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return bt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return bt(this,"isSyncFontLoadingSupported",Ar||ur.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(Ct(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const a=r.shift();setTimeout(a.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:n,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return bt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function r(P,k){return P.charCodeAt(k)<<24|P.charCodeAt(k+1)<<16|P.charCodeAt(k+2)<<8|P.charCodeAt(k+3)&255}function i(P,k,j,D){const H=P.substring(0,k),Y=P.substring(k+j);return H+D+Y}let a,s;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let d=0;function h(P,k){if(++d>30){dt("Load test font never loaded."),k();return}if(c.font="30px "+P,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(h.bind(null,P,k))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=i(b,976,p.length,p);const x=16,w=1482184792;let E=r(b,x);for(a=0,s=p.length-3;a<s;a+=4)E=E-w+r(p,a)|0;a<p.length&&(E=E-w+r(p+"XXX",a)|0),b=i(b,x,4,vz(E));const T=`url(data:font/opentype;base64,${btoa(b)});`,C=`@font-face {font-family:"${p}";src:${T}}`;this.insertRule(C);const N=this._document.createElement("div");N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px";for(const P of[e.loadedName,p]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=P,N.append(k)}this._document.body.append(N),h(p,()=>{N.remove(),n.complete()})}}class Hz{#e;constructor(e,n=null,r,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=n,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${PD(this.data)});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return this._inspectFont?.(this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const r=this.loadedName+"_path_"+n;let i;try{i=e.get(r)}catch(s){dt(`getPathGenerator - ignoring character: "${s}".`)}const a=ID(i);return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[n]=a}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class Au{#e;#t;#r;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const n=new TextEncoder,r={};let i=0;for(const d of Au.strings){const h=n.encode(e[d]);r[d]=h,i+=4+h.length}const a=new ArrayBuffer(i),s=new Uint8Array(a),l=new DataView(a);let c=0;for(const d of Au.strings){const h=r[d],p=h.length;l.setUint32(c,p),s.set(h,c+4),c+=4+p}return Ct(c===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}#n(e){Ct(e<Au.strings.length,"Invalid string index");let n=0;for(let i=0;i<e;i++)n+=this.#t.getUint32(n)+4;const r=this.#t.getUint32(n);return this.#r.decode(new Uint8Array(this.#e,n+4,r))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Su{#e;#t;#r;static strings=["css","loadedName","baseFontName","src"];static write(e){const n=new TextEncoder,r={};let i=0;for(const b of Su.strings){const y=n.encode(e[b]);r[b]=y,i+=4+y.length}i+=4;let a,s,l=1+i;e.style&&(a=n.encode(e.style.style),s=n.encode(e.style.weight),l+=4+a.length+4+s.length);const c=new ArrayBuffer(l),d=new Uint8Array(c),h=new DataView(c);let p=0;h.setUint8(p++,e.guessFallback?1:0),h.setUint32(p,0),p+=4,i=0;for(const b of Su.strings){const y=r[b],x=y.length;i+=4+x,h.setUint32(p,x),d.set(y,p+4),p+=4+x}return h.setUint32(p-i-4,i),e.style&&(h.setUint32(p,a.length),d.set(a,p+4),p+=4+a.length,h.setUint32(p,s.length),d.set(s,p+4),p+=4+s.length),Ct(p<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(p)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#r=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Ct(e<Su.strings.length,"Invalid string index");let n=5;for(let i=0;i<e;i++)n+=this.#t.getUint32(n)+4;const r=this.#t.getUint32(n);return this.#r.decode(new Uint8Array(this.#e,n+4,r))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const n=this.#t.getUint32(e),r=this.#r.decode(new Uint8Array(this.#e,e+4,n));e+=4+n;const i=this.#t.getUint32(e),a=this.#r.decode(new Uint8Array(this.#e,e+4,i));return{style:r,weight:a}}}class Vt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#r=this.#t+1+8;static#n=this.#r+1+48;static#s=this.#n+1+6;#a;#i;#o;constructor({data:e,extra:n}){this.#a=e,this.#i=new TextDecoder,this.#o=new DataView(this.#a),n&&Object.assign(this,n)}#u(e){Ct(e<Vt.bools.length,"Invalid boolean index");const n=Math.floor(e/4),r=e*2%8,i=this.#o.getUint8(n)>>r&3;return i===0?void 0:i===2}get black(){return this.#u(0)}get bold(){return this.#u(1)}get disableFontFace(){return this.#u(2)}get fontExtraProperties(){return this.#u(3)}get isInvalidPDFjsFont(){return this.#u(4)}get isType3Font(){return this.#u(5)}get italic(){return this.#u(6)}get missingFile(){return this.#u(7)}get remeasure(){return this.#u(8)}get vertical(){return this.#u(9)}#l(e){return Ct(e<Vt.numbers.length,"Invalid number index"),this.#o.getFloat64(Vt.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=Vt.#t;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=Vt.#r;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(this.#o.getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=Vt.#n;if(this.#o.getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(this.#o.getInt16(e,!0)),e+=2;return r}#h(e){Ct(e<Vt.strings.length,"Invalid string index");let n=Vt.#s+4;for(let a=0;a<e;a++)n+=this.#o.getUint32(n)+4;const r=this.#o.getUint32(n),i=new Uint8Array(r);return i.set(new Uint8Array(this.#a,n+4,r)),this.#i.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=Vt.#s;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a!==0)return new Uint8Array(this.#a,e+4,a)}clearData(){let e=Vt.#s;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);new Uint8Array(this.#a,e+4,a).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=Vt.#s;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);e+=4+r;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,e+4,i)),new Au(a.buffer)}get systemFontInfo(){let e=Vt.#s;const n=this.#o.getUint32(e);e+=4+n;const r=this.#o.getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(this.#a,e+4,r)),new Su(i.buffer)}static write(e){const n=e.systemFontInfo?Su.write(e.systemFontInfo):null,r=e.cssFontInfo?Au.write(e.cssFontInfo):null,i=new TextEncoder,a={};let s=0;for(const w of Vt.strings)a[w]=i.encode(e[w]),s+=4+a[w].length;const l=Vt.#s+4+s+4+(n?n.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),d=new Uint8Array(c),h=new DataView(c);let p=0;const b=Vt.bools.length;let y=0,x=0;for(let w=0;w<b;w++){const E=e[Vt.bools[w]];y|=(E===void 0?0:E?2:1)<<x,x+=2,(x===8||w===b-1)&&(h.setUint8(p++,y),y=0,x=0)}Ct(p===Vt.#e,"FontInfo.write: Boolean properties offset mismatch");for(const w of Vt.numbers)h.setFloat64(p,e[w]),p+=8;if(Ct(p===Vt.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(p++,4);for(const w of e.bbox)h.setInt16(p,w,!0),p+=2}else h.setUint8(p++,0),p+=8;if(Ct(p===Vt.#r,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(p++,6);for(const w of e.fontMatrix)h.setFloat64(p,w,!0),p+=8}else h.setUint8(p++,0),p+=48;if(Ct(p===Vt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(p++,1);for(const w of e.defaultVMetrics)h.setInt16(p,w,!0),p+=2}else h.setUint8(p++,0),p+=6;Ct(p===Vt.#s,"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(Vt.#s,0),p+=4;for(const w of Vt.strings){const E=a[w],T=E.length;h.setUint32(p,T),d.set(E,p+4),p+=4+T}if(h.setUint32(Vt.#s,p-Vt.#s-4),!n)h.setUint32(p,0),p+=4;else{const w=n.byteLength;h.setUint32(p,w),Ct(p+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(n),p+4),p+=4+w}if(!r)h.setUint32(p,0),p+=4;else{const w=r.byteLength;h.setUint32(p,w),Ct(p+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(r),p+4),p+=4+w}return e.data===void 0?(h.setUint32(p,0),p+=4):(h.setUint32(p,e.data.length),d.set(e.data,p+4),p+=4+e.data.length),Ct(p<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(p)}}class Yn{static#e=0;static#t=1;static#r=2;static#n=3;static#s=4;static#a=8;static#i=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let n,r=null,i=[],a=[],s=[],l=[],c=null,d=null;switch(e[0]){case"RadialAxial":n=e[1]==="axial"?1:2,r=e[2],s=e[3],n===1?i.push(...e[4],...e[5]):i.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":n=3,c=e[1],i=e[2],a=e[3],l=e[4]||[],r=e[6],d=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const h=Math.floor(i.length/2),p=Math.floor(a.length/3),b=s.length,y=l.length;let x=0;for(const k of l)x+=1,x=Math.ceil(x/4)*4,x+=4+k.coords.length*4,x+=4+k.colors.length*4,k.verticesPerRow!==void 0&&(x+=4);const w=20+h*8+p*3+b*8+(r?16:0)+(d?3:0)+x,E=new ArrayBuffer(w),T=new DataView(E),C=new Uint8Array(E);T.setUint8(Yn.#e,n),T.setUint8(Yn.#t,r?1:0),T.setUint8(Yn.#r,d?1:0),T.setUint8(Yn.#n,c),T.setUint32(Yn.#s,h,!0),T.setUint32(Yn.#a,p,!0),T.setUint32(Yn.#i,b,!0),T.setUint32(Yn.#o,y,!0);let N=20;new Float32Array(E,N,h*2).set(i),N+=h*8,C.set(a,N),N+=p*3;for(const[k,j]of s)T.setFloat32(N,k,!0),N+=4,T.setUint32(N,parseInt(j.slice(1),16),!0),N+=4;if(r)for(const k of r)T.setFloat32(N,k,!0),N+=4;d&&(C.set(d,N),N+=3);for(let k=0;k<l.length;k++){const j=l[k];T.setUint8(N,j.type),N+=1,N=Math.ceil(N/4)*4,T.setUint32(N,j.coords.length,!0),N+=4,new Int32Array(E,N,j.coords.length).set(j.coords),N+=j.coords.length*4,T.setUint32(N,j.colors.length,!0),N+=4,new Int32Array(E,N,j.colors.length).set(j.colors),N+=j.colors.length*4,j.verticesPerRow!==void 0&&(T.setUint32(N,j.verticesPerRow,!0),N+=4)}return E}getIR(){const e=this.view,n=this.data[Yn.#e],r=!!this.data[Yn.#t],i=!!this.data[Yn.#r],a=e.getUint32(Yn.#s,!0),s=e.getUint32(Yn.#a,!0),l=e.getUint32(Yn.#i,!0),c=e.getUint32(Yn.#o,!0);let d=20;const h=new Float32Array(this.buffer,d,a*2);d+=a*8;const p=new Uint8Array(this.buffer,d,s*3);d+=s*3;const b=[];for(let E=0;E<l;++E){const T=e.getFloat32(d,!0);d+=4;const C=e.getUint32(d,!0);d+=4,b.push([T,`#${C.toString(16).padStart(6,"0")}`])}let y=null;if(r){y=[];for(let E=0;E<4;++E)y.push(e.getFloat32(d,!0)),d+=4}let x=null;i&&(x=new Uint8Array(this.buffer,d,3),d+=3);const w=[];for(let E=0;E<c;++E){const T=e.getUint8(d);d+=1,d=Math.ceil(d/4)*4;const C=e.getUint32(d,!0);d+=4;const N=new Int32Array(this.buffer,d,C);d+=C*4;const P=e.getUint32(d,!0);d+=4;const k=new Int32Array(this.buffer,d,P);d+=P*4;const j={type:T,coords:N,colors:k};T===sv.LATTICE&&(j.verticesPerRow=e.getUint32(d,!0),d+=4),w.push(j)}if(n===1)return["RadialAxial","axial",y,b,Array.from(h.slice(0,2)),Array.from(h.slice(2,4)),null,null];if(n===2)return["RadialAxial","radial",y,b,[h[0],h[1]],[h[3],h[4]],h[2],h[5]];if(n===3){const E=this.data[Yn.#n];let T=null;if(h.length>0){let C=h[0],N=h[0],P=h[1],k=h[1];for(let j=0;j<h.length;j+=2){const D=h[j],H=h[j+1];C=C>D?D:C,P=P>H?H:P,N=N<D?D:N,k=k<H?H:k}T=[C,P,N,k]}return["Mesh",E,h,p,w,T,y,x]}throw new Error(`Unsupported pattern kind: ${n}`)}}function zz(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(Ar)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function $z(t){if(Ar&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return _h(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function bm(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const hv=t=>typeof t=="object"&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0,qz=t=>typeof t=="object"&&typeof t?.name=="string",Yz=Tz.bind(null,hv,qz);class Vz{#e=new Map;#t=Promise.resolve();postMessage(e,n){const r={data:structuredClone(e,n?{transfer:n}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,r)})}addEventListener(e,n,r=null){let i=null;if(r?.signal instanceof AbortSignal){const{signal:a}=r;if(a.aborted){dt("LoopbackPort - cannot use an `aborted` signal.");return}const s=()=>this.removeEventListener(e,n);i=()=>a.removeEventListener("abort",s),a.addEventListener("abort",s)}this.#e.set(n,i)}removeEventListener(e,n){this.#e.get(n)?.(),this.#e.delete(n)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const ym={DATA:1,ERROR:2},Nn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function dC(){}function $r(t){if(t instanceof so||t instanceof ov||t instanceof rC||t instanceof hp||t instanceof Wy)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||Xt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new so(t.message);case"InvalidPDFException":return new ov(t.message);case"PasswordException":return new rC(t.message,t.code);case"ResponseException":return new hp(t.message,t.status,t.missing);case"UnknownErrorException":return new Wy(t.message,t.details)}return new Wy(t.message,t.toString())}class kd{#e=new AbortController;constructor(e,n,r){this.sourceName=e,this.targetName=n,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===ym.DATA)i.resolve(e.data);else if(e.callback===ym.ERROR)i.reject($r(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,a=this.comObj;Promise.try(n,e.data).then(function(s){a.postMessage({sourceName:r,targetName:i,callback:ym.DATA,callbackId:e.callbackId,data:s})},function(s){a.postMessage({sourceName:r,targetName:i,callback:ym.ERROR,callbackId:e.callbackId,reason:$r(s)})});return}if(e.streamId){this.#r(e);return}n(e.data)}on(e,n){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=n}send(e,n,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},r)}sendWithPromise(e,n,r){const i=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[i]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:n},r)}catch(s){a.reject(s)}return a.promise}sendWithStream(e,n,r,i){const a=this.streamId++,s=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:d=>{const h=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:s,targetName:l,action:e,streamId:a,data:n,desiredSize:d.desiredSize},i),h.promise},pull:d=>{const h=Promise.withResolvers();return this.streamControllers[a].pullCall=h,c.postMessage({sourceName:s,targetName:l,stream:Nn.PULL,streamId:a,desiredSize:d.desiredSize}),h.promise},cancel:d=>{Ct(d instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[a].cancelCall=h,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:s,targetName:l,stream:Nn.CANCEL,streamId:a,reason:$r(d)}),h.promise}},r)}#r(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this,l=this.actionHandler[e.action],c={enqueue(d,h=1,p){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=h,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:Nn.ENQUEUE,streamId:n,chunk:d},p)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:Nn.CLOSE,streamId:n}),delete s.streamSinks[n])},error(d){Ct(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:Nn.ERROR,streamId:n,reason:$r(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[n]=c,Promise.try(l,e.data,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Nn.START_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:Nn.START_COMPLETE,streamId:n,reason:$r(d)})})}#n(e){const n=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,s=this.streamControllers[n],l=this.streamSinks[n];switch(e.stream){case Nn.START_COMPLETE:e.success?s.startCall.resolve():s.startCall.reject($r(e.reason));break;case Nn.PULL_COMPLETE:e.success?s.pullCall.resolve():s.pullCall.reject($r(e.reason));break;case Nn.PULL:if(!l){a.postMessage({sourceName:r,targetName:i,stream:Nn.PULL_COMPLETE,streamId:n,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||dC).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Nn.PULL_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:Nn.PULL_COMPLETE,streamId:n,reason:$r(d)})});break;case Nn.ENQUEUE:if(Ct(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case Nn.CLOSE:if(Ct(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#s(s,n);break;case Nn.ERROR:Ct(s,"error should have stream controller"),s.controller.error($r(e.reason)),this.#s(s,n);break;case Nn.CANCEL_COMPLETE:e.success?s.cancelCall.resolve():s.cancelCall.reject($r(e.reason)),this.#s(s,n);break;case Nn.CANCEL:if(!l)break;const c=$r(e.reason);Promise.try(l.onCancel||dC,c).then(function(){a.postMessage({sourceName:r,targetName:i,stream:Nn.CANCEL_COMPLETE,streamId:n,success:!0})},function(d){a.postMessage({sourceName:r,targetName:i,stream:Nn.CANCEL_COMPLETE,streamId:n,reason:$r(d)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#s(e,n){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#e?.abort(),this.#e=null}}class FD{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,n);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,n,r){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){Xt("Abstract method `_createCanvas` called.")}}class Gz extends FD{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const r=this._document.createElement("canvas");return r.width=e,r.height=n,r}}class UD{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){Xt("Abstract method `_fetch` called.")}}class hC extends UD{async _fetch(e){const n=await Nh(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):_h(n)}}class HD{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,r,i,a){return"none"}destroy(e=!1){}}class Wz extends HD{#e;#t;#r;#n;#s;#a;#i=0;constructor({docId:e,ownerDocument:n=globalThis.document}){super(),this.#n=e,this.#s=n}get#o(){return this.#t||=new Map}get#u(){return this.#a||=new Map}get#l(){if(!this.#r){const e=this.#s.createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=this.#s.createElementNS(Ka,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#r=this.#s.createElementNS(Ka,"defs"),e.append(r),r.append(this.#r),this.#s.body.append(e)}return this.#r}#h(e){if(e.length===1){const c=e[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=c[p]/255;const h=d.join(",");return[h,h,h]}const[n,r,i]=e,a=new Array(256),s=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=n[c]/255,s[c]=r[c]/255,l[c]=i[c]/255;return[a.join(","),s.join(","),l.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const n=this.#s.URL;n!==this.#s.baseURI&&(vg(n)?dt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=OD(n,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let n=this.#o.get(e);if(n)return n;const[r,i,a]=this.#h(e),s=e.length===1?r:`${r}${i}${a}`;if(n=this.#o.get(s),n)return this.#o.set(e,n),n;const l=`g_${this.#n}_transfer_map_${this.#i++}`,c=this.#d(l);this.#o.set(e,c),this.#o.set(s,c);const d=this.#p(l);return this.#m(r,i,a,d),c}addHCMFilter(e,n){const r=`${e}-${n}`,i="base";let a=this.#u.get(i);if(a?.key===r||(a?(a.filter?.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},this.#u.set(i,a)),!e||!n))return a.url;const s=this.#x(e);e=Ve.makeHexColor(...s);const l=this.#x(n);if(n=Ve.makeHexColor(...l),this.#l.style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const c=new Array(256);for(let y=0;y<=255;y++){const x=y/255;c[y]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const d=c.join(","),h=`g_${this.#n}_hcm_filter`,p=a.filter=this.#p(h);this.#m(d,d,d,p),this.#g(p);const b=(y,x)=>{const w=s[y]/255,E=l[y]/255,T=new Array(x+1);for(let C=0;C<=x;C++)T[C]=w+C/x*(E-w);return T.join(",")};return this.#m(b(0,5),b(1,5),b(2,5),p),a.url=this.#d(h),a.url}addAlphaFilter(e){let n=this.#o.get(e);if(n)return n;const[r]=this.#h([e]),i=`alpha_${r}`;if(n=this.#o.get(i),n)return this.#o.set(e,n),n;const a=`g_${this.#n}_alpha_map_${this.#i++}`,s=this.#d(a);this.#o.set(e,s),this.#o.set(i,s);const l=this.#p(a);return this.#b(r,l),s}addLuminosityFilter(e){let n=this.#o.get(e||"luminosity");if(n)return n;let r,i;if(e?([r]=this.#h([e]),i=`luminosity_${r}`):i="luminosity",n=this.#o.get(i),n)return this.#o.set(e,n),n;const a=`g_${this.#n}_luminosity_map_${this.#i++}`,s=this.#d(a);this.#o.set(e,s),this.#o.set(i,s);const l=this.#p(a);return this.#f(l),e&&this.#b(r,l),s}addHighlightHCMFilter(e,n,r,i,a){const s=`${n}-${r}-${i}-${a}`;let l=this.#u.get(e);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#u.set(e,l)),!n||!r))return l.url;const[c,d]=[n,r].map(this.#x.bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[b,y]=[i,a].map(this.#x.bind(this));p<h&&([h,p,b,y]=[p,h,y,b]),this.#l.style.color="";const x=(T,C,N)=>{const P=new Array(256),k=(p-h)/N,j=T/255,D=(C-T)/(255*N);let H=0;for(let Y=0;Y<=N;Y++){const X=Math.round(h+Y*k),z=j+Y*D;for(let K=H;K<=X;K++)P[K]=z;H=X+1}for(let Y=H;Y<256;Y++)P[Y]=P[H-1];return P.join(",")},w=`g_${this.#n}_hcm_${e}_filter`,E=l.filter=this.#p(w);return this.#g(E),this.#m(x(b[0],y[0],5),x(b[1],y[1],5),x(b[2],y[2],5),E),l.url=this.#d(w),l.url}destroy(e=!1){e&&this.#a?.size||(this.#r?.parentNode.parentNode.remove(),this.#r=null,this.#t?.clear(),this.#t=null,this.#a?.clear(),this.#a=null,this.#i=0)}#f(e){const n=this.#s.createElementNS(Ka,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)}#g(e){const n=this.#s.createElementNS(Ka,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)}#p(e){const n=this.#s.createElementNS(Ka,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),this.#l.append(n),n}#c(e,n,r){const i=this.#s.createElementNS(Ka,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),e.append(i)}#m(e,n,r,i){const a=this.#s.createElementNS(Ka,"feComponentTransfer");i.append(a),this.#c(a,"feFuncR",e),this.#c(a,"feFuncG",n),this.#c(a,"feFuncB",r)}#b(e,n){const r=this.#s.createElementNS(Ka,"feComponentTransfer");n.append(r),this.#c(r,"feFuncA",e)}#x(e){return this.#l.style.color=e,Oh(getComputedStyle(this.#l).getPropertyValue("color"))}}class zD{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){Xt("Abstract method `_fetch` called.")}}class fC extends zD{async _fetch(e){const n=await Nh(e,"arraybuffer");return new Uint8Array(n)}}class $D{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(r=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){Xt("Abstract method `_fetch` called.")}}class mC extends $D{async _fetch(e){const n=await Nh(e,"arraybuffer");return new Uint8Array(n)}}Ar&&dt("Please use the `legacy` build in Node.js environments.");async function Ww(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class Xz extends HD{}class Kz extends FD{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class Qz extends UD{async _fetch(e){return Ww(e)}}class Zz extends zD{async _fetch(e){return Ww(e)}}class Jz extends $D{async _fetch(e){return Ww(e)}}const su="__forcedDependency",{floor:pC,ceil:gC}=Math;function xm(t,e,n,r,i,a){t[e*4+0]=Math.min(t[e*4+0],n),t[e*4+1]=Math.min(t[e*4+1],r),t[e*4+2]=Math.max(t[e*4+2],i),t[e*4+3]=Math.max(t[e*4+3],a)}const fv=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class e${#e;#t;constructor(e,n){this.#e=e,this.#t=n}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===fv}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const vm=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};class t${#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[su]:[]};#r=new Map;#n=[];#s=[];#a=[[1,0,0,1,0,0]];#i=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#u=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#p;#c;#m;constructor(e,n,r=!1){this.#f=e.width,this.#g=e.height,this.#b(n),r&&(this.#m=new Map)}growOperationsCount(e){e>=this.#c.length&&this.#b(e,this.#c)}#b(e,n){const r=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(r),this.#c=new Uint32Array(r),n&&n.length>0?(this.#c.set(n),this.#c.fill(fv,n.length)):this.#c.fill(fv)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[su]:{__proto__:this.#t[su]}},this.#i={__proto__:this.#i},this.#n.push(e),this}restore(e){const n=Object.getPrototypeOf(this.#e);if(n===null)return this;this.#e=n,this.#t=Object.getPrototypeOf(this.#t),this.#i=Object.getPrototypeOf(this.#i);const r=this.#n.pop();return r!==void 0&&(vm(this.#m,e)?.dependencies.add(r),this.#c[e]=this.#c[r]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const n=this.#n.pop();return n!==void 0&&(vm(this.#m,e)?.dependencies.add(n),this.#c[e]=this.#c[n]),this}beginMarkedContent(e){return this.#s.push(e),this}endMarkedContent(e){const n=this.#s.pop();return n!==void 0&&(vm(this.#m,e)?.dependencies.add(n),this.#c[e]=this.#c[n]),this}pushBaseTransform(e){return this.#a.push(Ve.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(e,n){return this.#e[e]=n,this}recordIncrementalData(e,n){return this.#t[e].push(n),this}resetIncrementalData(e,n){return this.#t[e].length=0,this}recordNamedData(e,n){return this.#r.set(e,n),this}recordSimpleDataFromNamed(e,n,r){this.#e[e]=this.#r.get(n)??r}recordFutureForcedDependency(e,n){return this.recordIncrementalData(su,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in this.#e&&this.recordFutureForcedDependency(n,this.#e[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(su,e);return this}resetBBox(e){return this.#u!==e&&(this.#u=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,n,r,i,a,s){const l=Ve.multiplyByDOMMatrix(this.#a.at(-1),n.getTransform()),c=[1/0,1/0,-1/0,-1/0];Ve.axialAlignedBoundingBox([r,a,i,s],l,c);const d=Ve.intersect(this.#i,c);return d?(this.#i[0]=d[0],this.#i[1]=d[1],this.#i[2]=d[2],this.#i[3]=d[3]):(this.#i[0]=this.#i[1]=1/0,this.#i[2]=this.#i[3]=-1/0),this}recordBBox(e,n,r,i,a,s){const l=this.#i;if(l[0]===1/0)return this;const c=Ve.multiplyByDOMMatrix(this.#a.at(-1),n.getTransform());if(l[0]===-1/0)return Ve.axialAlignedBoundingBox([r,a,i,s],c,this.#o),this;const d=[1/0,1/0,-1/0,-1/0];return Ve.axialAlignedBoundingBox([r,a,i,s],c,d),this.#o[0]=Math.min(this.#o[0],Math.max(d[0],l[0])),this.#o[1]=Math.min(this.#o[1],Math.max(d[1],l[1])),this.#o[2]=Math.max(this.#o[2],Math.min(d[2],l[2])),this.#o[3]=Math.max(this.#o[3],Math.min(d[3],l[3])),this}recordCharacterBBox(e,n,r,i=1,a=0,s=0,l){const c=r.bbox;let d,h;if(c&&(d=c[2]!==c[0]&&c[3]!==c[1]&&this.#d.get(r),d!==!1&&(h=[0,0,0,0],Ve.axialAlignedBoundingBox(c,r.fontMatrix,h),(i!==1||a!==0||s!==0)&&Ve.scaleMinMax([i,0,0,-i,a,s],h),d)))return this.recordBBox(e,n,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const p=l();return c&&h&&d===void 0&&(d=h[0]<=a-p.actualBoundingBoxLeft&&h[2]>=a+p.actualBoundingBoxRight&&h[1]<=s-p.actualBoundingBoxAscent&&h[3]>=s+p.actualBoundingBoxDescent,this.#d.set(r,d),d)?this.recordBBox(e,n,h[0],h[2],h[1],h[3]):this.recordBBox(e,n,a-p.actualBoundingBoxLeft,a+p.actualBoundingBoxRight,s-p.actualBoundingBoxAscent,s+p.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#i[0]),this.#o[1]=Math.max(0,this.#i[1]),this.#o[2]=Math.min(this.#f,this.#i[2]),this.#o[3]=Math.min(this.#g,this.#i[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,n){const r=this.#l,i=this.#e,a=this.#t;for(const s of n)s in this.#e?r.add(i[s]):s in a&&a[s].forEach(r.add,r);return this}recordNamedDependency(e,n){return this.#r.has(n)&&this.#l.add(this.#r.get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[su]),this.#m){const r=vm(this.#m,e),{dependencies:i}=r;this.#l.forEach(i.add,i),this.#n.forEach(i.add,i),this.#s.forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(this.#u===e){const r=pC(this.#o[0]*256/this.#f),i=pC(this.#o[1]*256/this.#g),a=gC(this.#o[2]*256/this.#f),s=gC(this.#o[3]*256/this.#g);xm(this.#p,e,r,i,a,s);for(const l of this.#l)l!==e&&xm(this.#p,l,r,i,a,s);for(const l of this.#n)l!==e&&xm(this.#p,l,r,i,a,s);for(const l of this.#s)l!==e&&xm(this.#p,l,r,i,a,s);n||(this.#l.clear(),this.#u=-1)}return this}recordShowTextOperation(e,n=!1){const r=Array.from(this.#l);this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,n=!1){return this.#u===e&&(this.#u=-1,this.#i[0]=Math.max(this.#i[0],this.#o[0]),this.#i[1]=Math.max(this.#i[1],this.#o[1]),this.#i[2]=Math.min(this.#i[2],this.#o[2]),this.#i[3]=Math.min(this.#i[3],this.#o[3]),n||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const n=this.#h.get(e);return this.#h.delete(e),n}_pushPendingDependencies(e){for(const n of e)this.#l.add(n)}take(){return this.#d.clear(),new e$(this.#c,this.#p)}takeDebugMetadata(){return this.#m}}class fp{#e;#t;#r;#n=0;#s=0;constructor(e,n,r){if(e instanceof fp&&e.#r===!!r)return e;this.#e=e,this.#t=n,this.#r=!!r}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#s++,this.#e.save(this.#t),this}restore(e){return this.#s>0&&(this.#e.restore(this.#t),this.#s--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,n){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,n){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,n){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,r){return this.#e.recordSimpleDataFromNamed(e,n,this.#t),this}recordFutureForcedDependency(e,n){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#r||this.#e.resetBBox(this.#t),this}recordClipBox(e,n,r,i,a,s){return this.#r||this.#e.recordClipBox(this.#t,n,r,i,a,s),this}recordBBox(e,n,r,i,a,s){return this.#r||this.#e.recordBBox(this.#t,n,r,i,a,s),this}recordCharacterBBox(e,n,r,i,a,s,l){return this.#r||this.#e.recordCharacterBBox(this.#t,n,r,i,a,s,l),this}recordFullPageBBox(e){return this.#r||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,n){return this.#e.recordDependencies(this.#t,n),this}recordNamedDependency(e,n){return this.#e.recordNamedDependency(this.#t,n),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#r||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const ki={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},or={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function mv(t,e){if(!e)return;const n=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],n,r),t.clip(i)}class Xw{isModifyingCurrentTransform(){return!1}getPattern(){Xt("Abstract method `getPattern` called.")}}class n$ extends Xw{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let n;this._type==="axial"?n=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(n=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)n.addColorStop(r[0],r[1]);return n}getPattern(e,n,r,i){let a;if(i===or.STROKE||i===or.FILL){const s=n.current.getClippedPathBoundingBox(i,hn(e))||[0,0,0,0],l=Math.ceil(s[2]-s[0])||1,c=Math.ceil(s[3]-s[1])||1,d=n.cachedCanvases.getCanvas("pattern",l,c),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-s[0],-s[1]),r=Ve.transform(r,[1,0,0,1,s[0],s[1]]),h.transform(...n.baseTransform),this.matrix&&h.transform(...this.matrix),mv(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),a=e.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(r);a.setTransform(p)}else mv(e,this._bbox),a=this._createGradient(e);return a}}function Qy(t,e,n,r,i,a,s,l){const c=e.coords,d=e.colors,h=t.data,p=t.width*4;let b;c[n+1]>c[r+1]&&(b=n,n=r,r=b,b=a,a=s,s=b),c[r+1]>c[i+1]&&(b=r,r=i,i=b,b=s,s=l,l=b),c[n+1]>c[r+1]&&(b=n,n=r,r=b,b=a,a=s,s=b);const y=(c[n]+e.offsetX)*e.scaleX,x=(c[n+1]+e.offsetY)*e.scaleY,w=(c[r]+e.offsetX)*e.scaleX,E=(c[r+1]+e.offsetY)*e.scaleY,T=(c[i]+e.offsetX)*e.scaleX,C=(c[i+1]+e.offsetY)*e.scaleY;if(x>=C)return;const N=d[a],P=d[a+1],k=d[a+2],j=d[s],D=d[s+1],H=d[s+2],Y=d[l],X=d[l+1],z=d[l+2],K=Math.round(x),ce=Math.round(C);let te,W,R,B,re,le,M,U;for(let Q=K;Q<=ce;Q++){if(Q<E){const me=Q<x?0:(x-Q)/(x-E);te=y-(y-w)*me,W=N-(N-j)*me,R=P-(P-D)*me,B=k-(k-H)*me}else{let me;Q>C?me=1:E===C?me=0:me=(E-Q)/(E-C),te=w-(w-T)*me,W=j-(j-Y)*me,R=D-(D-X)*me,B=H-(H-z)*me}let I;Q<x?I=0:Q>C?I=1:I=(x-Q)/(x-C),re=y-(y-T)*I,le=N-(N-Y)*I,M=P-(P-X)*I,U=k-(k-z)*I;const oe=Math.round(Math.min(te,re)),$=Math.round(Math.max(te,re));let ie=p*Q+oe*4;for(let me=oe;me<=$;me++)I=(te-me)/(te-re),I<0?I=0:I>1&&(I=1),h[ie++]=W-(W-le)*I|0,h[ie++]=R-(R-M)*I|0,h[ie++]=B-(B-U)*I|0,h[ie++]=255}}function r$(t,e,n){const r=e.coords,i=e.colors;let a,s;switch(e.type){case sv.LATTICE:const l=e.verticesPerRow,c=Math.floor(r.length/l)-1,d=l-1;for(a=0;a<c;a++){let h=a*l;for(let p=0;p<d;p++,h++)Qy(t,n,r[h],r[h+1],r[h+l],i[h],i[h+1],i[h+l]),Qy(t,n,r[h+l+1],r[h+1],r[h+l],i[h+l+1],i[h+1],i[h+l])}break;case sv.TRIANGLES:for(a=0,s=r.length;a<s;a+=3)Qy(t,n,r[a],r[a+1],r[a+2],i[a],i[a+1],i[a+2]);break;default:throw new Error("illegal figure")}}class i$ extends Xw{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,r){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,p=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),y=d/p,x=h/b,w={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/y,scaleY:1/x},E=p+4,T=b+4,C=r.getCanvas("mesh",E,T),N=C.context,P=N.createImageData(p,b);if(n){const j=P.data;for(let D=0,H=j.length;D<H;D+=4)j[D]=n[0],j[D+1]=n[1],j[D+2]=n[2],j[D+3]=255}for(const j of this._figures)r$(P,j,w);return N.putImageData(P,2,2),{canvas:C.canvas,offsetX:l-2*y,offsetY:c-2*x,scaleX:y,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(e,n,r,i){mv(e,this._bbox);const a=new Float32Array(2);if(i===or.SHADING)Ve.singularValueDecompose2dScale(hn(e),a);else if(this.matrix){Ve.singularValueDecompose2dScale(this.matrix,a);const[l,c]=a;Ve.singularValueDecompose2dScale(n.baseTransform,a),a[0]*=l,a[1]*=c}else Ve.singularValueDecompose2dScale(n.baseTransform,a);const s=this._createMeshCanvas(a,i===or.SHADING?null:this._background,n.cachedCanvases);return i!==or.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class a$ extends Xw{getPattern(){return"hotpink"}}function s$(t){switch(t[0]){case"RadialAxial":return new n$(t);case"Mesh":return new i$(t);case"Dummy":return new a$}throw new Error(`Unknown IR type: ${t[0]}`)}const bC={COLORED:1,UNCOLORED:2};class Kw{static MAX_PATTERN_SIZE=3e3;constructor(e,n,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,n){const{bbox:r,operatorList:i,paintType:a,tilingType:s,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:h}=this;d=Math.abs(d),h=Math.abs(h),xg("TilingType: "+s);const p=r[0],b=r[1],y=r[2],x=r[3],w=y-p,E=x-b,T=new Float32Array(2);Ve.singularValueDecompose2dScale(this.matrix,T);const[C,N]=T;Ve.singularValueDecompose2dScale(this.baseTransform,T);const P=C*T[0],k=N*T[1];let j=w,D=E,H=!1,Y=!1;const X=Math.ceil(d*P),z=Math.ceil(h*k),K=Math.ceil(w*P),ce=Math.ceil(E*k);X>=K?j=d:H=!0,z>=ce?D=h:Y=!0;const te=this.getSizeAndScale(j,this.ctx.canvas.width,P),W=this.getSizeAndScale(D,this.ctx.canvas.height,k),R=e.cachedCanvases.getCanvas("pattern",te.size,W.size),B=R.context,re=c.createCanvasGraphics(B,n);if(re.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(re,a,l),B.translate(-te.scale*p,-W.scale*b),re.transform(0,te.scale,0,0,W.scale,0,0),B.save(),re.dependencyTracker?.save(),this.clipBbox(re,p,b,y,x),re.baseTransform=hn(re.ctx),re.executeOperatorList(i),re.endDrawing(),re.dependencyTracker?.restore(),B.restore(),H||Y){const le=R.canvas;H&&(j=d),Y&&(D=h);const M=this.getSizeAndScale(j,this.ctx.canvas.width,P),U=this.getSizeAndScale(D,this.ctx.canvas.height,k),Q=M.size,I=U.size,oe=e.cachedCanvases.getCanvas("pattern-workaround",Q,I),$=oe.context,ie=H?Math.floor(w/d):0,me=Y?Math.floor(E/h):0;for(let be=0;be<=ie;be++)for(let J=0;J<=me;J++)$.drawImage(le,Q*be,I*J,Q,I,0,0,Q,I);return{canvas:oe.canvas,scaleX:M.scale,scaleY:U.scale,offsetX:p,offsetY:b}}return{canvas:R.canvas,scaleX:te.scale,scaleY:W.scale,offsetX:p,offsetY:b}}getSizeAndScale(e,n,r){const i=Math.max(Kw.MAX_PATTERN_SIZE,n);let a=Math.ceil(e*r);return a>=i?a=i:r=a/e,{scale:r,size:a}}clipBbox(e,n,r,i,a){const s=i-n,l=a-r;e.ctx.rect(n,r,s,l),Ve.axialAlignedBoundingBox([n,r,i,a],hn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,r){const i=e.ctx,a=e.current;switch(n){case bC.COLORED:const{fillStyle:s,strokeStyle:l}=this.ctx;i.fillStyle=a.fillColor=s,i.strokeStyle=a.strokeColor=l;break;case bC.UNCOLORED:i.fillStyle=i.strokeStyle=r,a.fillColor=a.strokeColor=r;break;default:throw new xz(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,r,i,a){let s=r;i!==or.SHADING&&(s=Ve.transform(s,n.baseTransform),this.matrix&&(s=Ve.transform(s,this.matrix)));const l=this.createPatternCanvas(n,a);let c=new DOMMatrix(s);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const d=e.createPattern(l.canvas,"repeat");return d.setTransform(c),d}}function o$({src:t,srcPos:e=0,dest:n,width:r,height:i,nonBlackColor:a=4294967295,inverseDecode:s=!1}){const l=ur.isLittleEndian?4278190080:255,[c,d]=s?[a,l]:[l,a],h=r>>3,p=r&7,b=t.length;n=new Uint32Array(n.buffer);let y=0;for(let x=0;x<i;x++){for(const E=e+h;e<E;e++){const T=e<b?t[e]:255;n[y++]=T&128?d:c,n[y++]=T&64?d:c,n[y++]=T&32?d:c,n[y++]=T&16?d:c,n[y++]=T&8?d:c,n[y++]=T&4?d:c,n[y++]=T&2?d:c,n[y++]=T&1?d:c}if(p===0)continue;const w=e<b?t[e++]:255;for(let E=0;E<p;E++)n[y++]=w&1<<7-E?d:c}return{srcPos:e,destPos:y}}const yC=16,xC=100,l$=15,vC=10,qr=16,Zy=new DOMMatrix,fi=new Float32Array(2),bu=new Float32Array([1/0,1/0,-1/0,-1/0]);function u$(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},t.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},t.transform=function(n,r,i,a,s,l){e.transform(n,r,i,a,s,l),this.__originalTransform(n,r,i,a,s,l)},t.setTransform=function(n,r,i,a,s,l){e.setTransform(n,r,i,a,s,l),this.__originalSetTransform(n,r,i,a,s,l)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,r){e.moveTo(n,r),this.__originalMoveTo(n,r)},t.lineTo=function(n,r){e.lineTo(n,r),this.__originalLineTo(n,r)},t.bezierCurveTo=function(n,r,i,a,s,l){e.bezierCurveTo(n,r,i,a,s,l),this.__originalBezierCurveTo(n,r,i,a,s,l)},t.rect=function(n,r,i,a){e.rect(n,r,i,a),this.__originalRect(n,r,i,a)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class c${constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,n,r)):(i=this.canvasFactory.create(n,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function wm(t,e,n,r,i,a,s,l,c,d){const[h,p,b,y,x,w]=hn(t);if(p===0&&b===0){const C=s*h+x,N=Math.round(C),P=l*y+w,k=Math.round(P),j=(s+c)*h+x,D=Math.abs(Math.round(j)-N)||1,H=(l+d)*y+w,Y=Math.abs(Math.round(H)-k)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(y),N,k),t.drawImage(e,n,r,i,a,0,0,D,Y),t.setTransform(h,p,b,y,x,w),[D,Y]}if(h===0&&y===0){const C=l*b+x,N=Math.round(C),P=s*p+w,k=Math.round(P),j=(l+d)*b+x,D=Math.abs(Math.round(j)-N)||1,H=(s+c)*p+w,Y=Math.abs(Math.round(H)-k)||1;return t.setTransform(0,Math.sign(p),Math.sign(b),0,N,k),t.drawImage(e,n,r,i,a,0,0,Y,D),t.setTransform(h,p,b,y,x,w),[Y,D]}t.drawImage(e,n,r,i,a,s,l,c,d);const E=Math.hypot(h,p),T=Math.hypot(b,y);return[E*c,T*d]}class wC{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=av;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ir.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,n,r){r?.(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=bu.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=or.FILL,n=null){const r=this.minMax.slice();if(e===or.STROKE){n||Xt("Stroke bounding box must include transform."),Ve.singularValueDecompose2dScale(n,fi);const i=fi[0]*this.lineWidth/2,a=fi[1]*this.lineWidth/2;r[0]-=i,r[1]-=a,r[2]+=i,r[3]+=a}return r}updateClipFromPath(){const e=Ve.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(bu,0)}getClippedPathBoundingBox(e=or.FILL,n=null){return Ve.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function EC(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,r=e.width,i=n%qr,a=(n-i)/qr,s=i===0?a:a+1,l=t.createImageData(r,qr);let c=0,d;const h=e.data,p=l.data;let b,y,x,w;if(e.kind===Xm.GRAYSCALE_1BPP){const E=h.byteLength,T=new Uint32Array(p.buffer,0,p.byteLength>>2),C=T.length,N=r+7>>3,P=4294967295,k=ur.isLittleEndian?4278190080:255;for(b=0;b<s;b++){for(x=b<a?qr:i,d=0,y=0;y<x;y++){const j=E-c;let D=0;const H=j>N?r:j*8-7,Y=H&-8;let X=0,z=0;for(;D<Y;D+=8)z=h[c++],T[d++]=z&128?P:k,T[d++]=z&64?P:k,T[d++]=z&32?P:k,T[d++]=z&16?P:k,T[d++]=z&8?P:k,T[d++]=z&4?P:k,T[d++]=z&2?P:k,T[d++]=z&1?P:k;for(;D<H;D++)X===0&&(z=h[c++],X=128),T[d++]=z&X?P:k,X>>=1}for(;d<C;)T[d++]=0;t.putImageData(l,0,b*qr)}}else if(e.kind===Xm.RGBA_32BPP){for(y=0,w=r*qr*4,b=0;b<a;b++)p.set(h.subarray(c,c+w)),c+=w,t.putImageData(l,0,y),y+=qr;b<s&&(w=r*i*4,p.set(h.subarray(c,c+w)),t.putImageData(l,0,y))}else if(e.kind===Xm.RGB_24BPP)for(x=qr,w=r*x,b=0;b<s;b++){for(b>=a&&(x=i,w=r*x),d=0,y=w;y--;)p[d++]=h[c++],p[d++]=h[c++],p[d++]=h[c++],p[d++]=255;t.putImageData(l,0,b*qr)}else throw new Error(`bad image kind: ${e.kind}`)}function AC(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,r=e.width,i=n%qr,a=(n-i)/qr,s=i===0?a:a+1,l=t.createImageData(r,qr);let c=0;const d=e.data,h=l.data;for(let p=0;p<s;p++){const b=p<a?qr:i;({srcPos:c}=o$({src:d,srcPos:c,dest:h,width:r,height:b,nonBlackColor:0})),t.putImageData(l,0,p*qr)}}function dd(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)t[r]!==void 0&&(e[r]=t[r]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function Em(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function SC(t,e){if(e)return!0;Ve.singularValueDecompose2dScale(t,fi);const n=Math.fround(Aa.pixelRatio*Iu.PDF_TO_CSS_UNITS);return fi[0]<=n&&fi[1]<=n}const d$=["butt","round","square"],h$=["miter","round","bevel"],f$={},TC={};class Tu{constructor(e,n,r,i,a,{optionalContentConfig:s,markedContentStack:l=null},c,d,h){this.ctx=e,this.current=new wC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=r,this.canvasFactory=i,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=s,this.cachedCanvases=new c$(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,n,r=null){return typeof n=="string"?(this.dependencyTracker?.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):r}beginDrawing({transform:e,viewport:n,transparency:r=!1,background:i=null}){const a=this.ctx.canvas.width,s=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,a,s),this.ctx.fillStyle=l,r){const c=this.cachedCanvases.getCanvas("transparent",a,s);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...hn(this.compositeCtx))}this.ctx.save(),Em(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=hn(this.ctx)}executeOperatorList(e,n,r,i,a){const s=e.argsArray,l=e.fnArray;let c=n||0;const d=s.length;if(d===c)return c;const h=d-c>vC&&typeof r=="function",p=h?Date.now()+l$:0;let b=0;const y=this.commonObjs,x=this.objs;let w,E;for(;;){if(i!==void 0&&c===i.nextBreakPoint)return i.breakIt(c,r),c;if(!a||a(c))if(w=l[c],E=s[c]??null,w!==eh.dependency)E===null?this[w](c):this[w](c,...E);else for(const T of E){this.dependencyTracker?.recordNamedData(T,c);const C=T.startsWith("g_")?y:x;if(!C.has(T))return C.get(T,r),c}if(c++,c===d)return c;if(h&&++b>vC){if(Date.now()>p)return r(),c;b=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(e,n){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let a=Math.max(Math.hypot(n[0],n[1]),1),s=Math.max(Math.hypot(n[2],n[3]),1),l=r,c=i,d="prescale1",h,p;for(;a>2&&l>1||s>2&&c>1;){let b=l,y=c;a>2&&l>1&&(b=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),a/=l/b),s>2&&c>1&&(y=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,s/=c/y),h=this.cachedCanvases.getCanvas(d,b,y),p=h.context,p.clearRect(0,0,b,y),p.drawImage(e,0,0,l,c,0,0,b,y),e=h.canvas,l=b,c=y,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,n){const r=this.ctx,{width:i,height:a}=n,s=this.current.fillColor,l=this.current.patternFill,c=hn(r);let d,h,p,b;if((n.bitmap||n.data)&&n.count>1){const X=n.bitmap||n.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),s]),d=this._cachedBitmapsMap.get(X),d||(d=new Map,this._cachedBitmapsMap.set(X,d));const z=d.get(h);if(z&&!l){const K=Math.round(Math.min(c[0],c[2])+c[4]),ce=Math.round(Math.min(c[1],c[3])+c[5]);return this.dependencyTracker?.recordDependencies(e,ki.transformAndFill),{canvas:z,offsetX:K,offsetY:ce}}p=z}p||(b=this.cachedCanvases.getCanvas("maskCanvas",i,a),AC(b.context,n));let y=Ve.transform(c,[1/i,0,0,-1/a,0,0]);y=Ve.transform(y,[1,0,0,1,0,-a]);const x=bu.slice();Ve.axialAlignedBoundingBox([0,0,i,a],y,x);const[w,E,T,C]=x,N=Math.round(T-w)||1,P=Math.round(C-E)||1,k=this.cachedCanvases.getCanvas("fillCanvas",N,P),j=k.context,D=w,H=E;j.translate(-D,-H),j.transform(...y),p||(p=this._scaleImage(b.canvas,ha(j)),p=p.img,d&&l&&d.set(h,p)),j.imageSmoothingEnabled=SC(hn(j),n.interpolate),wm(j,p,0,0,p.width,p.height,0,0,i,a),j.globalCompositeOperation="source-in";const Y=Ve.transform(ha(j),[1,0,0,1,-D,-H]);return j.fillStyle=l?s.getPattern(r,this,Y,or.FILL,e):s,j.fillRect(0,0,i,a),d&&!l&&(this.cachedCanvases.delete("fillCanvas"),d.set(h,k.canvas)),this.dependencyTracker?.recordDependencies(e,ki.transformAndFill),{canvas:k.canvas,offsetX:Math.round(D),offsetY:Math.round(H)}}setLineWidth(e,n){this.dependencyTracker?.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=d$[n]}setLineJoin(e,n){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=h$[n]}setMiterLimit(e,n){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,r){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(n),i.lineDashOffset=r)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){for(const[r,i]of n)switch(r){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(i,n,r);this.suspendedCtx=this.ctx;const s=this.ctx=a.context;s.setTransform(this.suspendedCtx.getTransform()),dd(this.suspendedCtx,s),u$(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),dd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,r,i){const a=i[0],s=i[1],l=i[2]-a,c=i[3]-s;l===0||c===0||(this.genericComposeSMask(n.context,r,l,c,n.subtype,n.backdrop,n.transferMap,a,s,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,n,r,i,a,s,l,c,d,h,p){let b=e.canvas,y=c-h,x=d-p;if(s)if(y<0||x<0||y+r>b.width||x+i>b.height){const E=this.cachedCanvases.getCanvas("maskExtension",r,i),T=E.context;T.drawImage(b,-y,-x),T.globalCompositeOperation="destination-atop",T.fillStyle=s,T.fillRect(0,0,r,i),T.globalCompositeOperation="source-over",b=E.canvas,y=x=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(y,x,r,i),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(y,x,r,i),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),a==="Alpha"&&l?n.filter=this.filterFactory.addAlphaFilter(l):a==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(l));const w=new Path2D;w.rect(c,d,r,i),n.clip(w),n.globalCompositeOperation="destination-in",n.drawImage(b,y,x,r,i,c,d,r,i),n.restore()}save(e){this.inSMaskMode&&dd(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&dd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,r,i,a,s,l){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(n,r,i,a,s,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,r,i){let[a]=r;if(!i){a||=r[0]=new Path2D,this[n](e,a);return}if(this.dependencyTracker!==null){const s=n===eh.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-s,i[2]+s,i[1]-s,i[3]+s).recordDependencies(e,["transform"])}a instanceof Path2D||(a=r[0]=ID(a)),Ve.axialAlignedBoundingBox(i,hn(this.ctx),this.current.minMax),this[n](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,r=!0){const i=this.ctx,a=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&a?.getPattern){const s=a.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=a.getPattern(i,this,ha(i),or.STROKE,e),s){const l=new Path2D;l.addPath(n,i.getTransform().invertSelf().multiplySelf(s)),n=l}this.rescaleAndStroke(n,!1),i.restore()}else this.rescaleAndStroke(n,!0);this.dependencyTracker?.recordDependencies(e,ki.stroke),r&&this.consumePath(e,n,this.current.getClippedPathBoundingBox(or.STROKE,hn(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,r=!0){const i=this.ctx,a=this.current.fillColor,s=this.current.patternFill;let l=!1;if(s){const d=a.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=a.getPattern(i,this,ha(i),or.FILL,e),d){const h=new Path2D;h.addPath(n,i.getTransform().invertSelf().multiplySelf(d)),n=h}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(i.fill(n,"evenodd"),this.pendingEOFill=!1):i.fill(n)),this.dependencyTracker?.recordDependencies(e,ki.fill),l&&(i.restore(),this.dependencyTracker?.restore(e)),r&&this.consumePath(e,n,c)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){this.ctx.fill(n),this.dependencyTracker?.recordDependencies(e,ki.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=f$}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=TC}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;n!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(n!==void 0){const i=new Path2D,a=r.getTransform().invertSelf();for(const{transform:s,x:l,y:c,fontSize:d,path:h}of n)h&&i.addPath(h,new DOMMatrix(s).preMultiplySelf(a).translate(l,c).scale(d,-d));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,n){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,r){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const i=this.commonObjs.get(n),a=this.current;if(!i)throw new Error(`Can't find font for ${n}`);if(a.fontMatrix=i.fontMatrix||av,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&dt("Invalid font matrix for font "+n),r<0?(r=-r,a.fontDirection=-1):a.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const s=i.loadedName||"sans-serif",l=i.systemFontInfo?.css||`"${s}", ${i.fallbackName}`;let c="normal";i.black?c="900":i.bold&&(c="bold");const d=i.italic?"italic":"normal";let h=r;r<yC?h=yC:r>xC&&(h=xC),this.current.fontSizeScale=r/h,this.ctx.font=`${d} ${c} ${h}px ${l}`}setTextRenderingMode(e,n){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,n,r){this.setLeading(e,-r),this.moveText(e,n,r)}setTextMatrix(e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=n,r.textMatrixScale=Math.hypot(n[0],n[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#r(e,n,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(n)),i}paintChar(e,n,r,i,a,s){const l=this.ctx,c=this.current,d=c.font,h=c.textRenderingMode,p=c.fontSize/c.fontSizeScale,b=h&ir.FILL_STROKE_MASK,y=!!(h&ir.ADD_TO_PATH_FLAG),x=c.patternFill&&!d.missingFile,w=c.patternStroke&&!d.missingFile;let E;if((d.disableFontFace||y||x||w)&&!d.missingFile&&(E=d.getPathGenerator(this.commonObjs,n)),E&&(d.disableFontFace||x||w)){l.save(),l.translate(r,i),l.scale(p,-p),this.dependencyTracker?.recordCharacterBBox(e,l,d);let T;if(b===ir.FILL||b===ir.FILL_STROKE)if(a){T=l.getTransform(),l.setTransform(...a);const C=this.#r(E,T,a);l.fill(C)}else l.fill(E);if(b===ir.STROKE||b===ir.FILL_STROKE)if(s){T||=l.getTransform(),l.setTransform(...s);const{a:C,b:N,c:P,d:k}=T,j=Ve.inverseTransform(s),D=Ve.transform([C,N,P,k,0,0],j);Ve.singularValueDecompose2dScale(D,fi),l.lineWidth*=Math.max(fi[0],fi[1])/p,l.stroke(this.#r(E,T,s))}else l.lineWidth/=p,l.stroke(E);l.restore()}else(b===ir.FILL||b===ir.FILL_STROKE)&&(l.fillText(n,r,i),this.dependencyTracker?.recordCharacterBBox(e,l,d,p,r,i,()=>l.measureText(n))),(b===ir.STROKE||b===ir.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,l,d,p,r,i,()=>l.measureText(n)).recordDependencies(e,ki.stroke),l.strokeText(n,r,i));y&&((this.pendingTextPaths||=[]).push({transform:hn(l),x:r,y:i,fontSize:p,path:E}),this.dependencyTracker?.recordCharacterBBox(e,l,d,p,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<n.length;i+=4)if(n[i]>0&&n[i]<255){r=!0;break}return bt(this,"isFontSubpixelAAEnabled",r)}showText(e,n){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ki.showText).resetBBox(e),this.current.textRenderingMode&ir.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,n),this.dependencyTracker?.recordShowTextOperation(e);return}const a=r.fontSize;if(a===0){this.dependencyTracker?.recordOperation(e);return}const s=this.ctx,l=r.fontSizeScale,c=r.charSpacing,d=r.wordSpacing,h=r.fontDirection,p=r.textHScale*h,b=n.length,y=i.vertical,x=y?1:-1,w=i.defaultVMetrics,E=a*r.fontMatrix[0],T=r.textRenderingMode===ir.FILL&&!i.disableFontFace&&!r.patternFill;s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),h>0?s.scale(p,-1):s.scale(p,1);let C,N;if(r.patternFill){s.save();const H=r.fillColor.getPattern(s,this,ha(s),or.FILL,e);C=hn(s),s.restore(),s.fillStyle=H}if(r.patternStroke){s.save();const H=r.strokeColor.getPattern(s,this,ha(s),or.STROKE,e);N=hn(s),s.restore(),s.strokeStyle=H}let P=r.lineWidth;const k=r.textMatrixScale;if(k===0||P===0){const H=r.textRenderingMode&ir.FILL_STROKE_MASK;(H===ir.STROKE||H===ir.FILL_STROKE)&&(P=this.getSinglePixelWidth())}else P/=k;if(l!==1&&(s.scale(l,l),P/=l),s.lineWidth=P,i.isInvalidPDFjsFont){const H=[];let Y=0;for(const z of n)H.push(z.unicode),Y+=z.width;const X=H.join("");if(s.fillText(X,0,0),this.dependencyTracker!==null){const z=s.measureText(X);this.dependencyTracker.recordBBox(e,this.ctx,-z.actualBoundingBoxLeft,z.actualBoundingBoxRight,-z.actualBoundingBoxAscent,z.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=Y*E*p,s.restore(),this.compose();return}let j=0,D;for(D=0;D<b;++D){const H=n[D];if(typeof H=="number"){j+=x*H*a/1e3;continue}let Y=!1;const X=(H.isSpace?d:0)+c,z=H.fontChar,K=H.accent;let ce,te,W=H.width;if(y){const re=H.vmetric||w,le=-(H.vmetric?re[1]:W*.5)*E,M=re[2]*E;W=re?-re[0]:W,ce=le/l,te=(j+M)/l}else ce=j/l,te=0;let R;if(i.remeasure&&W>0){R=s.measureText(z);const re=R.width*1e3/a*l;if(W<re&&this.isFontSubpixelAAEnabled){const le=W/re;Y=!0,s.save(),s.scale(le,1),ce/=le}else W!==re&&(ce+=(W-re)/2e3*a/l)}if(this.contentVisible&&(H.isInFont||i.missingFile)){if(T&&!K)s.fillText(z,ce,te),this.dependencyTracker?.recordCharacterBBox(e,s,R?{bbox:null}:i,a/l,ce,te,()=>R??s.measureText(z));else if(this.paintChar(e,z,ce,te,C,N),K){const re=ce+a*K.offset.x/l,le=te-a*K.offset.y/l;this.paintChar(e,K.fontChar,re,le,C,N)}}const B=y?W*E-X*h:W*E+X*h;j+=B,Y&&s.restore()}y?r.y-=j:r.x+=j*p,s.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,n){const r=this.ctx,i=this.current,a=i.font,s=i.fontSize,l=i.fontDirection,c=a.vertical?1:-1,d=i.charSpacing,h=i.wordSpacing,p=i.textHScale*l,b=i.fontMatrix||av,y=n.length,x=i.textRenderingMode===ir.INVISIBLE;let w,E,T,C;if(x||s===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(p,l);const N=this.dependencyTracker;for(this.dependencyTracker=N?new fp(N,e):null,w=0;w<y;++w){if(E=n[w],typeof E=="number"){C=c*E*s/1e3,this.ctx.translate(C,0),i.x+=C*p;continue}const P=(E.isSpace?h:0)+d,k=a.charProcOperatorList[E.operatorListId];k?this.contentVisible&&(this.save(),r.scale(s,s),r.transform(...b),this.executeOperatorList(k),this.restore()):dt(`Type3 character "${E.operatorListId}" is not available.`);const j=[E.width,0];Ve.applyTransform(j,b),T=j[0]*s+P,r.translate(T,0),i.x+=T*p}r.restore(),N&&(this.dependencyTracker=N)}setCharWidth(e,n,r){}setCharWidthAndBounds(e,n,r,i,a,s,l){const c=new Path2D;c.rect(i,a,s-i,l-a),this.ctx.clip(c),this.dependencyTracker?.recordBBox(e,this.ctx,i,s,a,l).recordClipBox(e,this.ctx,i,s,a,l),this.endPath(e)}getColorN_Pattern(e,n){let r;if(n[0]==="TilingPattern"){const i=this.baseTransform||hn(this.ctx),a={createCanvasGraphics:(s,l)=>new Tu(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new fp(this.dependencyTracker,l,!0):null)};r=new Kw(n,this.ctx,a,i)}else r=this._getPattern(e,n[1],n[2]);return r}setStrokeColorN(e,...n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,r=null){let i;return this.cachedPatterns.has(n)?i=this.cachedPatterns.get(n):(i=s$(this.getObject(e,n)),this.cachedPatterns.set(n,i)),r&&(i.matrix=r),i}shadingFill(e,n){if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,n);r.fillStyle=i.getPattern(r,this,ha(r),or.SHADING,e);const a=ha(r);if(a){const{width:s,height:l}=r.canvas,c=bu.slice();Ve.axialAlignedBoundingBox([0,0,s,l],a,c);const[d,h,p,b]=c;this.ctx.fillRect(d,h,p-d,b-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ki.transform).recordDependencies(e,ki.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Xt("Should not call beginInlineImage")}beginImageData(){Xt("Should not call beginImageData")}paintFormXObjectBegin(e,n,r){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=hn(this.ctx),r)){Ve.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[i,a,s,l]=r,c=new Path2D;c.rect(i,a,s-i,l-a),this.ctx.clip(c),this.dependencyTracker?.recordClipBox(e,this.ctx,i,s,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;n.isolated||xg("TODO: Support non-isolated groups."),n.knockout&&dt("Knockout groups not supported.");const i=hn(r);if(n.matrix&&r.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let a=bu.slice();Ve.axialAlignedBoundingBox(n.bbox,hn(r),a);const s=[0,0,r.canvas.width,r.canvas.height];a=Ve.intersect(a,s)||[0,0,0,0];const l=Math.floor(a[0]),c=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-l,1),h=Math.max(Math.ceil(a[3])-c,1);this.current.startNewPathAndClipBox([0,0,d,h]);let p="groupAt"+this.groupLevel;n.smask&&(p+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(p,d,h),y=b.context;y.translate(-l,-c),y.transform(...i);let x=new Path2D;const[w,E,T,C]=n.bbox;if(x.rect(w,E,T-w,C-E),n.matrix){const N=new Path2D;N.addPath(x,new DOMMatrix(n.matrix)),x=N}y.clip(x),n.smask&&this.smaskStack.push({canvas:b.canvas,context:y,offsetX:l,offsetY:c,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(l,c),r.save()),dd(r,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,n){if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=hn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const s=bu.slice();Ve.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a,s),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,n,r,i,a,s){if(this.#e(),Em(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const l=r[2]-r[0],c=r[3]-r[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=l,r[3]=c,Ve.singularValueDecompose2dScale(hn(this.ctx),fi);const{viewportScale:d}=this,h=Math.ceil(l*this.outputScaleX*d),p=Math.ceil(c*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,p);const{canvas:b,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(n,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(fi[0],0,0,-fi[1],0,c*fi[1]),Em(this.ctx)}else{Em(this.ctx),this.endPath(e);const d=new Path2D;d.rect(r[0],r[1],l,c),this.ctx.clip(d)}}this.current=new wC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){if(!this.contentVisible)return;const r=n.count;n=this.getObject(e,n.data,n),n.count=r;const i=this.ctx,a=this._createMaskCanvas(e,n),s=a.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,a.offsetX,a.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+s.width,a.offsetY,a.offsetY+s.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,r,i=0,a=0,s,l){if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const c=this.ctx;c.save();const d=hn(c);c.transform(r,i,a,s,0,0);const h=this._createMaskCanvas(e,n);c.setTransform(1,0,0,1,h.offsetX-d[4],h.offsetY-d[5]),this.dependencyTracker?.resetBBox(e);for(let p=0,b=l.length;p<b;p+=2){const y=Ve.transform(d,[r,i,a,s,l[p],l[p+1]]);c.drawImage(h.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(e,this.ctx,y[4],y[4]+h.canvas.width,y[5],y[5]+h.canvas.height)}c.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,n){if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,a=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,ki.transformAndFill);for(const s of n){const{data:l,width:c,height:d,transform:h}=s,p=this.cachedCanvases.getCanvas("maskCanvas",c,d),b=p.context;b.save();const y=this.getObject(e,l,s);AC(b,y),b.globalCompositeOperation="source-in",b.fillStyle=a?i.getPattern(b,this,ha(r),or.FILL,e):i,b.fillRect(0,0,c,d),b.restore(),r.save(),r.transform(...h),r.scale(1,-1),wm(r,p.canvas,0,0,c,d,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,c,0,d),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const r=this.getObject(e,n);if(!r){dt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,n,r,i,a){if(!this.contentVisible)return;const s=this.getObject(e,n);if(!s){dt("Dependent image isn't ready yet");return}const l=s.width,c=s.height,d=[];for(let h=0,p=a.length;h<p;h+=2)d.push({transform:[r,0,0,i,a[h],a[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,s,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:r,height:i}=e,a=this.cachedCanvases.getCanvas("inlineImage",r,i),s=a.context;return s.filter=this.current.transferMaps,s.drawImage(n,0,0),s.filter="none",a.canvas}paintInlineImageXObject(e,n){if(!this.contentVisible)return;const r=n.width,i=n.height,a=this.ctx;this.save(e);const{filter:s}=a;s!=="none"&&s!==""&&(a.filter="none"),a.scale(1/r,-1/i);let l;if(n.bitmap)l=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)l=n;else{const h=this.cachedCanvases.getCanvas("inlineImage",r,i).context;EC(h,n),l=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(l,ha(a));a.imageSmoothingEnabled=SC(hn(a),n.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,a,0,r,-i,0).recordDependencies(e,ki.imageXObject).recordOperation(e),wm(a,c.img,0,0,c.paintWidth,c.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,r){if(!this.contentVisible)return;const i=this.ctx;let a;if(n.bitmap)a=n.bitmap;else{const s=n.width,l=n.height,d=this.cachedCanvases.getCanvas("inlineImage",s,l).context;EC(d,n),a=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(e);for(const s of r)i.save(),i.transform(...s.transform),i.scale(1,-1),wm(i,a,s.x,s.y,s.w,s.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ki.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,r){}beginMarkedContent(e,n){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,r){this.dependencyTracker?.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,r){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const a=this.ctx;this.pendingClip?(i||(this.pendingClip===TC?a.clip(n,"evenodd"):a.clip(n)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=hn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:r,c:i,d:a}=this.ctx.getTransform();let s,l;if(r===0&&i===0){const c=Math.abs(n),d=Math.abs(a);if(c===d)if(e===0)s=l=1/c;else{const h=c*e;s=l=h<1?1/h:1}else if(e===0)s=1/c,l=1/d;else{const h=c*e,p=d*e;s=h<1?1/h:1,l=p<1?1/p:1}}else{const c=Math.abs(n*a-r*i),d=Math.hypot(n,r),h=Math.hypot(i,a);if(e===0)s=h/c,l=d/c;else{const p=e*c;s=h>p?h/p:1,l=d>p?d/p:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:r,current:{lineWidth:i}}=this,[a,s]=this.getScaleForStroking();if(a===s){r.lineWidth=(i||1)*a,r.stroke(e);return}const l=r.getLineDash();n&&r.save(),r.scale(a,s),Zy.a=1/a,Zy.d=1/s;const c=new Path2D;if(c.addPath(e,Zy),l.length>0){const d=Math.max(a,s);r.setLineDash(l.map(h=>h/d)),r.lineDashOffset/=d}r.lineWidth=i||1,r.stroke(c),n&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const t in eh)Tu.prototype[t]!==void 0&&(Tu.prototype[eh[t]]=Tu.prototype[t]);class _u{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class m${#e;#t;constructor({parsedData:e,rawData:n}){this.#e=e,this.#t=n}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const mu=Symbol("INTERNAL");class p${#e=!1;#t=!1;#r=!1;#n=!0;constructor(e,{name:n,intent:r,usage:i,rbGroups:a}){this.#e=!!(e&hi.DISPLAY),this.#t=!!(e&hi.PRINT),this.name=n,this.intent=r,this.usage=i,this.rbGroups=a}get visible(){if(this.#r)return this.#n;if(!this.#n)return!1;const{print:e,view:n}=this.usage;return this.#e?n?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,n,r=!1){e!==mu&&Xt("Internal method `_setVisible` called."),this.#r=r,this.#n=n}}class g${#e=null;#t=new Map;#r=null;#n=null;constructor(e,n=hi.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const r of e.groups)this.#t.set(r.id,new p$(n,r));if(e.baseState==="OFF")for(const r of this.#t.values())r._setVisible(mu,!1);for(const r of e.on)this.#t.get(r)._setVisible(mu,!0);for(const r of e.off)this.#t.get(r)._setVisible(mu,!1);this.#r=this.getHash()}}#s(e){const n=e.length;if(n<2)return!0;const r=e[0];for(let i=1;i<n;i++){const a=e[i];let s;if(Array.isArray(a))s=this.#s(a);else if(this.#t.has(a))s=this.#t.get(a).visible;else return dt(`Optional content group not found: ${a}`),!0;switch(r){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return r==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return xg("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(dt(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!this.#t.has(n))return dt(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!this.#t.has(n))return dt(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!this.#t.has(n))return dt(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!this.#t.has(n))return dt(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!1}return!0}return dt(`Unknown optional content policy ${e.policy}.`),!0}return dt(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,r=!0){const i=this.#t.get(e);if(!i){dt(`Optional content group not found: ${e}`);return}if(r&&n&&i.rbGroups.length)for(const a of i.rbGroups)for(const s of a)s!==e&&this.#t.get(s)?._setVisible(mu,!1,!0);i._setVisible(mu,!!n,!0),this.#e=null}setOCGState({state:e,preserveRB:n}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const a=this.#t.get(i);if(a)switch(r){case"ON":this.setVisibility(i,!0,n);break;case"OFF":this.setVisibility(i,!1,n);break;case"Toggle":this.setVisibility(i,!a.visible,n);break}}this.#e=null}get hasInitialVisibility(){return this.#r===null||this.getHash()===this.#r}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new MD;for(const[n,r]of this.#t)e.update(`${n}:${r.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class b${constructor(e,{disableRange:n=!1,disableStream:r=!1}){Ct(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:a,progressiveDone:s,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=l,a?.length>0){const c=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,d)=>{this._onReceiveData({begin:c,chunk:d})}),e.addProgressListener((c,d)=>{this._onProgress({loaded:c,total:d})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:n}){const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(r),!0)});Ct(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const n=this._rangeReaders.indexOf(e);n>=0&&this._rangeReaders.splice(n,1)}getFullReader(){Ct(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new y$(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new x$(this,e,n);return this._pdfDataRangeTransport.requestDataRange(e,n),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class y${constructor(e,n,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=qw(i)?i:null,this._queuedChunks=n||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class x${constructor(e,n,r){this._stream=e,this._begin=n,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function v$(t){let e=!0,n=r("filename\\*","i").exec(t);if(n){n=n[1];let h=l(n);return h=unescape(h),h=c(h),h=d(h),a(h)}if(n=s(t),n){const h=d(n);return a(h)}if(n=r("filename","i").exec(t),n){n=n[1];let h=l(n);return h=d(h),a(h)}function r(h,p){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function i(h,p){if(h){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const b=new TextDecoder(h,{fatal:!0}),y=_h(p);p=b.decode(y),e=!1}catch{}}return p}function a(h){return e&&/[\x80-\xff]/.test(h)&&(h=i("utf-8",h),e&&(h=i("iso-8859-1",h))),h}function s(h){const p=[];let b;const y=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=y.exec(h))!==null;){let[,w,E,T]=b;if(w=parseInt(w,10),w in p){if(w===0)break;continue}p[w]=[E,T]}const x=[];for(let w=0;w<p.length&&w in p;++w){let[E,T]=p[w];T=l(T),E&&(T=unescape(T),w===0&&(T=c(T))),x.push(T)}return x.join("")}function l(h){if(h.startsWith('"')){const p=h.slice(1).split('\\"');for(let b=0;b<p.length;++b){const y=p[b].indexOf('"');y!==-1&&(p[b]=p[b].slice(0,y),p.length=b+1),p[b]=p[b].replaceAll(/\\(.)/g,"$1")}h=p.join('"')}return h}function c(h){const p=h.indexOf("'");if(p===-1)return h;const b=h.slice(0,p),x=h.slice(p+1).replace(/^[^']*'/,"");return i(b,x)}function d(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,b,y,x){if(y==="q"||y==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),i(b,x);try{x=atob(x)}catch{}return i(b,x)})}return""}function qD(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const r in e){const i=e[r];i!==void 0&&n.append(r,i)}return n}function Eg(t){return URL.parse(t)?.origin??null}function YD({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);return!Number.isInteger(a)||(i.suggestedLength=a,a<=2*n)||r||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function VD(t){const e=t.get("Content-Disposition");if(e){let n=v$(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(qw(n))return n}return null}function jh(t,e){return new hp(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function GD(t){return t===200||t===206}function WD(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function XD(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(dt(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class w${_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=qD(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E$(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new A$(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class E${constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const n=e.source;this._withCredentials=n.withCredentials||!1,this._contentLength=n.length,this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange;const r=new Headers(e.headers),i=n.url;fetch(i,WD(r,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=Eg(a.url),!GD(a.status))throw jh(a.status,i);this._reader=a.body.getReader(),this._headersCapability.resolve();const s=a.headers,{allowRangeRequests:l,suggestedLength:c}=YD({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=VD(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new so("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:XD(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class A${constructor(e,n,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${n}-${r-1}`);const s=i.url;fetch(s,WD(a,this._withCredentials,this._abortController)).then(l=>{const c=Eg(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!GD(l.status))throw jh(l.status,s);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:XD(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Jy=200,ex=206;function S$(t){const e=t.response;return typeof e!="string"?e:_h(e).buffer}class T${_responseOrigin=null;constructor({url:e,httpHeaders:n,withCredentials:r}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=qD(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const n=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:n};n.open("GET",this.url),n.withCredentials=this.withCredentials;for(const[a,s]of this.headers)n.setRequestHeader(a,s);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=ex):i.expectedStatus=Jy,n.responseType="arraybuffer",Ct(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>{e.onError(n.status)},n.onreadystatechange=this.onStateChange.bind(this,r),n.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,n.send(null),r}onProgress(e,n){const r=this.pendingRequests[e];r&&r.onProgress?.(n)}onStateChange(e,n){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const a=i.status||Jy;if(!(a===Jy&&r.expectedStatus===ex)&&a!==r.expectedStatus){r.onError(i.status);return}const l=S$(i);if(a===ex){const c=i.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);d?r.onDone({begin:parseInt(d[1],10),chunk:l}):(dt('Missing or invalid "Content-Range" header.'),r.onError(0))}else l?r.onDone({begin:0,chunk:l}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const n=this.pendingRequests[e].xhr;delete this.pendingRequests[e],n.abort()}}class _${constructor(e){this._source=e,this._manager=new T$(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const n=this._rangeRequestReaders.indexOf(e);n>=0&&this._rangeRequestReaders.splice(n,1)}getFullReader(){return Ct(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new N$(this._manager,this._source),this._fullRequestReader}getRangeReader(e,n){const r=new C$(this._manager,e,n);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class N${constructor(e,n){this._manager=e,this._url=n.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=n.disableRange||!1,this._contentLength=n.length,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,n=this._manager.getRequestXhr(e);this._manager._responseOrigin=Eg(n.responseURL);const r=n.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...d]=l.split(": ");return[c,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:s}=YD({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=VD(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=jh(e,this._url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class C${constructor(e,n,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:n,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=Eg(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const n=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:n,done:!1}):this._queuedChunk=n,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=jh(e,this._url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const O$=/^[a-z][a-z0-9\-+.]+:/i;function k$(t){if(O$.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}class j${constructor(e){this.source=e,this.url=k$(e.url),Ct(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Ct(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new P$(this),this._fullRequestReader}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const r=new D$(this,e,n);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class P${constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=e.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=jh(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new so("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class D${constructor(e,n,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:n,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const hd=Symbol("INITIAL_DATA");class KD{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:hd}}get(e,n=null){if(n){const i=this.#t(e);return i.promise.then(()=>n(i.data)),null}const r=this.#e[e];if(!r||r.data===hd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const n=this.#e[e];return!!n&&n.data!==hd}delete(e){const n=this.#e[e];return!n||n.data===hd?!1:(delete this.#e[e],!0)}resolve(e,n=null){const r=this.#t(e);r.data=n,r.resolve()}clear(){for(const e in this.#e){const{data:n}=this.#e[e];n?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:n}=this.#e[e];n!==hd&&(yield[e,n])}}}const R$=1e5,_C=30;class Er{#e=Promise.withResolvers();#t=null;#r=!1;#n=!!globalThis.FontInspector?.enabled;#s=null;#a=null;#i=0;#o=0;#u=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#p=null;#c=[];#m=new WeakMap;#b=null;static#x=new Map;static#y=new Map;static#T=new WeakMap;static#A=null;static#w=new Set;constructor({textContentSource:e,container:n,viewport:r}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(c){c.enqueue(e),c.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=n,this.#d=r.scale*Aa.pixelRatio,this.#h=r.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:a,pageX:s,pageY:l}=r.rawDims;this.#b=[1,0,0,-1,-s,l+a],this.#o=i,this.#i=a,Er.#O(),al(n,r),this.#e.promise.finally(()=>{Er.#w.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=ur.platform;return bt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:n,done:r})=>{if(r){this.#e.resolve();return}this.#s??=n.lang,Object.assign(this.#f,n.styles),this.#N(n.items),e()},this.#e.reject)};return this.#u=this.#p.getReader(),Er.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:n=null}){const r=e.scale*Aa.pixelRatio,i=e.rotation;if(i!==this.#h&&(n?.(),this.#h=i,al(this.#l,{rotation:i})),r!==this.#d){n?.(),this.#d=r;const a={div:null,properties:null,ctx:Er.#k(this.#s)};for(const s of this.#c)a.properties=this.#m.get(s),a.div=s,this.#S(a)}}cancel(){const e=new so("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#c}get textContentItemsStr(){return this.#g}#N(e){if(this.#r)return;this.#a.ctx??=Er.#k(this.#s);const n=this.#c,r=this.#g;for(const i of e){if(n.length>R$){dt("Ignoring additional textDivs for performance reasons."),this.#r=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const a=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),a.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#v(i)}}#v(e){const n=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#c.push(n);const i=Ve.transform(this.#b,e.transform);let a=Math.atan2(i[1],i[0]);const s=this.#f[e.fontName];s.vertical&&(a+=Math.PI/2);let l=this.#n&&s.fontSubstitution||s.fontFamily;l=Er.fontFamilyMap.get(l)||l;const c=Math.hypot(i[2],i[3]),d=c*Er.#M(l,s,this.#s);let h,p;a===0?(h=i[4],p=i[5]-d):(h=i[4]+d*Math.sin(a),p=i[5]-d*Math.cos(a));const b="calc(var(--total-scale-factor) *",y=n.style;this.#t===this.#l?(y.left=`${(100*h/this.#o).toFixed(2)}%`,y.top=`${(100*p/this.#i).toFixed(2)}%`):(y.left=`${b}${h.toFixed(2)}px)`,y.top=`${b}${p.toFixed(2)}px)`),y.fontSize=`${b}${(Er.#A*c).toFixed(2)}px)`,y.fontFamily=l,r.fontSize=c,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,this.#n&&(n.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),a!==0&&(r.angle=a*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),E=Math.abs(e.transform[3]);w!==E&&Math.max(w,E)/Math.min(w,E)>1.5&&(x=!0)}if(x&&(r.canvasWidth=s.vertical?e.height:e.width),this.#m.set(n,r),this.#a.div=n,this.#a.properties=r,this.#S(this.#a),r.hasText&&this.#t.append(n),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#t.append(w)}}#S(e){const{div:n,properties:r,ctx:i}=e,{style:a}=n;let s="";if(Er.#A>1&&(s=`scale(${1/Er.#A})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=a,{canvasWidth:c,fontSize:d}=r;Er.#C(i,d*this.#d,l);const{width:h}=i.measureText(n.textContent);h>0&&(s=`scaleX(${c*this.#d/h}) ${s}`)}r.angle!==0&&(s=`rotate(${r.angle}deg) ${s}`),s.length>0&&(a.transform=s)}static cleanup(){if(!(this.#w.size>0)){this.#x.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#k(e=null){let n=this.#y.get(e||="");if(!n){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),n=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,n),this.#T.set(n,{size:0,family:""})}return n}static#C(e,n,r){const i=this.#T.get(e);n===i.size&&r===i.family||(e.font=`${n}px ${r}`,i.size=n,i.family=r)}static#O(){if(this.#A!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#A=e.getBoundingClientRect().height,e.remove()}static#M(e,n,r){const i=this.#x.get(e);if(i)return i;const a=this.#k(r);a.canvas.width=a.canvas.height=_C,this.#C(a,_C,e);const s=a.measureText(""),l=s.fontBoundingBoxAscent,c=Math.abs(s.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return l?d=l/(l+c):(ur.platform.isFirefox&&dt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?d=n.ascent:n.descent&&(d=1+n.descent)),this.#x.set(e,d),d}}const I$=100;function QD(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new Qw,{docId:n}=e,r=t.url?zz(t.url):null,i=t.data?$z(t.data):null,a=t.httpHeaders||null,s=t.withCredentials===!0,l=t.password??null,c=t.range instanceof ZD?t.range:null,d=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let h=t.worker instanceof nh?t.worker:null;const p=t.verbosity,b=typeof t.docBaseUrl=="string"&&!vg(t.docBaseUrl)?t.docBaseUrl:null,y=bm(t.cMapUrl),x=t.cMapPacked!==!1,w=t.CMapReaderFactory||(Ar?Qz:hC),E=bm(t.iccUrl),T=bm(t.standardFontDataUrl),C=t.StandardFontDataFactory||(Ar?Zz:fC),N=bm(t.wasmUrl),P=t.WasmFactory||(Ar?Jz:mC),k=t.stopAtErrors!==!0,j=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,D=t.isEvalSupported!==!1,H=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!Ar,Y=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!Ar&&(ur.platform.isFirefox||!globalThis.chrome),X=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,z=typeof t.disableFontFace=="boolean"?t.disableFontFace:Ar,K=t.fontExtraProperties===!0,ce=t.enableXfa===!0,te=t.ownerDocument||globalThis.document,W=t.disableRange===!0,R=t.disableStream===!0,B=t.disableAutoFetch===!0,re=t.pdfBug===!0,le=t.CanvasFactory||(Ar?Kz:Gz),M=t.FilterFactory||(Ar?Xz:Wz),U=t.enableHWA===!0,Q=t.useWasm!==!1,I=c?c.length:t.length??NaN,oe=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!Ar&&!z,$=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(w===hC&&C===fC&&P===mC&&y&&T&&N&&Od(y,document.baseURI)&&Od(T,document.baseURI)&&Od(N,document.baseURI)),ie=null;gz(p);const me={canvasFactory:new le({ownerDocument:te,enableHWA:U}),filterFactory:new M({docId:n,ownerDocument:te}),cMapReaderFactory:$?null:new w({baseUrl:y,isCompressed:x}),standardFontDataFactory:$?null:new C({baseUrl:T}),wasmFactory:$?null:new P({baseUrl:N})};h||(h=nh.create({verbosity:p,port:_u.workerPort}),e._worker=h);const be={docId:n,apiVersion:"5.4.394",data:i,password:l,disableAutoFetch:B,rangeChunkSize:d,length:I,docBaseUrl:b,enableXfa:ce,evaluatorOptions:{maxImageSize:j,disableFontFace:z,ignoreErrors:k,isEvalSupported:D,isOffscreenCanvasSupported:H,isImageDecoderSupported:Y,canvasMaxAreaInBytes:X,fontExtraProperties:K,useSystemFonts:oe,useWasm:Q,useWorkerFetch:$,cMapUrl:y,iccUrl:E,standardFontDataUrl:T,wasmUrl:N}},J={ownerDocument:te,pdfBug:re,styleElement:ie,loadingParams:{disableAutoFetch:B,enableXfa:ce}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Oe=h.messageHandler.sendWithPromise("GetDocRequest",be,i?[i.buffer]:null);let Be;if(c)Be=new b$(c,{disableRange:W,disableStream:R});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const se=Od(r)?w$:Ar?j$:_$;Be=new se({url:r,length:I,httpHeaders:a,withCredentials:s,rangeChunkSize:d,disableRange:W,disableStream:R})}return Oe.then(se=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ze=new kd(n,se,h.port),Fe=new B$(ze,e,Be,J,me,U);e._transport=Fe,ze.send("Ready",null)})}).catch(e._capability.reject),e}class Qw{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Qw.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class ZD{#e=Promise.withResolvers();#t=[];#r=[];#n=[];#s=[];constructor(e,n,r=!1,i=null){this.length=e,this.initialData=n,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){this.#s.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#r.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,n){for(const r of this.#s)r(e,n)}onDataProgress(e,n){this.#e.promise.then(()=>{for(const r of this.#n)r(e,n)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const n of this.#r)n(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,n){Xt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class L${constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class M${#e=!1;constructor(e,n,r,i=!1){this._pageIndex=e,this._pageInfo=n,this._transport=r,this._stats=i?new aC:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new KD,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:a=!1}={}){return new Ch({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:r,offsetY:i,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:n=e.canvas,viewport:r,intent:i="display",annotationMode:a=to.ENABLE,transform:s=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:d=null,pageColors:h=null,printAnnotationStorage:p=null,isEditing:b=!1,recordOperations:y=!1,operationsFilter:x=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(i,a,p,b),{renderingIntent:E,cacheKey:T}=w;this.#e=!1,c||=this._transport.getOptionalContentConfig(E);let C=this._intentStates.get(T);C||(C=Object.create(null),this._intentStates.set(T,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const N=!!(E&hi.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const P=!!(this._pdfBug&&globalThis.StepperManager?.enabled),k=!this.recordedBBoxes&&(y||P),j=Y=>{if(C.renderTasks.delete(D),k){const X=D.gfx?.dependencyTracker.take();X&&(D.stepper&&D.stepper.setOperatorBBoxes(X,D.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=X))}N&&(this.#e=!0),this.#t(),Y?(D.capability.reject(Y),this._abortOperatorList({intentState:C,reason:Y instanceof Error?Y:new Error(Y)})):D.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},D=new yu({callback:j,params:{canvas:n,canvasContext:e,dependencyTracker:k?new t$(n,C.operatorList.length,P):null,viewport:r,transform:s,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!N,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:x});(C.renderTasks||=new Set).add(D);const H=D.task;return Promise.all([C.displayReadyCapability.promise,c]).then(([Y,X])=>{if(this.destroyed){j();return}if(this._stats?.time("Rendering"),!(X.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");D.initializeGraphics({transparency:Y,optionalContentConfig:X}),D.operatorListChanged()}).catch(j),H}getOperatorList({intent:e="display",annotationMode:n=to.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function a(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const s=this._transport.getRenderingIntent(e,n,r,i,!0);let l=this._intentStates.get(s.cacheKey);l||(l=Object.create(null),this._intentStates.set(s.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=a,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||=new Set).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(s)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>th.textContent(r));const n=this.streamTextContent(e);return new Promise(function(r,i){function a(){s.read().then(function({value:c,done:d}){if(d){r(l);return}l.lang??=c.lang,Object.assign(l.styles,c.styles),l.items.push(...c.items),a()},i)}const s=n.getReader(),l={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const r of n.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const n=this.#t();return e&&n&&(this._stats&&=new aC),n}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,n){const r=this._intentStates.get(n);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,n){for(let r=0,i=e.length;r<i;r++)n.operatorList.fnArray.push(e.fnArray[r]),n.operatorList.argsArray.push(e.argsArray[r]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const r of n.renderTasks)r.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}){const{map:a,transfer:s}=r,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:a,modifiedIds:i},s).getReader(),d=this._intentStates.get(n);d.streamReader=c;const h=()=>{c.read().then(({value:p,done:b})=>{if(b){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,d),h())},p=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const b of d.renderTasks)b.operatorListChanged();this.#t()}if(d.displayReadyCapability)d.displayReadyCapability.reject(p);else if(d.opListReadCapability)d.opListReadCapability.reject(p);else throw p}})};h()}_abortOperatorList({intentState:e,reason:n,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(n instanceof $w){let i=I$;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},i);return}}if(e.streamReader.cancel(new so(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,a]of this._intentStates)if(a===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var ro,Ki,Za,Vo,lg,Go,Wo,Cr,Km,JD,eR,jd,Pu,Qm;const un=class un{constructor({name:e=null,port:n=null,verbosity:r=bz()}={}){ua(this,Cr);ua(this,ro,Promise.withResolvers());ua(this,Ki,null);ua(this,Za,null);ua(this,Vo,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,n){if(on(un,Wo).has(n))throw new Error("Cannot use more than one PDFWorker per port.");on(un,Wo).set(n,this),ca(this,Cr,JD).call(this,n)}else ca(this,Cr,eR).call(this)}get promise(){return on(this,ro).promise}get port(){return on(this,Za)}get messageHandler(){return on(this,Ki)}destroy(){this.destroyed=!0,on(this,Vo)?.terminate(),Fr(this,Vo,null),on(un,Wo).delete(on(this,Za)),Fr(this,Za,null),on(this,Ki)?.destroy(),Fr(this,Ki,null)}static create(e){const n=on(this,Wo).get(e?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new un(e)}static get workerSrc(){if(_u.workerSrc)return _u.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return bt(this,"_setupFakeWorkerGlobal",(async()=>on(this,Pu,Qm)?on(this,Pu,Qm):(await import(this.workerSrc)).WorkerMessageHandler)())}};ro=new WeakMap,Ki=new WeakMap,Za=new WeakMap,Vo=new WeakMap,lg=new WeakMap,Go=new WeakMap,Wo=new WeakMap,Cr=new WeakSet,Km=function(){on(this,ro).resolve(),on(this,Ki).send("configure",{verbosity:this.verbosity})},JD=function(e){Fr(this,Za,e),Fr(this,Ki,new kd("main","worker",e)),on(this,Ki).on("ready",()=>{}),ca(this,Cr,Km).call(this)},eR=function(){if(on(un,Go)||on(un,Pu,Qm)){ca(this,Cr,jd).call(this);return}let{workerSrc:e}=un;try{un._isSameOrigin(window.location,e)||(e=un._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),r=new kd("main","worker",n),i=()=>{a.abort(),r.destroy(),n.terminate(),this.destroyed?on(this,ro).reject(new Error("Worker was destroyed")):ca(this,Cr,jd).call(this)},a=new AbortController;n.addEventListener("error",()=>{on(this,Vo)||i()},{signal:a.signal}),r.on("test",l=>{if(a.abort(),this.destroyed||!l){i();return}Fr(this,Ki,r),Fr(this,Za,n),Fr(this,Vo,n),ca(this,Cr,Km).call(this)}),r.on("ready",l=>{if(a.abort(),this.destroyed){i();return}try{s()}catch{ca(this,Cr,jd).call(this)}});const s=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};s();return}catch{xg("The worker has been disabled.")}ca(this,Cr,jd).call(this)},jd=function(){on(un,Go)||(dt("Setting up fake worker."),Fr(un,Go,!0)),un._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){on(this,ro).reject(new Error("Worker was destroyed"));return}const n=new Vz;Fr(this,Za,n);const r=`fake${Z_(un,lg)._++}`,i=new kd(r+"_worker",r,n);e.setup(i,n),Fr(this,Ki,new kd(r,r+"_worker",n)),ca(this,Cr,Km).call(this)}).catch(e=>{on(this,ro).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Pu=new WeakSet,Qm=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},ua(un,Pu),ua(un,lg,0),ua(un,Go,!1),ua(un,Wo,new WeakMap),Ar&&(Fr(un,Go,!0),_u.workerSrc||="./pdf.worker.mjs"),un._isSameOrigin=(e,n)=>{const r=URL.parse(e);if(!r?.origin||r.origin==="null")return!1;const i=new URL(n,r);return r.origin===i.origin},un._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},un.fromPort=e=>{if(Oz("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return un.create(e)};let nh=un;class B${#e=new Map;#t=new Map;#r=new Map;#n=new Map;#s=null;constructor(e,n,r,i,a,s){this.messageHandler=e,this.loadingTask=n,this.commonObjs=new KD,this.fontLoader=new Uz({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}#a(e,n=null){const r=this.#e.get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,n);return this.#e.set(e,i),i}get annotationStorage(){return bt(this,"annotationStorage",new Gw)}getRenderingIntent(e,n=to.ENABLE,r=null,i=!1,a=!1){let s=hi.DISPLAY,l=dv;switch(e){case"any":s=hi.ANY;break;case"display":break;case"print":s=hi.PRINT;break;default:dt(`getRenderingIntent - invalid intent: ${e}`)}const c=s&hi.PRINT&&r instanceof BD?r:this.annotationStorage;switch(n){case to.DISABLE:s+=hi.ANNOTATIONS_DISABLE;break;case to.ENABLE:break;case to.ENABLE_FORMS:s+=hi.ANNOTATIONS_FORMS;break;case to.ENABLE_STORAGE:s+=hi.ANNOTATIONS_STORAGE,l=c.serializable;break;default:dt(`getRenderingIntent - invalid annotationMode: ${n}`)}i&&(s+=hi.IS_EDITING),a&&(s+=hi.OPLIST);const{ids:d,hash:h}=c.modifiedIds,p=[s,l.hash,h];return{renderingIntent:s,cacheKey:p.join("_"),annotationStorageSerializable:l,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#r.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Er.cleanup(),this._networkStream?.cancelAllRequests(new so("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(r,i)=>{Ct(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},i.onPull=()=>{this._fullReader.read().then(function({value:a,done:s}){if(s){i.close();return}Ct(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{i.error(a)})},i.onCancel=a=>{this._fullReader.cancel(a),i.ready.catch(s=>{if(!this.destroyed)throw s})}}),e.on("ReaderHeadersReady",async r=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:a,contentLength:s}=this._fullReader;return(!i||!a)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),this._fullReader.onProgress=l=>{n.onProgress?.({loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:a,contentLength:s}}),e.on("GetRangeReader",(r,i)=>{Ct(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(r.begin,r.end);if(!a){i.close();return}i.onPull=()=>{a.read().then(function({value:s,done:l}){if(l){i.close();return}Ct(s instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{a.cancel(s),i.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,n._capability.resolve(new L$(r,this))}),e.on("DocException",r=>{n._capability.reject($r(r))}),e.on("PasswordRequest",r=>{this.#s=Promise.withResolvers();try{if(!n.onPassword)throw $r(r);const i=a=>{a instanceof Error?this.#s.reject(a):this.#s.resolve({password:a})};n.onPassword(i,r.code)}catch(i){this.#s.reject(i)}return this.#s.promise}),e.on("DataLoaded",r=>{n.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,a])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in a){const p=a.error;dt(`Error during font loading: ${p}`),this.commonObjs.resolve(r,p);break}const s=new Vt(a),l=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,b)=>globalThis.FontInspector.fontAdded(p,b):null,c=new Hz(s,l,a.extra,a.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:d}=a;Ct(d,"The imageRef must be defined.");for(const p of this.#t.values())for(const[,b]of p.objs)if(b?.ref===d)return b.dataLen?(this.commonObjs.resolve(r,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(r,a);break;case"Pattern":const h=new Yn(a);this.commonObjs.resolve(r,h.getIR());break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,a,s])=>{if(this.destroyed)return;const l=this.#t.get(i);if(!l.objs.has(r)){if(l._intentStates.size===0){s?.bitmap?.close();return}switch(a){case"Image":case"Pattern":l.objs.resolve(r,s);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",r=>{this.destroyed||n.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&dt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=e-1,r=this.#r.get(n);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#n.set(a.refStr,e);const s=new M$(n,a,this,this._params.pdfBug);return this.#t.set(n,s),s});return this.#r.set(n,i),i}getPageIndex(e){return hv(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:n})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#a("GetOptionalContentConfig").then(n=>new g$(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=this.#e.get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new m$(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Er.cleanup()}}cachedPageNumber(e){if(!hv(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#n.get(n)??null}}class F${#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this.#e;return e.form||e.canvas&&n?.size>0}}class yu{#e=null;static#t=new WeakSet;constructor({callback:e,params:n,objs:r,commonObjs:i,annotationCanvasMap:a,operatorList:s,pageIndex:l,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:h=!1,pdfBug:p=!1,pageColors:b=null,enableHWA:y=!1,operationsFilter:x=null}){this.callback=e,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=s,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=p,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new F$(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=y,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=x}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(yu.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");yu.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:a,dependencyTracker:s}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Tu(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,s),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),yu.#t.delete(this._canvas),e||=new $w(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),yu.#t.delete(this._canvas),this.callback())))}}const tR="5.4.394",U$="2cc809ade";class Ii{#e=null;#t=null;#r;#n=null;#s=!1;#a=!1;#i=null;#o;#u=null;#l=null;static#h=null;static get _keyboardManager(){return bt(this,"_keyboardManager",new kh([[["Escape","mac+Escape"],Ii.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ii.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ii.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ii.prototype._moveToPrevious],[["Home","mac+Home"],Ii.prototype._moveToBeginning],[["End","mac+End"],Ii.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:n=null}){e?(this.#a=!1,this.#i=e):this.#a=!0,this.#l=e?._uiManager||n,this.#o=this.#l._eventBus,this.#r=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Ii.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#i&&(e.ariaControls=`${this.#i.id}_colorpicker_dropdown`);const n=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:n}),e.addEventListener("keydown",this.#g.bind(this),{signal:n});const r=this.#t=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#r,e.append(r),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),n=this.#l._signal;e.addEventListener("contextmenu",Hi,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#i&&(e.id=`${this.#i.id}_colorpicker_dropdown`);for(const[r,i]of this.#l.highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",i),a.title=r,a.setAttribute("data-l10n-id",Ii.#h[r]);const s=document.createElement("span");a.append(s),s.className="swatch",s.style.backgroundColor=i,a.ariaSelected=i===this.#r,a.addEventListener("click",this.#f.bind(this,i),{signal:n}),e.append(a)}return e.addEventListener("keydown",this.#g.bind(this),{signal:n}),e}#f(e,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Nt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const n=e.target.getAttribute("data-color");n&&this.#f(n,e)}_moveToNext(e){if(!this.#m){this.#p(e);return}if(e.target===this.#e){this.#n.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstChild||e.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#m){this.#p(e);return}this.#n.firstChild?.focus()}_moveToEnd(e){if(!this.#m){this.#p(e);return}this.#n.lastChild?.focus()}#g(e){Ii._keyboardManager.exec(this,e)}#p(e){if(this.#m){this.hideDropdown();return}if(this.#s=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#c.bind(this),{signal:this.#l.combinedSignal(this.#u)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const n=this.#n=this.#d();this.#e.append(n)}#c(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#u?.abort(),this.#u=null}get#m(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#m){this.#i?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const n=this.#l.highlightColors.values();for(const r of this.#n.children)r.ariaSelected=n.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class rh{#e=null;#t=null;#r=null;static#n=null;constructor(e){this.#t=e,this.#r=e._uiManager,rh.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:n,color:r}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",rh.#n[e]),i.addEventListener("input",()=>{this.#r.updateParams(n,i.value)},{signal:this.#r._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function NC(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function fd(t){return Math.max(0,Math.min(255,255*t))}class CC{static CMYK_G([e,n,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*n+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=fd(e),[e,e,e]}static G_HTML([e]){const n=NC(e);return`#${n}${n}${n}`}static RGB_G([e,n,r]){return["G",.3*e+.59*n+.11*r]}static RGB_rgb(e){return e.map(fd)}static RGB_HTML(e){return`#${e.map(NC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb([e,n,r,i]){return[fd(1-Math.min(1,e+i)),fd(1-Math.min(1,r+i)),fd(1-Math.min(1,n+i))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,r]){const i=1-e,a=1-n,s=1-r,l=Math.min(i,a,s);return["CMYK",i,a,s,l]}}class H${create(e,n,r=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${n}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${n}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Xt("Abstract method `_createSVG` called.")}}class mp extends H${_createSVG(e){return document.createElementNS(Ka,e)}}const z$=9,sl=new WeakSet,$$=new Date().getTimezoneOffset()*60*1e3;class tx{static create(e){switch(e.data.annotationType){case Cn.LINK:return new Zw(e);case Cn.TEXT:return new Y$(e);case Cn.WIDGET:switch(e.data.fieldType){case"Tx":return new V$(e);case"Btn":return e.data.radioButton?new nR(e):e.data.checkBox?new W$(e):new X$(e);case"Ch":return new K$(e);case"Sig":return new G$(e)}return new pl(e);case Cn.POPUP:return new pv(e);case Cn.FREETEXT:return new rR(e);case Cn.LINE:return new Z$(e);case Cn.SQUARE:return new J$(e);case Cn.CIRCLE:return new eq(e);case Cn.POLYLINE:return new iR(e);case Cn.CARET:return new nq(e);case Cn.INK:return new Jw(e);case Cn.POLYGON:return new tq(e);case Cn.HIGHLIGHT:return new aR(e);case Cn.UNDERLINE:return new rq(e);case Cn.SQUIGGLY:return new iq(e);case Cn.STRIKEOUT:return new aq(e);case Cn.STAMP:return new sR(e);case Cn.FILEATTACHMENT:return new sq(e);default:return new fn(e)}}}class fn{#e=null;#t=!1;#r=null;constructor(e,{isRenderable:n=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,n&&(this.contentElement=this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return fn._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,n=this.annotationStorage?.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:r,rect:i}=this.data;let a=-1/0,s=-1/0;if(n?.length>=8){for(let l=0;l<n.length;l+=8)n[l+1]>s?(s=n[l+1],a=n[l+2]):n[l+1]===s&&(a=Math.max(a,n[l+2]));return[a,s]}if(r?.length>=1){for(const l of r)for(let c=0,d=l.length;c<d;c+=2)l[c+1]>s?(s=l[c+1],a=l[c]):l[c+1]===s&&(a=Math.max(a,l[c]));if(a!==1/0)return[a,s]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:a,pageY:s}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-a)/r,e[1]=100*(e[1]-s)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Jd}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:n}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:r})||this.annotationStorage.setValue(`${Jd}${n.id}`,{id:n.id,annotationType:n.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#r?.popup||this.popup)?.remove(),this.#r=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:n,popup:r}=e;n&&this.#n(n);let i=this.#r?.popup||this.popup;!i&&r?.text&&(this._createPopup(r),i=this.#r.popup),i&&(i.updateEdited(e),r?.deleted&&(i.remove(),this.#r=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#r?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:n},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:s,pageX:l,pageY:c}}}}=this;r?.splice(0,4,...e),n.left=`${100*(e[0]-l)/a}%`,n.top=`${100*(s-e[3]+c)/s}%`,i===0?(n.width=`${100*(e[2]-e[0])/a}%`,n.height=`${100*(e[3]-e[1])/s}%`):this.setRotation(i)}_createContainer(e){const{data:n,parent:{page:r,viewport:i}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",n.id),!(this instanceof pl)&&!(this instanceof Zw)&&(a.tabIndex=0);const{style:s}=a;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(a.title=n.alternativeText),n.noRotate&&a.classList.add("norotate"),!n.rect||this instanceof pv){const{rotation:w}=n;return!n.hasOwnCanvas&&w!==0&&this.setRotation(w,a),a}const{width:l,height:c}=this;if(!e&&n.borderStyle.width>0){s.borderWidth=`${n.borderStyle.width}px`;const w=n.borderStyle.horizontalCornerRadius,E=n.borderStyle.verticalCornerRadius;if(w>0||E>0){const C=`calc(${w}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;s.borderRadius=C}else if(this instanceof nR){const C=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;s.borderRadius=C}switch(n.borderStyle.style){case fu.SOLID:s.borderStyle="solid";break;case fu.DASHED:s.borderStyle="dashed";break;case fu.BEVELED:dt("Unimplemented border style: beveled");break;case fu.INSET:dt("Unimplemented border style: inset");break;case fu.UNDERLINE:s.borderBottomStyle="solid";break}const T=n.borderColor||null;T?(this.#t=!0,s.borderColor=Ve.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):s.borderWidth=0}const d=Ve.normalizeRect([n.rect[0],r.view[3]-n.rect[1]+r.view[1],n.rect[2],r.view[3]-n.rect[3]+r.view[1]]),{pageWidth:h,pageHeight:p,pageX:b,pageY:y}=i.rawDims;s.left=`${100*(d[0]-b)/h}%`,s.top=`${100*(d[1]-y)/p}%`;const{rotation:x}=n;return n.hasOwnCanvas||x===0?(s.width=`${100*l/h}%`,s.height=`${100*c/p}%`):this.setRotation(x,a),a}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:a,height:s}=this;e%180!==0&&([a,s]=[s,a]),n.style.width=`${100*a/r}%`,n.style.height=`${100*s/i}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,r,i)=>{const a=i.detail[n],s=a[0],l=a.slice(1);i.target.style[r]=CC[`${s}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[r]:CC[`${s}_rgb`](l)})};return bt(this,"_commonActions",{display:n=>{const{display:r}=n.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:r}=n.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const r=n.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,n){const r=this._commonActions;for(const i of Object.keys(n.detail))(e[i]||r[i])?.(n)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const r=this._commonActions;for(const[i,a]of Object.entries(n)){const s=r[i];if(s){const l={detail:{[i]:a},target:e};s(l),delete n[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,r,i,a]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,E,T,C]=e.subarray(2,6);if(i===w&&a===E&&n===T&&r===C)return}const{style:s}=this.container;let l;if(this.#t){const{borderColor:w,borderWidth:E}=s;s.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=i-n,d=a-r,{svgFactory:h}=this,p=h.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const b=h.createElement("defs");p.append(b);const y=h.createElement("clipPath"),x=`clippath_${this.data.id}`;y.setAttribute("id",x),y.setAttribute("clipPathUnits","objectBoundingBox"),b.append(y);for(let w=2,E=e.length;w<E;w+=8){const T=e[w],C=e[w+1],N=e[w+2],P=e[w+3],k=h.createElement("rect"),j=(N-n)/c,D=(a-C)/d,H=(T-N)/c,Y=(C-P)/d;k.setAttribute("x",j),k.setAttribute("y",D),k.setAttribute("width",H),k.setAttribute("height",Y),y.append(k),l?.push(`<rect vector-effect="non-scaling-stroke" x="${j}" y="${D}" width="${H}" height="${Y}"/>`)}this.#t&&(l.push("</g></svg>')"),s.backgroundImage=l.join("")),this.container.append(p),this.container.style.clipPath=`url(#${x})`}_createPopup(e=null){const{data:n}=this;let r,i;e?(r={str:e.text},i=e.date):(r=n.contentsObj,i=n.modificationDate),this.#r=new pv({data:{color:n.color,titleObj:n.titleObj,modificationDate:i,contentsObj:r,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#r||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#r}render(){Xt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:a,id:s,exportValues:l}of i){if(a===-1||s===n)continue;const c=typeof l=="string"?l:null,d=document.querySelector(`[data-element-id="${s}"]`);if(d&&!sl.has(d)){dt(`_getElementsByName - element not allowed: ${s}`);continue}r.push({id:s,exportValue:c,domElement:d})}return r}for(const i of document.getElementsByName(e)){const{exportValue:a}=i,s=i.getAttribute("data-element-id");s!==n&&sl.has(i)&&r.push({id:s,exportValue:a,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class q$ extends fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Zw extends fn{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",e.id);let i=!1;return e.url?(n.addLinkAttributes(r,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(r,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(r,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#r(r,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(r,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,e),i=!0),e.resetForm?(this._bindResetFormAction(r,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=r,this.container.append(r)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,n,r=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#e(),r&&(e.title=r)}_bindNamedAction(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),r&&(e.title=r),this.#e()}#t(e,n,r="",i=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:r&&(e.title=r),e.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,i),!1),this.#e()}#r(e,n,r=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),r&&(e.title=r),this.#e()}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const a=r.get(i);a&&(e[a]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1))}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,n){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){dt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(e.onclick=()=>!1);return}e.onclick=()=>{r?.();const{fields:i,refs:a,include:s}=n,l=[];if(i.length!==0||a.length!==0){const h=new Set(a);for(const p of i){const b=this._fieldObjects[p]||[];for(const{id:y}of b)h.add(y)}for(const p of Object.values(this._fieldObjects))for(const b of p)h.has(b.id)===s&&l.push(b)}else for(const h of Object.values(this._fieldObjects))l.push(...h);const c=this.annotationStorage,d=[];for(const h of l){const{id:p}=h;switch(d.push(p),h.type){case"text":{const y=h.defaultValue||"";c.setValue(p,{value:y});break}case"checkbox":case"radiobutton":{const y=h.defaultValue===h.exportValues;c.setValue(p,{value:y});break}case"combobox":case"listbox":{const y=h.defaultValue||"";c.setValue(p,{value:y});break}default:continue}const b=document.querySelector(`[data-element-id="${p}"]`);if(b){if(!sl.has(b)){dt(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class Y$ extends fn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class pl extends fn{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return ur.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,r,i,a){r.includes("mouse")?e.addEventListener(r,s=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s),shift:s.shiftKey,modifier:this._getKeyModifier(s)}})}):e.addEventListener(r,s=>{if(r==="blur"){if(!n.focused||!s.relatedTarget)return;n.focused=!1}else if(r==="focus"){if(n.focused)return;n.focused=!0}a&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:a(s)}})})}_setEventListeners(e,n,r,i){for(const[a,s]of r)(s==="Action"||this.data.actions?.[s])&&((s==="Focus"||s==="Blur")&&(n||={focused:!1}),this._setEventListener(e,n,a,s,i),s==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,n,"blur","Blur",null):s==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":Ve.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||z$,a=e.style;let s;const l=2,c=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(d/(Gy*i))||1,p=d/h;s=Math.min(i,c(p/Gy))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-l);s=Math.min(i,c(d/Gy))}a.fontSize=`calc(${s}px * var(--total-scale-factor))`,a.color=Ve.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(a.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class V$ extends pl{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,r,i){const a=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[n]=r),a.setValue(s.id,{[i]:r})}render(){const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const i=e.getValue(n,{value:this.data.fieldValue});let a=i.value||"";const s=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;s&&a.length>s&&(a=a.slice(0,s));let l=i.formattedValue||this.data.textContent?.join(`
`)||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=l??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",l??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),sl.add(r),this.contentElement=r,r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:d,datetimeType:h,timeStep:p}=this.data,b=!!h&&this.enableScripting;d&&(r.title=d),this._setRequired(r,this.data.required),s&&(r.maxLength=s),r.addEventListener("input",x=>{e.setValue(n,{value:x.target.value}),this.setPropertyOnSiblings(r,"value",x.target.value,"value"),c.formattedValue=null}),r.addEventListener("resetform",x=>{const w=this.data.defaultFieldValue??"";r.value=c.userValue=w,c.formattedValue=null});let y=x=>{const{formattedValue:w}=c;w!=null&&(x.target.value=w),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",w=>{if(c.focused)return;const{target:E}=w;if(b&&(E.type=h,p&&(E.step=p)),c.userValue){const T=c.userValue;if(b)if(h==="time"){const C=new Date(T),N=[C.getHours(),C.getMinutes(),C.getSeconds()];E.value=N.map(P=>P.toString().padStart(2,"0")).join(":")}else E.value=new Date(T-$$).toISOString().split(h==="date"?"T":".",1)[0];else E.value=T}c.lastCommittedValue=E.value,c.commitKey=1,this.data.actions?.Focus||(c.focused=!0)}),r.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const E={value(T){c.userValue=T.detail.value??"",b||e.setValue(n,{value:c.userValue.toString()}),T.target.value=c.userValue},formattedValue(T){const{formattedValue:C}=T.detail;c.formattedValue=C,C!=null&&T.target!==document.activeElement&&(T.target.value=C);const N={formattedValue:C};b&&(N.value=C),e.setValue(n,N)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{const{charLimit:C}=T.detail,{target:N}=T;if(C===0){N.removeAttribute("maxLength");return}N.setAttribute("maxLength",C);let P=c.userValue;!P||P.length<=C||(P=P.slice(0,C),N.value=c.userValue=P,e.setValue(n,{value:P}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:N.selectionStart,selEnd:N.selectionEnd}}))}};this._dispatchEventFromSandbox(E,w)}),r.addEventListener("keydown",w=>{c.commitKey=1;let E=-1;if(w.key==="Escape"?E=0:w.key==="Enter"&&!this.data.multiLine?E=2:w.key==="Tab"&&(c.commitKey=3),E===-1)return;const{value:T}=w.target;c.lastCommittedValue!==T&&(c.lastCommittedValue=T,c.userValue=T,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,willCommit:!0,commitKey:E,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const x=y;y=null,r.addEventListener("blur",w=>{if(!c.focused||!w.relatedTarget)return;this.data.actions?.Blur||(c.focused=!1);const{target:E}=w;let{value:T}=E;if(b){if(T&&h==="time"){const C=T.split(":").map(N=>parseInt(N,10));T=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),E.step=""}else T.includes("T")||(T=`${T}T00:00`),T=new Date(T).valueOf();E.type="text"}c.userValue=T,c.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,willCommit:!0,commitKey:c.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),x(w)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",w=>{c.lastCommittedValue=null;const{data:E,target:T}=w,{value:C,selectionStart:N,selectionEnd:P}=T;let k=N,j=P;switch(w.inputType){case"deleteWordBackward":{const D=C.substring(0,N).match(/\w*[^\w]*$/);D&&(k-=D[0].length);break}case"deleteWordForward":{const D=C.substring(N).match(/^[^\w]*\w*/);D&&(j+=D[0].length);break}case"deleteContentBackward":N===P&&(k-=1);break;case"deleteContentForward":N===P&&(j+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:C,change:E||"",willCommit:!1,selStart:k,selEnd:j}})}),this._setEventListeners(r,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&r.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/s;r.classList.add("comb"),r.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class G$ extends pl{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class W$ extends pl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.exportValue===n.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return sl.add(a),a.setAttribute("data-element-id",r),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=n.fieldName,i&&a.setAttribute("checked",!0),a.setAttribute("exportValue",n.exportValue),a.tabIndex=0,a.addEventListener("change",s=>{const{name:l,checked:c}=s.target;for(const d of this._getElementsByName(l,r)){const h=c&&d.exportValue===n.exportValue;d.domElement&&(d.domElement.checked=h),e.setValue(d.id,{value:h})}e.setValue(r,{value:c})}),a.addEventListener("resetform",s=>{const l=n.defaultFieldValue||"Off";s.target.checked=l===n.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",s=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(r,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,s)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],s=>s.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class nR extends pl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,r=n.id;let i=e.getValue(r,{value:n.fieldValue===n.buttonValue}).value;if(typeof i=="string"&&(i=i!==n.buttonValue,e.setValue(r,{value:i})),i)for(const s of this._getElementsByName(n.fieldName,r))e.setValue(s.id,{value:!1});const a=document.createElement("input");if(sl.add(a),a.setAttribute("data-element-id",r),a.disabled=n.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=n.fieldName,i&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",s=>{const{name:l,checked:c}=s.target;for(const d of this._getElementsByName(l,r))e.setValue(d.id,{value:!1});e.setValue(r,{value:c})}),a.addEventListener("resetform",s=>{const l=n.defaultFieldValue;s.target.checked=l!=null&&l===n.buttonValue}),this.enableScripting&&this.hasJSActions){const s=n.buttonValue;a.addEventListener("updatefromsandbox",l=>{const c={value:d=>{const h=s===d.detail.value;for(const p of this._getElementsByName(d.target.name)){const b=h&&p.id===r;p.domElement&&(p.domElement.checked=b),e.setValue(p.id,{value:b})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class X$ extends Zw{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class K$ extends pl{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,r=e.getValue(n,{value:this.data.fieldValue}),i=document.createElement("select");sl.add(i),i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",h=>{const p=this.data.defaultFieldValue;for(const b of i.options)b.selected=b.value===p});for(const h of this.data.options){const p=document.createElement("option");p.textContent=h.displayValue,p.value=h.exportValue,r.value.includes(h.exportValue)&&(p.setAttribute("selected",!0),a=!1),i.append(p)}let s=null;if(a){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),i.prepend(h),s=()=>{h.remove(),i.removeEventListener("input",s),s=null},i.addEventListener("input",s)}const l=h=>{const p=h?"value":"textContent",{options:b,multiple:y}=i;return y?Array.prototype.filter.call(b,x=>x.selected).map(x=>x[p]):b.selectedIndex===-1?null:b[b.selectedIndex][p]};let c=l(!1);const d=h=>{const p=h.target.options;return Array.prototype.map.call(p,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",h=>{const p={value(b){s?.();const y=b.detail.value,x=new Set(Array.isArray(y)?y:[y]);for(const w of i.options)w.selected=x.has(w.value);e.setValue(n,{value:l(!0)}),c=l(!1)},multipleSelection(b){i.multiple=!0},remove(b){const y=i.options,x=b.detail.remove;y[x].selected=!1,i.remove(x),y.length>0&&Array.prototype.findIndex.call(y,E=>E.selected)===-1&&(y[0].selected=!0),e.setValue(n,{value:l(!0),items:d(b)}),c=l(!1)},clear(b){for(;i.length!==0;)i.remove(0);e.setValue(n,{value:null,items:[]}),c=l(!1)},insert(b){const{index:y,displayValue:x,exportValue:w}=b.detail.insert,E=i.children[y],T=document.createElement("option");T.textContent=x,T.value=w,E?E.before(T):i.append(T),e.setValue(n,{value:l(!0),items:d(b)}),c=l(!1)},items(b){const{items:y}=b.detail;for(;i.length!==0;)i.remove(0);for(const x of y){const{displayValue:w,exportValue:E}=x,T=document.createElement("option");T.textContent=w,T.value=E,i.append(T)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(n,{value:l(!0),items:d(b)}),c=l(!1)},indices(b){const y=new Set(b.detail.indices);for(const x of b.target.options)x.selected=y.has(x.index);e.setValue(n,{value:l(!0)}),c=l(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(p,h)}),i.addEventListener("input",h=>{const p=l(!0),b=l(!1);e.setValue(n,{value:p}),h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:c,change:b,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):i.addEventListener("input",function(h){e.setValue(n,{value:l(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class pv extends fn{constructor(e){const{data:n,elements:r,parent:i}=e,a=!!i._commentManager;if(super(e,{isRenderable:!a&&fn._hasPopupData(n)}),this.elements=r,a&&fn._hasPopupData(n)){const s=this.popup=this.#e();for(const l of r)l.popup=s}else this.popup=null}#e(){return new Q$({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=this.#e(),r=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${gu}${i}`).join(",")),this.container}}class Q${#e=null;#t=this.#q.bind(this);#r=this.#F.bind(this);#n=this.#D.bind(this);#s=this.#E.bind(this);#a=null;#i=null;#o=null;#u=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#p=null;#c=null;#m=null;#b=null;#x=null;#y=null;#T=null;#A=null;#w=null;#N=!1;#v=null;#S=null;constructor({container:e,color:n,elements:r,titleObj:i,modificationDate:a,contentsObj:s,richText:l,parent:c,rect:d,parentRect:h,open:p,commentManager:b=null}){this.#i=e,this.#A=i,this.#o=s,this.#T=l,this.#h=c,this.#a=n,this.#y=d,this.#d=h,this.#l=r,this.#e=b,this.#v=r[0],this.#u=lv.toDateObject(a),this.trigger=r.flatMap(y=>y.getElementsToTriggerPopup()),b||(this.#k(),this.#i.hidden=!0,p&&this.#E())}#k(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const n of this.trigger)n.addEventListener("click",this.#s,{signal:e}),n.addEventListener("pointerenter",this.#n,{signal:e}),n.addEventListener("pointerleave",this.#r,{signal:e}),n.classList.add("popupTriggerArea");for(const n of this.#l)n.container?.addEventListener("keydown",this.#t,{signal:e})}#C(){const e=this.#l.find(n=>n.hasCommentButton);e&&(this.#b=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#m){this.#m.parentNode||this.#v.container.after(this.#m);return}if(this.#b||this.#C(),!this.#b)return;const{signal:e}=this.#p=new AbortController,n=this.#v.hasOwnCommentButton,r=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!n)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!n)},a=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(n){this.#m=this.#v.container;for(const s of this.trigger)s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.addEventListener("keydown",this.#t,{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),s.classList.add("popupTriggerArea")}else{const s=this.#m=document.createElement("button");s.className="annotationCommentButton";const l=this.#v.container;s.style.zIndex=l.style.zIndex+1,s.tabIndex=0,s.ariaHasPopup="dialog",s.ariaControls="commentPopup",s.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#M(),this.#O(),s.addEventListener("keydown",this.#t,{signal:e}),s.addEventListener("click",r,{signal:e}),s.addEventListener("pointerenter",i,{signal:e}),s.addEventListener("pointerleave",a,{signal:e}),l.after(s)}}#O(){if(this.#v.extraPopupElement&&!this.#v.editor)return;this.#m||this.renderCommentButton();const[e,n]=this.#b,{style:r}=this.#m;r.left=`calc(${e}%)`,r.top=`calc(${n}% - var(--comment-button-dim))`}#M(){this.#v.extraPopupElement||(this.#m||this.renderCommentButton(),this.#m.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:n}=this.#v.commentData;return e?this.#h._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{this.#m?.focus()},0)}getData(){const{richText:e,color:n,opacity:r,creationDate:i,modificationDate:a}=this.#v.commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:r,creationDate:i,modificationDate:a}}get elementBeforePopup(){return this.#m}get comment(){return this.#S||=this.#v.commentText,this.#S}set comment(e){e!==this.comment&&(this.#v.commentText=this.#S=e)}focus(){this.#v.container?.focus()}get parentBoundingClientRect(){return this.#v.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){this.#m&&(this.#m.classList.toggle("selected",e),this.#m.ariaExpanded=n)}setSelectedCommentButton(e){this.#m.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#x)return this.#x;const{x:e,y:n,height:r}=this.#m.getBoundingClientRect(),{x:i,y:a,width:s,height:l}=this.#v.layer.getBoundingClientRect();return[(e-i)/s,(n+r-a)/l]}set commentPopupPosition(e){this.#x=e}hasDefaultPopupPosition(){return this.#x===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#m.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,r]=this.#x||this.commentButtonPosition.map(d=>d/100),i=this.parentBoundingClientRect,{x:a,y:s,width:l,height:c}=i;this.#e.showDialog(null,this,a+n*l,s+r*c,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#a){const r=e.style.outlineColor=Ve.makeHexColor(...this.#a);e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const n=document.createElement("span");if(n.className="header",this.#A?.str){const r=document.createElement("span");r.className="title",n.append(r),{dir:r.dir,str:r.textContent}=this.#A}if(e.append(n),this.#u){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#u.valueOf()})),r.dateTime=this.#u.toISOString(),n.append(r)}RD({html:this.#P||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#i.append(e)}get#P(){const e=this.#T,n=this.#o;return e?.str&&(!n?.str||n.str===e.str)&&this.#T.html||null}get#R(){return this.#P?.attributes?.style?.fontSize||0}get#B(){return this.#P?.attributes?.style?.color||null}#I(e){const n=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},i={style:{color:this.#B,fontSize:this.#R?`calc(${this.#R}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))n.push({name:"span",value:a,attributes:i});return r}#q(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#E()}updateEdited({rect:e,popup:n,deleted:r}){if(this.#e){r?(this.remove(),this.#S=null):n&&(n.deleted?this.remove():(this.#M(),this.#S=n.text)),e&&(this.#b=null,this.#C(),this.#O());return}if(r||n?.deleted){this.remove();return}this.#k(),this.#w||={contentsObj:this.#o,richText:this.#T},e&&(this.#c=null),n&&n.text&&(this.#T=this.#I(n.text),this.#u=lv.toDateObject(n.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#T}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#c=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#N=!1,this.#f=!1,this.#m?.remove(),this.#m=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#_(){if(this.#c!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:a}}}=this.#h;let s=!!this.#d,l=s?this.#d:this.#y;for(const x of this.#l)if(!l||Ve.intersect(x.data.rect,l)!==null){l=x.data.rect,s=!0;break}const c=Ve.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),h=s?l[2]-l[0]+5:0,p=c[0]+h,b=c[1];this.#c=[100*(p-i)/n,100*(b-a)/r];const{style:y}=this.#i;y.left=`${this.#c[0]}%`,y.top=`${this.#c[1]}%`}#E(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#D(),this.#i.addEventListener("click",this.#s),this.#i.addEventListener("keydown",this.#t)):(this.#F(),this.#i.removeEventListener("click",this.#s),this.#i.removeEventListener("keydown",this.#t))}#D(){this.#g||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#_(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#F(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#N=this.isVisible,this.#N&&(this.#i.hidden=!0)}maybeShow(){this.#e||(this.#k(),this.#N&&(this.#g||this.#D(),this.#N=!1,this.#i.hidden=!1))}get isVisible(){return this.#e?!1:this.#i.hidden===!1}}class rR extends fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ht.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const r=document.createElement("span");r.textContent=n,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class Z$ extends fn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=this.#e=this.svgFactory.createElement("svg:line");return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class J$ extends fn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",a/2),s.setAttribute("y",a/2),s.setAttribute("width",n-a),s.setAttribute("height",r-a),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class eq extends fn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:r}=this,i=this.svgFactory.create(n,r,!0),a=e.borderStyle.width,s=this.#e=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",n/2),s.setAttribute("cy",r/2),s.setAttribute("rx",n/2-a/2),s.setAttribute("ry",r/2-a/2),s.setAttribute("stroke-width",a||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class iR extends fn{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:r,popupRef:i},width:a,height:s}=this;if(!n)return this.container;const l=this.svgFactory.create(a,s,!0);let c=[];for(let h=0,p=n.length;h<p;h+=2){const b=n[h]-e[0],y=e[3]-n[h+1];c.push(`${b},${y}`)}c=c.join(" ");const d=this.#e=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",c),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class tq extends iR{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nq extends fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Jw extends fn{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ht.HIGHLIGHT:ht.INK}#r(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:r,borderStyle:i,popupRef:a}}=this,{transform:s,width:l,height:c}=this.#r(n,e),d=this.svgFactory.create(l,c,!0),h=this.#e=this.svgFactory.createElement("svg:g");d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",s);for(let p=0,b=r.length;p<b;p++){const y=this.svgFactory.createElement(this.svgElementName);this.#t.push(y),y.setAttribute("points",r[p].join(",")),h.append(y)}return!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:r,rect:i}=e,a=this.#e;if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let s=0,l=this.#t.length;s<l;s++)this.#t[s].setAttribute("points",r[s].join(","));if(i){const{transform:s,width:l,height:c}=this.#r(this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",s)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class aR extends fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ht.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class rq extends fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class iq extends fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class aq extends fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class sR extends fn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ht.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class sq extends fn{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;const{isMac:i}=ur.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&this.#t()}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):r.classList.add("popupTriggerArea"),e.append(r),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class eE{#e=null;#t=null;#r=null;#n=new Map;#s=null;#a=null;#i=[];#o=!1;constructor({div:e,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:a,viewport:s,structTreeLayer:l,commentManager:c,linkService:d,annotationStorage:h}){this.div=e,this.#e=n,this.#t=r,this.#s=l||null,this.#a=d||null,this.#r=h||new Gw,this.page=a,this.viewport=s,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=c||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:n}=e,r=this.div;al(r,this.viewport);const i=new Map,a=[],s={data:null,layer:r,linkService:this.#a,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new mp,annotationStorage:this.#r,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const l of n){if(l.noHTML)continue;const c=l.annotationType===Cn.POPUP;if(c){const p=i.get(l.id);if(!p)continue;if(!this._commentManager){a.push(l);continue}s.elements=p}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;s.data=l;const d=tx.create(s);if(!d.isRenderable)continue;if(!c&&(this.#i.push(d),l.popupRef)){const p=i.get(l.popupRef);p?p.push(d):i.set(l.popupRef,[d])}const h=d.render();l.hidden&&(h.style.visibility="hidden"),d._isEditable&&(this.#n.set(d.data.id,d),this._annotationEditorUIManager?.renderAnnotationElement(d))}await this.#u();for(const l of a){const c=s.elements=i.get(l.id);s.data=l;const d=tx.create(s);if(!d.isRenderable)continue;const h=d.render();d.contentElement.id=`${gu}${l.id}`,l.hidden&&(h.style.visibility="hidden"),c.at(-1).container.after(h)}this.#l()}async#u(){if(this.#i.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:r,data:{id:i}}of this.#i){const a=r.id=`${gu}${i}`;e.push(this.#s?.getAriaAttributes(a).then(s=>{if(s)for(const[l,c]of s)r.setAttribute(l,c)}))}}this.#i.sort(({data:{rect:[r,i,a,s]}},{data:{rect:[l,c,d,h]}})=>{if(r===a&&i===s)return 1;if(l===d&&c===h)return-1;const p=s,b=i,y=(i+s)/2,x=h,w=c,E=(c+h)/2;if(y>=x&&E<=b)return-1;if(E>=p&&y<=w)return 1;const T=(r+a)/2,C=(l+d)/2;return T-C});const n=document.createDocumentFragment();for(const r of this.#i)n.append(r.container),this._commentManager?(r.extraPopupElement?.popup||r.popup)?.renderCommentButton():r.extraPopupElement&&n.append(r.extraPopupElement.render());if(this.div.append(n),await Promise.all(e),this.#e)for(const r of this.#i)this.#e.addPointerInTextLayer(r.contentElement,!1)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:this.#a,svgFactory:new mp,parent:this};for(const r of e){r.borderStyle||=eE._defaultBorderStyle,n.data=r;const i=tx.create(n);i.isRenderable&&(i.render(),i.contentElement.id=`${gu}${r.id}`,this.#i.push(i))}await this.#u()}update({viewport:e}){const n=this.div;this.viewport=e,al(n,{rotation:e.rotation}),this.#l(),n.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[n,r]of this.#t){const i=e.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(r):a.classList.contains("annotationContent")?a.after(r):a.before(r):i.append(r);const s=this.#n.get(n);s&&(s._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,i.id,r),s._hasNoCanvas=!1):s.canvas=r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:n}=this,{id:r,rotation:i}=e,a=new q$({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#r});return a.render(),a.contentElement.id=`${gu}${r}`,a.createOrUpdatePopup(),this.#i.push(a),a}removeAnnotation(e){const n=this.#i.findIndex(i=>i.data.id===e);if(n<0)return;const[r]=this.#i.splice(n,1);this.#e?.removePointerInTextLayer(r.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const n of e)n.updateFakeAnnotationElement(this);this.#u()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return bt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:fu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Am=/\r\n?|\n/g;class Vn extends Je{#e="";#t=`${this.id}-editor`;#r=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Vn.prototype,n=a=>a.isEmpty(),r=oo.TRANSLATE_SMALL,i=oo.TRANSLATE_BIG;return bt(this,"_keyboardManager",new kh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}]]))}static _type="freetext";static _editorType=ht.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Vn._defaultColor||Je._defaultLineColor,this.#n=e.fontSize||Vn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,n){Je.initialize(e,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Nt.FREETEXT_SIZE:Vn._defaultFontSize=n;break;case Nt.FREETEXT_COLOR:Vn._defaultColor=n;break}}updateParams(e,n){switch(e){case Nt.FREETEXT_SIZE:this.#s(n);break;case Nt.FREETEXT_COLOR:this.#a(n);break}}static get defaultPropertiesToUpdate(){return[[Nt.FREETEXT_SIZE,Vn._defaultFontSize],[Nt.FREETEXT_COLOR,Vn._defaultColor||Je._defaultLineColor]]}get propertiesToUpdate(){return[[Nt.FREETEXT_SIZE,this.#n],[Nt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new rh(this),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.FREETEXT_COLOR}#s(e){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#n)*this.parentScale),this.#n=i,this.#o()},r=this.#n;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(e){const n=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Vn._internalPadding*e,-(Vn._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;const e=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#i(){const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(Vn.#u(r)),n=r);return e.join(`
`)}#o(){const[e,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,s=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=s,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/e,this.height=r.height/n):(this.width=r.height/e,this.height=r.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,n=this.#e=this.#i().trimEnd();if(e===n)return;const r=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Vn._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:s}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,h]=this.pageDimensions,[p,b]=this.pageTranslation;let y,x;switch(this.rotation){case 0:y=e+(s[0]-p)/d,x=n+this.height-(s[1]-b)/h;break;case 90:y=e+(s[0]-p)/d,x=n-(s[1]-b)/h,[l,c]=[c,-l];break;case 180:y=e-this.width+(s[0]-p)/d,x=n-(s[1]-b)/h,[l,c]=[-l,-c];break;case 270:y=e+(s[0]-p-this.height*h)/d,x=n+(s[1]-b-this.width*d)/h,[l,c]=[-c,l];break}this.setAt(y*i,x*a,l,c)}else this._moveAfterPaste(e,n);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#u(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Am,"")}editorDivPaste(e){const n=e.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;e.preventDefault();const i=Vn.#d(n.getData("text")||"").replaceAll(Am,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const s=a.getRangeAt(0);if(!i.includes(`
`)){s.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=s,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(Am,"")),y!==this.editorDiv){let x=d;for(const w of this.editorDiv.childNodes){if(w===y){x=h;continue}x.push(Vn.#u(w))}}d.push(l.nodeValue.slice(0,c).replaceAll(Am,""))}else if(l===this.editorDiv){let y=d,x=0;for(const w of this.editorDiv.childNodes)x++===c&&(y=h),y.push(Vn.#u(w))}this.#e=`${d.join(`
`)}${i}${h.join(`
`)}`,this.#l();const p=new Range;let b=Math.sumPrecise(d.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const x=y.nodeValue.length;if(b<=x){p.setStart(y,b),p.setEnd(y,b);break}b-=x}a.removeAllRanges(),a.addRange(p)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Vn._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,r){let i=null;if(e instanceof rR){const{data:{defaultAppearanceData:{fontSize:s,fontColor:l},rect:c,rotation:d,id:h,popupRef:p,richText:b,contentsObj:y,creationDate:x,modificationDate:w},textContent:E,textPosition:T,parent:{page:{pageNumber:C}}}=e;if(!E||E.length===0)return null;i=e={annotationType:ht.FREETEXT,color:Array.from(l),fontSize:s,value:E.join(`
`),position:T,pageIndex:C-1,rect:c.slice(0),rotation:d,annotationElementId:h,id:h,deleted:!1,popupRef:p,comment:y?.str||null,richText:b,creationDate:x,modificationDate:w}}const a=await super.deserialize(e,n,r);return a.#n=e.fontSize,a.color=Ve.makeHexColor(...e.color),a.#e=Vn.#d(e.value),a._initialData=i,e.comment&&a.setCommentData(e),a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Je._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(e),{color:n,fontSize:this.#n,value:this.#h()});return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!this.#f(r)?null:(r.id=this.annotationElementId,r)}#f(e){const{value:n,fontSize:r,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==r||e.color.some((s,l)=>s!==i[l])||e.pageIndex!==a}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:r}=n;r.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,r.color=this.color,n.replaceChildren();for(const i of this.#e.split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),n.append(a)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class $e{static PRECISION=1e-4;toSVGPath(){Xt("Abstract method `toSVGPath` must be implemented.")}get box(){Xt("Abstract getter `box` must be implemented.")}serialize(e,n){Xt("Abstract method `serialize` must be implemented.")}static _rescale(e,n,r,i,a,s){s||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)s[l]=n+e[l]*i,s[l+1]=r+e[l+1]*a;return s}static _rescaleAndSwap(e,n,r,i,a,s){s||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)s[l]=n+e[l+1]*i,s[l+1]=r+e[l]*a;return s}static _translate(e,n,r,i){i||=new Float32Array(e.length);for(let a=0,s=e.length;a<s;a+=2)i[a]=n+e[a],i[a+1]=r+e[a+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,r,i,a){switch(a){case 90:return[1-n/r,e/i];case 180:return[1-e/r,1-n/i];case 270:return[n/r,1-e/i];default:return[e/r,n/i]}}static _normalizePagePoint(e,n,r){switch(r){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,r,i,a,s){return[(e+5*r)/6,(n+5*i)/6,(5*r+a)/6,(5*i+s)/6,(r+a)/2,(i+s)/2]}}class Ho{#e;#t=[];#r;#n;#s=[];#a=new Float32Array(18);#i;#o;#u;#l;#h;#d;#f=[];static#g=8;static#p=2;static#c=Ho.#g+Ho.#p;constructor({x:e,y:n},r,i,a,s,l=0){this.#e=r,this.#d=a*i,this.#n=s,this.#a.set([NaN,NaN,NaN,NaN,e,n],6),this.#r=l,this.#l=Ho.#g*i,this.#u=Ho.#c*i,this.#h=i,this.#f.push(e,n)}isEmpty(){return isNaN(this.#a[8])}#m(){const e=this.#a.subarray(4,6),n=this.#a.subarray(16,18),[r,i,a,s]=this.#e;return[(this.#i+(e[0]-n[0])/2-r)/a,(this.#o+(e[1]-n[1])/2-i)/s,(this.#i+(n[0]-e[0])/2-r)/a,(this.#o+(n[1]-e[1])/2-i)/s]}add({x:e,y:n}){this.#i=e,this.#o=n;const[r,i,a,s]=this.#e;let[l,c,d,h]=this.#a.subarray(8,12);const p=e-d,b=n-h,y=Math.hypot(p,b);if(y<this.#u)return!1;const x=y-this.#l,w=x/y,E=w*p,T=w*b;let C=l,N=c;l=d,c=h,d+=E,h+=T,this.#f?.push(e,n);const P=-T/x,k=E/x,j=P*this.#d,D=k*this.#d;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([d+j,h+D],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([d-j,h-D],16),isNaN(this.#a[6])?(this.#s.length===0&&(this.#a.set([l+j,c+D],2),this.#s.push(NaN,NaN,NaN,NaN,(l+j-r)/a,(c+D-i)/s),this.#a.set([l-j,c-D],14),this.#t.push(NaN,NaN,NaN,NaN,(l-j-r)/a,(c-D-i)/s)),this.#a.set([C,N,l,c,d,h],6),!this.isEmpty()):(this.#a.set([C,N,l,c,d,h],6),Math.abs(Math.atan2(N-c,C-l)-Math.atan2(T,E))<Math.PI/2?([l,c,d,h]=this.#a.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((l+d)/2-r)/a,((c+h)/2-i)/s),[l,c,C,N]=this.#a.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((C+l)/2-r)/a,((N+c)/2-i)/s),!0):([C,N,l,c,d,h]=this.#a.subarray(0,6),this.#s.push(((C+5*l)/6-r)/a,((N+5*c)/6-i)/s,((5*l+d)/6-r)/a,((5*c+h)/6-i)/s,((l+d)/2-r)/a,((c+h)/2-i)/s),[d,h,l,c,C,N]=this.#a.subarray(12,18),this.#t.push(((C+5*l)/6-r)/a,((N+5*c)/6-i)/s,((5*l+d)/6-r)/a,((5*c+h)/6-i)/s,((l+d)/2-r)/a,((c+h)/2-i)/s),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,n=this.#t;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#b();const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#y(r);for(let i=n.length-6;i>=6;i-=6)isNaN(n[i])?r.push(`L${n[i+4]} ${n[i+5]}`):r.push(`C${n[i]} ${n[i+1]} ${n[i+2]} ${n[i+3]} ${n[i+4]} ${n[i+5]}`);return this.#x(r),r.join(" ")}#b(){const[e,n,r,i]=this.#e,[a,s,l,c]=this.#m();return`M${(this.#a[2]-e)/r} ${(this.#a[3]-n)/i} L${(this.#a[4]-e)/r} ${(this.#a[5]-n)/i} L${a} ${s} L${l} ${c} L${(this.#a[16]-e)/r} ${(this.#a[17]-n)/i} L${(this.#a[14]-e)/r} ${(this.#a[15]-n)/i} Z`}#x(e){const n=this.#t;e.push(`L${n[4]} ${n[5]} Z`)}#y(e){const[n,r,i,a]=this.#e,s=this.#a.subarray(4,6),l=this.#a.subarray(16,18),[c,d,h,p]=this.#m();e.push(`L${(s[0]-n)/i} ${(s[1]-r)/a} L${c} ${d} L${h} ${p} L${(l[0]-n)/i} ${(l[1]-r)/a}`)}newFreeDrawOutline(e,n,r,i,a,s){return new oR(e,n,r,i,a,s)}getOutlines(){const e=this.#s,n=this.#t,r=this.#a,[i,a,s,l]=this.#e,c=new Float32Array((this.#f?.length??0)+2);for(let p=0,b=c.length-2;p<b;p+=2)c[p]=(this.#f[p]-i)/s,c[p+1]=(this.#f[p+1]-a)/l;if(c[c.length-2]=(this.#i-i)/s,c[c.length-1]=(this.#o-a)/l,isNaN(r[6])&&!this.isEmpty())return this.#T(c);const d=new Float32Array(this.#s.length+24+this.#t.length);let h=e.length;for(let p=0;p<h;p+=2){if(isNaN(e[p])){d[p]=d[p+1]=NaN;continue}d[p]=e[p],d[p+1]=e[p+1]}h=this.#w(d,h);for(let p=n.length-6;p>=6;p-=6)for(let b=0;b<6;b+=2){if(isNaN(n[p+b])){d[h]=d[h+1]=NaN,h+=2;continue}d[h]=n[p+b],d[h+1]=n[p+b+1],h+=2}return this.#A(d,h),this.newFreeDrawOutline(d,c,this.#e,this.#h,this.#r,this.#n)}#T(e){const n=this.#a,[r,i,a,s]=this.#e,[l,c,d,h]=this.#m(),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(n[2]-r)/a,(n[3]-i)/s,NaN,NaN,NaN,NaN,(n[4]-r)/a,(n[5]-i)/s,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(n[16]-r)/a,(n[17]-i)/s,NaN,NaN,NaN,NaN,(n[14]-r)/a,(n[15]-i)/s],0),this.newFreeDrawOutline(p,e,this.#e,this.#h,this.#r,this.#n)}#A(e,n){const r=this.#t;return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],n),n+=6}#w(e,n){const r=this.#a.subarray(4,6),i=this.#a.subarray(16,18),[a,s,l,c]=this.#e,[d,h,p,b]=this.#m();return e.set([NaN,NaN,NaN,NaN,(r[0]-a)/l,(r[1]-s)/c,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,p,b,NaN,NaN,NaN,NaN,(i[0]-a)/l,(i[1]-s)/c],n),n+=24}}class oR extends $e{#e;#t=new Float32Array(4);#r;#n;#s;#a;#i;constructor(e,n,r,i,a,s){super(),this.#i=e,this.#s=n,this.#e=r,this.#a=i,this.#r=a,this.#n=s,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(s);const[l,c,d,h]=this.#t;for(let p=0,b=e.length;p<b;p+=2)e[p]=(e[p]-l)/d,e[p+1]=(e[p+1]-c)/h;for(let p=0,b=n.length;p<b;p+=2)n[p]=(n[p]-l)/d,n[p+1]=(n[p+1]-c)/h}toSVGPath(){const e=[`M${this.#i[4]} ${this.#i[5]}`];for(let n=6,r=this.#i.length;n<r;n+=6){if(isNaN(this.#i[n])){e.push(`L${this.#i[n+4]} ${this.#i[n+5]}`);continue}e.push(`C${this.#i[n]} ${this.#i[n+1]} ${this.#i[n+2]} ${this.#i[n+3]} ${this.#i[n+4]} ${this.#i[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,r,i],a){const s=r-e,l=i-n;let c,d;switch(a){case 0:c=$e._rescale(this.#i,e,i,s,-l),d=$e._rescale(this.#s,e,i,s,-l);break;case 90:c=$e._rescaleAndSwap(this.#i,e,n,s,l),d=$e._rescaleAndSwap(this.#s,e,n,s,l);break;case 180:c=$e._rescale(this.#i,r,n,-s,l),d=$e._rescale(this.#s,r,n,-s,l);break;case 270:c=$e._rescaleAndSwap(this.#i,r,i,-s,-l),d=$e._rescaleAndSwap(this.#s,r,i,-s,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}#o(e){const n=this.#i;let r=n[4],i=n[5];const a=[r,i,r,i];let s=r,l=i,c=r,d=i;const h=e?Math.max:Math.min,p=new Float32Array(4);for(let y=6,x=n.length;y<x;y+=6){const w=n[y+4],E=n[y+5];isNaN(n[y])?(Ve.pointBoundingBox(w,E,a),l>E?(s=w,l=E):l===E&&(s=h(s,w)),d<E?(c=w,d=E):d===E&&(c=h(c,w))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,Ve.bezierBoundingBox(r,i,...n.slice(y,y+6),p),Ve.rectBoundingBox(p[0],p[1],p[2],p[3],a),l>p[1]?(s=p[0],l=p[1]):l===p[1]&&(s=h(s,p[0])),d<p[3]?(c=p[2],d=p[3]):d===p[3]&&(c=h(c,p[2]))),r=w,i=E}const b=this.#t;b[0]=a[0]-this.#r,b[1]=a[1]-this.#r,b[2]=a[2]-a[0]+2*this.#r,b[3]=a[3]-a[1]+2*this.#r,this.firstPoint=[s,l],this.lastPoint=[c,d]}get box(){return this.#t}newOutliner(e,n,r,i,a,s=0){return new Ho(e,n,r,i,a,s)}getNewOutline(e,n){const[r,i,a,s]=this.#t,[l,c,d,h]=this.#e,p=a*d,b=s*h,y=r*d+l,x=i*h+c,w=this.newOutliner({x:this.#s[0]*p+y,y:this.#s[1]*b+x},this.#e,this.#a,e,this.#n,n??this.#r);for(let E=2;E<this.#s.length;E+=2)w.add({x:this.#s[E]*p+y,y:this.#s[E+1]*b+x});return w.getOutlines()}}class gv{#e;#t;#r;#n=[];#s=[];constructor(e,n=0,r=0,i=!0){const a=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:w,y:E,width:T,height:C}of e){const N=Math.floor((w-n)/s)*s,P=Math.ceil((w+T+n)/s)*s,k=Math.floor((E-n)/s)*s,j=Math.ceil((E+C+n)/s)*s,D=[N,k,j,!0],H=[P,k,j,!1];this.#n.push(D,H),Ve.rectBoundingBox(N,k,P,j,a)}const l=a[2]-a[0]+2*r,c=a[3]-a[1]+2*r,d=a[0]-r,h=a[1]-r;let p=i?-1/0:1/0,b=1/0;const y=this.#n.at(i?-1:-2),x=[y[0],y[2]];for(const w of this.#n){const[E,T,C,N]=w;!N&&i?T<b?(b=T,p=E):T===b&&(p=Math.max(p,E)):N&&!i&&(T<b?(b=T,p=E):T===b&&(p=Math.min(p,E))),w[0]=(E-d)/l,w[1]=(T-h)/c,w[2]=(C-h)/c}this.#e=new Float32Array([d,h,l,c]),this.#t=[p,b],this.#r=x}getOutlines(){this.#n.sort((n,r)=>n[0]-r[0]||n[1]-r[1]||n[2]-r[2]);const e=[];for(const n of this.#n)n[3]?(e.push(...this.#l(n)),this.#o(n)):(this.#u(n),e.push(...this.#l(n)));return this.#a(e)}#a(e){const n=[],r=new Set;for(const s of e){const[l,c,d]=s;n.push([l,c,s],[l,d,s])}n.sort((s,l)=>s[1]-l[1]||s[0]-l[0]);for(let s=0,l=n.length;s<l;s+=2){const c=n[s][2],d=n[s+1][2];c.push(d),d.push(c),r.add(c),r.add(d)}const i=[];let a;for(;r.size>0;){const s=r.values().next().value;let[l,c,d,h,p]=s;r.delete(s);let b=l,y=c;for(a=[l,d],i.push(a);;){let x;if(r.has(h))x=h;else if(r.has(p))x=p;else break;r.delete(x),[l,c,d,h,p]=x,b!==l&&(a.push(b,y,l,y===c?c:d),b=l),y=y===c?d:c}a.push(b,y)}return new oq(i,this.#e,this.#t,this.#r)}#i(e){const n=this.#s;let r=0,i=n.length-1;for(;r<=i;){const a=r+i>>1,s=n[a][0];if(s===e)return a;s<e?r=a+1:i=a-1}return i+1}#o([,e,n]){const r=this.#i(e);this.#s.splice(r,0,[e,n])}#u([,e,n]){const r=this.#i(e);for(let i=r;i<this.#s.length;i++){const[a,s]=this.#s[i];if(a!==e)break;if(a===e&&s===n){this.#s.splice(i,1);return}}for(let i=r-1;i>=0;i--){const[a,s]=this.#s[i];if(a!==e)break;if(a===e&&s===n){this.#s.splice(i,1);return}}}#l(e){const[n,r,i]=e,a=[[n,r,i]],s=this.#i(i);for(let l=0;l<s;l++){const[c,d]=this.#s[l];for(let h=0,p=a.length;h<p;h++){const[,b,y]=a[h];if(!(d<=b||y<=c)){if(b>=c){if(y>d)a[h][1]=d;else{if(p===1)return[];a.splice(h,1),h--,p--}continue}a[h][2]=c,y>d&&a.push([n,d,y])}}}return a}}class oq extends $e{#e;#t;constructor(e,n,r,i){super(),this.#t=e,this.#e=n,this.firstPoint=r,this.lastPoint=i}toSVGPath(){const e=[];for(const n of this.#t){let[r,i]=n;e.push(`M${r} ${i}`);for(let a=2;a<n.length;a+=2){const s=n[a],l=n[a+1];s===r?(e.push(`V${l}`),i=l):l===i&&(e.push(`H${s}`),r=s)}e.push("Z")}return e.join(" ")}serialize([e,n,r,i],a){const s=[],l=r-e,c=i-n;for(const d of this.#t){const h=new Array(d.length);for(let p=0;p<d.length;p+=2)h[p]=e+d[p]*l,h[p+1]=i-d[p+1]*c;s.push(h)}return s}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class bv extends Ho{newFreeDrawOutline(e,n,r,i,a,s){return new lq(e,n,r,i,a,s)}}class lq extends oR{newOutliner(e,n,r,i,a,s=0){return new bv(e,n,r,i,a,s)}}class vn extends Je{#e=null;#t=0;#r;#n=null;#s=null;#a=null;#i=null;#o=0;#u=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#p=null;#c="";#m;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ht.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=vn.prototype;return bt(this,"_keyboardManager",new kh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||vn._defaultColor,this.#m=e.thickness||vn._defaultThickness,this.opacity=e.opacity||vn._defaultOpacity,this.#r=e.boxes||null,this.#b=e.methodOfCreation||"",this.#c=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#y(e),this.#v()):this.#r&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#i=e.focusNode,this.#o=e.focusOffset,this.#x(),this.#v(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#x(){const e=new gv(this.#r,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const n=new gv(this.#r,.0025,.001,this._uiManager.direction==="ltr");this.#a=n.getOutlines();const{firstPoint:r}=this.#l;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height];const{lastPoint:i}=this.#a;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:n,clipPathId:r}){this.#l=e;const i=1.5;if(this.#a=e.getNewOutline(this.#m/2+i,.0025),n>=0)this.#h=n,this.#n=r,this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:vn.#S(this.#l.box,(p-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:vn.#S(this.#a.box,p),path:{d:this.#a.toSVGPath()}})}const[a,s,l,c]=e.box;switch(this.rotation){case 0:this.x=a,this.y=s,this.width=l,this.height=c;break;case 90:{const[p,b]=this.parentDimensions;this.x=s,this.y=1-a,this.width=l*b/p,this.height=c*p/b;break}case 180:this.x=1-a,this.y=1-s,this.width=l,this.height=c;break;case 270:{const[p,b]=this.parentDimensions;this.x=1-s,this.y=a,this.width=l*b/p,this.height=c*p/b;break}}const{firstPoint:d}=e;this.#f=[(d[0]-a)/l,(d[1]-s)/c];const{lastPoint:h}=this.#a;this.#g=[(h[0]-a)/l,(h[1]-s)/c]}static initialize(e,n){Je.initialize(e,n),vn._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,n){switch(e){case Nt.HIGHLIGHT_COLOR:vn._defaultColor=n;break;case Nt.HIGHLIGHT_THICKNESS:vn._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,n){switch(e){case Nt.HIGHLIGHT_COLOR:this.#T(n);break;case Nt.HIGHLIGHT_THICKNESS:this.#A(n);break}}static get defaultPropertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,vn._defaultColor],[Nt.HIGHLIGHT_THICKNESS,vn._defaultThickness]]}get propertiesToUpdate(){return[[Nt.HIGHLIGHT_COLOR,this.color||vn._defaultColor],[Nt.HIGHLIGHT_THICKNESS,this.#m||vn._defaultThickness],[Nt.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#s?.updateColor(this.color),super.onUpdatedColor()}#T(e){const n=(a,s)=>{this.color=a,this.opacity=s,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,e,vn._defaultOpacity),undo:n.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#A(e){const n=this.#m,r=i=>{this.#m=i,this.#w(i)};this.addCommands({cmd:r.bind(this,e),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Nt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new Ii({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#O())}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,this.#O())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#N(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#v(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?this.#N():e&&(this.#v(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),n&&this.select()}#w(e){this.#d&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#N(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#v(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#n))}static#S([e,n,r,i],a){switch(a){case 90:return[1-n-i,e,i,r];case 180:return[1-e-r,1-n-i,r,i];case 270:return[n,1-e-r,i,r]}return[e,n,r,i]}rotate(e){const{drawLayer:n}=this.parent;let r;this.#d?(e=(e-this.rotation+360)%360,r=vn.#S(this.#l.box,e)):r=vn.#S([this.x,this.y,this.width,this.height],e),n.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":e}}),n.updateProperties(this.#p,{bbox:vn.#S(this.#a.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#c&&(e.setAttribute("aria-label",this.#c),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const n=this.#u=document.createElement("div");return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#n,this.setDims(),LD(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#k(e){vn._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(e){if(!this.#e)return;const n=window.getSelection();e?n.setPosition(this.#e,this.#t):n.setPosition(this.#i,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#C(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#O(){return this.#d?this.rotation:0}#M(){if(this.#d)return null;const[e,n]=this.pageDimensions,[r,i]=this.pageTranslation,a=this.#r,s=new Float32Array(a.length*8);let l=0;for(const{x:c,y:d,width:h,height:p}of a){const b=c*e+r,y=(1-d)*n+i;s[l]=s[l+4]=b,s[l+1]=s[l+3]=y,s[l+2]=s[l+6]=b+h*e,s[l+5]=s[l+7]=y-p*n,l+=8}return s}#P(e){return this.#l.serialize(e,this.#O())}static startHighlighting(e,n,{target:r,x:i,y:a}){const{x:s,y:l,width:c,height:d}=r.getBoundingClientRect(),h=new AbortController,p=e.combinedSignal(h),b=y=>{h.abort(),this.#B(e,y)};window.addEventListener("blur",b,{signal:p}),window.addEventListener("pointerup",b,{signal:p}),window.addEventListener("pointerdown",bn,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",Hi,{signal:p}),r.addEventListener("pointermove",this.#R.bind(this,e),{signal:p}),this._freeHighlight=new bv({x:i,y:a},[s,l,c,d],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#R(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,n,r){let i=null;if(e instanceof aR){const{data:{quadPoints:x,rect:w,rotation:E,id:T,color:C,opacity:N,popupRef:P,richText:k,contentsObj:j,creationDate:D,modificationDate:H},parent:{page:{pageNumber:Y}}}=e;i=e={annotationType:ht.HIGHLIGHT,color:Array.from(C),opacity:N,quadPoints:x,boxes:null,pageIndex:Y-1,rect:w.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:P,richText:k,comment:j?.str||null,creationDate:D,modificationDate:H}}else if(e instanceof Jw){const{data:{inkLists:x,rect:w,rotation:E,id:T,color:C,borderStyle:{rawWidth:N},popupRef:P,richText:k,contentsObj:j,creationDate:D,modificationDate:H},parent:{page:{pageNumber:Y}}}=e;i=e={annotationType:ht.HIGHLIGHT,color:Array.from(C),thickness:N,inkLists:x,boxes:null,pageIndex:Y-1,rect:w.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,popupRef:P,richText:k,comment:j?.str||null,creationDate:D,modificationDate:H}}const{color:a,quadPoints:s,inkLists:l,opacity:c}=e,d=await super.deserialize(e,n,r);d.color=Ve.makeHexColor(...a),d.opacity=c||1,l&&(d.#m=e.thickness),d._initialData=i,e.comment&&d.setCommentData(e);const[h,p]=d.pageDimensions,[b,y]=d.pageTranslation;if(s){const x=d.#r=[];for(let w=0;w<s.length;w+=8)x.push({x:(s[w]-b)/h,y:1-(s[w+1]-y)/p,width:(s[w+2]-s[w])/h,height:(s[w+1]-s[w+5])/p});d.#x(),d.#v(),d.rotate(d.rotation)}else if(l){d.#d=!0;const x=l[0],w={x:x[0]-b,y:p-(x[1]-y)},E=new bv(w,[0,0,h,p],1,d.#m/2,!0,.001);for(let N=0,P=x.length;N<P;N+=2)w.x=x[N]-b,w.y=p-(x[N+1]-y),E.add(w);const{id:T,clipPathId:C}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);d.#y({highlightOutlines:E.getOutlines(),highlightId:T,clipPathId:C}),d.#v(),d.rotate(d.parentRotation)}return d}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Je._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(e);return Object.assign(r,{color:n,opacity:this.opacity,thickness:this.#m,quadPoints:this.#M(),outlines:this.#P(r.rect)}),this.addComment(r),this.annotationElementId&&!this.#I(r)?null:(r.id=this.annotationElementId,r)}#I(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((r,i)=>r!==n[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class lR{#e=Object.create(null);updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,r]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,r)}updateSVGProperty(e,n){this.#e[e]=n}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Xt("Not implemented")}}class Rt extends Je{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#r=null;static#n=null;static#s=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#a(e),this.#u())}#a({drawOutlines:e,drawId:n,drawingOptions:r}){this.#e=e,this._drawingOptions||=r,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=this.#i(e,this.parent),this.#d(e.box)}#i(e,n){const{id:r}=n.drawLayer.draw(Rt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return r}static _mergeSVGProperties(e,n){const r=new Set(Object.keys(e));for(const[i,a]of Object.entries(n))r.has(i)?Object.assign(e[i],a):e[i]=a;return e}static getDefaultDrawingOptions(e){Xt("Not implemented")}static get typesMap(){Xt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const r=this.typesMap.get(e);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(Rt.#r.updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const r=this.constructor.typesMap.get(e);r&&this._updateProperty(e,r,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)e.push([r,n[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[r,i]of this.constructor.typesMap)e.push([r,n[i]]);return e}_updateProperty(e,n,r){const i=this._drawingOptions,a=i[n],s=l=>{i.updateProperty(n,l);const c=this.#e.updateProperty(n,l);c&&this.#d(c),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,r),undo:s.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#h()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#h()),{bbox:this.#f()}))}_onTranslating(e,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#u(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#u(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),n&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#u(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#i(this.#e,e)}}#l([e,n,r,i]){const{parentDimensions:[a,s],rotation:l}=this;switch(l){case 90:return[n,1-e,r*(s/a),i*(a/s)];case 180:return[1-e,1-n,r,i];case 270:return[1-n,e,r*(s/a),i*(a/s)];default:return[e,n,r,i]}}#h(){const{x:e,y:n,width:r,height:i,parentDimensions:[a,s],rotation:l}=this;switch(l){case 90:return[1-n,e,r*(a/s),i*(s/a)];case 180:return[1-e,1-n,r,i];case 270:return[n,1-e,r*(a/s),i*(s/a)];default:return[e,n,r,i]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:e,y:n,width:r,height:i,rotation:a,parentRotation:s,parentDimensions:[l,c]}=this;switch((a*4+s)/90){case 1:return[1-n-i,e,i,r];case 2:return[1-e-r,1-n-i,r,i];case 3:return[n,1-e-r,i,r];case 4:return[e,n-r*(l/c),i*(c/l),r*(l/c)];case 5:return[1-n,e,r*(l/c),i*(c/l)];case 6:return[1-e-i*(c/l),1-n,i*(c/l),r*(l/c)];case 7:return[n-r*(l/c),1-e-i*(c/l),r*(l/c),i*(c/l)];case 8:return[e-r,n-i,r,i];case 9:return[1-n,e-r,i,r];case 10:return[1-e,1-n,r,i];case 11:return[n-i,1-e,i,r];case 12:return[e-i*(c/l),n,i*(c/l),r*(l/c)];case 13:return[1-n-r*(l/c),e-i*(c/l),r*(l/c),i*(c/l)];case 14:return[1-e,1-n-r*(l/c),i*(c/l),r*(l/c)];case 15:return[n,1-e,r*(l/c),i*(c/l)];default:return[e,n,r,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Rt._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),r}static createDrawerInstance(e,n,r,i,a){Xt("Not implemented")}static startDrawing(e,n,r,i){const{target:a,offsetX:s,offsetY:l,pointerId:c,pointerType:d}=i;if(It.isInitializedAndDifferentPointerType(d))return;const{viewport:{rotation:h}}=e,{width:p,height:b}=a.getBoundingClientRect(),y=Rt.#n=new AbortController,x=e.combinedSignal(y);if(It.setPointer(d,c),window.addEventListener("pointerup",w=>{It.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:x}),window.addEventListener("pointercancel",w=>{It.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:x}),window.addEventListener("pointerdown",w=>{It.isSamePointerType(w.pointerType)&&(It.initializeAndAddPointerId(w.pointerId),Rt.#r.isCancellable()&&(Rt.#r.removeLastElement(),Rt.#r.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Hi,{signal:x}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),a.addEventListener("touchmove",w=>{It.isSameTimeStamp(w.timeStamp)&&bn(w)},{signal:x}),e.toggleDrawing(),n._editorUndoBar?.hide(),Rt.#r){e.drawLayer.updateProperties(this._currentDrawId,Rt.#r.startNew(s,l,p,b,h));return}n.updateUIForDefaultProperties(this),Rt.#r=this.createDrawerInstance(s,l,p,b,h),Rt.#s=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Rt.#s.toSVGProperties(),Rt.#r.defaultSVGProperties),!0,!1)}static _drawMove(e){if(It.isSameTimeStamp(e.timeStamp),!Rt.#r)return;const{offsetX:n,offsetY:r,pointerId:i}=e;if(It.isSamePointerId(i)){if(It.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Rt.#r.add(n,r)),It.setTimeStamp(e.timeStamp),bn(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Rt.#r=null,Rt.#s=null,It.clearPointerType(),It.clearTimeStamp()),Rt.#n&&(Rt.#n.abort(),Rt.#n=null,It.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,Rt.#r.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const r=Rt.#r,i=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:Nt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Nt.DRAW_STEP),!Rt.#r.isEmpty()){const{pageDimensions:[r,i],scale:a}=n,s=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Rt.#r.getOutlines(r*a,i*a,a,this._INNER_MARGIN),drawingOptions:Rt.#s,mustBeCommitted:!e});return this._cleanup(!0),s}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,r,i,a,s){Xt("Not implemented")}static async deserialize(e,n,r){const{rawDims:{pageWidth:i,pageHeight:a,pageX:s,pageY:l}}=n.viewport,c=this.deserializeDraw(s,l,i,a,this._INNER_MARGIN,e),d=await super.deserialize(e,n,r);return d.createDrawingOptions(e),d.#a({drawOutlines:c}),d.#u(),d.onScaleChanging(),d.rotate(),d}serializeDraw(e){const[n,r]=this.pageTranslation,[i,a]=this.pageDimensions;return this.#e.serialize([n,r,i,a],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class uq{#e=new Float64Array(6);#t;#r;#n;#s;#a;#i="";#o=0;#u=new Ph;#l;#h;constructor(e,n,r,i,a,s){this.#l=r,this.#h=i,this.#n=a,this.#s=s,[e,n]=this.#d(e,n);const l=this.#t=[NaN,NaN,NaN,NaN,e,n];this.#a=[e,n],this.#r=[{line:l,points:this.#a}],this.#e.set(l,0)}updateProperty(e,n){e==="stroke-width"&&(this.#s=n)}#d(e,n){return $e._normalizePoint(e,n,this.#l,this.#h,this.#n)}isEmpty(){return!this.#r||this.#r.length===0}isCancellable(){return this.#a.length<=10}add(e,n){[e,n]=this.#d(e,n);const[r,i,a,s]=this.#e.subarray(2,6),l=e-a,c=n-s;return Math.hypot(this.#l*l,this.#h*c)<=2?null:(this.#a.push(e,n),isNaN(r)?(this.#e.set([a,s,e,n],2),this.#t.push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,i,a,s,e,n],0),this.#t.push(...$e.createBezierPoints(r,i,a,s,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const r=this.add(e,n);return r||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,r,i,a){this.#l=r,this.#h=i,this.#n=a,[e,n]=this.#d(e,n);const s=this.#t=[NaN,NaN,NaN,NaN,e,n];this.#a=[e,n];const l=this.#r.at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),this.#r.push({line:s,points:this.#a}),this.#e.set(s,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#r.at(-1)}setLastElement(e){return this.#r?(this.#r.push(e),this.#t=e.line,this.#a=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#r)return this.#u.removeLastElement();this.#r.pop(),this.#i="";for(let e=0,n=this.#r.length;e<n;e++){const{line:r,points:i}=this.#r[e];this.#t=r,this.#a=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#i}}}toSVGPath(){const e=$e.svgRound(this.#t[4]),n=$e.svgRound(this.#t[5]);if(this.#a.length===2)return this.#i=`${this.#i} M ${e} ${n} Z`,this.#i;if(this.#a.length<=6){const i=this.#i.lastIndexOf("M");this.#i=`${this.#i.slice(0,i)} M ${e} ${n}`,this.#o=6}if(this.#a.length===4){const i=$e.svgRound(this.#t[10]),a=$e.svgRound(this.#t[11]);return this.#i=`${this.#i} L ${i} ${a}`,this.#o=12,this.#i}const r=[];this.#o===0&&(r.push(`M ${e} ${n}`),this.#o=6);for(let i=this.#o,a=this.#t.length;i<a;i+=6){const[s,l,c,d,h,p]=this.#t.slice(i,i+6).map($e.svgRound);r.push(`C${s} ${l} ${c} ${d} ${h} ${p}`)}return this.#i+=r.join(" "),this.#o=this.#t.length,this.#i}getOutlines(e,n,r,i){const a=this.#r.at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),this.#u.build(this.#r,e,n,r,this.#n,this.#s,i),this.#e=null,this.#t=null,this.#r=null,this.#i=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Ph extends $e{#e;#t=0;#r;#n;#s;#a;#i;#o;#u;build(e,n,r,i,a,s,l){this.#s=n,this.#a=r,this.#i=i,this.#o=a,this.#u=s,this.#r=l??0,this.#n=e,this.#d()}get thickness(){return this.#u}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of this.#n){if(e.push(`M${$e.svgRound(n[4])} ${$e.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${$e.svgRound(n[10])} ${$e.svgRound(n[11])}`);continue}for(let r=6,i=n.length;r<i;r+=6){const[a,s,l,c,d,h]=n.subarray(r,r+6).map($e.svgRound);e.push(`C${a} ${s} ${l} ${c} ${d} ${h}`)}}return e.join("")}serialize([e,n,r,i],a){const s=[],l=[],[c,d,h,p]=this.#h();let b,y,x,w,E,T,C,N,P;switch(this.#o){case 0:P=$e._rescale,b=e,y=n+i,x=r,w=-i,E=e+c*r,T=n+(1-d-p)*i,C=e+(c+h)*r,N=n+(1-d)*i;break;case 90:P=$e._rescaleAndSwap,b=e,y=n,x=r,w=i,E=e+d*r,T=n+c*i,C=e+(d+p)*r,N=n+(c+h)*i;break;case 180:P=$e._rescale,b=e+r,y=n,x=-r,w=i,E=e+(1-c-h)*r,T=n+d*i,C=e+(1-c)*r,N=n+(d+p)*i;break;case 270:P=$e._rescaleAndSwap,b=e+r,y=n+i,x=-r,w=-i,E=e+(1-d-p)*r,T=n+(1-c-h)*i,C=e+(1-d)*r,N=n+(1-c)*i;break}for(const{line:k,points:j}of this.#n)s.push(P(k,b,y,x,w,a?new Array(k.length):null)),l.push(P(j,b,y,x,w,a?new Array(j.length):null));return{lines:s,points:l,rect:[E,T,C,N]}}static deserialize(e,n,r,i,a,{paths:{lines:s,points:l},rotation:c,thickness:d}){const h=[];let p,b,y,x,w;switch(c){case 0:w=$e._rescale,p=-e/r,b=n/i+1,y=1/r,x=-1/i;break;case 90:w=$e._rescaleAndSwap,p=-n/i,b=-e/r,y=1/i,x=1/r;break;case 180:w=$e._rescale,p=e/r+1,b=-n/i,y=-1/r,x=1/i;break;case 270:w=$e._rescaleAndSwap,p=n/i+1,b=e/r+1,y=-1/i,x=-1/r;break}if(!s){s=[];for(const T of l){const C=T.length;if(C===2){s.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(C===4){s.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const N=new Float32Array(3*(C-2));s.push(N);let[P,k,j,D]=T.subarray(0,4);N.set([NaN,NaN,NaN,NaN,P,k],0);for(let H=4;H<C;H+=2){const Y=T[H],X=T[H+1];N.set($e.createBezierPoints(P,k,j,D,Y,X),(H-2)*3),[P,k,j,D]=[j,D,Y,X]}}}for(let T=0,C=s.length;T<C;T++)h.push({line:w(s[T].map(N=>N??NaN),p,b,y,x),points:w(l[T].map(N=>N??NaN),p,b,y,x)});const E=new this.prototype.constructor;return E.build(h,r,i,1,c,d,a),E}#l(e=this.#u){const n=this.#r+e/2*this.#i;return this.#o%180===0?[n/this.#s,n/this.#a]:[n/this.#a,n/this.#s]}#h(){const[e,n,r,i]=this.#e,[a,s]=this.#l(0);return[e+a,n+s,r-2*a,i-2*s]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#n){if(i.length<=12){for(let l=4,c=i.length;l<c;l+=6)Ve.pointBoundingBox(i[l],i[l+1],e);continue}let a=i[4],s=i[5];for(let l=6,c=i.length;l<c;l+=6){const[d,h,p,b,y,x]=i.subarray(l,l+6);Ve.bezierBoundingBox(a,s,d,h,p,b,y,x,e),a=y,s=x}}const[n,r]=this.#l();e[0]=Sr(e[0]-n,0,1),e[1]=Sr(e[1]-r,0,1),e[2]=Sr(e[2]+n,0,1),e[3]=Sr(e[3]+r,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,n){return e==="stroke-width"?this.#f(n):null}#f(e){const[n,r]=this.#l();this.#u=e;const[i,a]=this.#l(),[s,l]=[i-n,a-r],c=this.#e;return c[0]-=s,c[1]-=l,c[2]+=2*s,c[3]+=2*l,c}updateParentDimensions([e,n],r){const[i,a]=this.#l();this.#s=e,this.#a=n,this.#i=r;const[s,l]=this.#l(),c=s-i,d=l-a,h=this.#e;return h[0]-=c,h[1]-=d,h[2]+=2*c,h[3]+=2*d,h}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map($e.svgRound).join(" ")}get defaultProperties(){const[e,n]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$e.svgRound(e)} ${$e.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=this.#e;let r=0,i=0,a=0,s=0,l=0,c=0;switch(this.#t){case 90:i=n/e,a=-e/n,l=e;break;case 180:r=-1,s=-1,l=e,c=n;break;case 270:i=-n/e,a=e/n,c=n;break;default:return""}return`matrix(${r} ${i} ${a} ${s} ${$e.svgRound(l)} ${$e.svgRound(c)})`}getPathResizingSVGProperties([e,n,r,i]){const[a,s]=this.#l(),[l,c,d,h]=this.#e;if(Math.abs(d-a)<=$e.PRECISION||Math.abs(h-s)<=$e.PRECISION){const w=e+r/2-(l+d/2),E=n+i/2-(c+h/2);return{path:{"transform-origin":`${$e.svgRound(e)} ${$e.svgRound(n)}`,transform:`${this.rotationTransform} translate(${w} ${E})`}}}const p=(r-2*a)/(d-2*a),b=(i-2*s)/(h-2*s),y=d/r,x=h/i;return{path:{"transform-origin":`${$e.svgRound(l)} ${$e.svgRound(c)}`,transform:`${this.rotationTransform} scale(${y} ${x}) translate(${$e.svgRound(a)} ${$e.svgRound(s)}) scale(${p} ${b}) translate(${$e.svgRound(-a)} ${$e.svgRound(-s)})`}}}getPathResizedSVGProperties([e,n,r,i]){const[a,s]=this.#l(),l=this.#e,[c,d,h,p]=l;if(l[0]=e,l[1]=n,l[2]=r,l[3]=i,Math.abs(h-a)<=$e.PRECISION||Math.abs(p-s)<=$e.PRECISION){const E=e+r/2-(c+h/2),T=n+i/2-(d+p/2);for(const{line:C,points:N}of this.#n)$e._translate(C,E,T,C),$e._translate(N,E,T,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$e.svgRound(e)} ${$e.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(r-2*a)/(h-2*a),y=(i-2*s)/(p-2*s),x=-b*(c+a)+e+a,w=-y*(d+s)+n+s;if(b!==1||y!==1||x!==0||w!==0)for(const{line:E,points:T}of this.#n)$e._rescale(E,x,w,b,y,E),$e._rescale(T,x,w,b,y,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${$e.svgRound(e)} ${$e.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],r){const[i,a]=r,s=this.#e,l=e-s[0],c=n-s[1];if(this.#s===i&&this.#a===a)for(const{line:d,points:h}of this.#n)$e._translate(d,l,c,d),$e._translate(h,l,c,h);else{const d=this.#s/i,h=this.#a/a;this.#s=i,this.#a=a;for(const{line:p,points:b}of this.#n)$e._rescale(p,l,c,d,h,p),$e._rescale(b,l,c,d,h,b);s[2]*=d,s[3]*=h}return s[0]=e,s[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${$e.svgRound(e)} ${$e.svgRound(n)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${$e.svgRound(e[0])} ${$e.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Ag extends lR{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Je._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new Ag(this._viewParameters);return e.updateAll(this),e}}class tE extends Rt{static _type="ink";static _editorType=ht.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Je.initialize(e,n),this._defaultDrawingOptions=new Ag(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return bt(this,"typesMap",new Map([[Nt.INK_THICKNESS,"stroke-width"],[Nt.INK_COLOR,"stroke"],[Nt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,r,i,a){return new uq(e,n,r,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,r,i,a,s){return Ph.deserialize(e,n,r,i,a,s)}static async deserialize(e,n,r){let i=null;if(e instanceof Jw){const{data:{inkLists:s,rect:l,rotation:c,id:d,color:h,opacity:p,borderStyle:{rawWidth:b},popupRef:y,richText:x,contentsObj:w,creationDate:E,modificationDate:T},parent:{page:{pageNumber:C}}}=e;i=e={annotationType:ht.INK,color:Array.from(h),thickness:b,opacity:p,paths:{points:s},boxes:null,pageIndex:C-1,rect:l.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:x,comment:w?.str||null,creationDate:E,modificationDate:T}}const a=await super.deserialize(e,n,r);return a._initialData=i,e.comment&&a.setCommentData(e),a}get toolbarButtons(){return this._colorPicker||=new rh(this),[["colorPicker",this._colorPicker]]}get colorType(){return Nt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:r}){this._drawingOptions=tE.getDefaultDrawingOptions({stroke:Ve.makeHexColor(...e),"stroke-width":n,"stroke-opacity":r})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":s}}=this,l=Object.assign(super.serialize(e),{color:Je._colorManager.convert(i),opacity:a,thickness:s,paths:{lines:n,points:r}});return this.addComment(l),e?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:n,thickness:r,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((s,l)=>s!==n[l])||e.thickness!==r||e.opacity!==i||e.pageIndex!==a}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:r}=this.serializeDraw(!1);return e.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}}class yv extends Ph{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Sm=8,md=3;class pu{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,n,r,i){return r-=e,i-=n,r===0?i>0?0:4:r===1?i+6:2-i}static#r=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,n,r,i,a,s,l){const c=this.#t(r,i,a,s);for(let d=0;d<8;d++){const h=(-d+c-l+16)%8,p=this.#r[2*h],b=this.#r[2*h+1];if(e[(r+p)*n+(i+b)]!==0)return h}return-1}static#s(e,n,r,i,a,s,l){const c=this.#t(r,i,a,s);for(let d=0;d<8;d++){const h=(d+c+l+16)%8,p=this.#r[2*h],b=this.#r[2*h+1];if(e[(r+p)*n+(i+b)]!==0)return h}return-1}static#a(e,n,r,i){const a=e.length,s=new Int32Array(a);for(let h=0;h<a;h++)s[h]=e[h]<=i?1:0;for(let h=1;h<r-1;h++)s[h*n]=s[h*n+n-1]=0;for(let h=0;h<n;h++)s[h]=s[n*r-1-h]=0;let l=1,c;const d=[];for(let h=1;h<r-1;h++){c=1;for(let p=1;p<n-1;p++){const b=h*n+p,y=s[b];if(y===0)continue;let x=h,w=p;if(y===1&&s[b-1]===0)l+=1,w-=1;else if(y>=1&&s[b+1]===0)l+=1,w+=1,y>1&&(c=y);else{y!==1&&(c=Math.abs(y));continue}const E=[p,h],T=w===p+1,C={isHole:T,points:E,id:l,parent:0};d.push(C);let N;for(const z of d)if(z.id===c){N=z;break}N?N.isHole?C.parent=T?N.parent:c:C.parent=T?c:N.parent:C.parent=T?c:0;const P=this.#n(s,n,h,p,x,w,0);if(P===-1){s[b]=-l,s[b]!==1&&(c=Math.abs(s[b]));continue}let k=this.#r[2*P],j=this.#r[2*P+1];const D=h+k,H=p+j;x=D,w=H;let Y=h,X=p;for(;;){const z=this.#s(s,n,Y,X,x,w,1);k=this.#r[2*z],j=this.#r[2*z+1];const K=Y+k,ce=X+j;E.push(ce,K);const te=Y*n+X;if(s[te+1]===0?s[te]=-l:s[te]===1&&(s[te]=l),K===h&&ce===p&&Y===D&&X===H){s[b]!==1&&(c=Math.abs(s[b]));break}else x=Y,w=X,Y=K,X=ce}}}return d}static#i(e,n,r,i){if(r-n<=4){for(let D=n;D<r-2;D+=2)i.push(e[D],e[D+1]);return}const a=e[n],s=e[n+1],l=e[r-4]-a,c=e[r-3]-s,d=Math.hypot(l,c),h=l/d,p=c/d,b=h*s-p*a,y=c/l,x=1/d,w=Math.atan(y),E=Math.cos(w),T=Math.sin(w),C=x*(Math.abs(E)+Math.abs(T)),N=x*(1-C+C**2),P=Math.max(Math.atan(Math.abs(T+E)*N),Math.atan(Math.abs(T-E)*N));let k=0,j=n;for(let D=n+2;D<r-2;D+=2){const H=Math.abs(b-h*e[D+1]+p*e[D]);H>k&&(j=D,k=H)}k>(d*P)**2?(this.#i(e,n,j+2,i),this.#i(e,j,r,i)):i.push(a,s)}static#o(e){const n=[],r=e.length;return this.#i(e,0,r,n),n.push(e[r-2],e[r-1]),n.length<=4?null:n}static#u(e,n,r,i,a,s){const l=new Float32Array(s**2),c=-2*i**2,d=s>>1;for(let w=0;w<s;w++){const E=(w-d)**2;for(let T=0;T<s;T++)l[w*s+T]=Math.exp((E+(T-d)**2)/c)}const h=new Float32Array(256),p=-2*a**2;for(let w=0;w<256;w++)h[w]=Math.exp(w**2/p);const b=e.length,y=new Uint8Array(b),x=new Uint32Array(256);for(let w=0;w<r;w++)for(let E=0;E<n;E++){const T=w*n+E,C=e[T];let N=0,P=0;for(let j=0;j<s;j++){const D=w+j-d;if(!(D<0||D>=r))for(let H=0;H<s;H++){const Y=E+H-d;if(Y<0||Y>=n)continue;const X=e[D*n+Y],z=l[j*s+H]*h[Math.abs(X-C)];N+=X*z,P+=z}}const k=y[T]=Math.round(N/P);x[k]++}return[y,x]}static#l(e){const n=new Uint32Array(256);for(const r of e)n[r]++;return n}static#h(e){const n=e.length,r=new Uint8ClampedArray(n>>2);let i=-1/0,a=1/0;for(let l=0,c=r.length;l<c;l++){const d=r[l]=e[l<<2];i=Math.max(i,d),a=Math.min(a,d)}const s=255/(i-a);for(let l=0,c=r.length;l<c;l++)r[l]=(r[l]-a)*s;return r}static#d(e){let n,r=-1/0,i=-1/0;const a=e.findIndex(c=>c!==0);let s=a,l=a;for(n=a;n<256;n++){const c=e[n];c>r&&(n-s>i&&(i=n-s,l=n-1),r=c,s=n)}for(n=l-1;n>=0&&!(e[n]>e[n+1]);n--);return n}static#f(e){const n=e,{width:r,height:i}=e,{maxDim:a}=this.#e;let s=r,l=i;if(r>a||i>a){let b=r,y=i,x=Math.log2(Math.max(r,i)/a);const w=Math.floor(x);x=x===w?w-1:w;for(let T=0;T<x;T++){s=Math.ceil(b/2),l=Math.ceil(y/2);const C=new OffscreenCanvas(s,l);C.getContext("2d").drawImage(e,0,0,b,y,0,0,s,l),b=s,y=l,e!==n&&e.close(),e=C.transferToImageBitmap()}const E=Math.min(a/s,a/l);s=Math.round(s*E),l=Math.round(l*E)}const d=new OffscreenCanvas(s,l).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,s,l),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,s,l);const h=d.getImageData(0,0,s,l).data;return[this.#h(h),s,l]}static extractContoursFromText(e,{fontFamily:n,fontStyle:r,fontWeight:i},a,s,l,c){let d=new OffscreenCanvas(1,1),h=d.getContext("2d",{alpha:!1});const p=200,b=h.font=`${r} ${i} ${p}px ${n}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:x,actualBoundingBoxAscent:w,actualBoundingBoxDescent:E,fontBoundingBoxAscent:T,fontBoundingBoxDescent:C,width:N}=h.measureText(e),P=1.5,k=Math.ceil(Math.max(Math.abs(y)+Math.abs(x)||0,N)*P),j=Math.ceil(Math.max(Math.abs(w)+Math.abs(E)||p,Math.abs(T)+Math.abs(C)||p)*P);d=new OffscreenCanvas(k,j),h=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=b,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,k,j),h.fillStyle="black",h.fillText(e,k*(P-1)/2,j*(3-P)/2);const D=this.#h(h.getImageData(0,0,k,j).data),H=this.#l(D),Y=this.#d(H),X=this.#a(D,k,j,Y);return this.processDrawnLines({lines:{curves:X,width:k,height:j},pageWidth:a,pageHeight:s,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,n,r,i,a){const[s,l,c]=this.#f(e),[d,h]=this.#u(s,l,c,Math.hypot(l,c)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),p=this.#d(h),b=this.#a(d,l,c,p);return this.processDrawnLines({lines:{curves:b,width:l,height:c},pageWidth:n,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:i,innerMargin:a,mustSmooth:s,areContours:l}){i%180!==0&&([n,r]=[r,n]);const{curves:c,width:d,height:h}=e,p=e.thickness??0,b=[],y=Math.min(n/d,r/h),x=y/n,w=y/r,E=[];for(const{points:C}of c){const N=s?this.#o(C):C;if(!N)continue;E.push(N);const P=N.length,k=new Float32Array(P),j=new Float32Array(3*(P===2?2:P-2));if(b.push({line:j,points:k}),P===2){k[0]=N[0]*x,k[1]=N[1]*w,j.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[D,H,Y,X]=N;D*=x,H*=w,Y*=x,X*=w,k.set([D,H,Y,X],0),j.set([NaN,NaN,NaN,NaN,D,H],0);for(let z=4;z<P;z+=2){const K=k[z]=N[z]*x,ce=k[z+1]=N[z+1]*w;j.set($e.createBezierPoints(D,H,Y,X,K,ce),(z-2)*3),[D,H,Y,X]=[Y,X,K,ce]}}if(b.length===0)return null;const T=l?new yv:new Ph;return T.build(b,n,r,1,i,l?0:p,a),{outline:T,newCurves:E,areContours:l,thickness:p,width:d,height:h}}static async compressSignature({outlines:e,areContours:n,thickness:r,width:i,height:a}){let s=1/0,l=-1/0,c=0;for(const N of e){c+=N.length;for(let P=2,k=N.length;P<k;P++){const j=N[P]-N[P-2];s=Math.min(s,j),l=Math.max(l,j)}}let d;s>=-128&&l<=127?d=Int8Array:s>=-32768&&l<=32767?d=Int16Array:d=Int32Array;const h=e.length,p=Sm+md*h,b=new Uint32Array(p);let y=0;b[y++]=p*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*d.BYTES_PER_ELEMENT,b[y++]=0,b[y++]=i,b[y++]=a,b[y++]=n?0:1,b[y++]=Math.max(0,Math.floor(r??0)),b[y++]=h,b[y++]=d.BYTES_PER_ELEMENT;for(const N of e)b[y++]=N.length-2,b[y++]=N[0],b[y++]=N[1];const x=new CompressionStream("deflate-raw"),w=x.writable.getWriter();await w.ready,w.write(b);const E=d.prototype.constructor;for(const N of e){const P=new E(N.length-2);for(let k=2,j=N.length;k<j;k++)P[k-2]=N[k]-N[k-2];w.write(P)}w.close();const T=await new Response(x.readable).arrayBuffer(),C=new Uint8Array(T);return PD(C)}static async decompressSignature(e){try{const n=_z(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),a=i.getWriter();await a.ready,a.write(n).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let s=null,l=0;for await(const N of r)s||=new Uint8Array(new Uint32Array(N.buffer,0,4)[0]),s.set(N,l),l+=N.length;const c=new Uint32Array(s.buffer,0,s.length>>2),d=c[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const h=c[2],p=c[3],b=c[4]===0,y=c[5],x=c[6],w=c[7],E=[],T=(Sm+md*x)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(w){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(s.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(s.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(s.buffer,T);break}l=0;for(let N=0;N<x;N++){const P=c[md*N+Sm],k=new Float32Array(P+2);E.push(k);for(let j=0;j<md-1;j++)k[j]=c[md*N+Sm+j+1];for(let j=0;j<P;j++)k[j+2]=k[j]+C[l++]}return{areContours:b,thickness:y,outlines:E,width:h,height:p}}catch(n){return dt(`decompressSignature: ${n}`),null}}}class nE extends lR{constructor(){super(),super.updateProperties({fill:Je._defaultLineColor,"stroke-width":0})}clone(){const e=new nE;return e.updateAll(this),e}}class rE extends Ag{constructor(e){super(e),super.updateProperties({stroke:Je._defaultLineColor,"stroke-width":1})}clone(){const e=new rE(this._viewParameters);return e.updateAll(this),e}}class ma extends Rt{#e=!1;#t=null;#r=null;#n=null;static _type="signature";static _editorType=ht.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#r=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Je.initialize(e,n),this._defaultDrawingOptions=new nE,this._defaultDrawnSignatureOptions=new rE(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return bt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(this.#r){const{lines:i,mustSmooth:a,areContours:s,description:l,uuid:c,heightInPage:d}=this.#r,{rawDims:{pageWidth:h,pageHeight:p},rotation:b}=this.parent.viewport,y=pu.processDrawnLines({lines:i,pageWidth:h,pageHeight:p,rotation:b,innerMargin:ma._INNER_MARGIN,mustSmooth:a,areContours:s});this.addSignature(y,d,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:r,width:i,height:a}=this.#r,s=Math.max(i,a),l=pu.processDrawnLines({lines:{curves:e.map(c=>({points:c})),thickness:r,width:i,height:a},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,r,i){const{x:a,y:s}=this,{outline:l}=this.#r=e;this.#e=l instanceof yv,this.description=r;let c;this.#e?c=ma.getDefaultDrawingOptions():(c=ma._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,d]=this.pageDimensions;let h=n/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=a,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return pu.process(e,n,r,i,ma._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:r,pageHeight:i},rotation:a}=this.parent.viewport;return pu.extractContoursFromText(e,n,r,i,a,ma._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return pu.processDrawnLines({lines:e,pageWidth:n,pageHeight:r,rotation:i,innerMargin:ma._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=ma.getDefaultDrawingOptions():(this._drawingOptions=ma._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(a),e?(a.paths={lines:n,points:r},a.uuid=this.#n,a.isCopy=!0):a.lines=n,this.#t&&(a.accessibilityData={type:"Figure",alt:this.#t}),a}static deserializeDraw(e,n,r,i,a,s){return s.areContours?yv.deserialize(e,n,r,i,a,s):Ph.deserialize(e,n,r,i,a,s)}static async deserialize(e,n,r){const i=await super.deserialize(e,n,r);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#n=e.uuid,i}}class cq extends Je{#e=null;#t=null;#r=null;#n=null;#s=null;#a="";#i=null;#o=!1;#u=null;#l=!1;#h=!1;static _type="stamp";static _editorType=ht.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#s=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Je.initialize(e,n)}static isHandlingMimeForPasting(e){return uv.includes(e)}static paste(e,n){n.pasteEditor({mode:ht.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#d(e,n=!1){if(!e){this.remove();return}this.#e=e.bitmap,n||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#a=e.file.name),this.#p()}#f(){if(this.#r=null,this._uiManager.enableWaiting(!1),!!this.#i){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:s}=e||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:a,height:s,channels:i.length/(a*s)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),n&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#d(r,!0)).finally(()=>this.#f());return}if(this.#n){const r=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#d(i)).finally(()=>this.#f());return}if(this.#s){const r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#r=this._uiManager.imageManager.getFromFile(r).then(i=>this.#d(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=uv.join(",");const n=this._uiManager._signal;this.#r=new Promise(r=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(i)}r()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#i?.remove(),this.#i=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#i===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#r||this.#e||this.#n||this.#s||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#t=r,i&&(this.#e=i),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#u!==null&&clearTimeout(this.#u);const e=200;this.#u=setTimeout(()=>{this.#u=null,this.#m()},e)}#p(){const{div:e}=this;let{width:n,height:r}=this.#e;const[i,a]=this.pageDimensions,s=.75;if(this.width)n=this.width*i,r=this.height*a;else if(n>s*i||r>s*a){const c=Math.min(s*i/n,s*a/r);n*=c,r*=c}this._uiManager.enableWaiting(!1);const l=this.#i=document.createElement("canvas");l.setAttribute("role","img"),this.addContainer(l),this.width=n/i,this.height=r/a,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,n,r=!1){e||(e=224);const{width:i,height:a}=this.#e,s=new Aa;let l=this.#e,c=i,d=a,h=null;if(n){if(i>n||a>n){const j=Math.min(n/i,n/a);c=Math.floor(i*j),d=Math.floor(a*j)}h=document.createElement("canvas");const b=h.width=Math.ceil(c*s.sx),y=h.height=Math.ceil(d*s.sy);this.#l||(l=this.#c(b,y));const x=h.getContext("2d");x.filter=this._uiManager.hcmFilter;let w="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":Pz.isDarkMode&&(w="#8f8f9d",E="#42414d");const T=15,C=T*s.sx,N=T*s.sy,P=new OffscreenCanvas(C*2,N*2),k=P.getContext("2d");k.fillStyle=w,k.fillRect(0,0,C*2,N*2),k.fillStyle=E,k.fillRect(0,0,C,N),k.fillRect(C,N,C,N),x.fillStyle=x.createPattern(P,"repeat"),x.fillRect(0,0,b,y),x.drawImage(l,0,0,l.width,l.height,0,0,b,y)}let p=null;if(r){let b,y;if(s.symmetric&&l.width<e&&l.height<e)b=l.width,y=l.height;else if(l=this.#e,i>e||a>e){const E=Math.min(e/i,e/a);b=Math.floor(i*E),y=Math.floor(a*E),this.#l||(l=this.#c(b,y))}const w=new OffscreenCanvas(b,y).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,b,y),p={width:b,height:y,data:w.getImageData(0,0,b,y).data}}return{canvas:h,width:c,height:d,imageData:p}}#c(e,n){const{width:r,height:i}=this.#e;let a=r,s=i,l=this.#e;for(;a>2*e||s>2*n;){const c=a,d=s;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),s>2*n&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const h=new OffscreenCanvas(a,s);h.getContext("2d").drawImage(l,0,0,c,d,0,0,a,s),l=h.transferToImageBitmap()}return l}#m(){const[e,n]=this.parentDimensions,{width:r,height:i}=this,a=new Aa,s=Math.ceil(r*e*a.sx),l=Math.ceil(i*n*a.sy),c=this.#i;if(!c||c.width===s&&c.height===l)return;c.width=s,c.height=l;const d=this.#l?this.#e:this.#c(s,l),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,s,l)}#b(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#e,n.getContext("2d").drawImage(this.#e,0,0),n.toDataURL()}if(this.#l){const[n,r]=this.pageDimensions,i=Math.round(this.width*n*Iu.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Iu.PDF_TO_CSS_UNITS),s=new OffscreenCanvas(i,a);return s.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,a),s.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,n,r){let i=null,a=!1;if(e instanceof sR){const{data:{rect:w,rotation:E,id:T,structParent:C,popupRef:N,richText:P,contentsObj:k,creationDate:j,modificationDate:D},container:H,parent:{page:{pageNumber:Y}},canvas:X}=e;let z,K;X?(delete e.canvas,{id:z,bitmap:K}=r.imageManager.getFromCanvas(H.id,X),X.remove()):(a=!0,e._hasNoCanvas=!0);const ce=(await n._structTree.getAriaAttributes(`${gu}${T}`))?.get("aria-label")||"";i=e={annotationType:ht.STAMP,bitmapId:z,bitmap:K,pageIndex:Y-1,rect:w.slice(0),rotation:E,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:ce},isSvg:!1,structParent:C,popupRef:N,richText:P,comment:k?.str||null,creationDate:j,modificationDate:D}}const s=await super.deserialize(e,n,r),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:h,isSvg:p,accessibilityData:b}=e;a?(r.addMissingCanvas(e.id,s),s.#o=!0):h&&r.imageManager.isValidId(h)?(s.#t=h,c&&(s.#e=c)):s.#n=d,s.#l=p;const[y,x]=s.pageDimensions;return s.width=(l[2]-l[0])/y,s.height=(l[3]-l[1])/x,b&&(s.altTextData=b),s._initialData=i,e.comment&&s.setCommentData(e),s.#h=!!i,s}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(r),e)return r.bitmapUrl=this.#b(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=this.#x(r);return l.isSame?null:(l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(n===null)return r;n.stamps||=new Map;const s=this.#l?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(this.#t))n.stamps.set(this.#t,{area:s,serialized:r}),r.bitmap=this.#b(!1);else if(this.#l){const l=n.stamps.get(this.#t);s>l.area&&(l.area=s,l.serialized.bitmap.close(),l.serialized.bitmap=this.#b(!1))}return r}#x(e){const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=e.pageIndex===n,a=(e.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Qa{#e;#t=!1;#r=null;#n=null;#s=null;#a=new Map;#i=!1;#o=!1;#u=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#p=-1;#c;static _initialized=!1;static#m=new Map([Vn,tE,cq,vn,ma].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:a,annotationLayer:s,drawLayer:l,textLayer:c,viewport:d,l10n:h}){const p=[...Qa.#m.values()];if(!Qa._initialized){Qa._initialized=!0;for(const b of p)b.initialize(h,e)}e.registerEditorTypes(p),this.#c=e,this.pageIndex=n,this.div=r,this.#e=a,this.#r=s,this.viewport=d,this.#d=c,this.drawLayer=l,this._structTree=i,this.#c.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#c.getMode()===ht.NONE}updateToolbar(e){this.#c.updateToolbar(e)}updateMode(e=this.#c.getMode()){switch(this.#w(),e){case ht.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ht.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ht.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===ht.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const r of Qa.#m.values())n.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#c.setEditingState(e)}addCommands(e){this.#c.addCommands(e)}cleanUndoStack(e){this.#c.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#r?.togglePointerEvents(e)}get#b(){return this.#a.size!==0?this.#a.values():this.#c.getEditors(this.pageIndex)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const r of this.#b)r.enableEditing(),r.show(!0),r.annotationElementId&&(this.#c.removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const n=this.#r;if(n)for(const r of n.getEditableAnnotations()){if(r.hide(),this.#c.isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}this.#u=!1,this.#c._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const i=this.#c.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",a=>{const{clientX:l,clientY:c,timeStamp:d}=a,h=this.#p;if(d-h>500){this.#p=d;return}this.#p=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const b=document.elementsFromPoint(l,c);if(p.toggle("getElements",!1),!this.div.contains(b[0]))return;let y;const x=new RegExp(`^${Jd}[0-9]+$`);for(const E of b)if(x.test(E.id)){y=E.id;break}if(!y)return;const w=this.#a.get(y);w?.annotationElementId===null&&(a.stopPropagation(),a.preventDefault(),w.dblclick(a))},{signal:i,capture:!0})}const e=this.#r,n=[];if(e){const i=new Map,a=new Map;for(const l of this.#b){if(l.disableEditing(),!l.annotationElementId){n.push(l);continue}if(l.serialize()!==null){i.set(l.annotationElementId,l);continue}else a.set(l.annotationElementId,l);this.getEditableAnnotation(l.annotationElementId)?.show(),l.remove()}const s=e.getEditableAnnotations();for(const l of s){const{id:c}=l.data;if(this.#c.isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let d=a.get(c);if(d){d.resetAnnotationElement(l),d.show(!1),l.show();continue}d=i.get(c),d&&(this.#c.addChangedExistingAnnotation(d),d.renderAnnotationElement(l)&&d.show(!1)),l.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:r}=this.div;for(const i of Qa.#m.values())r.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(n),this.#o=!1}getEditableAnnotation(e){return this.#r?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#c.getActive()!==e&&this.#c.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#c.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#x.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#x(e){this.#c.unselectAll();const{target:n}=e;if(n===this.#d.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#d.div.contains(n)){const{isMac:r}=ur.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#c.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),vn.startHighlighting(this,this.#c.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#c._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#c.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#a.set(e.id,e);const{annotationElementId:n}=e;n&&this.#c.isDeletedAnnotationElement(n)&&this.#c.removeDeletedAnnotationElement(e)}detach(e){this.#a.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#c.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#c.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#c.addDeletedAnnotationElement(e.annotationElementId),Je.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#c.addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#c.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#c._signal}),n.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:n,undo:r,mustExec:!1})}getEditorByUID(e){for(const n of this.#a.values())if(n.uid===e)return n;return null}getNextId(){return this.#c.getId()}get#y(){return Qa.#m.get(this.#c.getMode())}combinedSignal(e){return this.#c.combinedSignal(e)}#T(e){const n=this.#y;return n?new n.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await this.#c.updateMode(e.mode);const{offsetX:r,offsetY:i}=this.#A(),a=this.getNextId(),s=this.#T({parent:this,id:a,x:r,y:i,uiManager:this.#c,isCentered:!0,...n});s&&this.add(s)}async deserialize(e){return await Qa.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#c)||null}createAndAddNewEditor(e,n,r={}){const i=this.getNextId(),a=this.#T({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#c,isCentered:n,...r});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:e,y:n,width:r,height:i}=this.boundingClientRect,a=Math.max(0,e),s=Math.max(0,n),l=Math.min(window.innerWidth,e+r),c=Math.min(window.innerHeight,n+i),d=(a+l)/2-e,h=(s+c)/2-n,[p,b]=this.viewport.rotation%180===0?[d,h]:[h,d];return{offsetX:p,offsetY:b}}addNewEditor(e={}){this.createAndAddNewEditor(this.#A(),!0,e)}setSelected(e){this.#c.setSelected(e)}toggleSelected(e){this.#c.toggleSelected(e)}unselect(e){this.#c.unselect(e)}pointerup(e){const{isMac:n}=ur.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!this.#i||(this.#i=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const r=this.#c.getMode();if(r===ht.STAMP||r===ht.SIGNATURE){this.#c.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#c.getMode()===ht.HIGHLIGHT&&this.enableTextSelection(),this.#i){this.#i=!1;return}const{isMac:n}=ur.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(this.#i=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const r=this.#c.getActive();this.#t=!r||r.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#c,!1,e);return}this.#c.setCurrentDrawingSession(this),this.#l=new AbortController;const n=this.#c.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(this.#h=null,this.commitOrRemove())},{signal:n}),this.#y.startDrawing(this,this.#c,!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&(this.#h=n);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#c.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,n,r){const i=this.#c.findParent(n,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#c.getActive()?.parent===this&&(this.#c.commitOrRemove(),this.#c.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#a.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#a.clear(),this.#c.removeLayer(this)}#w(){for(const e of this.#a.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,al(this.div,e);for(const n of this.#c.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){this.#c.commitOrRemove(),this.#w();const n=this.viewport.rotation,r=e.rotation;if(this.viewport=e,al(this.div,{rotation:r}),n!==r)for(const i of this.#a.values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return this.#c.viewParameters.realScale}}class ar{#e=null;#t=new Map;#r=new Map;static#n=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const n of this.#t.values())n.remove(),e.append(n);this.#e=e}}static get _svgFactory(){return bt(this,"_svgFactory",new mp)}static#s(e,[n,r,i,a]){const{style:s}=e;s.top=`${100*r}%`,s.left=`${100*n}%`,s.width=`${100*i}%`,s.height=`${100*a}%`}#a(){const e=ar._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#i(e,n){const r=ar._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${n}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const a=ar._svgFactory.createElement("use");return r.append(a),a.setAttribute("href",`#${n}`),a.classList.add("clip"),i}#o(e,n){for(const[r,i]of Object.entries(n))i===null?e.removeAttribute(r):e.setAttribute(r,i)}draw(e,n=!1,r=!1){const i=ar.#n++,a=this.#a(),s=ar._svgFactory.createElement("defs");a.append(s);const l=ar._svgFactory.createElement("path");s.append(l);const c=`path_p${this.pageIndex}_${i}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#r.set(i,l);const d=r?this.#i(s,c):null,h=ar._svgFactory.createElement("use");return a.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(a,e),this.#t.set(i,a),{id:i,clipPathId:`url(#${d})`}}drawOutline(e,n){const r=ar.#n++,i=this.#a(),a=ar._svgFactory.createElement("defs");i.append(a);const s=ar._svgFactory.createElement("path");a.append(s);const l=`path_p${this.pageIndex}_${r}`;s.setAttribute("id",l),s.setAttribute("vector-effect","non-scaling-stroke");let c;if(n){const p=ar._svgFactory.createElement("mask");a.append(p),c=`mask_p${this.pageIndex}_${r}`,p.setAttribute("id",c),p.setAttribute("maskUnits","objectBoundingBox");const b=ar._svgFactory.createElement("rect");p.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const y=ar._svgFactory.createElement("use");p.append(y),y.setAttribute("href",`#${l}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const d=ar._svgFactory.createElement("use");i.append(d),d.setAttribute("href",`#${l}`),c&&d.setAttribute("mask",`url(#${c})`);const h=d.cloneNode();return i.append(h),d.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(r,i),r}finalizeDraw(e,n){this.#r.delete(e),this.updateProperties(e,n)}updateProperties(e,n){if(!n)return;const{root:r,bbox:i,rootClass:a,path:s}=n,l=typeof e=="number"?this.#t.get(e):e;if(l){if(r&&this.#o(l,r),i&&ar.#s(l,i),a){const{classList:c}=l;for(const[d,h]of Object.entries(a))c.toggle(d,h)}if(s){const d=l.firstChild.firstChild;this.#o(d,s)}}}updateParent(e,n){if(n===this)return;const r=this.#t.get(e);r&&(n.#e.append(r),this.#t.delete(e),n.#t.set(e,r))}remove(e){this.#r.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#r.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:gv};globalThis.pdfjsLib={AbortException:so,AnnotationEditorLayer:Qa,AnnotationEditorParamsType:Nt,AnnotationEditorType:ht,AnnotationEditorUIManager:oo,AnnotationLayer:eE,AnnotationMode:to,AnnotationType:Cn,applyOpacity:Rz,build:U$,ColorPicker:Ii,createValidAbsoluteUrl:CD,CSSConstants:Dz,DOMSVGFactory:mp,DrawLayer:ar,FeatureTest:ur,fetchData:Nh,findContrastColor:Iz,getDocument:QD,getFilenameFromUrl:Nz,getPdfFilenameFromUrl:Cz,getRGB:Oh,getUuid:jD,getXfaPageViewport:kz,GlobalWorkerOptions:_u,ImageKind:Xm,InvalidPDFException:ov,isDataScheme:vg,isPdfFile:qw,isValidExplicitDest:Yz,MathClamp:Sr,noContextMenu:Hi,normalizeUnicode:Sz,OPS:eh,OutputScale:Aa,PasswordResponses:pz,PDFDataRangeTransport:ZD,PDFDateString:lv,PDFWorker:nh,PermissionFlag:mz,PixelsPerInch:Iu,RenderingCancelledException:$w,renderRichText:RD,ResponseException:hp,setLayerDimensions:al,shadow:bt,SignatureExtractor:pu,stopEvent:bn,SupportedImageMimeTypes:uv,TextLayer:Er,TouchManager:wg,updateUrlHash:OD,Util:Ve,VerbosityLevel:bg,version:tR,XfaLayer:DD};_u.workerSrc=`https://unpkg.com/pdfjs-dist@${tR}/build/pdf.worker.min.mjs`;const Xs="https://yu.xingke888.com";function dq(){const t=co(),{user:e}=ka(),[n,r]=A.useState(null),[i,a]=A.useState(""),[s,l]=A.useState(`<image>
<|grounding|>Convert the document to markdown.`),[c,d]=A.useState(!1),[h,p]=A.useState(!1),[b,y]=A.useState(""),[x,w]=A.useState(""),[E,T]=A.useState(!1),[C,N]=A.useState(""),[P,k]=A.useState([]),[j,D]=A.useState(null),[H,Y]=A.useState(""),[X,z]=A.useState({step:0,message:"",percentage:0}),[K,ce]=A.useState(!1),[te,W]=A.useState(!1),[R,B]=A.useState({step:0,message:"",percentage:0}),[re,le]=A.useState([]),[M,U]=A.useState(!1),[Q,I]=A.useState(new Set),[oe,$]=A.useState(!1),[ie,me]=A.useState(null),[be,J]=A.useState(!1),[Oe,Be]=A.useState(!1),se=A.useRef(new Set),ze=A.useRef(new Set),Fe=A.useRef(new Map),tt=async pe=>{try{console.log(" PDF...");const ke=await pe.arrayBuffer(),ue=await QD({data:ke}).promise;console.log(` PDF: ${ue.numPages}`);const _e=Math.min(ue.numPages,5);for(let Me=1;Me<=_e;Me++){const Mt=(await(await ue.getPage(Me)).getTextContent()).items.map(m0=>m0.str).join(" "),mn=/<table|<tr|<td/i.test(Mt),Rn=/||||||/i.test(Mt),dr=(Mt.match(/\d/g)||[]).length,As=Mt.length,Ss=As>0?dr/As:0;if(console.log(` ${Me}: =${As}, =${Ss.toFixed(2)}, =${Rn}`),mn||Rn&&Ss>.15)return console.log(` ${Me}`),!0}return console.log(" "),!1}catch(ke){return console.error("PDF:",ke),!0}},ee=async pe=>{const ke=pe.target.files?.[0];if(ke){if(ke.type!=="application/pdf"){alert("PDF");return}ke.createdAt=new Date().toISOString(),r(ke);const ue=URL.createObjectURL(ke);if(N(ue),p(!0),!await tt(ke)){alert("PDF"),r(null),N(""),p(!1);return}console.log(" PDF..."),ye(ke)}},ye=async pe=>{p(!0),T(!1),D(null),a(""),y(""),w(""),$(!1),J(!1),B({step:0,message:"",percentage:0});try{const ke=new FormData;ke.append("file",pe);const _e=await(await fetch(`${Xs}/api/upload`,{method:"POST",body:ke})).json();_e.status==="success"?(a(_e.file_path),p(!1)):(p(!1),r(null),alert(""))}catch(ke){console.error("Upload error:",ke),p(!1),r(null),alert("")}},He=()=>{r(null),N(""),a(""),T(!1),D(null),y(""),w(""),z({step:0,message:""}),$(!1),J(!1),B({step:0,message:"",percentage:0})},De=async()=>{if(e?.id)try{console.log(" ...");const ke=await(await fetch(`/api/ocr/documents/pending/?user_id=${e.id}`)).json();if(ke.status==="success"&&ke.count>0){console.log(`  ${ke.count} `);const ue=ke.data.map(Me=>{const lt={ocr_pending:5,pending:10,extracting_basic_info:20,basic_info_completed:30,extracting_tablesummary:40,tablesummary_completed:50,extracting_table:60,table_completed:70,extracting_wellness_table:75,wellness_table_completed:80,extracting_summary:90,all_completed:100}[Me.processing_stage]||10;let Mt="running";return Me.processing_stage==="all_completed"||Me.status==="completed"?Mt="finished":lt>=10&&lt<100&&(Mt="processing"),{task_id:Me.id.toString(),file_name:Me.file_name,file_size:0,state:Mt,progress:lt,created_at:Me.created_at,processing_stage:Me.processing_stage,result_dir:null}});le(ue),Ue(ue),ue.filter(Me=>Me.state!=="finished").length>0&&U(!0)}else console.log(" ")}catch(pe){console.error(" :",pe)}};A.useEffect(()=>{const pe=localStorage.getItem("backgroundTasks");if(pe){const ke=JSON.parse(pe);le(ke),ke.forEach(ue=>{ue.state!=="finished"&&ue.state!=="error"&&rt(ue.task_id)})}return De(),()=>{Fe.current.forEach((ke,ue)=>{console.log("SSE:",ue),ke.close()}),Fe.current.clear()}},[e]),A.useEffect(()=>{if(Oe){console.log(" ");return}H&&E&&!be&&!K&&(console.log(" OCR"),J(!0),setTimeout(()=>{vr()},1e3))},[H,E,be,K,Oe]);const Ue=pe=>{localStorage.setItem("backgroundTasks",JSON.stringify(pe))},Ge=pe=>{console.log(" :",pe);const ke=setInterval(async()=>{try{const _e=await(await fetch(`${Xs}/api/progress/${pe}`)).json();if(_e.status==="success"){const Me=_e.progress||0;console.log(`: ${Me}%`),z({step:Me>=100?4:Me>=60?3:Me>=30?2:1,message:Me>=100?"":`... ${Me}%`,percentage:Me}),Ae(pe,{progress:Me,state:_e.state==="finished"?"finished":"running"}),(_e.state==="finished"||Me>=100)&&(clearInterval(ke),console.log(" "),We(pe))}else _e.status==="error"&&(clearInterval(ke),console.error(" :",_e.message),Ae(pe,{state:"error",error:_e.message}))}catch(ue){console.error(":",ue)}},5e3);setTimeout(()=>{clearInterval(ke),console.log(" ")},3e5)},nt=pe=>{Fe.current.has(pe)&&(console.log("SSE:",pe),Fe.current.get(pe).close());const ke=`${Xs}/api/stream/progress/${pe}`;console.log("SSE:",ke);const ue=new EventSource(ke);let _e=!1;return ue.onopen=()=>{console.log("SSE:",pe)},ue.onmessage=Me=>{try{const vt=JSON.parse(Me.data);if(console.log("SSE:",vt),vt.task_id===pe){const lt=vt.progress||0;z(Mt=>({step:lt>=100?4:lt>=60?3:lt>=30?2:1,message:lt>=100?"":`... ${lt}%`,percentage:lt})),Ae(pe,{progress:lt,state:lt>=100?"finished":"running"}),lt>=100&&!_e&&(_e=!0,console.log(":",pe),We(pe),ue.close(),Fe.current.delete(pe))}}catch(vt){console.error("SSE:",vt)}},ue.onerror=Me=>{console.error("SSE:",Me),ue.close(),Fe.current.delete(pe),console.log(" SSE:",pe),Ge(pe)},Fe.current.set(pe,ue),ue},rt=async pe=>{try{const ue=await(await fetch(`${Xs}/api/progress/${pe}`)).json();ue.status==="success"&&(ue.state==="finished"?We(pe):ue.state!=="error"&&nt(pe))}catch(ke){console.error(":",ke)}},We=async pe=>{if(Q.has(pe)){console.log(":",pe);return}I(ke=>new Set(ke).add(pe));try{const ue=await(await fetch(`${Xs}/api/result/${pe}`)).json();ue.status==="success"&&ue.state==="finished"&&(Ae(pe,{state:"finished",progress:100,result_dir:ue.result_dir,completed_at:new Date().toISOString()}),y(_e=>(_e===pe&&(w(ue.result_dir),T(!0),d(!1),z({step:4,message:"",percentage:100}),ot(ue.result_dir)),_e)))}catch(ke){console.error(":",ke),Ae(pe,{state:"error",error:ke.message}),I(ue=>{const _e=new Set(ue);return _e.delete(pe),_e})}},Ae=(pe,ke)=>{le(ue=>{const _e=ue.map(Me=>Me.task_id===pe?{...Me,...ke}:Me);return Ue(_e),_e})},ne=pe=>{le(ke=>{const ue=[...ke,pe];return Ue(ue),ue})},we=pe=>{le(ke=>{const ue=ke.filter(_e=>_e.task_id!==pe);return Ue(ue),ue})},Le=async()=>{if(!i){alert("");return}d(!0),$(!0),T(!1),w(""),z({step:1,message:"...",percentage:0}),Be(!1),J(!1);try{console.log(" 1: ...");const pe=await fetch("/api/ocr/documents/create-pending/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_name:n?.name||"unknown.pdf",user_id:e?.id})});if(!pe.ok){const lt=await pe.json();throw new Error(lt.message||"")}const ue=(await pe.json()).document_id;console.log(` ID: ${ue}`);const _e=`${window.location.protocol}//${window.location.host}/api/ocr/webhook/`;console.log(" 2: OCR...");const vt=await(await fetch(`${Xs}/api/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:i,prompt:s,task_id:ue.toString(),webhook_url:_e})})).json();if(vt.status==="running"&&vt.task_id){const lt=vt.task_id;y(lt),ne({task_id:lt,file_name:n?.name||"",file_size:n?.size||0,state:"running",progress:0,created_at:new Date().toISOString()}),nt(lt),z({step:2,message:"...",percentage:10}),d(!1)}else alert(""),d(!1)}catch(pe){console.error("Parse error:",pe),alert(""),d(!1)}},Ke=async pe=>{me(pe.task_id);try{if(console.log(" :",pe),pe.state!=="finished"&&pe.processing_stage!=="all_completed"){alert(""),me(null);return}const ue=await(await fetch(`/api/ocr/documents/${pe.task_id}/`)).json();if(ue.status==="success"){const _e=ue.data;if(console.log(" :",_e),Be(!0),J(!0),y(pe.task_id),T(!0),z({step:4,message:"",percentage:100}),_e.content&&Y(_e.content),pe.file_name){const Me={name:pe.file_name,size:pe.file_size||0,createdAt:pe.created_at};r(Me)}pe.result_dir?(console.log(" result_dir"),w(pe.result_dir),await ot(pe.result_dir)):(console.log(" "),w("")),U(!1)}else throw new Error(ue.message||"")}catch(ke){console.error(":",ke),alert("")}finally{me(null)}},ot=async pe=>{if(se.current.has(pe)){console.log(" :",pe);return}se.current.add(pe),console.log(" :",pe);try{const ue=await(await fetch(`${Xs}/api/folder?path=${encodeURIComponent(pe)}`)).json();if(console.log("API:",ue),ue.status==="success"){const _e=ue.children||[];console.log(":",_e);const Me=_e.filter(lt=>lt.name.endsWith(".mmd")?!lt.name.endsWith("det.mmd"):!0);console.log(":",Me),k(Me);const vt=Me.find(lt=>lt.type==="file"&&lt.name.endsWith(".mmd"));console.log("mmd:",vt),vt?await Ot(vt):console.warn(".mmd")}}catch(ke){console.error("Error fetching file structure:",ke)}finally{setTimeout(()=>{se.current.delete(pe),console.log(" :",pe)},100)}},Ot=async pe=>{if(pe.type==="file"){const ke=pe.path;if(ze.current.has(ke)){console.log(" :",ke);return}ze.current.add(ke),console.log(" :",pe.name,ke),D(pe);try{const _e=await(await fetch(`${Xs}/api/file/content?path=${encodeURIComponent(ke)}`)).json();console.log("API:",_e);let Me="";_e.status==="success"?Me=_e.content||"":_e.content?Me=_e.content:(console.error("API:",_e),Me=""),console.log(":",Me.length),console.log("100:",Me.substring(0,100)),Y(Me)}catch(ue){console.error(":",ue)}finally{setTimeout(()=>{ze.current.delete(ke),console.log(" :",ke)},100)}}},vr=async()=>{if(!H){alert("");return}ce(!0),W(!1),B({message:"...",percentage:0,processing_stage:"saving"});try{const ke=await(await fetch("/api/ocr/save/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_name:n?.name||j?.name||"unknown.pdf",ocr_content:H,task_id:b,result_dir:x,user_id:e?.id})})).json();if(console.log(":",ke),ke.status==="success"){const ue=ke.document_id;B({message:"...",percentage:5,processing_stage:"pending"});const _e=setInterval(async()=>{try{const Me=await fetch(`/api/ocr/documents/${ue}/status/`);if(Me.status===404){console.error(" "),clearInterval(_e),ce(!1),we(ue.toString()),alert(""),B({step:0,message:"",percentage:0}),z({step:0,message:"",percentage:0}),$(!1);return}const vt=await Me.json();if(vt.status==="success"){const{processing_stage:lt,progress_percentage:Mt}=vt.data,Rn={pending:"...",extracting_basic_info:"...",basic_info_completed:"",extracting_tablesummary:"...",tablesummary_completed:"",extracting_table:"...",table_completed:"",extracting_wellness_table:"...",wellness_table_completed:"",extracting_summary:"...",all_completed:"",error:""}[lt]||"...";B({message:Rn,percentage:Mt,processing_stage:lt}),(lt==="all_completed"||lt==="error")&&(clearInterval(_e),ce(!1),lt==="all_completed"?(W(!0),setTimeout(()=>{W(!1),B({step:0,message:"",percentage:0}),z({step:0,message:"",percentage:0})},5e3)):lt==="error"&&(alert(""),B({step:0,message:"",percentage:0}),z({step:0,message:"",percentage:0})))}}catch(Me){console.error(":",Me)}},3e3);setTimeout(()=>{clearInterval(_e),ce(!1)},3e5)}else alert(`: ${ke.message}`),B({step:0,message:"",percentage:0}),ce(!1)}catch(pe){console.error(":",pe),alert(""),B({step:0,message:"",percentage:0}),ce(!1)}};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-blue-50 to-slate-100",children:[f.jsx("header",{className:"sticky top-0 z-10",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-3 md:py-4",children:[f.jsx("div",{className:"mb-3",children:f.jsx("button",{onClick:()=>t&&t("plan-management"),className:"px-3 md:px-4 py-1.5 md:py-2 bg-white text-blue-600 hover:bg-blue-50 rounded-lg font-medium transition-all text-sm md:text-base whitespace-nowrap shadow-sm border border-gray-200",children:" "})}),f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl text-gray-800 font-bold tracking-wide",children:""}),f.jsx("p",{className:"mt-1 md:mt-2 text-gray-600 text-xs md:text-sm",children:"AI"})]})]})}),M&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden shadow-2xl",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-gray-200 bg-gradient-to-r from-primary-50 to-blue-50",children:[f.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 flex items-center gap-2",children:[f.jsx(ns,{className:"w-6 h-6"}),""]}),f.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-gray-200 rounded-lg transition-all",children:f.jsx(Ru,{className:"w-6 h-6 text-gray-600"})})]}),f.jsx("div",{className:"p-4 md:p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:re.length===0?f.jsxs("div",{className:"text-center py-12 text-gray-500",children:[f.jsx(ns,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),f.jsx("p",{children:""})]}):f.jsx("div",{className:"space-y-4",children:re.map(pe=>f.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 rounded-xl p-4 border border-primary-200 hover:shadow-md transition-all",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:pe.file_name}),f.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",pe.task_id]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[pe.state==="running"&&f.jsxs("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs font-semibold rounded-full flex items-center gap-1",children:[f.jsx(Bt,{className:"w-3 h-3 animate-spin"}),""]}),pe.state==="finished"&&f.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full flex items-center gap-1",children:[f.jsx(Qd,{className:"w-3 h-3"}),""]}),pe.state==="error"&&f.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:""})]})]}),pe.state==="running"&&f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-xs text-gray-600",children:""}),f.jsxs("span",{className:"text-xs font-semibold text-primary-700",children:[pe.progress||0,"%"]})]}),f.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-primary-600 to-blue-600 transition-all duration-300",style:{width:`${pe.progress||0}%`}})})]}),f.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[f.jsxs("span",{children:[": ",new Date(pe.created_at).toLocaleString("zh-CN")]}),f.jsxs("div",{className:"flex gap-2",children:[pe.state==="finished"&&f.jsx("button",{onClick:()=>Ke(pe),disabled:ie===pe.task_id,className:`px-3 py-1 rounded-lg transition-all flex items-center gap-1 ${ie===pe.task_id?"bg-gray-400 text-white cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:ie===pe.task_id?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"w-4 h-4 animate-spin"}),""]}):""}),f.jsx("button",{onClick:()=>we(pe.task_id),className:"px-3 py-1 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all",children:""})]})]})]},pe.task_id))})})]})}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 md:py-8",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[f.jsxs("div",{className:"space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>document.getElementById("file-input")?.click(),disabled:h,className:"flex-1 px-3 md:px-4 py-2.5 md:py-3 bg-gradient-to-r from-primary-50 to-blue-50 border-2 border-dashed border-primary-300 hover:border-primary-500 rounded-lg transition-all hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:h?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"h-4 w-4 md:h-5 md:w-5 animate-spin"}),f.jsx("span",{className:"hidden sm:inline",children:"..."}),f.jsx("span",{className:"sm:hidden",children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(cp,{className:"h-4 w-4 md:h-5 md:w-5"}),f.jsx("span",{className:"hidden sm:inline",children:"PDF"}),f.jsx("span",{className:"sm:hidden",children:"PDF"})]})}),f.jsx("input",{id:"file-input",type:"file",accept:"application/pdf,.pdf",className:"hidden",onChange:ee,disabled:h}),f.jsx("button",{onClick:He,disabled:!n,className:"px-3 md:px-4 py-2.5 md:py-3 bg-white hover:bg-red-50 border-2 border-gray-300 hover:border-red-300 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:f.jsx(zw,{className:"h-4 w-4 md:h-5 md:w-5"})})]}),f.jsx("div",{className:"bg-white rounded-xl border-2 border-primary-200 shadow-lg p-3 md:p-6 h-[120px] md:h-[500px] overflow-auto",children:C?f.jsx("div",{className:"w-full h-full",children:n?.type==="application/pdf"?f.jsxs(f.Fragment,{children:[f.jsx("iframe",{src:C,className:"hidden md:block w-full h-full rounded-lg border border-gray-300",title:"PDF Preview"}),f.jsxs("div",{className:"md:hidden flex items-center justify-start h-full text-left gap-3 px-2",children:[f.jsx(Vr,{className:"h-10 w-10 text-primary-500 flex-shrink-0"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-0.5",children:"PDF "}),f.jsx("p",{className:"text-xs text-gray-500 truncate",children:n?.name})]})]})]}):f.jsx("div",{className:"flex items-center justify-center h-full",children:f.jsx("img",{src:C,alt:"Preview",className:"max-w-full max-h-full object-contain rounded-lg shadow-md"})})}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[f.jsx(cp,{className:"h-8 w-8 md:h-16 md:w-16 mb-1 md:mb-4 opacity-30"}),f.jsx("p",{className:"text-xs md:text-base",children:""})]})})]}),f.jsxs("div",{className:"space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:Le,disabled:!n||!i||h||oe,className:"flex-1 px-4 md:px-6 py-3 md:py-4 bg-gradient-to-r from-primary-600 to-blue-600 text-white rounded-xl shadow-lg hover:from-primary-700 hover:to-blue-700 hover:shadow-xl transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base md:text-lg",children:c?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"h-5 w-5 animate-spin"}),f.jsx("span",{children:"..."})]}):""}),re.length>0&&f.jsxs("button",{onClick:()=>U(!0),className:"relative px-3 md:px-4 py-3 md:py-4 bg-white border-2 border-primary-500 text-primary-700 hover:bg-primary-50 rounded-xl shadow-lg font-semibold transition-all flex items-center justify-center gap-2 whitespace-nowrap text-sm md:text-base",title:"",children:[f.jsx(ND,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""}),re.filter(pe=>pe.state==="running").length>0&&f.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:re.filter(pe=>pe.state==="running").length})]})]}),re.filter(pe=>pe.state==="running").length>0&&f.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border-2 border-amber-200 p-3 md:p-4",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs("h3",{className:"text-xs md:text-sm font-semibold text-amber-900 flex items-center gap-2",children:[f.jsx(ns,{className:"w-4 h-4"})," (",re.filter(pe=>pe.state==="running").length,")"]})}),f.jsx("div",{className:"mb-3 p-2 md:p-3 bg-blue-50 border border-blue-200 rounded-lg",children:f.jsxs("p",{className:"text-xs md:text-sm text-blue-800 flex items-center gap-2",children:[f.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),f.jsxs("span",{className:"flex-1",children:[f.jsx("strong",{className:"font-semibold",children:""}),""]})]})}),f.jsx("div",{className:"space-y-2",children:re.filter(pe=>pe.state==="running").map((pe,ke)=>f.jsxs("div",{className:"bg-white rounded-lg p-2 md:p-3 border border-amber-200",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-xs md:text-sm font-medium text-gray-800 truncate",title:pe.file_name,children:[ke+1,". ",pe.file_name]}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[": ",pe.progress||0,"%"]})]}),f.jsx("button",{onClick:()=>we(pe.task_id),className:"p-1 hover:bg-red-100 rounded transition-all flex-shrink-0",title:"",children:f.jsx(Ru,{className:"w-4 h-4 text-red-600"})})]}),f.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-1.5 overflow-hidden",children:f.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-blue-600 h-full transition-all duration-500",style:{width:`${pe.progress||0}%`}})})]},pe.task_id))})]}),c&&f.jsxs("div",{className:"bg-primary-50 rounded-xl border-2 border-primary-200 p-3 md:p-4",children:[f.jsx("h3",{className:"text-xs md:text-sm font-semibold text-navy-800 mb-2 md:mb-3",children:""}),f.jsxs("div",{className:"mb-3 md:mb-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-xs text-gray-600",children:""}),f.jsxs("span",{className:"text-xs font-bold text-primary-700",children:[X.percentage||0,"%"]})]}),f.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-primary-600 via-blue-600 to-navy-600 transition-all duration-500",style:{width:`${X.percentage||0}%`}})})]}),f.jsx("div",{className:"space-y-1.5 md:space-y-2",children:[{step:1,label:""},{step:2,label:""},{step:3,label:""},{step:4,label:""}].map(({step:pe,label:ke})=>f.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[X.step>pe?f.jsx("div",{className:"h-4 w-4 md:h-5 md:w-5 bg-green-500 rounded-full flex items-center justify-center",children:f.jsx("svg",{className:"h-2.5 w-2.5 md:h-3 md:w-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):X.step===pe?f.jsx(Bt,{className:"h-4 w-4 md:h-5 md:w-5 text-primary-600 animate-spin"}):f.jsx("div",{className:"h-4 w-4 md:h-5 md:w-5 border-2 border-gray-300 rounded-full"}),f.jsx("span",{className:`text-xs md:text-sm ${X.step>=pe?"text-gray-900 font-medium":"text-gray-500"}`,children:ke})]},pe))}),X.message&&f.jsx("p",{className:"mt-2 md:mt-3 text-xs md:text-sm text-primary-700 font-semibold",children:X.message})]}),E&&f.jsx("div",{className:"space-y-3 md:space-y-4",children:f.jsxs("div",{className:"bg-white rounded-xl border-2 border-primary-200 shadow-lg",children:[f.jsxs("div",{className:"bg-gradient-to-r from-primary-100 to-blue-100 px-3 md:px-4 py-2 md:py-3 border-b border-primary-200",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0 mb-2",children:[f.jsx("h3",{className:"text-xs md:text-sm font-semibold text-gray-700",children:" OCR"}),te&&f.jsxs("div",{className:"w-full sm:w-auto px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-semibold flex items-center justify-center gap-2 text-sm bg-green-500 text-white",children:[f.jsx(Qd,{className:"h-4 w-4"}),f.jsx("span",{children:""})]})]}),(c||K||R.percentage>0&&R.processing_stage!=="all_completed"||X.percentage>0&&X.percentage<100&&oe)&&f.jsxs("div",{className:"mt-3 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200 shadow-sm",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("h4",{className:"text-sm font-bold text-gray-800 flex items-center gap-2",children:[f.jsx(ns,{className:"h-4 w-4 text-blue-600"}),""]}),f.jsxs("span",{className:"text-sm font-bold text-blue-700",children:[(()=>{const pe=E?20:X.percentage*.2,ke=R.percentage?R.percentage*.8:0;return Math.round(pe+ke)})(),"%"]})]}),f.jsx("div",{className:"mb-4",children:f.jsx("div",{className:"h-2 bg-white rounded-full overflow-hidden shadow-inner",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 transition-all duration-500 ease-out",style:{width:`${(()=>{const pe=E?20:X.percentage*.2,ke=R.percentage?R.percentage*.8:0;return Math.round(pe+ke)})()}%`}})})}),f.jsx("div",{className:"space-y-2.5",children:[{id:"ocr",label:" OCR",checkCompleted:()=>E&&H,checkProcessing:()=>c||X.percentage>0&&X.percentage<100&&!E},{id:"save",label:" ",processingStages:["saving"],checkCompleted:pe=>pe&&pe!=="saving"&&pe!=="",checkEnabled:()=>E&&H},{id:"basic_info",label:" ",processingStages:["extracting_basic_info"],completedStages:["basic_info_completed","extracting_tablesummary","tablesummary_completed","extracting_table","table_completed","extracting_wellness_table","wellness_table_completed","extracting_summary","all_completed"]},{id:"tablesummary",label:" ",processingStages:["extracting_tablesummary"],completedStages:["tablesummary_completed","extracting_table","table_completed","extracting_wellness_table","wellness_table_completed","extracting_summary","all_completed"]},{id:"table1",label:" ",processingStages:["extracting_table"],completedStages:["table_completed","extracting_wellness_table","wellness_table_completed","extracting_summary","all_completed"]},{id:"table2",label:" ",processingStages:["extracting_wellness_table"],completedStages:["wellness_table_completed","extracting_summary","all_completed"]},{id:"summary",label:" ",processingStages:["extracting_summary"],completedStages:["all_completed"]}].map(({id:pe,label:ke,checkCompleted:ue,checkProcessing:_e,checkEnabled:Me,processingStages:vt,completedStages:lt})=>{const Mt=R.processing_stage||"";let mn,Rn,dr;return ue&&_e?(mn=ue(),Rn=_e(),dr=!1):ue?(mn=ue(Mt),Rn=vt&&vt.includes(Mt),dr=Me?!Me():!1):(mn=lt&&lt.includes(Mt),Rn=vt&&vt.includes(Mt),dr=!1),f.jsxs("div",{className:`flex items-center gap-3 p-2.5 rounded-lg transition-all duration-300 ${mn?"bg-green-100 border border-green-300":Rn?"bg-blue-100 border border-blue-300 shadow-md":dr?"bg-gray-50 border border-gray-200 opacity-60":"bg-white border border-gray-200"}`,children:[mn?f.jsx("div",{className:"h-6 w-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 shadow-sm",children:f.jsx("svg",{className:"h-4 w-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):Rn?f.jsx(Bt,{className:"h-6 w-6 text-blue-600 animate-spin flex-shrink-0"}):f.jsx("div",{className:"h-6 w-6 border-2 border-gray-300 rounded-full flex-shrink-0 bg-white"}),f.jsx("span",{className:`text-sm flex-1 ${mn?"text-green-800 font-medium line-through":Rn?"text-blue-900 font-semibold":"text-gray-600"}`,children:ke}),mn&&f.jsx("span",{className:"text-xs px-2 py-0.5 bg-green-500 text-white rounded-full font-medium",children:""}),Rn&&f.jsx("span",{className:"text-xs px-2 py-0.5 bg-blue-500 text-white rounded-full font-medium animate-pulse",children:""})]},pe)})}),R.message&&f.jsx("div",{className:"mt-3 p-2 bg-white rounded-lg border border-blue-200",children:f.jsx("p",{className:"text-xs text-blue-800 font-medium text-center",children:R.message})})]}),f.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-600 mt-3",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"font-medium",children:"ID:"}),f.jsx("span",{className:"font-mono",title:b,children:b||"-"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"font-medium whitespace-nowrap",children:":"}),f.jsx("span",{children:n?.name||"-"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"font-medium",children:":"}),f.jsx("span",{children:n?.createdAt?new Date(n.createdAt).toLocaleString("zh-CN"):"-"})]})]})]}),f.jsx("div",{className:"p-3 md:p-6 min-h-[300px] md:min-h-[400px] max-h-[500px] md:max-h-[600px] overflow-auto bg-gray-50",children:H?f.jsx("pre",{className:"text-xs md:text-sm text-gray-800 whitespace-pre-wrap font-mono leading-relaxed",children:H}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[f.jsx(Bt,{className:"h-6 w-6 md:h-8 md:w-8 animate-spin mb-2"}),f.jsx("p",{className:"text-sm md:text-base",children:"..."}),f.jsxs("p",{className:"text-xs mt-2",children:["selectedFile: ",j?"":""]}),f.jsxs("p",{className:"text-xs",children:["fileContent length: ",H?.length||0]})]})})]})})]})]})})]})}const ou="https://yu.xingke888.com",hq="wss://yu.xingke888.com";function fq(){const t=co(),{user:e}=ka(),[n,r]=A.useState(null),[i,a]=A.useState(""),[s,l]=A.useState(`<image>
<|grounding|>Convert the document to markdown.`),[c,d]=A.useState(!1),[h,p]=A.useState(!1),[b,y]=A.useState(""),[x,w]=A.useState(""),[E,T]=A.useState(!1),[C,N]=A.useState(""),[P,k]=A.useState([]),[j,D]=A.useState(null),[H,Y]=A.useState(""),[X,z]=A.useState({step:0,message:"",percentage:0}),[K,ce]=A.useState(!1),[te,W]=A.useState(!1),[R,B]=A.useState([]),[re,le]=A.useState(!1),[M,U]=A.useState(null),[Q,I]=A.useState(new Set),[oe,$]=A.useState(!1),[ie,me]=A.useState(null),be=A.useRef(new Set),J=A.useRef(new Set),Oe=Ae=>{const ne=Ae.target.files?.[0];if(ne){ne.createdAt=new Date().toISOString(),r(ne);const we=URL.createObjectURL(ne);N(we),Be(ne)}},Be=async Ae=>{p(!0),T(!1),D(null),a(""),y(""),w(""),$(!1);try{const ne=new FormData;ne.append("file",Ae);const Le=await(await fetch(`${ou}/api/upload`,{method:"POST",body:ne})).json();Le.status==="success"?(a(Le.file_path),p(!1)):(p(!1),r(null),alert(""))}catch(ne){console.error("Upload error:",ne),p(!1),r(null),alert("")}},se=()=>{r(null),N(""),a(""),T(!1),D(null),y(""),w(""),z({step:0,message:""}),$(!1)};A.useEffect(()=>{const Ae=localStorage.getItem("backgroundTasks2");if(Ae){const ne=JSON.parse(Ae);B(ne),ne.forEach(we=>{we.state!=="finished"&&we.state!=="error"&&tt(we.task_id)})}return()=>{M&&M.close()}},[]);const ze=Ae=>{localStorage.setItem("backgroundTasks2",JSON.stringify(Ae))},Fe=Ae=>{const ne=`${hq}/ws/progress/${Ae}`;console.log("WebSocket:",ne);const we=new WebSocket(ne);let Le=!1;return we.onopen=()=>{console.log("WebSocket:",Ae)},we.onmessage=Ke=>{try{const ot=JSON.parse(Ke.data);if(console.log("WebSocket:",ot),ot.task_id===Ae){const Ot=ot.progress||0;z(vr=>({step:Ot>=100?4:Ot>=60?3:Ot>=30?2:1,message:Ot>=100?"":`... ${Ot}%`,percentage:Ot})),ye(Ae,{progress:Ot,state:Ot>=100?"finished":"running"}),Ot>=100&&!Le&&(Le=!0,console.log(":",Ae),ee(Ae),we.close())}}catch(ot){console.error("WebSocket:",ot)}},we.onerror=Ke=>{console.error("WebSocket:",Ke)},we.onclose=()=>{console.log("WebSocket:",Ae)},we},tt=async Ae=>{try{const we=await(await fetch(`${ou}/api/progress/${Ae}`)).json();we.status==="success"&&(we.state==="finished"?ee(Ae):we.state!=="error"&&Fe(Ae))}catch(ne){console.error(":",ne)}},ee=async Ae=>{if(Q.has(Ae)){console.log(":",Ae);return}I(ne=>new Set(ne).add(Ae));try{const we=await(await fetch(`${ou}/api/result/${Ae}`)).json();we.status==="success"&&we.state==="finished"&&(ye(Ae,{state:"finished",progress:100,result_dir:we.result_dir,completed_at:new Date().toISOString()}),y(Le=>(Le===Ae&&(w(we.result_dir),T(!0),d(!1),z({step:4,message:"",percentage:100}),nt(we.result_dir)),Le)))}catch(ne){console.error(":",ne),ye(Ae,{state:"error",error:ne.message}),I(we=>{const Le=new Set(we);return Le.delete(Ae),Le})}},ye=(Ae,ne)=>{B(we=>{const Le=we.map(Ke=>Ke.task_id===Ae?{...Ke,...ne}:Ke);return ze(Le),Le})},He=Ae=>{B(ne=>{const we=[...ne,Ae];return ze(we),we})},De=Ae=>{B(ne=>{const we=ne.filter(Le=>Le.task_id!==Ae);return ze(we),we})},Ue=async()=>{if(!i){alert("");return}d(!0),$(!0),T(!1),w(""),z({step:1,message:"...",percentage:0});try{const ne=await(await fetch(`${ou}/api/start`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:i,prompt:s})})).json();if(ne.status==="running"&&ne.task_id){const we=ne.task_id;y(we),He({task_id:we,file_name:n?.name||"",file_size:n?.size||0,state:"running",progress:0,created_at:new Date().toISOString()});const Le=Fe(we);U(Le),z({step:2,message:"...",percentage:10}),setTimeout(()=>{alert(`


""`),d(!1)},1e3)}else alert(""),d(!1)}catch(Ae){console.error("Parse error:",Ae),alert(""),d(!1)}},Ge=async Ae=>{if(Ae.state==="finished"&&Ae.result_dir){me(Ae.task_id);try{if(y(Ae.task_id),w(Ae.result_dir),T(!0),z({step:4,message:"",percentage:100}),Ae.file_name){const ne={name:Ae.file_name,size:Ae.file_size||0,createdAt:Ae.created_at};r(ne)}await nt(Ae.result_dir),le(!1)}catch(ne){console.error(":",ne),alert("")}finally{me(null)}}else alert("")},nt=async Ae=>{if(be.current.has(Ae)){console.log(" :",Ae);return}be.current.add(Ae),console.log(" :",Ae);try{const we=await(await fetch(`${ou}/api/folder?path=${encodeURIComponent(Ae)}`)).json();if(console.log("API:",we),we.status==="success"){const Le=we.children||[];console.log(":",Le);const Ke=Le.filter(Ot=>Ot.name.endsWith(".mmd")?!Ot.name.endsWith("det.mmd"):!0);console.log(":",Ke),k(Ke);const ot=Ke.find(Ot=>Ot.type==="file"&&Ot.name.endsWith(".mmd"));console.log("mmd:",ot),ot?await rt(ot):console.warn(".mmd")}}catch(ne){console.error("Error fetching file structure:",ne)}finally{setTimeout(()=>{be.current.delete(Ae),console.log(" :",Ae)},100)}},rt=async Ae=>{if(Ae.type==="file"){const ne=Ae.path;if(J.current.has(ne)){console.log(" :",ne);return}J.current.add(ne),console.log(" :",Ae.name,ne),D(Ae);try{const Le=await(await fetch(`${ou}/api/file/content?path=${encodeURIComponent(ne)}`)).json();console.log("API:",Le);let Ke="";Le.status==="success"?Ke=Le.content||"":Le.content?Ke=Le.content:(console.error("API:",Le),Ke=""),console.log(":",Ke.length),console.log("100:",Ke.substring(0,100)),Y(Ke)}catch(we){console.error(":",we)}finally{setTimeout(()=>{J.current.delete(ne),console.log(" :",ne)},100)}}},We=async()=>{if(!H){alert("");return}ce(!0),W(!1);try{const ne=await(await fetch("/api/ocr/save/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_name:n?.name||j?.name||"unknown.pdf",ocr_content:H,task_id:b,result_dir:x,user_id:e?.id})})).json();if(console.log(":",ne),ne.status==="success"){const we=ne.document_id;W(!0),alert(`ID: ${we}

...`),fetch(`/api/ocr/documents/${we}/basic-info/`,{method:"POST"}).then(Le=>Le.json()).then(Le=>{Le.status==="success"?console.log(":",Le.data):console.error(":",Le.message)}).catch(Le=>{console.error(":",Le)}),setTimeout(()=>W(!1),3e3)}else alert(`: ${ne.message}`)}catch(Ae){console.error(":",Ae),alert("")}finally{ce(!1)}};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-100 via-blue-50 to-slate-100",children:[f.jsx("header",{className:"bg-gradient-to-r from-navy-700 via-primary-600 to-navy-700 shadow-lg sticky top-0 z-10 border-b-2 border-primary-500/30",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-2 md:py-3",children:[f.jsx("div",{className:"mb-1",children:f.jsx("button",{onClick:()=>t&&t("home"),className:"px-3 md:px-4 py-1.5 md:py-2 bg-white text-primary-700 hover:bg-blue-50 rounded-lg font-semibold transition-all text-sm md:text-base whitespace-nowrap shadow-md",children:""})}),f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl text-white font-bold tracking-wide drop-shadow-lg",children:" 2.0"}),f.jsx("p",{className:"mt-1 md:mt-2 text-blue-100 text-xs md:text-sm",children:" - AI"})]})]})}),re&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden shadow-2xl",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-gray-200 bg-gradient-to-r from-primary-50 to-blue-50",children:[f.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 flex items-center gap-2",children:[f.jsx(ns,{className:"w-6 h-6"}),""]}),f.jsx("button",{onClick:()=>le(!1),className:"p-2 hover:bg-gray-200 rounded-lg transition-all",children:f.jsx(Ru,{className:"w-6 h-6 text-gray-600"})})]}),f.jsx("div",{className:"p-4 md:p-6 overflow-y-auto max-h-[calc(80vh-80px)]",children:R.length===0?f.jsxs("div",{className:"text-center py-12 text-gray-500",children:[f.jsx(ns,{className:"w-16 h-16 mx-auto mb-4 opacity-30"}),f.jsx("p",{children:""})]}):f.jsx("div",{className:"space-y-4",children:R.map(Ae=>f.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 rounded-xl p-4 border border-primary-200 hover:shadow-md transition-all",children:[f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:Ae.file_name}),f.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",Ae.task_id]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[Ae.state==="running"&&f.jsxs("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 text-xs font-semibold rounded-full flex items-center gap-1",children:[f.jsx(Bt,{className:"w-3 h-3 animate-spin"}),""]}),Ae.state==="finished"&&f.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full flex items-center gap-1",children:[f.jsx(Qd,{className:"w-3 h-3"}),""]}),Ae.state==="error"&&f.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-700 text-xs font-medium rounded-full",children:""})]})]}),Ae.state==="running"&&f.jsxs("div",{className:"mb-3",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-xs text-gray-600",children:""}),f.jsxs("span",{className:"text-xs font-semibold text-primary-700",children:[Ae.progress||0,"%"]})]}),f.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-primary-600 to-blue-600 transition-all duration-300",style:{width:`${Ae.progress||0}%`}})})]}),f.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[f.jsxs("span",{children:[": ",new Date(Ae.created_at).toLocaleString("zh-CN")]}),f.jsxs("div",{className:"flex gap-2",children:[Ae.state==="finished"&&f.jsx("button",{onClick:()=>Ge(Ae),disabled:ie===Ae.task_id,className:`px-3 py-1 rounded-lg transition-all flex items-center gap-1 ${ie===Ae.task_id?"bg-gray-400 text-white cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:ie===Ae.task_id?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"w-4 h-4 animate-spin"}),""]}):""}),f.jsx("button",{onClick:()=>De(Ae.task_id),className:"px-3 py-1 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-all",children:""})]})]})]},Ae.task_id))})})]})}),f.jsx("main",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4 md:py-8",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[f.jsxs("div",{className:"space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>document.getElementById("file-input-2")?.click(),disabled:h,className:"flex-1 px-3 md:px-4 py-2.5 md:py-3 bg-gradient-to-r from-primary-50 to-blue-50 border-2 border-dashed border-primary-300 hover:border-primary-500 rounded-lg transition-all hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm md:text-base",children:h?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"h-4 w-4 md:h-5 md:w-5 animate-spin"}),f.jsx("span",{className:"hidden sm:inline",children:"..."}),f.jsx("span",{className:"sm:hidden",children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(cp,{className:"h-4 w-4 md:h-5 md:w-5"}),f.jsx("span",{className:"hidden sm:inline",children:"PDF / PNG / JPG"}),f.jsx("span",{className:"sm:hidden",children:""})]})}),f.jsx("input",{id:"file-input-2",type:"file",accept:".pdf,.png,.jpg,.jpeg",className:"hidden",onChange:Oe,disabled:h}),f.jsx("button",{onClick:se,disabled:!n,className:"px-3 md:px-4 py-2.5 md:py-3 bg-white hover:bg-red-50 border-2 border-gray-300 hover:border-red-300 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:f.jsx(zw,{className:"h-4 w-4 md:h-5 md:w-5"})})]}),f.jsx("div",{className:"bg-white rounded-xl border-2 border-primary-200 shadow-lg p-4 md:p-6 h-[300px] md:h-[500px] overflow-auto",children:C?f.jsx("div",{className:"flex items-center justify-center",children:n?.type==="application/pdf"?f.jsx("iframe",{src:C,className:"w-full h-[250px] md:h-[450px] rounded-lg border border-gray-300",title:"PDF Preview"}):f.jsx("img",{src:C,alt:"Preview",className:"max-w-full h-auto rounded-lg shadow-md"})}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[f.jsx(cp,{className:"h-12 w-12 md:h-16 md:w-16 mb-3 md:mb-4 opacity-30"}),f.jsx("p",{className:"text-sm md:text-base",children:""})]})})]}),f.jsxs("div",{className:"space-y-3 md:space-y-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:Ue,disabled:!n||!i||h||oe,className:"flex-1 px-4 md:px-6 py-3 md:py-4 bg-gradient-to-r from-primary-600 to-blue-600 text-white rounded-xl shadow-lg hover:from-primary-700 hover:to-blue-700 hover:shadow-xl transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-base md:text-lg",children:c?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"h-5 w-5 animate-spin"}),f.jsx("span",{children:"..."})]}):""}),R.length>0&&f.jsxs("button",{onClick:()=>le(!0),className:"relative px-3 md:px-4 py-3 md:py-4 bg-white border-2 border-primary-500 text-primary-700 hover:bg-primary-50 rounded-xl shadow-lg font-semibold transition-all flex items-center justify-center gap-2 whitespace-nowrap text-sm md:text-base",title:"",children:[f.jsx(ND,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""}),R.filter(Ae=>Ae.state==="running").length>0&&f.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:R.filter(Ae=>Ae.state==="running").length})]})]}),R.filter(Ae=>Ae.state==="running").length>0&&f.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 rounded-xl border-2 border-amber-200 p-3 md:p-4",children:[f.jsx("div",{className:"flex items-center justify-between mb-2",children:f.jsxs("h3",{className:"text-xs md:text-sm font-semibold text-amber-900 flex items-center gap-2",children:[f.jsx(ns,{className:"w-4 h-4"})," (",R.filter(Ae=>Ae.state==="running").length,")"]})}),f.jsx("div",{className:"space-y-2",children:R.filter(Ae=>Ae.state==="running").map((Ae,ne)=>f.jsxs("div",{className:"bg-white rounded-lg p-2 md:p-3 border border-amber-200",children:[f.jsxs("div",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("p",{className:"text-xs md:text-sm font-medium text-gray-800 truncate",title:Ae.file_name,children:[ne+1,". ",Ae.file_name]}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[": ",Ae.progress||0,"%"]})]}),f.jsx("button",{onClick:()=>De(Ae.task_id),className:"p-1 hover:bg-red-100 rounded transition-all flex-shrink-0",title:"",children:f.jsx(Ru,{className:"w-4 h-4 text-red-600"})})]}),f.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-1.5 overflow-hidden",children:f.jsx("div",{className:"bg-gradient-to-r from-primary-600 to-blue-600 h-full transition-all duration-500",style:{width:`${Ae.progress||0}%`}})})]},Ae.task_id))})]}),c&&f.jsxs("div",{className:"bg-primary-50 rounded-xl border-2 border-primary-200 p-3 md:p-4",children:[f.jsx("h3",{className:"text-xs md:text-sm font-semibold text-navy-800 mb-2 md:mb-3",children:""}),f.jsxs("div",{className:"mb-3 md:mb-4",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-xs text-gray-600",children:""}),f.jsxs("span",{className:"text-xs font-bold text-primary-700",children:[X.percentage||0,"%"]})]}),f.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-primary-600 via-blue-600 to-navy-600 transition-all duration-500",style:{width:`${X.percentage||0}%`}})})]}),f.jsx("div",{className:"space-y-1.5 md:space-y-2",children:[{step:1,label:""},{step:2,label:""},{step:3,label:""},{step:4,label:""}].map(({step:Ae,label:ne})=>f.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[X.step>Ae?f.jsx("div",{className:"h-4 w-4 md:h-5 md:w-5 bg-green-500 rounded-full flex items-center justify-center",children:f.jsx("svg",{className:"h-2.5 w-2.5 md:h-3 md:w-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}):X.step===Ae?f.jsx(Bt,{className:"h-4 w-4 md:h-5 md:w-5 text-primary-600 animate-spin"}):f.jsx("div",{className:"h-4 w-4 md:h-5 md:w-5 border-2 border-gray-300 rounded-full"}),f.jsx("span",{className:`text-xs md:text-sm ${X.step>=Ae?"text-gray-900 font-medium":"text-gray-500"}`,children:ne})]},Ae))}),X.message&&f.jsx("p",{className:"mt-2 md:mt-3 text-xs md:text-sm text-primary-700 font-semibold",children:X.message})]}),E&&f.jsx("div",{className:"space-y-3 md:space-y-4",children:f.jsxs("div",{className:"bg-white rounded-xl border-2 border-primary-200 shadow-lg",children:[f.jsxs("div",{className:"bg-gradient-to-r from-primary-100 to-blue-100 px-3 md:px-4 py-2 md:py-3 border-b border-primary-200",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0 mb-2",children:[f.jsx("h3",{className:"text-xs md:text-sm font-semibold text-gray-700",children:" OCR"}),f.jsx("button",{onClick:We,disabled:K||!H||te,className:`w-full sm:w-auto px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2 text-sm shadow-md ${te?"bg-green-500 text-white cursor-not-allowed":"bg-gradient-to-r from-primary-600 to-blue-600 text-white hover:from-primary-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:K?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"h-4 w-4 animate-spin"}),f.jsx("span",{children:"..."})]}):te?f.jsxs(f.Fragment,{children:[f.jsx(Qd,{className:"h-4 w-4"}),f.jsx("span",{children:""})]}):f.jsxs(f.Fragment,{children:[f.jsx(gH,{className:"h-4 w-4"}),f.jsx("span",{children:""})]})})]}),f.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-600",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"font-medium",children:"ID:"}),f.jsx("span",{className:"font-mono",title:b,children:b||"-"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"font-medium whitespace-nowrap",children:":"}),f.jsx("span",{children:n?.name||"-"})]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"font-medium",children:":"}),f.jsx("span",{children:n?.createdAt?new Date(n.createdAt).toLocaleString("zh-CN"):"-"})]})]})]}),f.jsx("div",{className:"p-3 md:p-6 min-h-[300px] md:min-h-[400px] max-h-[500px] md:max-h-[600px] overflow-auto bg-gray-50",children:H?f.jsx("pre",{className:"text-xs md:text-sm text-gray-800 whitespace-pre-wrap font-mono leading-relaxed",children:H}):f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[f.jsx(Bt,{className:"h-6 w-6 md:h-8 md:w-8 animate-spin mb-2"}),f.jsx("p",{className:"text-sm md:text-base",children:"..."}),f.jsxs("p",{className:"text-xs mt-2",children:["selectedFile: ",j?"":""]}),f.jsxs("p",{className:"text-xs",children:["fileContent length: ",H?.length||0]})]})})]})})]})]})})]})}function mq(){const t=co(),{user:e,loading:n}=ka(),[r,i]=A.useState([]),[a,s]=A.useState(!0),[l,c]=A.useState(""),[d,h]=A.useState("all"),[p,b]=A.useState([]),[y,x]=A.useState(!1),[w,E]=A.useState(!1),[T,C]=A.useState(null),[N,P]=A.useState("1,2,3,4,5,6,7,8,9,10,65,75,90,100"),[k,j]=A.useState(!0),[D,H]=A.useState({}),[Y,X]=A.useState(!1),[z,K]=A.useState(null);A.useEffect(()=>{console.log(" [PlanDocumentManagement] useEffect - authLoading:",n,"user:",e),n?console.log(" [PlanDocumentManagement] ..."):(console.log(" [PlanDocumentManagement] "),ce())},[n,e]),A.useEffect(()=>{const $=r.filter(be=>be.status==="processing");if($.length===0)return;const ie=async()=>{for(const be of $)try{const Oe=(await ut.get(`/api/ocr/documents/${be.id}/status/`)).data;Oe.status==="success"&&(H(Be=>({...Be,[be.id]:Oe.data})),(Oe.data.processing_stage==="all_completed"||Oe.data.processing_stage==="error")&&ce())}catch(J){console.error(`${be.id}:`,J)}};ie();const me=setInterval(ie,3e3);return()=>clearInterval(me)},[r]);const ce=async()=>{s(!0);try{const $="/api/ocr/documents/";console.log("  - user:",e),console.log(" URL:",$);const me=(await ut.get($)).data;console.log(" API:",me),me.status==="success"&&(i(me.data||[]),console.log(" :",me.data?.length))}catch($){console.error(":",$),$.response?.status===401&&console.error(" ")}finally{s(!1)}},te=$=>{t(`/document/${$.id}`)},W=async $=>{K($),X(!0);try{const me=(await ut.get(`/api/ocr/documents/${$}/status/`)).data;me.status==="success"&&H(be=>({...be,[$]:me.data}))}catch(ie){console.error(`${$}:`,ie)}},R=$=>{$.target.checked?b(oe.map(ie=>ie.id)):b([])},B=$=>{b(ie=>ie.includes($)?ie.filter(me=>me!==$):[...ie,$])},re=($,ie,me)=>!$||!ie||!me||me<=0||ie<=0?null:($-ie)/ie/me*100,le=($,ie,me)=>!$||!ie||!me||me<=0||ie<=0?null:(Math.pow($/ie,1/me)-1)*100,M=()=>{if(p.length===0){alert("");return}const $=r.filter(se=>p.includes(se.id));console.log("=====  ====="),console.log(":",$.length);const ie=$.filter(se=>{console.log(`
---  ---`),console.log(":",se.file_name),console.log("table1:",se.table1),console.log("table1 === null:",se.table1===null),console.log("table1 === undefined:",se.table1===void 0),console.log("table1:",typeof se.table1),console.log("table1:",se.table1&&typeof se.table1=="object"),se.table1&&typeof se.table1=="object"&&(console.log("table1.keys:",Object.keys(se.table1)),console.log("table1.years:",se.table1.years),console.log("years:",Array.isArray(se.table1.years)),console.log("years:",se.table1.years?.length));let ze=!1;return se.table1&&(typeof se.table1=="string"?(ze=se.table1.trim().length>0,console.log("table1:",se.table1.trim().length)):typeof se.table1=="object"&&(ze=se.table1.years&&Array.isArray(se.table1.years)&&se.table1.years.length>0,console.log("table1hasTable:",ze))),console.log(" hasTable :",ze),console.log(" !hasTable ():",!ze),!ze});if(console.log(`
=====  =====`),console.log("table:",ie.length),console.log("table:",ie.map(se=>se.file_name)),ie.length>0){alert(`
${ie.map(se=>se.file_name).join(`
`)}`);return}let me=new Set;$.forEach(se=>{const ze=se.table1?.years||[],Fe=se.insured_age||0;ze.forEach(tt=>{const ee=tt.policy_year;if(typeof ee=="string"&&/[]/.test(ee)){const ye=ee.match(/\d+/);ye&&me.add(parseInt(ye[0]))}else typeof ee=="number"&&me.add(Fe+ee)})});const be=Array.from(me).sort((se,ze)=>se-ze);let J,Oe={};if(k&&N.trim()){const se=N.replace(//g,",").split(",").map(Fe=>Fe.trim()).filter(Fe=>Fe),ze=new Set;if(se.forEach(Fe=>{if(/[]/.test(Fe)){const tt=Fe.match(/\d+/);if(tt){const ee=parseInt(tt[0]);me.has(ee)&&(ze.add(ee),Oe[ee]={type:"age",value:ee})}}else{const tt=parseInt(Fe);if(!isNaN(tt)){const ee=`policyYear_${tt}`;ze.add(ee),Oe[ee]={type:"policyYear",value:tt}}}}),J=Array.from(ze).sort((Fe,tt)=>{const ee=typeof Fe=="string"&&Fe.startsWith("policyYear_"),ye=typeof tt=="string"&&tt.startsWith("policyYear_");if(ee&&ye){const He=parseInt(Fe.split("_")[1]),De=parseInt(tt.split("_")[1]);return He-De}else return ee?-1:ye?1:Fe-tt}),J.length===0){alert("");return}}else J=be.filter((se,ze,Fe)=>ze===0||ze===Fe.length-1?!0:se%5===0||[33,65,75,90,100].includes(se)).slice(0,15);const Be=$.map(se=>{const ze=se.table1?.years||[],Fe={};return J.forEach(tt=>{const ee=se.insured_age||0;let ye;if(typeof tt=="string"&&tt.startsWith("policyYear_")){const He=parseInt(tt.split("_")[1]);ye=ze.find(De=>{const Ue=De.policy_year;return typeof Ue=="number"?Ue===He:!1})}else{const He=tt,De=He-ee;ye=ze.find(Ue=>{const Ge=Ue.policy_year;if(typeof Ge=="string"&&/[]/.test(Ge)){const nt=Ge.match(/\d+/);return(nt?parseInt(nt[0]):0)===He}return typeof Ge=="number"?Ge===De:!1})}Fe[tt]={guaranteed:ye?ye.guaranteed||ye.guaranteed_cash_value:void 0,total:ye?ye.total:void 0}}),{id:se.id,name:se.insurance_product||se.file_name,insuredName:se.insured_name||"-",company:se.insurance_company||"-",currentAge:se.insured_age||0,ageData:Fe}});C({products:Be,targetAges:J,ageDisplayMap:Oe}),E(!0)},U=async()=>{if(p.length===0){alert("");return}if(confirm(` ${p.length} `)){x(!0);try{const ie=(await ut.delete("/api/ocr/documents/delete/",{data:{document_ids:p}})).data;ie.status==="success"?(alert(` ${ie.deleted_count} `),b([]),ce()):alert(`${ie.message}`)}catch($){console.error(":",$),alert("")}finally{x(!1)}}},Q=$=>({uploaded:"bg-blue-100 text-blue-800",processing:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"})[$]||"bg-gray-100 text-gray-800",I=$=>({uploaded:"",processing:"",completed:"",failed:""})[$]||$,oe=r.filter($=>{const ie=$.file_name.toLowerCase().includes(l.toLowerCase()),me=d==="all"||$.status===d;return ie&&me});return w&&T?f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4 md:p-8",children:f.jsxs("div",{className:"max-w-7xl mx-auto",children:[f.jsx("div",{className:"mb-4 md:mb-6",children:f.jsxs("button",{onClick:()=>E(!1),className:"flex items-center gap-2 px-4 py-2 bg-white rounded-lg shadow hover:shadow-md transition-all",children:[f.jsx(Kd,{className:"w-5 h-5"}),""]})}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[f.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-4 py-4 md:px-8 md:py-6",children:[f.jsx("h2",{className:"text-xl md:text-3xl font-bold text-white",children:""}),f.jsxs("p",{className:"text-blue-100 mt-1 md:mt-2 text-sm md:text-base",children:[" ",T.products.length," "]}),f.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[f.jsxs("label",{className:"flex items-center gap-2 text-white text-sm",children:[f.jsx("input",{type:"checkbox",checked:k,onChange:$=>j($.target.checked),className:"w-4 h-4 rounded"}),f.jsx("span",{children:""})]}),k&&f.jsxs("div",{className:"flex-1 flex gap-2",children:[f.jsx("input",{type:"text",value:N,onChange:$=>P($.target.value),placeholder:": 1,2,3,33,65 (==)",className:"flex-1 px-3 py-2 rounded-lg text-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-white"}),f.jsx("button",{onClick:()=>M(),className:"px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm font-medium whitespace-nowrap",children:""})]})]})]}),T.products.length>0&&f.jsx("div",{className:"px-4 md:px-8 py-3 bg-blue-50 border-b border-blue-200",children:f.jsxs("div",{className:"text-xs md:text-sm text-gray-700",children:[f.jsx("span",{className:"font-medium",children:""}),T.products.map(($,ie)=>{const me=r.find(be=>be.id===$.id);return f.jsxs("span",{children:[f.jsxs("span",{className:"font-semibold text-indigo-700",children:[" ",ie+1,". ",$.name]}),f.jsxs("span",{children:[" (",$.insuredName," | ",$.currentAge," / ",me?.insured_gender||"-"," | : ",me?.annual_premium?parseInt(me.annual_premium).toLocaleString("zh-CN"):"-"," | : ",me?.payment_years?`${me.payment_years}`:"-",")"]}),ie<T.products.length-1&&f.jsx("span",{className:"mx-1",children:""})]},$.id)})]})}),f.jsx("div",{className:"p-2 md:p-8 overflow-x-auto",children:f.jsxs("table",{className:"w-full min-w-max",children:[f.jsxs("thead",{children:[f.jsxs("tr",{className:"border-b-2 border-gray-200",children:[f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs md:text-sm font-semibold text-gray-700 sticky left-0 bg-white z-10 border-r-2 border-gray-300",children:"/"}),T.products.map(($,ie)=>f.jsx("th",{className:`px-2 md:px-4 py-2 md:py-3 text-center ${ie<T.products.length-1?"border-r-2 border-indigo-200":""}`,colSpan:"4",children:f.jsx("div",{className:"text-xs md:text-sm font-semibold text-gray-700 truncate",title:$.name,children:$.name})},$.id))]}),f.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[f.jsx("th",{className:"px-2 md:px-4 py-1 md:py-2 text-left text-xs font-medium text-gray-600 sticky left-0 bg-gray-50 z-10 border-r-2 border-gray-300"}),T.products.map(($,ie)=>f.jsxs(Cd.Fragment,{children:[f.jsx("th",{className:"px-2 md:px-4 py-1 md:py-2 text-center text-xs font-medium text-gray-600 whitespace-nowrap",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-1 md:py-2 text-center text-xs font-medium text-gray-600 whitespace-nowrap",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-1 md:py-2 text-center text-xs font-medium text-gray-600 whitespace-nowrap",children:""}),f.jsx("th",{className:`px-2 md:px-4 py-1 md:py-2 text-center text-xs font-medium text-gray-600 whitespace-nowrap ${ie<T.products.length-1?"border-r-2 border-indigo-200":""}`,children:"IRR"})]},`${$.id}-headers`))]})]}),f.jsxs("tbody",{children:[T.targetAges.map($=>{const ie=T.ageDisplayMap?.[$];let me;return ie?.type==="policyYear"?me=ie.value:ie?.type==="age"?me=`${$}`:me=`${$}`,f.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 text-xs md:text-sm font-medium text-gray-900 whitespace-nowrap sticky left-0 bg-white z-10 border-r-2 border-gray-300",children:me}),T.products.map((be,J)=>{const Oe=r.find(He=>He.id===be.id),Be=Oe?.annual_premium?parseInt(Oe.annual_premium):0,se=Oe?.payment_years?parseInt(Oe.payment_years):0,ze=be.ageData[$]?.total;let Fe=0;ie?.type==="policyYear"?Fe=ie.value:Fe=(typeof $=="string"?parseInt($.replace(/[^\d]/g,"")):$)-be.currentAge;const tt=Be*Math.min(Fe,se),ee=re(ze,tt,Fe),ye=le(ze,tt,Fe);return f.jsxs(Cd.Fragment,{children:[f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 text-xs md:text-sm text-gray-900 font-medium text-center whitespace-nowrap",children:be.ageData[$]?.guaranteed!==void 0&&be.ageData[$]?.guaranteed!==null?parseInt(be.ageData[$].guaranteed).toLocaleString("zh-CN"):"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 text-xs md:text-sm text-indigo-900 font-medium text-center whitespace-nowrap",children:be.ageData[$]?.total!==void 0&&be.ageData[$]?.total!==null?parseInt(be.ageData[$].total).toLocaleString("zh-CN"):"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 text-xs md:text-sm text-purple-700 font-medium text-center whitespace-nowrap",children:ee!==null?`${ee.toFixed(2)}%`:"-"}),f.jsx("td",{className:`px-2 md:px-4 py-2 md:py-3 text-xs md:text-sm text-green-700 font-bold text-center whitespace-nowrap ${J<T.products.length-1?"border-r-2 border-indigo-200":""}`,children:ye!==null?`${ye.toFixed(2)}%`:"-"})]},`${be.id}-${$}`)})]},$)}),f.jsxs("tr",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-t-2 border-green-200",children:[f.jsx("td",{className:"px-2 md:px-4 py-3 md:py-4 text-xs md:text-sm font-bold text-green-800 whitespace-nowrap sticky left-0 bg-gradient-to-r from-green-50 to-emerald-50 z-10 border-r-2 border-gray-300",children:""}),T.products.map(($,ie)=>{const me=r.find(Fe=>Fe.id===$.id),be=me?.annual_premium?parseInt(me.annual_premium):0,J=me?.payment_years?parseInt(me.payment_years):0,Oe=$.ageData[100]?.total||0,Be=100-$.currentAge,se=be*Math.min(Be,J),ze=se>0?(Oe/se).toFixed(2):"-";return f.jsxs(Cd.Fragment,{children:[f.jsx("td",{className:"px-2 md:px-4 py-3 md:py-4 text-xs md:text-sm text-gray-500 text-center whitespace-nowrap",children:"-"}),f.jsx("td",{className:"px-2 md:px-4 py-3 md:py-4 text-xs md:text-sm font-bold text-green-700 text-center whitespace-nowrap",children:ze!=="-"?`${ze}x`:"-"}),f.jsx("td",{className:"px-2 md:px-4 py-3 md:py-4 text-xs md:text-sm text-gray-500 text-center whitespace-nowrap",children:"-"}),f.jsx("td",{className:`px-2 md:px-4 py-3 md:py-4 text-xs md:text-sm text-gray-500 text-center whitespace-nowrap ${ie<T.products.length-1?"border-r-2 border-indigo-200":""}`,children:"-"})]},`${$.id}-growth`)})]})]})]})})]})]})}):f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 px-4 pt-4 pb-8",children:[f.jsxs("div",{className:"max-w-[95%] mx-auto",children:[f.jsxs("div",{className:"mb-8",children:[f.jsxs("button",{onClick:()=>t("dashboard"),className:"mb-2 flex items-center gap-1.5 px-3 py-1.5 bg-white rounded-lg shadow hover:shadow-md transition-all text-sm",children:[f.jsx(Kd,{className:"w-4 h-4"}),""]}),f.jsx("div",{className:"mb-3 text-center",children:f.jsx("h1",{className:"text-2xl font-semibold text-gray-700",children:""})}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("div",{className:"text-3xl font-bold text-indigo-600",children:oe.length}),f.jsx("div",{className:"text-sm text-gray-600",children:""})]}),f.jsxs("button",{onClick:()=>t&&t("plan-analyzer"),className:"flex items-center gap-2 px-4 py-1.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all shadow-md hover:shadow-lg",children:[f.jsx(Vr,{className:"w-4 h-4"}),f.jsx("span",{className:"font-medium text-sm",children:""})]})]})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-3 md:p-4 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"flex-1 min-w-0 relative",children:[f.jsx(yH,{className:"absolute left-2 md:left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 md:w-5 md:h-5 text-gray-400"}),f.jsx("input",{type:"text",placeholder:"...",value:l,onChange:$=>c($.target.value),className:"w-full pl-8 md:pl-10 pr-2 md:pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm md:text-base"})]}),f.jsxs("select",{value:d,onChange:$=>h($.target.value),className:"px-2 md:px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm md:text-base",children:[f.jsx("option",{value:"all",children:""}),f.jsx("option",{value:"uploaded",children:""}),f.jsx("option",{value:"processing",children:""}),f.jsx("option",{value:"completed",children:""}),f.jsx("option",{value:"failed",children:""})]}),f.jsxs("button",{onClick:ce,disabled:a,className:"flex items-center justify-center gap-1 px-3 md:px-4 py-2 bg-white border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 hover:border-gray-400 transition-all shadow-sm hover:shadow text-sm md:text-base font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[f.jsx(iv,{className:`w-4 h-4 ${a?"animate-spin":""}`}),f.jsx("span",{className:"hidden sm:inline",children:""})]})]}),p.length>0&&f.jsxs("div",{className:"flex gap-2 md:gap-4 mt-3",children:[f.jsxs("button",{onClick:M,className:"flex-1 md:flex-none flex items-center justify-center gap-1 px-3 py-2 text-sm md:text-base md:px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors whitespace-nowrap",children:[f.jsx(lH,{className:"w-3 h-3 md:w-4 md:h-4"}),f.jsx("span",{className:"hidden sm:inline",children:""}),f.jsx("span",{className:"sm:hidden",children:""}),f.jsxs("span",{children:["(",p.length,")"]})]}),f.jsx("button",{onClick:U,disabled:y,className:"flex-1 md:flex-none flex items-center justify-center gap-1 px-3 py-2 text-sm md:text-base md:px-4 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:y?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"w-3 h-3 md:w-4 md:h-4 animate-spin"}),f.jsx("span",{className:"hidden sm:inline",children:"..."}),f.jsx("span",{className:"sm:hidden",children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(zw,{className:"w-3 h-3 md:w-4 md:h-4"}),f.jsx("span",{className:"hidden sm:inline",children:""}),f.jsx("span",{className:"sm:hidden",children:""}),f.jsxs("span",{children:["(",p.length,")"]})]})})]})]}),a?f.jsx("div",{className:"flex items-center justify-center py-20",children:f.jsx(Bt,{className:"w-12 h-12 text-indigo-600 animate-spin"})}):oe.length===0?f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[f.jsx(Vr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),f.jsx("p",{className:"text-xl text-gray-600 mb-2",children:""}),f.jsx("p",{className:"text-gray-500",children:""})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"hidden md:block bg-white rounded-xl shadow-lg overflow-x-auto",children:f.jsxs("table",{className:"w-full min-w-max",children:[f.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-center",children:f.jsx("input",{type:"checkbox",checked:p.length===oe.length&&oe.length>0,onChange:R,className:"w-3 h-3 md:w-4 md:h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"})}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:""}),f.jsx("th",{className:"px-2 md:px-4 py-2 md:py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:""})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:oe.map($=>f.jsx(Cd.Fragment,{children:f.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 text-center",onClick:ie=>ie.stopPropagation(),children:f.jsx("input",{type:"checkbox",checked:p.includes($.id),onChange:()=>B($.id),className:"w-3 h-3 md:w-4 md:h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"})}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-sm text-gray-700 cursor-pointer",onClick:()=>te($),children:$.insured_name||"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-sm text-gray-700 text-center cursor-pointer",onClick:()=>te($),children:$.insured_age||"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-sm text-gray-700 text-center cursor-pointer",onClick:()=>te($),children:$.insured_gender||"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-sm text-gray-700 cursor-pointer",onClick:()=>te($),children:$.insurance_company||"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 max-w-xs text-sm text-gray-700 cursor-pointer",onClick:()=>te($),children:f.jsx("div",{className:"truncate",title:$.insurance_product,children:$.insurance_product||"-"})}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-sm text-gray-900 text-right font-medium cursor-pointer",onClick:()=>te($),children:$.sum_assured?parseInt($.sum_assured).toLocaleString("zh-CN"):"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-sm text-gray-900 text-right font-medium cursor-pointer",onClick:()=>te($),children:$.annual_premium?parseInt($.annual_premium).toLocaleString("zh-CN"):"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-sm text-gray-700 text-center cursor-pointer",onClick:()=>te($),children:$.payment_years?`${$.payment_years}`:"-"}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-center cursor-pointer",onClick:()=>te($),children:(()=>{let ie=!1,me=0;return $.table1&&(typeof $.table1=="object"&&$.table1.years&&Array.isArray($.table1.years)?(ie=$.table1.years.length>0,me=$.table1.years.length):typeof $.table1=="string"&&$.table1.trim().length>0&&(ie=!0,me=0)),ie?f.jsx("span",{className:"px-1.5 md:px-2 py-0.5 md:py-1 text-sm font-semibold bg-green-100 text-green-800 rounded-full",children:me>0?`${me}`:""}):f.jsx("span",{className:"text-gray-400 text-sm",children:""})})()}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 max-w-md cursor-pointer",onClick:()=>te($),children:(()=>{let ie="";if($.summary)try{typeof $.summary=="string"?ie=JSON.parse($.summary).summary||$.summary:typeof $.summary=="object"&&(ie=$.summary.summary||"")}catch{typeof $.summary=="string"&&(ie=$.summary)}return ie&&typeof ie=="string"&&ie.trim()?f.jsx("div",{className:"text-sm text-gray-700 line-clamp-2",title:ie,children:ie}):f.jsx("span",{className:"text-gray-400 text-sm",children:""})})()}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-center cursor-pointer",onClick:()=>te($),children:f.jsx("span",{className:`px-1.5 md:px-2 py-0.5 md:py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${Q($.status)}`,children:I($.status)})}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 max-w-xs cursor-pointer",onClick:()=>te($),children:f.jsxs("div",{className:"flex items-center",children:[f.jsx(Vr,{className:"w-3 h-3 md:w-4 md:h-4 text-indigo-600 mr-1 md:mr-2 flex-shrink-0"}),f.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",title:$.file_name,children:$.file_name})]})}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-sm text-gray-500 cursor-pointer",onClick:()=>te($),children:new Date($.created_at).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),f.jsx("td",{className:"px-2 md:px-4 py-2 md:py-3 whitespace-nowrap text-center",children:f.jsxs("div",{className:"flex items-center justify-center gap-1 md:gap-2",children:[f.jsxs("button",{onClick:ie=>{ie.stopPropagation(),W($.id)},className:"inline-flex items-center gap-1 px-2 md:px-3 py-1 md:py-1.5 bg-blue-600 text-white text-xs md:text-sm rounded-lg hover:bg-blue-700 transition-colors",title:"",children:[f.jsx(ns,{className:"w-3 h-3 md:w-3.5 md:h-3.5"}),f.jsx("span",{className:"hidden lg:inline",children:""})]}),f.jsxs("button",{onClick:ie=>{ie.stopPropagation(),te($)},className:"inline-flex items-center gap-1 px-2 md:px-3 py-1 md:py-1.5 bg-indigo-600 text-white text-xs md:text-sm rounded-lg hover:bg-indigo-700 transition-colors",children:[f.jsx(XN,{className:"w-3 h-3 md:w-3.5 md:h-3.5"}),f.jsx("span",{className:"hidden lg:inline",children:""})]})]})})]})},$.id))})]})}),f.jsx("div",{className:"md:hidden space-y-4",children:oe.map($=>f.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 cursor-pointer hover:shadow-xl transition-shadow",onClick:()=>te($),children:[f.jsxs("div",{className:"flex items-center justify-between mb-2 text-xs text-gray-500",children:[f.jsx("span",{children:new Date($.created_at).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),f.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${Q($.status)}`,children:I($.status)})]}),f.jsxs("div",{className:"flex items-start gap-2 mb-2 pb-2 border-b border-gray-200",children:[f.jsx("input",{type:"checkbox",checked:p.includes($.id),onChange:()=>B($.id),onClick:ie=>ie.stopPropagation(),className:"w-4 h-4 mt-0.5 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 flex-shrink-0"}),f.jsx("div",{className:"flex-1 min-w-0",children:f.jsx("span",{className:"text-sm font-bold text-gray-900 break-words line-clamp-1",children:$.file_name})})]}),f.jsx("div",{className:"mb-1.5 pb-1.5 border-b border-gray-200",children:f.jsxs("div",{className:"flex flex-wrap gap-x-2 gap-y-0.5 text-xs text-gray-700",children:[f.jsxs("span",{children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsx("span",{className:"font-medium",children:$.insured_name||"-"})]}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsxs("span",{children:[f.jsx("span",{className:"text-gray-500",children:""}),$.insured_age||"-"]}),f.jsx("span",{className:"text-gray-300",children:"|"}),f.jsxs("span",{children:[f.jsx("span",{className:"text-gray-500",children:""}),$.insured_gender||"-"]})]})}),f.jsx("div",{className:"mb-1.5 pb-1.5 border-b border-gray-200",children:f.jsxs("div",{className:"text-xs",children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsx("span",{className:"font-medium text-gray-900",children:$.insurance_company||"-"}),f.jsx("span",{className:"text-gray-300 mx-1",children:"|"}),f.jsx("span",{className:"text-gray-500",children:""}),f.jsx("span",{className:"font-medium text-gray-900",children:$.insurance_product||"-"})]})}),f.jsx("div",{className:"mb-1.5 pb-1.5 border-b border-gray-200",children:f.jsxs("div",{className:"grid grid-cols-3 gap-x-2 gap-y-0.5 text-xs",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsx("span",{className:"font-bold text-gray-900",children:$.sum_assured?parseInt($.sum_assured).toLocaleString("zh-CN"):"-"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsx("span",{className:"font-bold text-gray-900",children:$.annual_premium?parseInt($.annual_premium).toLocaleString("zh-CN"):"-"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsx("span",{className:"font-medium text-gray-900",children:$.payment_years?`${$.payment_years}`:"-"})]})]})}),f.jsx("div",{children:(()=>{let ie="";if($.summary)try{typeof $.summary=="string"?ie=JSON.parse($.summary).summary||$.summary:typeof $.summary=="object"&&(ie=$.summary.summary||"")}catch{typeof $.summary=="string"&&(ie=$.summary)}return ie&&typeof ie=="string"&&ie.trim()?f.jsxs("div",{className:"text-xs text-gray-600",children:[f.jsx("span",{className:"text-gray-500",children:""}),f.jsx("span",{className:"line-clamp-2",children:ie})]}):f.jsxs("div",{className:"text-xs text-gray-400",children:[f.jsx("span",{className:"text-gray-500",children:""}),""]})})()})]},$.id))})]})]}),Y&&z&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 md:p-6 flex items-center justify-between rounded-t-2xl",children:[f.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-800 flex items-center gap-2",children:[f.jsx(ns,{className:"w-6 h-6 text-blue-600"}),""]}),f.jsx("button",{onClick:()=>X(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:f.jsx(Ru,{className:"w-6 h-6 text-gray-600"})})]}),f.jsx("div",{className:"p-4 md:p-6",children:D[z]?(()=>{const $=D[z],ie=$.processing_stage||"",me=r.find(be=>be.id===z);return f.jsxs("div",{className:"space-y-6",children:[me&&f.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx(Vr,{className:"w-5 h-5 text-indigo-600"}),f.jsx("span",{className:"font-semibold text-gray-800",children:me.file_name})]}),f.jsxs("div",{className:"text-sm text-gray-600",children:["ID: ",me.id,"   ",new Date(me.created_at).toLocaleString("zh-CN")]})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800",children:""}),f.jsxs("span",{className:"text-2xl font-bold text-blue-700",children:[$.progress_percentage,"%"]})]}),f.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden shadow-inner",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 transition-all duration-500",style:{width:`${$.progress_percentage}%`}})})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:""}),f.jsx("div",{className:"space-y-3",children:[{id:"basic_info",label:" ",stages:["extracting_basic_info"],completedStages:["basic_info_completed","extracting_tablesummary","tablesummary_completed","extracting_table","table_completed","extracting_wellness_table","wellness_table_completed","extracting_summary","all_completed"]},{id:"tablesummary",label:" ",stages:["extracting_tablesummary"],completedStages:["tablesummary_completed","extracting_table","table_completed","extracting_wellness_table","wellness_table_completed","extracting_summary","all_completed"]},{id:"table1",label:" ",stages:["extracting_table"],completedStages:["table_completed","extracting_wellness_table","wellness_table_completed","extracting_summary","all_completed"]},{id:"table2",label:" ",stages:["extracting_wellness_table"],completedStages:["wellness_table_completed","extracting_summary","all_completed"]},{id:"summary",label:" ",stages:["extracting_summary"],completedStages:["all_completed"]}].map(({id:be,label:J,stages:Oe,completedStages:Be})=>{const se=Oe.includes(ie),ze=Be.includes(ie);return f.jsxs("div",{className:`flex items-center gap-3 p-4 rounded-xl transition-all ${ze?"bg-green-50 border-2 border-green-300":se?"bg-blue-50 border-2 border-blue-300 shadow-lg":"bg-gray-50 border-2 border-gray-200"}`,children:[ze?f.jsx(Qd,{className:"h-7 w-7 text-green-600 flex-shrink-0"}):se?f.jsx(Bt,{className:"h-7 w-7 text-blue-600 animate-spin flex-shrink-0"}):f.jsx("div",{className:"h-7 w-7 border-2 border-gray-300 rounded-full flex-shrink-0"}),f.jsx("span",{className:`text-base flex-1 ${ze?"text-green-800 font-semibold line-through":se?"text-blue-900 font-bold":"text-gray-600"}`,children:J}),ze&&f.jsx("span",{className:"text-sm px-3 py-1 bg-green-500 text-white rounded-full font-semibold",children:" "}),se&&f.jsx("span",{className:"text-sm px-3 py-1 bg-blue-500 text-white rounded-full font-semibold animate-pulse",children:" "})]},be)})})]}),f.jsxs("div",{className:"space-y-3",children:[$.error_message&&f.jsx("div",{className:"p-4 bg-red-50 border-2 border-red-300 rounded-xl",children:f.jsxs("p",{className:"text-sm text-red-800 font-medium",children:[f.jsx("span",{className:"font-bold",children:""})," ",$.error_message]})}),$.last_processed_at&&f.jsxs("div",{className:"text-sm text-gray-500 text-center",children:[": ",new Date($.last_processed_at).toLocaleString("zh-CN")]}),ie==="all_completed"&&f.jsx("div",{className:"p-4 bg-green-50 border-2 border-green-300 rounded-xl text-center",children:f.jsx("p",{className:"text-green-800 font-bold text-lg",children:" "})})]}),f.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[f.jsxs("button",{onClick:()=>W(z),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[f.jsx(iv,{className:"w-4 h-4"}),""]}),f.jsxs("button",{onClick:()=>{X(!1);const be=r.find(J=>J.id===z);be&&te(be)},className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:[f.jsx(XN,{className:"w-4 h-4"}),""]})]})]})})():f.jsx("div",{className:"flex items-center justify-center py-12",children:f.jsx(Bt,{className:"w-12 h-12 text-blue-600 animate-spin"})})})]})})]})}function OC(t){const e=[],n=String(t||"");let r=n.indexOf(","),i=0,a=!1;for(;!a;){r===-1&&(r=n.length,a=!0);const s=n.slice(i,r).trim();(s||!a)&&e.push(s),i=r+1,r=n.indexOf(",",i)}return e}function uR(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const pq=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gq=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bq={};function kC(t,e){return(bq.jsx?gq:pq).test(t)}const yq=/[ \t\n\f\r]/g;function xq(t){return typeof t=="object"?t.type==="text"?jC(t.value):!1:jC(t)}function jC(t){return t.replace(yq,"")===""}let Dh=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};Dh.prototype.normal={};Dh.prototype.property={};Dh.prototype.space=void 0;function cR(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Dh(n,r,e)}function ih(t){return t.toLowerCase()}let Zr=class{constructor(e,n){this.attribute=n,this.property=e}};Zr.prototype.attribute="";Zr.prototype.booleanish=!1;Zr.prototype.boolean=!1;Zr.prototype.commaOrSpaceSeparated=!1;Zr.prototype.commaSeparated=!1;Zr.prototype.defined=!1;Zr.prototype.mustUseProperty=!1;Zr.prototype.number=!1;Zr.prototype.overloadedBoolean=!1;Zr.prototype.property="";Zr.prototype.spaceSeparated=!1;Zr.prototype.space=void 0;let vq=0;const xt=gl(),On=gl(),xv=gl(),Re=gl(),Qt=gl(),Nu=gl(),li=gl();function gl(){return 2**++vq}const vv=Object.freeze(Object.defineProperty({__proto__:null,boolean:xt,booleanish:On,commaOrSpaceSeparated:li,commaSeparated:Nu,number:Re,overloadedBoolean:xv,spaceSeparated:Qt},Symbol.toStringTag,{value:"Module"})),nx=Object.keys(vv);let iE=class extends Zr{constructor(e,n,r,i){let a=-1;if(super(e,n),PC(this,"space",i),typeof r=="number")for(;++a<nx.length;){const s=nx[a];PC(this,nx[a],(r&vv[s])===vv[s])}}};iE.prototype.defined=!0;function PC(t,e,n){n&&(t[e]=n)}function Ku(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const a=new iE(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[ih(r)]=r,n[ih(a.attribute)]=r}return new Dh(e,n,t.space)}const dR=Ku({properties:{ariaActiveDescendant:null,ariaAtomic:On,ariaAutoComplete:null,ariaBusy:On,ariaChecked:On,ariaColCount:Re,ariaColIndex:Re,ariaColSpan:Re,ariaControls:Qt,ariaCurrent:null,ariaDescribedBy:Qt,ariaDetails:null,ariaDisabled:On,ariaDropEffect:Qt,ariaErrorMessage:null,ariaExpanded:On,ariaFlowTo:Qt,ariaGrabbed:On,ariaHasPopup:null,ariaHidden:On,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Qt,ariaLevel:Re,ariaLive:null,ariaModal:On,ariaMultiLine:On,ariaMultiSelectable:On,ariaOrientation:null,ariaOwns:Qt,ariaPlaceholder:null,ariaPosInSet:Re,ariaPressed:On,ariaReadOnly:On,ariaRelevant:null,ariaRequired:On,ariaRoleDescription:Qt,ariaRowCount:Re,ariaRowIndex:Re,ariaRowSpan:Re,ariaSelected:On,ariaSetSize:Re,ariaSort:null,ariaValueMax:Re,ariaValueMin:Re,ariaValueNow:Re,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function hR(t,e){return e in t?t[e]:e}function fR(t,e){return hR(t,e.toLowerCase())}const wq=Ku({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Nu,acceptCharset:Qt,accessKey:Qt,action:null,allow:null,allowFullScreen:xt,allowPaymentRequest:xt,allowUserMedia:xt,alt:null,as:null,async:xt,autoCapitalize:null,autoComplete:Qt,autoFocus:xt,autoPlay:xt,blocking:Qt,capture:null,charSet:null,checked:xt,cite:null,className:Qt,cols:Re,colSpan:null,content:null,contentEditable:On,controls:xt,controlsList:Qt,coords:Re|Nu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:xt,defer:xt,dir:null,dirName:null,disabled:xt,download:xv,draggable:On,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:xt,formTarget:null,headers:Qt,height:Re,hidden:xv,high:Re,href:null,hrefLang:null,htmlFor:Qt,httpEquiv:Qt,id:null,imageSizes:null,imageSrcSet:null,inert:xt,inputMode:null,integrity:null,is:null,isMap:xt,itemId:null,itemProp:Qt,itemRef:Qt,itemScope:xt,itemType:Qt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:xt,low:Re,manifest:null,max:null,maxLength:Re,media:null,method:null,min:null,minLength:Re,multiple:xt,muted:xt,name:null,nonce:null,noModule:xt,noValidate:xt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:xt,optimum:Re,pattern:null,ping:Qt,placeholder:null,playsInline:xt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:xt,referrerPolicy:null,rel:Qt,required:xt,reversed:xt,rows:Re,rowSpan:Re,sandbox:Qt,scope:null,scoped:xt,seamless:xt,selected:xt,shadowRootClonable:xt,shadowRootDelegatesFocus:xt,shadowRootMode:null,shape:null,size:Re,sizes:null,slot:null,span:Re,spellCheck:On,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Re,step:null,style:null,tabIndex:Re,target:null,title:null,translate:null,type:null,typeMustMatch:xt,useMap:null,value:On,width:Re,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Qt,axis:null,background:null,bgColor:null,border:Re,borderColor:null,bottomMargin:Re,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:xt,declare:xt,event:null,face:null,frame:null,frameBorder:null,hSpace:Re,leftMargin:Re,link:null,longDesc:null,lowSrc:null,marginHeight:Re,marginWidth:Re,noResize:xt,noHref:xt,noShade:xt,noWrap:xt,object:null,profile:null,prompt:null,rev:null,rightMargin:Re,rules:null,scheme:null,scrolling:On,standby:null,summary:null,text:null,topMargin:Re,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Re,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:xt,disableRemotePlayback:xt,prefix:null,property:null,results:Re,security:null,unselectable:null},space:"html",transform:fR}),Eq=Ku({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:li,accentHeight:Re,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Re,amplitude:Re,arabicForm:null,ascent:Re,attributeName:null,attributeType:null,azimuth:Re,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Re,by:null,calcMode:null,capHeight:Re,className:Qt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Re,diffuseConstant:Re,direction:null,display:null,dur:null,divisor:Re,dominantBaseline:null,download:xt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Re,enableBackground:null,end:null,event:null,exponent:Re,externalResourcesRequired:null,fill:null,fillOpacity:Re,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Nu,g2:Nu,glyphName:Nu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Re,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Re,horizOriginX:Re,horizOriginY:Re,id:null,ideographic:Re,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Re,k:Re,k1:Re,k2:Re,k3:Re,k4:Re,kernelMatrix:li,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Re,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Re,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Re,overlineThickness:Re,paintOrder:null,panose1:null,path:null,pathLength:Re,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Qt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Re,pointsAtY:Re,pointsAtZ:Re,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:li,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:li,rev:li,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:li,requiredFeatures:li,requiredFonts:li,requiredFormats:li,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Re,specularExponent:Re,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Re,strikethroughThickness:Re,string:null,stroke:null,strokeDashArray:li,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Re,strokeOpacity:Re,strokeWidth:null,style:null,surfaceScale:Re,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:li,tabIndex:Re,tableValues:null,target:null,targetX:Re,targetY:Re,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:li,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Re,underlineThickness:Re,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Re,values:null,vAlphabetic:Re,vMathematical:Re,vectorEffect:null,vHanging:Re,vIdeographic:Re,version:null,vertAdvY:Re,vertOriginX:Re,vertOriginY:Re,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Re,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:hR}),mR=Ku({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),pR=Ku({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:fR}),gR=Ku({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),Aq={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Sq=/[A-Z]/g,DC=/-[a-z]/g,Tq=/^data[-\w.:]+$/i;function aE(t,e){const n=ih(e);let r=e,i=Zr;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Tq.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(DC,Nq);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!DC.test(a)){let s=a.replace(Sq,_q);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}i=iE}return new i(r,e)}function _q(t){return"-"+t.toLowerCase()}function Nq(t){return t.charAt(1).toUpperCase()}const Sg=cR([dR,wq,mR,pR,gR],"html"),Qu=cR([dR,Eq,mR,pR,gR],"svg");function RC(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function bR(t){return t.join(" ").trim()}var lu={},rx,IC;function Cq(){if(IC)return rx;IC=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,c=`
`,d="/",h="*",p="",b="comment",y="declaration";function x(E,T){if(typeof E!="string")throw new TypeError("First argument must be a string");if(!E)return[];T=T||{};var C=1,N=1;function P(te){var W=te.match(e);W&&(C+=W.length);var R=te.lastIndexOf(c);N=~R?te.length-R:N+te.length}function k(){var te={line:C,column:N};return function(W){return W.position=new j(te),Y(),W}}function j(te){this.start=te,this.end={line:C,column:N},this.source=T.source}j.prototype.content=E;function D(te){var W=new Error(T.source+":"+C+":"+N+": "+te);if(W.reason=te,W.filename=T.source,W.line=C,W.column=N,W.source=E,!T.silent)throw W}function H(te){var W=te.exec(E);if(W){var R=W[0];return P(R),E=E.slice(R.length),W}}function Y(){H(n)}function X(te){var W;for(te=te||[];W=z();)W!==!1&&te.push(W);return te}function z(){var te=k();if(!(d!=E.charAt(0)||h!=E.charAt(1))){for(var W=2;p!=E.charAt(W)&&(h!=E.charAt(W)||d!=E.charAt(W+1));)++W;if(W+=2,p===E.charAt(W-1))return D("End of comment missing");var R=E.slice(2,W-2);return N+=2,P(R),E=E.slice(W),N+=2,te({type:b,comment:R})}}function K(){var te=k(),W=H(r);if(W){if(z(),!H(i))return D("property missing ':'");var R=H(a),B=te({type:y,property:w(W[0].replace(t,p)),value:R?w(R[0].replace(t,p)):p});return H(s),B}}function ce(){var te=[];X(te);for(var W;W=K();)W!==!1&&(te.push(W),X(te));return te}return Y(),ce()}function w(E){return E?E.replace(l,p):p}return rx=x,rx}var LC;function Oq(){if(LC)return lu;LC=1;var t=lu&&lu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lu,"__esModule",{value:!0}),lu.default=n;const e=t(Cq());function n(r,i){let a=null;if(!r||typeof r!="string")return a;const s=(0,e.default)(r),l=typeof i=="function";return s.forEach(c=>{if(c.type!=="declaration")return;const{property:d,value:h}=c;l?i(d,h,c):h&&(a=a||{},a[d]=h)}),a}return lu}var pd={},MC;function kq(){if(MC)return pd;MC=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(d){return!d||n.test(d)||t.test(d)},s=function(d,h){return h.toUpperCase()},l=function(d,h){return"".concat(h,"-")},c=function(d,h){return h===void 0&&(h={}),a(d)?d:(d=d.toLowerCase(),h.reactCompat?d=d.replace(i,l):d=d.replace(r,l),d.replace(e,s))};return pd.camelCase=c,pd}var gd,BC;function jq(){if(BC)return gd;BC=1;var t=gd&&gd.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(Oq()),n=kq();function r(i,a){var s={};return!i||typeof i!="string"||(0,e.default)(i,function(l,c){l&&c&&(s[(0,n.camelCase)(l,a)]=c)}),s}return r.default=r,gd=r,gd}var Pq=jq();const Dq=Ji(Pq),Tg=yR("end"),ja=yR("start");function yR(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Rq(t){const e=ja(t),n=Tg(t);if(e&&n)return{start:e,end:n}}function Bd(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?FC(t.position):"start"in t||"end"in t?FC(t):"line"in t||"column"in t?wv(t):""}function wv(t){return UC(t&&t.line)+":"+UC(t&&t.column)}function FC(t){return wv(t&&t.start)+"-"+wv(t&&t.end)}function UC(t){return t&&typeof t=="number"?t:1}class br extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},s=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?i=e:!a.cause&&e&&(s=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const l=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=l?l.line:void 0,this.name=Bd(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=s&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}br.prototype.file="";br.prototype.name="";br.prototype.reason="";br.prototype.message="";br.prototype.stack="";br.prototype.column=void 0;br.prototype.line=void 0;br.prototype.ancestors=void 0;br.prototype.cause=void 0;br.prototype.fatal=void 0;br.prototype.place=void 0;br.prototype.ruleId=void 0;br.prototype.source=void 0;const sE={}.hasOwnProperty,Iq=new Map,Lq=/[A-Z]/g,Mq=new Set(["table","tbody","thead","tfoot","tr"]),Bq=new Set(["td","th"]),xR="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Fq(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Gq(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Vq(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Qu:Sg,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=vR(i,t,void 0);return a&&typeof a!="string"?a:i.create(t,i.Fragment,{children:a||void 0},void 0)}function vR(t,e,n){if(e.type==="element")return Uq(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Hq(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return $q(t,e,n);if(e.type==="mdxjsEsm")return zq(t,e);if(e.type==="root")return qq(t,e,n);if(e.type==="text")return Yq(t,e)}function Uq(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Qu,t.schema=i),t.ancestors.push(e);const a=ER(t,e.tagName,!1),s=Wq(t,e);let l=lE(t,e);return Mq.has(e.tagName)&&(l=l.filter(function(c){return typeof c=="string"?!xq(c):!0})),wR(t,s,a,e),oE(s,l),t.ancestors.pop(),t.schema=r,t.create(e,a,s,n)}function Hq(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ah(t,e.position)}function zq(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ah(t,e.position)}function $q(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Qu,t.schema=i),t.ancestors.push(e);const a=e.name===null?t.Fragment:ER(t,e.name,!0),s=Xq(t,e),l=lE(t,e);return wR(t,s,a,e),oE(s,l),t.ancestors.pop(),t.schema=r,t.create(e,a,s,n)}function qq(t,e,n){const r={};return oE(r,lE(t,e)),t.create(e,t.Fragment,r,n)}function Yq(t,e){return e.value}function wR(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function oE(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Vq(t,e,n){return r;function r(i,a,s,l){const d=Array.isArray(s.children)?n:e;return l?d(a,s,l):d(a,s)}}function Gq(t,e){return n;function n(r,i,a,s){const l=Array.isArray(a.children),c=ja(r);return e(i,a,s,l,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function Wq(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&sE.call(e.properties,i)){const a=Kq(t,i,e.properties[i]);if(a){const[s,l]=a;t.tableCellAlignToStyle&&s==="align"&&typeof l=="string"&&Bq.has(e.tagName)?r=l:n[s]=l}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Xq(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const s=a.expression;s.type;const l=s.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else ah(t,e.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const l=r.value.data.estree.body[0];l.type,a=t.evaluater.evaluateExpression(l.expression)}else ah(t,e.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function lE(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:Iq;for(;++r<e.children.length;){const a=e.children[r];let s;if(t.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const d=i.get(c)||0;s=c+"-"+d,i.set(c,d+1)}}const l=vR(t,a,s);l!==void 0&&n.push(l)}return n}function Kq(t,e,n){const r=aE(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?uR(n):bR(n)),r.property==="style"){let i=typeof n=="object"?n:Qq(t,String(n));return t.stylePropertyNameCase==="css"&&(i=Zq(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?Aq[r.property]||r.property:r.attribute,n]}}function Qq(t,e){try{return Dq(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new br("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=xR+"#cannot-parse-style-attribute",i}}function ER(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,s;for(;++a<i.length;){const l=kC(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};s=s?{type:"MemberExpression",object:s,property:l,computed:!!(a&&l.type==="Literal"),optional:!1}:l}r=s}else r=kC(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return sE.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);ah(t)}function ah(t,e){const n=new br("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=xR+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Zq(t){const e={};let n;for(n in t)sE.call(t,n)&&(e[Jq(n)]=t[n]);return e}function Jq(t){let e=t.replace(Lq,eY);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function eY(t){return"-"+t.toLowerCase()}const ix={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},tY={};function nY(t,e){const n=tY,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return AR(t,r,i)}function AR(t,e,n){if(rY(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return HC(t.children,e,n)}return Array.isArray(t)?HC(t,e,n):""}function HC(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=AR(t[i],e,n);return r.join("")}function rY(t){return!!(t&&typeof t=="object")}const zC=document.createElement("i");function uE(t){const e="&"+t+";";zC.innerHTML=e;const n=zC.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Sa(t,e,n,r){const i=t.length;let a=0,s;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)s=Array.from(r),s.unshift(e,n),t.splice(...s);else for(n&&t.splice(e,n);a<r.length;)s=r.slice(a,a+1e4),s.unshift(e,0),t.splice(...s),a+=1e4,e+=1e4}function Li(t,e){return t.length>0?(Sa(t,t.length,0,e),t):e}const $C={}.hasOwnProperty;function iY(t){const e={};let n=-1;for(;++n<t.length;)aY(e,t[n]);return e}function aY(t,e){let n;for(n in e){const i=($C.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let s;if(a)for(s in a){$C.call(i,s)||(i[s]=[]);const l=a[s];sY(i[s],Array.isArray(l)?l:l?[l]:[])}}}function sY(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Sa(t,0,0,r)}function SR(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Cu(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const xa=ho(/[A-Za-z]/),gi=ho(/[\dA-Za-z]/),oY=ho(/[#-'*+\--9=?A-Z^-~]/);function Ev(t){return t!==null&&(t<32||t===127)}const Av=ho(/\d/),lY=ho(/[\dA-Fa-f]/),uY=ho(/[!-/:-@[-`{-~]/);function at(t){return t!==null&&t<-2}function Qr(t){return t!==null&&(t<0||t===32)}function Lt(t){return t===-2||t===-1||t===32}const cY=ho(new RegExp("\\p{P}|\\p{S}","u")),dY=ho(/\s/);function ho(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Zu(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const a=t.charCodeAt(n);let s="";if(a===37&&gi(t.charCodeAt(n+1))&&gi(t.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(s=String.fromCharCode(a));else if(a>55295&&a<57344){const l=t.charCodeAt(n+1);a<56320&&l>56319&&l<57344?(s=String.fromCharCode(a,l),i=1):s=""}else s=String.fromCharCode(a);s&&(e.push(t.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function en(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return s;function s(c){return Lt(c)?(t.enter(n),l(c)):e(c)}function l(c){return Lt(c)&&a++<i?(t.consume(c),l):(t.exit(n),e(c))}}const hY={tokenize:fY};function fY(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),en(t,e,"linePrefix")}function i(l){return t.enter("paragraph"),a(l)}function a(l){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,s(l)}function s(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return at(l)?(t.consume(l),t.exit("chunkText"),a):(t.consume(l),s)}}const mY={tokenize:pY},qC={tokenize:gY};function pY(t){const e=this,n=[];let r=0,i,a,s;return l;function l(N){if(r<n.length){const P=n[r];return e.containerState=P[1],t.attempt(P[0].continuation,c,d)(N)}return d(N)}function c(N){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&C();const P=e.events.length;let k=P,j;for(;k--;)if(e.events[k][0]==="exit"&&e.events[k][1].type==="chunkFlow"){j=e.events[k][1].end;break}T(r);let D=P;for(;D<e.events.length;)e.events[D][1].end={...j},D++;return Sa(e.events,k+1,0,e.events.slice(P)),e.events.length=D,d(N)}return l(N)}function d(N){if(r===n.length){if(!i)return b(N);if(i.currentConstruct&&i.currentConstruct.concrete)return x(N);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(qC,h,p)(N)}function h(N){return i&&C(),T(r),b(N)}function p(N){return e.parser.lazy[e.now().line]=r!==n.length,s=e.now().offset,x(N)}function b(N){return e.containerState={},t.attempt(qC,y,x)(N)}function y(N){return r++,n.push([e.currentConstruct,e.containerState]),b(N)}function x(N){if(N===null){i&&C(),T(0),t.consume(N);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),w(N)}function w(N){if(N===null){E(t.exit("chunkFlow"),!0),T(0),t.consume(N);return}return at(N)?(t.consume(N),E(t.exit("chunkFlow")),r=0,e.interrupt=void 0,l):(t.consume(N),w)}function E(N,P){const k=e.sliceStream(N);if(P&&k.push(null),N.previous=a,a&&(a.next=N),a=N,i.defineSkip(N.start),i.write(k),e.parser.lazy[N.start.line]){let j=i.events.length;for(;j--;)if(i.events[j][1].start.offset<s&&(!i.events[j][1].end||i.events[j][1].end.offset>s))return;const D=e.events.length;let H=D,Y,X;for(;H--;)if(e.events[H][0]==="exit"&&e.events[H][1].type==="chunkFlow"){if(Y){X=e.events[H][1].end;break}Y=!0}for(T(r),j=D;j<e.events.length;)e.events[j][1].end={...X},j++;Sa(e.events,H+1,0,e.events.slice(D)),e.events.length=j}}function T(N){let P=n.length;for(;P-- >N;){const k=n[P];e.containerState=k[1],k[0].exit.call(e,t)}n.length=N}function C(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function gY(t,e,n){return en(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function YC(t){if(t===null||Qr(t)||dY(t))return 1;if(cY(t))return 2}function cE(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const a=t[i].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const Sv={name:"attention",resolveAll:bY,tokenize:yY};function bY(t,e){let n=-1,r,i,a,s,l,c,d,h;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const p={...t[r][1].end},b={...t[n][1].start};VC(p,-c),VC(b,c),s={type:c>1?"strongSequence":"emphasisSequence",start:p,end:{...t[r][1].end}},l={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},a={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...s.start},end:{...l.end}},t[r][1].end={...s.start},t[n][1].start={...l.end},d=[],t[r][1].end.offset-t[r][1].start.offset&&(d=Li(d,[["enter",t[r][1],e],["exit",t[r][1],e]])),d=Li(d,[["enter",i,e],["enter",s,e],["exit",s,e],["enter",a,e]]),d=Li(d,cE(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),d=Li(d,[["exit",a,e],["enter",l,e],["exit",l,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(h=2,d=Li(d,[["enter",t[n][1],e],["exit",t[n][1],e]])):h=0,Sa(t,r-1,n-r+3,d),n=r+d.length-h-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function yY(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=YC(r);let a;return s;function s(c){return a=c,t.enter("attentionSequence"),l(c)}function l(c){if(c===a)return t.consume(c),l;const d=t.exit("attentionSequence"),h=YC(c),p=!h||h===2&&i||n.includes(c),b=!i||i===2&&h||n.includes(r);return d._open=!!(a===42?p:p&&(i||!b)),d._close=!!(a===42?b:b&&(h||!p)),e(c)}}function VC(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const xY={name:"autolink",tokenize:vY};function vY(t,e,n){let r=0;return i;function i(y){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(y){return xa(y)?(t.consume(y),s):y===64?n(y):d(y)}function s(y){return y===43||y===45||y===46||gi(y)?(r=1,l(y)):d(y)}function l(y){return y===58?(t.consume(y),r=0,c):(y===43||y===45||y===46||gi(y))&&r++<32?(t.consume(y),l):(r=0,d(y))}function c(y){return y===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):y===null||y===32||y===60||Ev(y)?n(y):(t.consume(y),c)}function d(y){return y===64?(t.consume(y),h):oY(y)?(t.consume(y),d):n(y)}function h(y){return gi(y)?p(y):n(y)}function p(y){return y===46?(t.consume(y),r=0,h):y===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(y),t.exit("autolinkMarker"),t.exit("autolink"),e):b(y)}function b(y){if((y===45||gi(y))&&r++<63){const x=y===45?b:p;return t.consume(y),x}return n(y)}}const _g={partial:!0,tokenize:wY};function wY(t,e,n){return r;function r(a){return Lt(a)?en(t,i,"linePrefix")(a):i(a)}function i(a){return a===null||at(a)?e(a):n(a)}}const TR={continuation:{tokenize:AY},exit:SY,name:"blockQuote",tokenize:EY};function EY(t,e,n){const r=this;return i;function i(s){if(s===62){const l=r.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(s),t.exit("blockQuoteMarker"),a}return n(s)}function a(s){return Lt(s)?(t.enter("blockQuotePrefixWhitespace"),t.consume(s),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(s))}}function AY(t,e,n){const r=this;return i;function i(s){return Lt(s)?en(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s):a(s)}function a(s){return t.attempt(TR,e,n)(s)}}function SY(t){t.exit("blockQuote")}const _R={name:"characterEscape",tokenize:TY};function TY(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),i}function i(a){return uY(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const NR={name:"characterReference",tokenize:_Y};function _Y(t,e,n){const r=this;let i=0,a,s;return l;function l(p){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),c}function c(p){return p===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(p),t.exit("characterReferenceMarkerNumeric"),d):(t.enter("characterReferenceValue"),a=31,s=gi,h(p))}function d(p){return p===88||p===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(p),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,s=lY,h):(t.enter("characterReferenceValue"),a=7,s=Av,h(p))}function h(p){if(p===59&&i){const b=t.exit("characterReferenceValue");return s===gi&&!uE(r.sliceSerialize(b))?n(p):(t.enter("characterReferenceMarker"),t.consume(p),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return s(p)&&i++<a?(t.consume(p),h):n(p)}}const GC={partial:!0,tokenize:CY},WC={concrete:!0,name:"codeFenced",tokenize:NY};function NY(t,e,n){const r=this,i={partial:!0,tokenize:k};let a=0,s=0,l;return c;function c(j){return d(j)}function d(j){const D=r.events[r.events.length-1];return a=D&&D[1].type==="linePrefix"?D[2].sliceSerialize(D[1],!0).length:0,l=j,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),h(j)}function h(j){return j===l?(s++,t.consume(j),h):s<3?n(j):(t.exit("codeFencedFenceSequence"),Lt(j)?en(t,p,"whitespace")(j):p(j))}function p(j){return j===null||at(j)?(t.exit("codeFencedFence"),r.interrupt?e(j):t.check(GC,w,P)(j)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(j))}function b(j){return j===null||at(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),p(j)):Lt(j)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),en(t,y,"whitespace")(j)):j===96&&j===l?n(j):(t.consume(j),b)}function y(j){return j===null||at(j)?p(j):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),x(j))}function x(j){return j===null||at(j)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),p(j)):j===96&&j===l?n(j):(t.consume(j),x)}function w(j){return t.attempt(i,P,E)(j)}function E(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),T}function T(j){return a>0&&Lt(j)?en(t,C,"linePrefix",a+1)(j):C(j)}function C(j){return j===null||at(j)?t.check(GC,w,P)(j):(t.enter("codeFlowValue"),N(j))}function N(j){return j===null||at(j)?(t.exit("codeFlowValue"),C(j)):(t.consume(j),N)}function P(j){return t.exit("codeFenced"),e(j)}function k(j,D,H){let Y=0;return X;function X(W){return j.enter("lineEnding"),j.consume(W),j.exit("lineEnding"),z}function z(W){return j.enter("codeFencedFence"),Lt(W)?en(j,K,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):K(W)}function K(W){return W===l?(j.enter("codeFencedFenceSequence"),ce(W)):H(W)}function ce(W){return W===l?(Y++,j.consume(W),ce):Y>=s?(j.exit("codeFencedFenceSequence"),Lt(W)?en(j,te,"whitespace")(W):te(W)):H(W)}function te(W){return W===null||at(W)?(j.exit("codeFencedFence"),D(W)):H(W)}}}function CY(t,e,n){const r=this;return i;function i(s){return s===null?n(s):(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),a)}function a(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}const ax={name:"codeIndented",tokenize:kY},OY={partial:!0,tokenize:jY};function kY(t,e,n){const r=this;return i;function i(d){return t.enter("codeIndented"),en(t,a,"linePrefix",5)(d)}function a(d){const h=r.events[r.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?s(d):n(d)}function s(d){return d===null?c(d):at(d)?t.attempt(OY,s,c)(d):(t.enter("codeFlowValue"),l(d))}function l(d){return d===null||at(d)?(t.exit("codeFlowValue"),s(d)):(t.consume(d),l)}function c(d){return t.exit("codeIndented"),e(d)}}function jY(t,e,n){const r=this;return i;function i(s){return r.parser.lazy[r.now().line]?n(s):at(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),i):en(t,a,"linePrefix",5)(s)}function a(s){const l=r.events[r.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(s):at(s)?i(s):n(s)}}const PY={name:"codeText",previous:RY,resolve:DY,tokenize:IY};function DY(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function RY(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function IY(t,e,n){let r=0,i,a;return s;function s(p){return t.enter("codeText"),t.enter("codeTextSequence"),l(p)}function l(p){return p===96?(t.consume(p),r++,l):(t.exit("codeTextSequence"),c(p))}function c(p){return p===null?n(p):p===32?(t.enter("space"),t.consume(p),t.exit("space"),c):p===96?(a=t.enter("codeTextSequence"),i=0,h(p)):at(p)?(t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),c):(t.enter("codeTextData"),d(p))}function d(p){return p===null||p===32||p===96||at(p)?(t.exit("codeTextData"),c(p)):(t.consume(p),d)}function h(p){return p===96?(t.consume(p),i++,h):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(p)):(a.type="codeTextData",d(p))}}class LY{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&bd(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),bd(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),bd(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);bd(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);bd(this.left,n.reverse())}}}function bd(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function CR(t){const e={};let n=-1,r,i,a,s,l,c,d;const h=new LY(t);for(;++n<h.length;){for(;n in e;)n=e[n];if(r=h.get(n),n&&r[1].type==="chunkFlow"&&h.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,MY(h,n)),n=e[n],d=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(s=h.get(a),s[1].type==="lineEnding"||s[1].type==="lineEndingBlank")s[0]==="enter"&&(i&&(h.get(i)[1].type="lineEndingBlank"),s[1].type="lineEnding",i=a);else if(!(s[1].type==="linePrefix"||s[1].type==="listItemIndent"))break;i&&(r[1].end={...h.get(i)[1].start},l=h.slice(i,n),l.unshift(r),h.splice(i,n-i+1,l))}}return Sa(t,0,Number.POSITIVE_INFINITY,h.slice(0)),!d}function MY(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const a=[];let s=n._tokenizer;s||(s=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(s._contentTypeTextTrailing=!0));const l=s.events,c=[],d={};let h,p,b=-1,y=n,x=0,w=0;const E=[w];for(;y;){for(;t.get(++i)[1]!==y;);a.push(i),y._tokenizer||(h=r.sliceStream(y),y.next||h.push(null),p&&s.defineSkip(y.start),y._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(h),y._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),p=y,y=y.next}for(y=n;++b<l.length;)l[b][0]==="exit"&&l[b-1][0]==="enter"&&l[b][1].type===l[b-1][1].type&&l[b][1].start.line!==l[b][1].end.line&&(w=b+1,E.push(w),y._tokenizer=void 0,y.previous=void 0,y=y.next);for(s.events=[],y?(y._tokenizer=void 0,y.previous=void 0):E.pop(),b=E.length;b--;){const T=l.slice(E[b],E[b+1]),C=a.pop();c.push([C,C+T.length-1]),t.splice(C,2,T)}for(c.reverse(),b=-1;++b<c.length;)d[x+c[b][0]]=x+c[b][1],x+=c[b][1]-c[b][0]-1;return d}const BY={resolve:UY,tokenize:HY},FY={partial:!0,tokenize:zY};function UY(t){return CR(t),t}function HY(t,e){let n;return r;function r(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(l)}function i(l){return l===null?a(l):at(l)?t.check(FY,s,a)(l):(t.consume(l),i)}function a(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function s(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function zY(t,e,n){const r=this;return i;function i(s){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),en(t,a,"linePrefix")}function a(s){if(s===null||at(s))return n(s);const l=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(s):t.interrupt(r.parser.constructs.flow,n,e)(s)}}function OR(t,e,n,r,i,a,s,l,c){const d=c||Number.POSITIVE_INFINITY;let h=0;return p;function p(T){return T===60?(t.enter(r),t.enter(i),t.enter(a),t.consume(T),t.exit(a),b):T===null||T===32||T===41||Ev(T)?n(T):(t.enter(r),t.enter(s),t.enter(l),t.enter("chunkString",{contentType:"string"}),w(T))}function b(T){return T===62?(t.enter(a),t.consume(T),t.exit(a),t.exit(i),t.exit(r),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),y(T))}function y(T){return T===62?(t.exit("chunkString"),t.exit(l),b(T)):T===null||T===60||at(T)?n(T):(t.consume(T),T===92?x:y)}function x(T){return T===60||T===62||T===92?(t.consume(T),y):y(T)}function w(T){return!h&&(T===null||T===41||Qr(T))?(t.exit("chunkString"),t.exit(l),t.exit(s),t.exit(r),e(T)):h<d&&T===40?(t.consume(T),h++,w):T===41?(t.consume(T),h--,w):T===null||T===32||T===40||Ev(T)?n(T):(t.consume(T),T===92?E:w)}function E(T){return T===40||T===41||T===92?(t.consume(T),w):w(T)}}function kR(t,e,n,r,i,a){const s=this;let l=0,c;return d;function d(y){return t.enter(r),t.enter(i),t.consume(y),t.exit(i),t.enter(a),h}function h(y){return l>999||y===null||y===91||y===93&&!c||y===94&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(y):y===93?(t.exit(a),t.enter(i),t.consume(y),t.exit(i),t.exit(r),e):at(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),h):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===null||y===91||y===93||at(y)||l++>999?(t.exit("chunkString"),h(y)):(t.consume(y),c||(c=!Lt(y)),y===92?b:p)}function b(y){return y===91||y===92||y===93?(t.consume(y),l++,p):p(y)}}function jR(t,e,n,r,i,a){let s;return l;function l(b){return b===34||b===39||b===40?(t.enter(r),t.enter(i),t.consume(b),t.exit(i),s=b===40?41:b,c):n(b)}function c(b){return b===s?(t.enter(i),t.consume(b),t.exit(i),t.exit(r),e):(t.enter(a),d(b))}function d(b){return b===s?(t.exit(a),c(s)):b===null?n(b):at(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),en(t,d,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===s||b===null||at(b)?(t.exit("chunkString"),d(b)):(t.consume(b),b===92?p:h)}function p(b){return b===s||b===92?(t.consume(b),h):h(b)}}function Fd(t,e){let n;return r;function r(i){return at(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Lt(i)?en(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const $Y={name:"definition",tokenize:YY},qY={partial:!0,tokenize:VY};function YY(t,e,n){const r=this;let i;return a;function a(y){return t.enter("definition"),s(y)}function s(y){return kR.call(r,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(y)}function l(y){return i=Cu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),y===58?(t.enter("definitionMarker"),t.consume(y),t.exit("definitionMarker"),c):n(y)}function c(y){return Qr(y)?Fd(t,d)(y):d(y)}function d(y){return OR(t,h,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(y)}function h(y){return t.attempt(qY,p,p)(y)}function p(y){return Lt(y)?en(t,b,"whitespace")(y):b(y)}function b(y){return y===null||at(y)?(t.exit("definition"),r.parser.defined.push(i),e(y)):n(y)}}function VY(t,e,n){return r;function r(l){return Qr(l)?Fd(t,i)(l):n(l)}function i(l){return jR(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function a(l){return Lt(l)?en(t,s,"whitespace")(l):s(l)}function s(l){return l===null||at(l)?e(l):n(l)}}const GY={name:"hardBreakEscape",tokenize:WY};function WY(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),i}function i(a){return at(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const XY={name:"headingAtx",resolve:KY,tokenize:QY};function KY(t,e){let n=t.length-2,r=3,i,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Sa(t,r,n-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),t}function QY(t,e,n){let r=0;return i;function i(h){return t.enter("atxHeading"),a(h)}function a(h){return t.enter("atxHeadingSequence"),s(h)}function s(h){return h===35&&r++<6?(t.consume(h),s):h===null||Qr(h)?(t.exit("atxHeadingSequence"),l(h)):n(h)}function l(h){return h===35?(t.enter("atxHeadingSequence"),c(h)):h===null||at(h)?(t.exit("atxHeading"),e(h)):Lt(h)?en(t,l,"whitespace")(h):(t.enter("atxHeadingText"),d(h))}function c(h){return h===35?(t.consume(h),c):(t.exit("atxHeadingSequence"),l(h))}function d(h){return h===null||h===35||Qr(h)?(t.exit("atxHeadingText"),l(h)):(t.consume(h),d)}}const ZY=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],XC=["pre","script","style","textarea"],JY={concrete:!0,name:"htmlFlow",resolveTo:nV,tokenize:rV},eV={partial:!0,tokenize:aV},tV={partial:!0,tokenize:iV};function nV(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function rV(t,e,n){const r=this;let i,a,s,l,c;return d;function d(I){return h(I)}function h(I){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(I),p}function p(I){return I===33?(t.consume(I),b):I===47?(t.consume(I),a=!0,w):I===63?(t.consume(I),i=3,r.interrupt?e:M):xa(I)?(t.consume(I),s=String.fromCharCode(I),E):n(I)}function b(I){return I===45?(t.consume(I),i=2,y):I===91?(t.consume(I),i=5,l=0,x):xa(I)?(t.consume(I),i=4,r.interrupt?e:M):n(I)}function y(I){return I===45?(t.consume(I),r.interrupt?e:M):n(I)}function x(I){const oe="CDATA[";return I===oe.charCodeAt(l++)?(t.consume(I),l===oe.length?r.interrupt?e:K:x):n(I)}function w(I){return xa(I)?(t.consume(I),s=String.fromCharCode(I),E):n(I)}function E(I){if(I===null||I===47||I===62||Qr(I)){const oe=I===47,$=s.toLowerCase();return!oe&&!a&&XC.includes($)?(i=1,r.interrupt?e(I):K(I)):ZY.includes(s.toLowerCase())?(i=6,oe?(t.consume(I),T):r.interrupt?e(I):K(I)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(I):a?C(I):N(I))}return I===45||gi(I)?(t.consume(I),s+=String.fromCharCode(I),E):n(I)}function T(I){return I===62?(t.consume(I),r.interrupt?e:K):n(I)}function C(I){return Lt(I)?(t.consume(I),C):X(I)}function N(I){return I===47?(t.consume(I),X):I===58||I===95||xa(I)?(t.consume(I),P):Lt(I)?(t.consume(I),N):X(I)}function P(I){return I===45||I===46||I===58||I===95||gi(I)?(t.consume(I),P):k(I)}function k(I){return I===61?(t.consume(I),j):Lt(I)?(t.consume(I),k):N(I)}function j(I){return I===null||I===60||I===61||I===62||I===96?n(I):I===34||I===39?(t.consume(I),c=I,D):Lt(I)?(t.consume(I),j):H(I)}function D(I){return I===c?(t.consume(I),c=null,Y):I===null||at(I)?n(I):(t.consume(I),D)}function H(I){return I===null||I===34||I===39||I===47||I===60||I===61||I===62||I===96||Qr(I)?k(I):(t.consume(I),H)}function Y(I){return I===47||I===62||Lt(I)?N(I):n(I)}function X(I){return I===62?(t.consume(I),z):n(I)}function z(I){return I===null||at(I)?K(I):Lt(I)?(t.consume(I),z):n(I)}function K(I){return I===45&&i===2?(t.consume(I),R):I===60&&i===1?(t.consume(I),B):I===62&&i===4?(t.consume(I),U):I===63&&i===3?(t.consume(I),M):I===93&&i===5?(t.consume(I),le):at(I)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(eV,Q,ce)(I)):I===null||at(I)?(t.exit("htmlFlowData"),ce(I)):(t.consume(I),K)}function ce(I){return t.check(tV,te,Q)(I)}function te(I){return t.enter("lineEnding"),t.consume(I),t.exit("lineEnding"),W}function W(I){return I===null||at(I)?ce(I):(t.enter("htmlFlowData"),K(I))}function R(I){return I===45?(t.consume(I),M):K(I)}function B(I){return I===47?(t.consume(I),s="",re):K(I)}function re(I){if(I===62){const oe=s.toLowerCase();return XC.includes(oe)?(t.consume(I),U):K(I)}return xa(I)&&s.length<8?(t.consume(I),s+=String.fromCharCode(I),re):K(I)}function le(I){return I===93?(t.consume(I),M):K(I)}function M(I){return I===62?(t.consume(I),U):I===45&&i===2?(t.consume(I),M):K(I)}function U(I){return I===null||at(I)?(t.exit("htmlFlowData"),Q(I)):(t.consume(I),U)}function Q(I){return t.exit("htmlFlow"),e(I)}}function iV(t,e,n){const r=this;return i;function i(s){return at(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),a):n(s)}function a(s){return r.parser.lazy[r.now().line]?n(s):e(s)}}function aV(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(_g,e,n)}}const sV={name:"htmlText",tokenize:oV};function oV(t,e,n){const r=this;let i,a,s;return l;function l(M){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(M),c}function c(M){return M===33?(t.consume(M),d):M===47?(t.consume(M),k):M===63?(t.consume(M),N):xa(M)?(t.consume(M),H):n(M)}function d(M){return M===45?(t.consume(M),h):M===91?(t.consume(M),a=0,x):xa(M)?(t.consume(M),C):n(M)}function h(M){return M===45?(t.consume(M),y):n(M)}function p(M){return M===null?n(M):M===45?(t.consume(M),b):at(M)?(s=p,B(M)):(t.consume(M),p)}function b(M){return M===45?(t.consume(M),y):p(M)}function y(M){return M===62?R(M):M===45?b(M):p(M)}function x(M){const U="CDATA[";return M===U.charCodeAt(a++)?(t.consume(M),a===U.length?w:x):n(M)}function w(M){return M===null?n(M):M===93?(t.consume(M),E):at(M)?(s=w,B(M)):(t.consume(M),w)}function E(M){return M===93?(t.consume(M),T):w(M)}function T(M){return M===62?R(M):M===93?(t.consume(M),T):w(M)}function C(M){return M===null||M===62?R(M):at(M)?(s=C,B(M)):(t.consume(M),C)}function N(M){return M===null?n(M):M===63?(t.consume(M),P):at(M)?(s=N,B(M)):(t.consume(M),N)}function P(M){return M===62?R(M):N(M)}function k(M){return xa(M)?(t.consume(M),j):n(M)}function j(M){return M===45||gi(M)?(t.consume(M),j):D(M)}function D(M){return at(M)?(s=D,B(M)):Lt(M)?(t.consume(M),D):R(M)}function H(M){return M===45||gi(M)?(t.consume(M),H):M===47||M===62||Qr(M)?Y(M):n(M)}function Y(M){return M===47?(t.consume(M),R):M===58||M===95||xa(M)?(t.consume(M),X):at(M)?(s=Y,B(M)):Lt(M)?(t.consume(M),Y):R(M)}function X(M){return M===45||M===46||M===58||M===95||gi(M)?(t.consume(M),X):z(M)}function z(M){return M===61?(t.consume(M),K):at(M)?(s=z,B(M)):Lt(M)?(t.consume(M),z):Y(M)}function K(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(t.consume(M),i=M,ce):at(M)?(s=K,B(M)):Lt(M)?(t.consume(M),K):(t.consume(M),te)}function ce(M){return M===i?(t.consume(M),i=void 0,W):M===null?n(M):at(M)?(s=ce,B(M)):(t.consume(M),ce)}function te(M){return M===null||M===34||M===39||M===60||M===61||M===96?n(M):M===47||M===62||Qr(M)?Y(M):(t.consume(M),te)}function W(M){return M===47||M===62||Qr(M)?Y(M):n(M)}function R(M){return M===62?(t.consume(M),t.exit("htmlTextData"),t.exit("htmlText"),e):n(M)}function B(M){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),re}function re(M){return Lt(M)?en(t,le,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):le(M)}function le(M){return t.enter("htmlTextData"),s(M)}}const dE={name:"labelEnd",resolveAll:dV,resolveTo:hV,tokenize:fV},lV={tokenize:mV},uV={tokenize:pV},cV={tokenize:gV};function dV(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Sa(t,0,t.length,n),t}function hV(t,e){let n=t.length,r=0,i,a,s,l;for(;n--;)if(i=t[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(s){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(s=n);const c={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},d={type:"label",start:{...t[a][1].start},end:{...t[s][1].end}},h={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[s-2][1].start}};return l=[["enter",c,e],["enter",d,e]],l=Li(l,t.slice(a+1,a+r+3)),l=Li(l,[["enter",h,e]]),l=Li(l,cE(e.parser.constructs.insideSpan.null,t.slice(a+r+4,s-3),e)),l=Li(l,[["exit",h,e],t[s-2],t[s-1],["exit",d,e]]),l=Li(l,t.slice(s+1)),l=Li(l,[["exit",c,e]]),Sa(t,a,t.length,l),t}function fV(t,e,n){const r=this;let i=r.events.length,a,s;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return l;function l(b){return a?a._inactive?p(b):(s=r.parser.defined.includes(Cu(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),c):n(b)}function c(b){return b===40?t.attempt(lV,h,s?h:p)(b):b===91?t.attempt(uV,h,s?d:p)(b):s?h(b):p(b)}function d(b){return t.attempt(cV,h,p)(b)}function h(b){return e(b)}function p(b){return a._balanced=!0,n(b)}}function mV(t,e,n){return r;function r(p){return t.enter("resource"),t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),i}function i(p){return Qr(p)?Fd(t,a)(p):a(p)}function a(p){return p===41?h(p):OR(t,s,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(p)}function s(p){return Qr(p)?Fd(t,c)(p):h(p)}function l(p){return n(p)}function c(p){return p===34||p===39||p===40?jR(t,d,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(p):h(p)}function d(p){return Qr(p)?Fd(t,h)(p):h(p)}function h(p){return p===41?(t.enter("resourceMarker"),t.consume(p),t.exit("resourceMarker"),t.exit("resource"),e):n(p)}}function pV(t,e,n){const r=this;return i;function i(l){return kR.call(r,t,a,s,"reference","referenceMarker","referenceString")(l)}function a(l){return r.parser.defined.includes(Cu(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function s(l){return n(l)}}function gV(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),i}function i(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const bV={name:"labelStartImage",resolveAll:dE.resolveAll,tokenize:yV};function yV(t,e,n){const r=this;return i;function i(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),a}function a(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),s):n(l)}function s(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(l):e(l)}}const xV={name:"labelStartLink",resolveAll:dE.resolveAll,tokenize:vV};function vV(t,e,n){const r=this;return i;function i(s){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelLink"),a}function a(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const sx={name:"lineEnding",tokenize:wV};function wV(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),en(t,e,"linePrefix")}}const Zm={name:"thematicBreak",tokenize:EV};function EV(t,e,n){let r=0,i;return a;function a(d){return t.enter("thematicBreak"),s(d)}function s(d){return i=d,l(d)}function l(d){return d===i?(t.enter("thematicBreakSequence"),c(d)):r>=3&&(d===null||at(d))?(t.exit("thematicBreak"),e(d)):n(d)}function c(d){return d===i?(t.consume(d),r++,c):(t.exit("thematicBreakSequence"),Lt(d)?en(t,l,"whitespace")(d):l(d))}}const zr={continuation:{tokenize:_V},exit:CV,name:"list",tokenize:TV},AV={partial:!0,tokenize:OV},SV={partial:!0,tokenize:NV};function TV(t,e,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,s=0;return l;function l(y){const x=r.containerState.type||(y===42||y===43||y===45?"listUnordered":"listOrdered");if(x==="listUnordered"?!r.containerState.marker||y===r.containerState.marker:Av(y)){if(r.containerState.type||(r.containerState.type=x,t.enter(x,{_container:!0})),x==="listUnordered")return t.enter("listItemPrefix"),y===42||y===45?t.check(Zm,n,d)(y):d(y);if(!r.interrupt||y===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(y)}return n(y)}function c(y){return Av(y)&&++s<10?(t.consume(y),c):(!r.interrupt||s<2)&&(r.containerState.marker?y===r.containerState.marker:y===41||y===46)?(t.exit("listItemValue"),d(y)):n(y)}function d(y){return t.enter("listItemMarker"),t.consume(y),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||y,t.check(_g,r.interrupt?n:h,t.attempt(AV,b,p))}function h(y){return r.containerState.initialBlankLine=!0,a++,b(y)}function p(y){return Lt(y)?(t.enter("listItemPrefixWhitespace"),t.consume(y),t.exit("listItemPrefixWhitespace"),b):n(y)}function b(y){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(y)}}function _V(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(_g,i,a);function i(l){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,en(t,e,"listItemIndent",r.containerState.size+1)(l)}function a(l){return r.containerState.furtherBlankLines||!Lt(l)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(l)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(SV,e,s)(l))}function s(l){return r.containerState._closeFlow=!0,r.interrupt=void 0,en(t,t.attempt(zr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function NV(t,e,n){const r=this;return en(t,i,"listItemIndent",r.containerState.size+1);function i(a){const s=r.events[r.events.length-1];return s&&s[1].type==="listItemIndent"&&s[2].sliceSerialize(s[1],!0).length===r.containerState.size?e(a):n(a)}}function CV(t){t.exit(this.containerState.type)}function OV(t,e,n){const r=this;return en(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const s=r.events[r.events.length-1];return!Lt(a)&&s&&s[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const KC={name:"setextUnderline",resolveTo:kV,tokenize:jV};function kV(t,e){let n=t.length,r,i,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const s={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",a?(t.splice(i,0,["enter",s,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=s,t.push(["exit",s,e]),t}function jV(t,e,n){const r=this;let i;return a;function a(d){let h=r.events.length,p;for(;h--;)if(r.events[h][1].type!=="lineEnding"&&r.events[h][1].type!=="linePrefix"&&r.events[h][1].type!=="content"){p=r.events[h][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||p)?(t.enter("setextHeadingLine"),i=d,s(d)):n(d)}function s(d){return t.enter("setextHeadingLineSequence"),l(d)}function l(d){return d===i?(t.consume(d),l):(t.exit("setextHeadingLineSequence"),Lt(d)?en(t,c,"lineSuffix")(d):c(d))}function c(d){return d===null||at(d)?(t.exit("setextHeadingLine"),e(d)):n(d)}}const PV={tokenize:DV};function DV(t){const e=this,n=t.attempt(_g,r,t.attempt(this.parser.constructs.flowInitial,i,en(t,t.attempt(this.parser.constructs.flow,i,t.attempt(BY,i)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const RV={resolveAll:DR()},IV=PR("string"),LV=PR("text");function PR(t){return{resolveAll:DR(t==="text"?MV:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],a=n.attempt(i,s,l);return s;function s(h){return d(h)?a(h):l(h)}function l(h){if(h===null){n.consume(h);return}return n.enter("data"),n.consume(h),c}function c(h){return d(h)?(n.exit("data"),a(h)):(n.consume(h),c)}function d(h){if(h===null)return!0;const p=i[h];let b=-1;if(p)for(;++b<p.length;){const y=p[b];if(!y.previous||y.previous.call(r,r.previous))return!0}return!1}}}function DR(t){return e;function e(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return t?t(n,r):n}}function MV(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let a=i.length,s=-1,l=0,c;for(;a--;){const d=i[a];if(typeof d=="string"){for(s=d.length;d.charCodeAt(s-1)===32;)l++,s--;if(s)break;s=-1}else if(d===-2)c=!0,l++;else if(d!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const d={type:n===t.length||c||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...d.start},r.start.offset===r.end.offset?Object.assign(r,d):(t.splice(n,0,["enter",d,e],["exit",d,e]),n+=2)}n++}return t}const BV={42:zr,43:zr,45:zr,48:zr,49:zr,50:zr,51:zr,52:zr,53:zr,54:zr,55:zr,56:zr,57:zr,62:TR},FV={91:$Y},UV={[-2]:ax,[-1]:ax,32:ax},HV={35:XY,42:Zm,45:[KC,Zm],60:JY,61:KC,95:Zm,96:WC,126:WC},zV={38:NR,92:_R},$V={[-5]:sx,[-4]:sx,[-3]:sx,33:bV,38:NR,42:Sv,60:[xY,sV],91:xV,92:[GY,_R],93:dE,95:Sv,96:PY},qV={null:[Sv,RV]},YV={null:[42,95]},VV={null:[]},GV=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:YV,contentInitial:FV,disable:VV,document:BV,flow:HV,flowInitial:UV,insideSpan:qV,string:zV,text:$V},Symbol.toStringTag,{value:"Module"}));function WV(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let s=[],l=[];const c={attempt:D(k),check:D(j),consume:C,enter:N,exit:P,interrupt:D(j,{interrupt:!0})},d={code:null,containerState:{},defineSkip:w,events:[],now:x,parser:t,previous:null,sliceSerialize:b,sliceStream:y,write:p};let h=e.tokenize.call(d,c);return e.resolveAll&&a.push(e),d;function p(z){return s=Li(s,z),E(),s[s.length-1]!==null?[]:(H(e,0),d.events=cE(a,d.events,d),d.events)}function b(z,K){return KV(y(z),K)}function y(z){return XV(s,z)}function x(){const{_bufferIndex:z,_index:K,line:ce,column:te,offset:W}=r;return{_bufferIndex:z,_index:K,line:ce,column:te,offset:W}}function w(z){i[z.line]=z.column,X()}function E(){let z;for(;r._index<s.length;){const K=s[r._index];if(typeof K=="string")for(z=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===z&&r._bufferIndex<K.length;)T(K.charCodeAt(r._bufferIndex));else T(K)}}function T(z){h=h(z)}function C(z){at(z)?(r.line++,r.column=1,r.offset+=z===-3?2:1,X()):z!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++)),d.previous=z}function N(z,K){const ce=K||{};return ce.type=z,ce.start=x(),d.events.push(["enter",ce,d]),l.push(ce),ce}function P(z){const K=l.pop();return K.end=x(),d.events.push(["exit",K,d]),K}function k(z,K){H(z,K.from)}function j(z,K){K.restore()}function D(z,K){return ce;function ce(te,W,R){let B,re,le,M;return Array.isArray(te)?Q(te):"tokenize"in te?Q([te]):U(te);function U(ie){return me;function me(be){const J=be!==null&&ie[be],Oe=be!==null&&ie.null,Be=[...Array.isArray(J)?J:J?[J]:[],...Array.isArray(Oe)?Oe:Oe?[Oe]:[]];return Q(Be)(be)}}function Q(ie){return B=ie,re=0,ie.length===0?R:I(ie[re])}function I(ie){return me;function me(be){return M=Y(),le=ie,ie.partial||(d.currentConstruct=ie),ie.name&&d.parser.constructs.disable.null.includes(ie.name)?$():ie.tokenize.call(K?Object.assign(Object.create(d),K):d,c,oe,$)(be)}}function oe(ie){return z(le,M),W}function $(ie){return M.restore(),++re<B.length?I(B[re]):R}}}function H(z,K){z.resolveAll&&!a.includes(z)&&a.push(z),z.resolve&&Sa(d.events,K,d.events.length-K,z.resolve(d.events.slice(K),d)),z.resolveTo&&(d.events=z.resolveTo(d.events,d))}function Y(){const z=x(),K=d.previous,ce=d.currentConstruct,te=d.events.length,W=Array.from(l);return{from:te,restore:R};function R(){r=z,d.previous=K,d.currentConstruct=ce,d.events.length=te,l=W,X()}}function X(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function XV(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let s;if(n===i)s=[t[n].slice(r,a)];else{if(s=t.slice(n,i),r>-1){const l=s[0];typeof l=="string"?s[0]=l.slice(r):s.shift()}a>0&&s.push(t[i].slice(0,a))}return s}function KV(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const a=t[n];let s;if(typeof a=="string")s=a;else switch(a){case-5:{s="\r";break}case-4:{s=`
`;break}case-3:{s=`\r
`;break}case-2:{s=e?" ":"	";break}case-1:{if(!e&&i)continue;s=" ";break}default:s=String.fromCharCode(a)}i=a===-2,r.push(s)}return r.join("")}function QV(t){const r={constructs:iY([GV,...(t||{}).extensions||[]]),content:i(hY),defined:[],document:i(mY),flow:i(PV),lazy:{},string:i(IV),text:i(LV)};return r;function i(a){return s;function s(l){return WV(r,a,l)}}}function ZV(t){for(;!CR(t););return t}const QC=/[\0\t\n\r]/g;function JV(){let t=1,e="",n=!0,r;return i;function i(a,s,l){const c=[];let d,h,p,b,y;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(s||void 0).decode(a)),p=0,e="",n&&(a.charCodeAt(0)===65279&&p++,n=void 0);p<a.length;){if(QC.lastIndex=p,d=QC.exec(a),b=d&&d.index!==void 0?d.index:a.length,y=a.charCodeAt(b),!d){e=a.slice(p);break}if(y===10&&p===b&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),p<b&&(c.push(a.slice(p,b)),t+=b-p),y){case 0:{c.push(65533),t++;break}case 9:{for(h=Math.ceil(t/4)*4,c.push(-2);t++<h;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}p=b+1}return l&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}const eG=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function tG(t){return t.replace(eG,nG)}function nG(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return SR(n.slice(a?2:1),a?16:10)}return uE(n)||t}const RR={}.hasOwnProperty;function rG(t,e,n){return typeof e!="string"&&(n=e,e=void 0),iG(n)(ZV(QV(n).document().write(JV()(t,e,!0))))}function iG(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(De),autolinkProtocol:Y,autolinkEmail:Y,atxHeading:a(tt),blockQuote:a(Oe),characterEscape:Y,characterReference:Y,codeFenced:a(Be),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:a(Be,s),codeText:a(se,s),codeTextData:Y,data:Y,codeFlowValue:Y,definition:a(ze),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:a(Fe),hardBreakEscape:a(ee),hardBreakTrailing:a(ee),htmlFlow:a(ye,s),htmlFlowData:Y,htmlText:a(ye,s),htmlTextData:Y,image:a(He),label:s,link:a(De),listItem:a(Ge),listItemValue:b,listOrdered:a(Ue,p),listUnordered:a(Ue),paragraph:a(nt),reference:I,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:a(tt),strong:a(rt),thematicBreak:a(Ae)},exit:{atxHeading:c(),atxHeadingSequence:k,autolink:c(),autolinkEmail:J,autolinkProtocol:be,blockQuote:c(),characterEscapeValue:X,characterReferenceMarkerHexadecimal:$,characterReferenceMarkerNumeric:$,characterReferenceValue:ie,characterReference:me,codeFenced:c(E),codeFencedFence:w,codeFencedFenceInfo:y,codeFencedFenceMeta:x,codeFlowValue:X,codeIndented:c(T),codeText:c(W),codeTextData:X,data:X,definition:c(),definitionDestinationString:P,definitionLabelString:C,definitionTitleString:N,emphasis:c(),hardBreakEscape:c(K),hardBreakTrailing:c(K),htmlFlow:c(ce),htmlFlowData:X,htmlText:c(te),htmlTextData:X,image:c(B),label:le,labelText:re,lineEnding:z,link:c(R),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:oe,resourceDestinationString:M,resourceTitleString:U,resource:Q,setextHeading:c(H),setextHeadingLineSequence:D,setextHeadingText:j,strong:c(),thematicBreak:c()}};IR(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(ne){let we={type:"root",children:[]};const Le={stack:[we],tokenStack:[],config:e,enter:l,exit:d,buffer:s,resume:h,data:n},Ke=[];let ot=-1;for(;++ot<ne.length;)if(ne[ot][1].type==="listOrdered"||ne[ot][1].type==="listUnordered")if(ne[ot][0]==="enter")Ke.push(ot);else{const Ot=Ke.pop();ot=i(ne,Ot,ot)}for(ot=-1;++ot<ne.length;){const Ot=e[ne[ot][0]];RR.call(Ot,ne[ot][1].type)&&Ot[ne[ot][1].type].call(Object.assign({sliceSerialize:ne[ot][2].sliceSerialize},Le),ne[ot][1])}if(Le.tokenStack.length>0){const Ot=Le.tokenStack[Le.tokenStack.length-1];(Ot[1]||ZC).call(Le,void 0,Ot[0])}for(we.position={start:Ks(ne.length>0?ne[0][1].start:{line:1,column:1,offset:0}),end:Ks(ne.length>0?ne[ne.length-2][1].end:{line:1,column:1,offset:0})},ot=-1;++ot<e.transforms.length;)we=e.transforms[ot](we)||we;return we}function i(ne,we,Le){let Ke=we-1,ot=-1,Ot=!1,vr,pe,ke,ue;for(;++Ke<=Le;){const _e=ne[Ke];switch(_e[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_e[0]==="enter"?ot++:ot--,ue=void 0;break}case"lineEndingBlank":{_e[0]==="enter"&&(vr&&!ue&&!ot&&!ke&&(ke=Ke),ue=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:ue=void 0}if(!ot&&_e[0]==="enter"&&_e[1].type==="listItemPrefix"||ot===-1&&_e[0]==="exit"&&(_e[1].type==="listUnordered"||_e[1].type==="listOrdered")){if(vr){let Me=Ke;for(pe=void 0;Me--;){const vt=ne[Me];if(vt[1].type==="lineEnding"||vt[1].type==="lineEndingBlank"){if(vt[0]==="exit")continue;pe&&(ne[pe][1].type="lineEndingBlank",Ot=!0),vt[1].type="lineEnding",pe=Me}else if(!(vt[1].type==="linePrefix"||vt[1].type==="blockQuotePrefix"||vt[1].type==="blockQuotePrefixWhitespace"||vt[1].type==="blockQuoteMarker"||vt[1].type==="listItemIndent"))break}ke&&(!pe||ke<pe)&&(vr._spread=!0),vr.end=Object.assign({},pe?ne[pe][1].start:_e[1].end),ne.splice(pe||Ke,0,["exit",vr,_e[2]]),Ke++,Le++}if(_e[1].type==="listItemPrefix"){const Me={type:"listItem",_spread:!1,start:Object.assign({},_e[1].start),end:void 0};vr=Me,ne.splice(Ke,0,["enter",Me,_e[2]]),Ke++,Le++,ke=void 0,ue=!0}}}return ne[we][1]._spread=Ot,Le}function a(ne,we){return Le;function Le(Ke){l.call(this,ne(Ke),Ke),we&&we.call(this,Ke)}}function s(){this.stack.push({type:"fragment",children:[]})}function l(ne,we,Le){this.stack[this.stack.length-1].children.push(ne),this.stack.push(ne),this.tokenStack.push([we,Le||void 0]),ne.position={start:Ks(we.start),end:void 0}}function c(ne){return we;function we(Le){ne&&ne.call(this,Le),d.call(this,Le)}}function d(ne,we){const Le=this.stack.pop(),Ke=this.tokenStack.pop();if(Ke)Ke[0].type!==ne.type&&(we?we.call(this,ne,Ke[0]):(Ke[1]||ZC).call(this,ne,Ke[0]));else throw new Error("Cannot close `"+ne.type+"` ("+Bd({start:ne.start,end:ne.end})+"): its not open");Le.position.end=Ks(ne.end)}function h(){return nY(this.stack.pop())}function p(){this.data.expectingFirstListItemValue=!0}function b(ne){if(this.data.expectingFirstListItemValue){const we=this.stack[this.stack.length-2];we.start=Number.parseInt(this.sliceSerialize(ne),10),this.data.expectingFirstListItemValue=void 0}}function y(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.lang=ne}function x(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.meta=ne}function w(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.value=ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function T(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.value=ne.replace(/(\r?\n|\r)$/g,"")}function C(ne){const we=this.resume(),Le=this.stack[this.stack.length-1];Le.label=we,Le.identifier=Cu(this.sliceSerialize(ne)).toLowerCase()}function N(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.title=ne}function P(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.url=ne}function k(ne){const we=this.stack[this.stack.length-1];if(!we.depth){const Le=this.sliceSerialize(ne).length;we.depth=Le}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function D(ne){const we=this.stack[this.stack.length-1];we.depth=this.sliceSerialize(ne).codePointAt(0)===61?1:2}function H(){this.data.setextHeadingSlurpLineEnding=void 0}function Y(ne){const Le=this.stack[this.stack.length-1].children;let Ke=Le[Le.length-1];(!Ke||Ke.type!=="text")&&(Ke=We(),Ke.position={start:Ks(ne.start),end:void 0},Le.push(Ke)),this.stack.push(Ke)}function X(ne){const we=this.stack.pop();we.value+=this.sliceSerialize(ne),we.position.end=Ks(ne.end)}function z(ne){const we=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Le=we.children[we.children.length-1];Le.position.end=Ks(ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(we.type)&&(Y.call(this,ne),X.call(this,ne))}function K(){this.data.atHardBreak=!0}function ce(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.value=ne}function te(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.value=ne}function W(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.value=ne}function R(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=we,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function B(){const ne=this.stack[this.stack.length-1];if(this.data.inReference){const we=this.data.referenceType||"shortcut";ne.type+="Reference",ne.referenceType=we,delete ne.url,delete ne.title}else delete ne.identifier,delete ne.label;this.data.referenceType=void 0}function re(ne){const we=this.sliceSerialize(ne),Le=this.stack[this.stack.length-2];Le.label=tG(we),Le.identifier=Cu(we).toLowerCase()}function le(){const ne=this.stack[this.stack.length-1],we=this.resume(),Le=this.stack[this.stack.length-1];if(this.data.inReference=!0,Le.type==="link"){const Ke=ne.children;Le.children=Ke}else Le.alt=we}function M(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.url=ne}function U(){const ne=this.resume(),we=this.stack[this.stack.length-1];we.title=ne}function Q(){this.data.inReference=void 0}function I(){this.data.referenceType="collapsed"}function oe(ne){const we=this.resume(),Le=this.stack[this.stack.length-1];Le.label=we,Le.identifier=Cu(this.sliceSerialize(ne)).toLowerCase(),this.data.referenceType="full"}function $(ne){this.data.characterReferenceType=ne.type}function ie(ne){const we=this.sliceSerialize(ne),Le=this.data.characterReferenceType;let Ke;Le?(Ke=SR(we,Le==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ke=uE(we);const ot=this.stack[this.stack.length-1];ot.value+=Ke}function me(ne){const we=this.stack.pop();we.position.end=Ks(ne.end)}function be(ne){X.call(this,ne);const we=this.stack[this.stack.length-1];we.url=this.sliceSerialize(ne)}function J(ne){X.call(this,ne);const we=this.stack[this.stack.length-1];we.url="mailto:"+this.sliceSerialize(ne)}function Oe(){return{type:"blockquote",children:[]}}function Be(){return{type:"code",lang:null,meta:null,value:""}}function se(){return{type:"inlineCode",value:""}}function ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Fe(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function ee(){return{type:"break"}}function ye(){return{type:"html",value:""}}function He(){return{type:"image",title:null,url:"",alt:null}}function De(){return{type:"link",title:null,url:"",children:[]}}function Ue(ne){return{type:"list",ordered:ne.type==="listOrdered",start:null,spread:ne._spread,children:[]}}function Ge(ne){return{type:"listItem",spread:ne._spread,checked:null,children:[]}}function nt(){return{type:"paragraph",children:[]}}function rt(){return{type:"strong",children:[]}}function We(){return{type:"text",value:""}}function Ae(){return{type:"thematicBreak"}}}function Ks(t){return{line:t.line,column:t.column,offset:t.offset}}function IR(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?IR(t,r):aG(t,r)}}function aG(t,e){let n;for(n in e)if(RR.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function ZC(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Bd({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Bd({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Bd({start:e.start,end:e.end})+") is still open")}function sG(t){const e=this;e.parser=n;function n(r){return rG(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function oG(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function lG(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function uG(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function cG(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function dG(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function hG(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Zu(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let s,l=t.footnoteCounts.get(r);l===void 0?(l=0,t.footnoteOrder.push(r),s=t.footnoteOrder.length):s=a+1,l+=1,t.footnoteCounts.set(r,l);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};t.patch(e,c);const d={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,d),t.applyData(e,d)}function fG(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function mG(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function LR(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&s.type==="text"?s.value+=r:i.push({type:"text",value:r}),i}function pG(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return LR(t,e);const i={src:Zu(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,a),t.applyData(e,a)}function gG(t,e){const n={src:Zu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function bG(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function yG(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return LR(t,e);const i={href:Zu(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function xG(t,e){const n={href:Zu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function vG(t,e,n){const r=t.all(e),i=n?wG(n):MR(e),a={},s=[];if(typeof e.checked=="boolean"){const h=r[0];let p;h&&h.type==="element"&&h.tagName==="p"?p=h:(p={type:"element",tagName:"p",properties:{},children:[]},r.unshift(p)),p.children.length>0&&p.children.unshift({type:"text",value:" "}),p.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let l=-1;for(;++l<r.length;){const h=r[l];(i||l!==0||h.type!=="element"||h.tagName!=="p")&&s.push({type:"text",value:`
`}),h.type==="element"&&h.tagName==="p"&&!i?s.push(...h.children):s.push(h)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&s.push({type:"text",value:`
`});const d={type:"element",tagName:"li",properties:a,children:s};return t.patch(e,d),t.applyData(e,d)}function wG(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=MR(n[r])}return e}function MR(t){const e=t.spread;return e??t.children.length>1}function EG(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const s=r[i];if(s.type==="element"&&s.tagName==="li"&&s.properties&&Array.isArray(s.properties.className)&&s.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function AG(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function SG(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function TG(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function _G(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const s={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],s),i.push(s)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=ja(e.children[1]),c=Tg(e.children[e.children.length-1]);l&&c&&(s.position={start:l,end:c}),i.push(s)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,a),t.applyData(e,a)}function NG(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",s=n&&n.type==="table"?n.align:void 0,l=s?s.length:e.children.length;let c=-1;const d=[];for(;++c<l;){const p=e.children[c],b={},y=s?s[c]:void 0;y&&(b.align=y);let x={type:"element",tagName:a,properties:b,children:[]};p&&(x.children=t.all(p),t.patch(p,x),x=t.applyData(p,x)),d.push(x)}const h={type:"element",tagName:"tr",properties:{},children:t.wrap(d,!0)};return t.patch(e,h),t.applyData(e,h)}function CG(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const JC=9,eO=32;function OG(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const a=[];for(;r;)a.push(tO(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return a.push(tO(e.slice(i),i>0,!1)),a.join("")}function tO(t,e,n){let r=0,i=t.length;if(e){let a=t.codePointAt(r);for(;a===JC||a===eO;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(i-1);for(;a===JC||a===eO;)i--,a=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function kG(t,e){const n={type:"text",value:OG(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function jG(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const PG={blockquote:oG,break:lG,code:uG,delete:cG,emphasis:dG,footnoteReference:hG,heading:fG,html:mG,imageReference:pG,image:gG,inlineCode:bG,linkReference:yG,link:xG,listItem:vG,list:EG,paragraph:AG,root:SG,strong:TG,table:_G,tableCell:CG,tableRow:NG,text:kG,thematicBreak:jG,toml:Tm,yaml:Tm,definition:Tm,footnoteDefinition:Tm};function Tm(){}const BR=-1,Ng=0,Ud=1,pp=2,hE=3,fE=4,mE=5,pE=6,FR=7,UR=8,nO=typeof self=="object"?self:globalThis,DG=(t,e)=>{const n=(i,a)=>(t.set(a,i),i),r=i=>{if(t.has(i))return t.get(i);const[a,s]=e[i];switch(a){case Ng:case BR:return n(s,i);case Ud:{const l=n([],i);for(const c of s)l.push(r(c));return l}case pp:{const l=n({},i);for(const[c,d]of s)l[r(c)]=r(d);return l}case hE:return n(new Date(s),i);case fE:{const{source:l,flags:c}=s;return n(new RegExp(l,c),i)}case mE:{const l=n(new Map,i);for(const[c,d]of s)l.set(r(c),r(d));return l}case pE:{const l=n(new Set,i);for(const c of s)l.add(r(c));return l}case FR:{const{name:l,message:c}=s;return n(new nO[l](c),i)}case UR:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i);case"ArrayBuffer":return n(new Uint8Array(s).buffer,s);case"DataView":{const{buffer:l}=new Uint8Array(s);return n(new DataView(l),s)}}return n(new nO[a](s),i)};return r},rO=t=>DG(new Map,t)(0),uu="",{toString:RG}={},{keys:IG}=Object,yd=t=>{const e=typeof t;if(e!=="object"||!t)return[Ng,e];const n=RG.call(t).slice(8,-1);switch(n){case"Array":return[Ud,uu];case"Object":return[pp,uu];case"Date":return[hE,uu];case"RegExp":return[fE,uu];case"Map":return[mE,uu];case"Set":return[pE,uu];case"DataView":return[Ud,n]}return n.includes("Array")?[Ud,n]:n.includes("Error")?[FR,n]:[pp,n]},_m=([t,e])=>t===Ng&&(e==="function"||e==="symbol"),LG=(t,e,n,r)=>{const i=(s,l)=>{const c=r.push(s)-1;return n.set(l,c),c},a=s=>{if(n.has(s))return n.get(s);let[l,c]=yd(s);switch(l){case Ng:{let h=s;switch(c){case"bigint":l=UR,h=s.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);h=null;break;case"undefined":return i([BR],s)}return i([l,h],s)}case Ud:{if(c){let b=s;return c==="DataView"?b=new Uint8Array(s.buffer):c==="ArrayBuffer"&&(b=new Uint8Array(s)),i([c,[...b]],s)}const h=[],p=i([l,h],s);for(const b of s)h.push(a(b));return p}case pp:{if(c)switch(c){case"BigInt":return i([c,s.toString()],s);case"Boolean":case"Number":case"String":return i([c,s.valueOf()],s)}if(e&&"toJSON"in s)return a(s.toJSON());const h=[],p=i([l,h],s);for(const b of IG(s))(t||!_m(yd(s[b])))&&h.push([a(b),a(s[b])]);return p}case hE:return i([l,s.toISOString()],s);case fE:{const{source:h,flags:p}=s;return i([l,{source:h,flags:p}],s)}case mE:{const h=[],p=i([l,h],s);for(const[b,y]of s)(t||!(_m(yd(b))||_m(yd(y))))&&h.push([a(b),a(y)]);return p}case pE:{const h=[],p=i([l,h],s);for(const b of s)(t||!_m(yd(b)))&&h.push(a(b));return p}}const{message:d}=s;return i([l,{name:c,message:d}],s)};return a},iO=(t,{json:e,lossy:n}={})=>{const r=[];return LG(!(e||n),!!e,new Map,r)(t),r},Lu=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?rO(iO(t,e)):structuredClone(t):(t,e)=>rO(iO(t,e));function MG(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function BG(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function FG(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||MG,r=t.options.footnoteBackLabel||BG,i=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",s=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let c=-1;for(;++c<t.footnoteOrder.length;){const d=t.footnoteById.get(t.footnoteOrder[c]);if(!d)continue;const h=t.all(d),p=String(d.identifier).toUpperCase(),b=Zu(p.toLowerCase());let y=0;const x=[],w=t.footnoteCounts.get(p);for(;w!==void 0&&++y<=w;){x.length>0&&x.push({type:"text",value:" "});let C=typeof n=="string"?n:n(c,y);typeof C=="string"&&(C={type:"text",value:C}),x.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(y>1?"-"+y:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,y),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const E=h[h.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const C=E.children[E.children.length-1];C&&C.type==="text"?C.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...x)}else h.push(...x);const T={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:t.wrap(h,!0)};t.patch(d,T),l.push(T)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Lu(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const HR=(function(t){if(t==null)return $G;if(typeof t=="function")return Cg(t);if(typeof t=="object")return Array.isArray(t)?UG(t):HG(t);if(typeof t=="string")return zG(t);throw new Error("Expected function, string, or object as test")});function UG(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=HR(t[n]);return Cg(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function HG(t){const e=t;return Cg(n);function n(r){const i=r;let a;for(a in t)if(i[a]!==e[a])return!1;return!0}}function zG(t){return Cg(e);function e(n){return n&&n.type===t}}function Cg(t){return e;function e(n,r,i){return!!(qG(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function $G(){return!0}function qG(t){return t!==null&&typeof t=="object"&&"type"in t}const zR=[],YG=!0,aO=!1,VG="skip";function GG(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const a=HR(i),s=r?-1:1;l(t,void 0,[])();function l(c,d,h){const p=c&&typeof c=="object"?c:{};if(typeof p.type=="string"){const y=typeof p.tagName=="string"?p.tagName:typeof p.name=="string"?p.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(c.type+(y?"<"+y+">":""))+")"})}return b;function b(){let y=zR,x,w,E;if((!e||a(c,d,h[h.length-1]||void 0))&&(y=WG(n(c,h)),y[0]===aO))return y;if("children"in c&&c.children){const T=c;if(T.children&&y[0]!==VG)for(w=(r?T.children.length:-1)+s,E=h.concat(T);w>-1&&w<T.children.length;){const C=T.children[w];if(x=l(C,w,E)(),x[0]===aO)return x;w=typeof x[1]=="number"?x[1]:w+s}}return y}}}function WG(t){return Array.isArray(t)?t:typeof t=="number"?[YG,t]:t==null?zR:[t]}function gE(t,e,n,r){let i,a,s;typeof e=="function"&&typeof n!="function"?(a=void 0,s=e,i=n):(a=e,s=n,i=r),GG(t,a,l,i);function l(c,d){const h=d[d.length-1],p=h?h.children.indexOf(c):void 0;return s(c,p,h)}}const Tv={}.hasOwnProperty,XG={};function KG(t,e){const n=e||XG,r=new Map,i=new Map,a=new Map,s={...PG,...n.handlers},l={all:d,applyData:ZG,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:s,one:c,options:n,patch:QG,wrap:eW};return gE(t,function(h){if(h.type==="definition"||h.type==="footnoteDefinition"){const p=h.type==="definition"?r:i,b=String(h.identifier).toUpperCase();p.has(b)||p.set(b,h)}}),l;function c(h,p){const b=h.type,y=l.handlers[b];if(Tv.call(l.handlers,b)&&y)return y(l,h,p);if(l.options.passThrough&&l.options.passThrough.includes(b)){if("children"in h){const{children:w,...E}=h,T=Lu(E);return T.children=l.all(h),T}return Lu(h)}return(l.options.unknownHandler||JG)(l,h,p)}function d(h){const p=[];if("children"in h){const b=h.children;let y=-1;for(;++y<b.length;){const x=l.one(b[y],h);if(x){if(y&&b[y-1].type==="break"&&(!Array.isArray(x)&&x.type==="text"&&(x.value=sO(x.value)),!Array.isArray(x)&&x.type==="element")){const w=x.children[0];w&&w.type==="text"&&(w.value=sO(w.value))}Array.isArray(x)?p.push(...x):p.push(x)}}}return p}}function QG(t,e){t.position&&(e.position=Rq(t))}function ZG(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const s="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:s}}n.type==="element"&&a&&Object.assign(n.properties,Lu(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function JG(t,e){const n=e.data||{},r="value"in e&&!(Tv.call(n,"hProperties")||Tv.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function eW(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function sO(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function oO(t,e){const n=KG(t,e),r=n.one(t,void 0),i=FG(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function tW(t,e){return t&&"run"in t?async function(n,r){const i=oO(n,{file:r,...e});await t.run(i,r)}:function(n,r){return oO(n,{file:r,...t||e})}}function lO(t){if(t)throw t}var ox,uO;function nW(){if(uO)return ox;uO=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(d){return typeof Array.isArray=="function"?Array.isArray(d):e.call(d)==="[object Array]"},a=function(d){if(!d||e.call(d)!=="[object Object]")return!1;var h=t.call(d,"constructor"),p=d.constructor&&d.constructor.prototype&&t.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!h&&!p)return!1;var b;for(b in d);return typeof b>"u"||t.call(d,b)},s=function(d,h){n&&h.name==="__proto__"?n(d,h.name,{enumerable:!0,configurable:!0,value:h.newValue,writable:!0}):d[h.name]=h.newValue},l=function(d,h){if(h==="__proto__")if(t.call(d,h)){if(r)return r(d,h).value}else return;return d[h]};return ox=function c(){var d,h,p,b,y,x,w=arguments[0],E=1,T=arguments.length,C=!1;for(typeof w=="boolean"&&(C=w,w=arguments[1]||{},E=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});E<T;++E)if(d=arguments[E],d!=null)for(h in d)p=l(w,h),b=l(d,h),w!==b&&(C&&b&&(a(b)||(y=i(b)))?(y?(y=!1,x=p&&i(p)?p:[]):x=p&&a(p)?p:{},s(w,{name:h,newValue:c(C,x,b)})):typeof b<"u"&&s(w,{name:h,newValue:b}));return w},ox}var rW=nW();const lx=Ji(rW);function _v(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function iW(){const t=[],e={run:n,use:r};return e;function n(...i){let a=-1;const s=i.pop();if(typeof s!="function")throw new TypeError("Expected function as last argument, not "+s);l(null,...i);function l(c,...d){const h=t[++a];let p=-1;if(c){s(c);return}for(;++p<i.length;)(d[p]===null||d[p]===void 0)&&(d[p]=i[p]);i=d,h?aW(h,l)(...d):s(null,...d)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function aW(t,e){let n;return r;function r(...s){const l=t.length>s.length;let c;l&&s.push(i);try{c=t.apply(this,s)}catch(d){const h=d;if(l&&n)throw h;return i(h)}l||(c&&c.then&&typeof c.then=="function"?c.then(a,i):c instanceof Error?i(c):a(c))}function i(s,...l){n||(n=!0,e(s,...l))}function a(s){i(null,s)}}const pa={basename:sW,dirname:oW,extname:lW,join:uW,sep:"/"};function sW(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Rh(t);let n=0,r=-1,i=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let s=-1,l=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else s<0&&(a=!0,s=i+1),l>-1&&(t.codePointAt(i)===e.codePointAt(l--)?l<0&&(r=i):(l=-1,r=s));return n===r?r=s:r<0&&(r=t.length),t.slice(n,r)}function oW(t){if(Rh(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function lW(t){Rh(t);let e=t.length,n=-1,r=0,i=-1,a=0,s;for(;e--;){const l=t.codePointAt(e);if(l===47){if(s){r=e+1;break}continue}n<0&&(s=!0,n=e+1),l===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function uW(...t){let e=-1,n;for(;++e<t.length;)Rh(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":cW(n)}function cW(t){Rh(t);const e=t.codePointAt(0)===47;let n=dW(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function dW(t,e){let n="",r=0,i=-1,a=0,s=-1,l,c;for(;++s<=t.length;){if(s<t.length)l=t.codePointAt(s);else{if(l===47)break;l=47}if(l===47){if(!(i===s-1||a===1))if(i!==s-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=s,a=0;continue}}else if(n.length>0){n="",r=0,i=s,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,s):n=t.slice(i+1,s),r=s-i-1;i=s,a=0}else l===46&&a>-1?a++:a=-1}return n}function Rh(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const hW={cwd:fW};function fW(){return"/"}function Nv(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function mW(t){if(typeof t=="string")t=new URL(t);else if(!Nv(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return pW(t)}function pW(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const ux=["history","path","basename","stem","extname","dirname"];class $R{constructor(e){let n;e?Nv(e)?n={path:e}:typeof e=="string"||gW(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":hW.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<ux.length;){const a=ux[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)ux.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?pa.basename(this.path):void 0}set basename(e){dx(e,"basename"),cx(e,"basename"),this.path=pa.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?pa.dirname(this.path):void 0}set dirname(e){cO(this.basename,"dirname"),this.path=pa.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?pa.extname(this.path):void 0}set extname(e){if(cx(e,"extname"),cO(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=pa.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Nv(e)&&(e=mW(e)),dx(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?pa.basename(this.path,this.extname):void 0}set stem(e){dx(e,"stem"),cx(e,"stem"),this.path=pa.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new br(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function cx(t,e){if(t&&t.includes(pa.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+pa.sep+"`")}function dx(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function cO(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function gW(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const bW=(function(t){const r=this.constructor.prototype,i=r[t],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),yW={}.hasOwnProperty;class bE extends bW{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=iW()}copy(){const e=new bE;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(lx(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(mx("data",this.frozen),this.namespace[e]=n,this):yW.call(this.namespace,e)&&this.namespace[e]||void 0:e?(mx("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Nm(e),r=this.parser||this.Parser;return hx("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),hx("process",this.parser||this.Parser),fx("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,s){const l=Nm(e),c=r.parse(l);r.run(c,l,function(h,p,b){if(h||!p||!b)return d(h);const y=p,x=r.stringify(y,b);wW(x)?b.value=x:b.result=x,d(h,b)});function d(h,p){h||!p?s(h):a?a(p):n(void 0,p)}}}processSync(e){let n=!1,r;return this.freeze(),hx("processSync",this.parser||this.Parser),fx("processSync",this.compiler||this.Compiler),this.process(e,i),hO("processSync","process",n),r;function i(a,s){n=!0,lO(a),r=s}}run(e,n,r){dO(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(s,l){const c=Nm(n);i.run(e,c,d);function d(h,p,b){const y=p||e;h?l(h):s?s(y):r(void 0,y,b)}}}runSync(e,n){let r=!1,i;return this.run(e,n,a),hO("runSync","run",r),i;function a(s,l){lO(s),i=l,r=!0}}stringify(e,n){this.freeze();const r=Nm(n),i=this.compiler||this.Compiler;return fx("stringify",i),dO(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(mx("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):s(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(d){if(typeof d=="function")c(d,[]);else if(typeof d=="object")if(Array.isArray(d)){const[h,...p]=d;c(h,p)}else s(d);else throw new TypeError("Expected usable value, not `"+d+"`")}function s(d){if(!("plugins"in d)&&!("settings"in d))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(d.plugins),d.settings&&(i.settings=lx(!0,i.settings,d.settings))}function l(d){let h=-1;if(d!=null)if(Array.isArray(d))for(;++h<d.length;){const p=d[h];a(p)}else throw new TypeError("Expected a list of plugins, not `"+d+"`")}function c(d,h){let p=-1,b=-1;for(;++p<r.length;)if(r[p][0]===d){b=p;break}if(b===-1)r.push([d,...h]);else if(h.length>0){let[y,...x]=h;const w=r[b][1];_v(w)&&_v(y)&&(y=lx(!0,w,y)),r[b]=[d,y,...x]}}}}const xW=new bE().freeze();function hx(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function fx(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function mx(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function dO(t){if(!_v(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function hO(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Nm(t){return vW(t)?t:new $R(t)}function vW(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function wW(t){return typeof t=="string"||EW(t)}function EW(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const AW="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",fO=[],mO={allowDangerousHtml:!0},SW=/^(https?|ircs?|mailto|xmpp)$/i,TW=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Cv(t){const e=_W(t),n=NW(t);return CW(e.runSync(e.parse(n),n),t)}function _W(t){const e=t.rehypePlugins||fO,n=t.remarkPlugins||fO,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...mO}:mO;return xW().use(sG).use(n).use(tW,r).use(e)}function NW(t){const e=t.children||"",n=new $R;return typeof e=="string"&&(n.value=e),n}function CW(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,a=e.disallowedElements,s=e.skipHtml,l=e.unwrapDisallowed,c=e.urlTransform||OW;for(const h of TW)Object.hasOwn(e,h.from)&&(""+h.from+(h.to?"use `"+h.to+"` instead":"remove it")+AW+h.id,void 0);return gE(t,d),Fq(t,{Fragment:f.Fragment,components:i,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function d(h,p,b){if(h.type==="raw"&&b&&typeof p=="number")return s?b.children.splice(p,1):b.children[p]={type:"text",value:h.value},p;if(h.type==="element"){let y;for(y in ix)if(Object.hasOwn(ix,y)&&Object.hasOwn(h.properties,y)){const x=h.properties[y],w=ix[y];(w===null||w.includes(h.tagName))&&(h.properties[y]=c(String(x||""),y,h))}}if(h.type==="element"){let y=n?!n.includes(h.tagName):a?a.includes(h.tagName):!1;if(!y&&r&&typeof p=="number"&&(y=!r(h,p,b)),y&&b&&typeof p=="number")return l&&h.children?b.children.splice(p,1,...h.children):b.children.splice(p,1),p}}}function OW(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||SW.test(t.slice(0,e))?t:""}const pO=/[#.]/g;function kW(t,e){const n=t||"",r={};let i=0,a,s;for(;i<n.length;){pO.lastIndex=i;const l=pO.exec(n),c=n.slice(i,l?l.index:n.length);c&&(a?a==="#"?r.id=c:Array.isArray(r.className)?r.className.push(c):r.className=[c]:s=c,i+=c.length),l&&(a=l[0],i++)}return{type:"element",tagName:s||e||"div",properties:r,children:[]}}function qR(t,e,n){const r=n?RW(n):void 0;function i(a,s,...l){let c;if(a==null){c={type:"root",children:[]};const d=s;l.unshift(d)}else{c=kW(a,e);const d=c.tagName.toLowerCase(),h=r?r.get(d):void 0;if(c.tagName=h||d,jW(s))l.unshift(s);else for(const[p,b]of Object.entries(s))PW(t,c.properties,p,b)}for(const d of l)Ov(c.children,d);return c.type==="element"&&c.tagName==="template"&&(c.content={type:"root",children:c.children},c.children=[]),c}return i}function jW(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const i=e[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const a=i;for(const s of a)if(typeof s!="number"&&typeof s!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function PW(t,e,n,r){const i=aE(t,n);let a;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;a=r}else typeof r=="boolean"?a=r:typeof r=="string"?i.spaceSeparated?a=RC(r):i.commaSeparated?a=OC(r):i.commaOrSpaceSeparated?a=RC(OC(r).join(" ")):a=gO(i,i.property,r):Array.isArray(r)?a=[...r]:a=i.property==="style"?DW(r):String(r);if(Array.isArray(a)){const s=[];for(const l of a)s.push(gO(i,i.property,l));a=s}i.property==="className"&&Array.isArray(e.className)&&(a=e.className.concat(a)),e[i.property]=a}}function Ov(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)Ov(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?Ov(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function gO(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||ih(n)===ih(e)))return!0}return n}function DW(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function RW(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const IW=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],LW=qR(Sg,"div"),MW=qR(Qu,"g",IW);function BW(t){const e=String(t),n=[];return{toOffset:i,toPoint:r};function r(a){if(typeof a=="number"&&a>-1&&a<=e.length){let s=0;for(;;){let l=n[s];if(l===void 0){const c=bO(e,n[s-1]);l=c===-1?e.length+1:c+1,n[s]=l}if(l>a)return{line:s+1,column:a-(s>0?n[s-1]:0)+1,offset:a};s++}}}function i(a){if(a&&typeof a.line=="number"&&typeof a.column=="number"&&!Number.isNaN(a.line)&&!Number.isNaN(a.column)){for(;n.length<a.line;){const l=n[n.length-1],c=bO(e,l),d=c===-1?e.length+1:c+1;if(l===d)break;n.push(d)}const s=(a.line>1?n[a.line-2]:0)+a.column-1;if(s<n[a.line-1])return s}}}function bO(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const zo={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},YR={}.hasOwnProperty,FW=Object.prototype;function UW(t,e){const n=e||{};return yE({file:n.file||void 0,location:!1,schema:n.space==="svg"?Qu:Sg,verbose:n.verbose||!1},t)}function yE(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},Jm(t,r,n),n}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:VR(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const a=String(t.file),s=BW(a),l=s.toPoint(0),c=s.toPoint(a.length);n.position={start:l,end:c}}return n}case"#documentType":{const r=e;return n={type:"doctype"},Jm(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},Jm(t,r,n),n}default:return n=HW(t,e),n}}function VR(t,e){let n=-1;const r=[];for(;++n<e.length;){const i=yE(t,e[n]);r.push(i)}return r}function HW(t,e){const n=t.schema;t.schema=e.namespaceURI===zo.svg?Qu:Sg;let r=-1;const i={};for(;++r<e.attrs.length;){const l=e.attrs[r],c=(l.prefix?l.prefix+":":"")+l.name;YR.call(FW,c)||(i[c]=l.value)}const s=(t.schema.space==="svg"?MW:LW)(e.tagName,i,VR(t,e.childNodes));if(Jm(t,e,s),s.tagName==="template"){const l=e,c=l.sourceCodeLocation,d=c&&c.startTag&&xu(c.startTag),h=c&&c.endTag&&xu(c.endTag),p=yE(t,l.content);d&&h&&t.file&&(p.position={start:d.end,end:h.start}),s.content=p}return t.schema=n,s}function Jm(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=zW(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function zW(t,e,n){const r=xu(n);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),t.verbose){const a={};let s;if(n.attrs)for(s in n.attrs)YR.call(n.attrs,s)&&(a[aE(t.schema,s).property]=xu(n.attrs[s]));n.startTag;const l=xu(n.startTag),c=n.endTag?xu(n.endTag):void 0,d={opening:l};c&&(d.closing=c),d.properties=a,e.data={position:d}}}return r}function xu(t){const e=yO({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=yO({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function yO(t){return t.line&&t.column?t:void 0}class Ih{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Ih.prototype.property={};Ih.prototype.normal={};Ih.prototype.space=null;function GR(t,e){const n={},r={};let i=-1;for(;++i<t.length;)Object.assign(n,t[i].property),Object.assign(r,t[i].normal);return new Ih(n,r,e)}function kv(t){return t.toLowerCase()}class Yi{constructor(e,n){this.property=e,this.attribute=n}}Yi.prototype.space=null;Yi.prototype.boolean=!1;Yi.prototype.booleanish=!1;Yi.prototype.overloadedBoolean=!1;Yi.prototype.number=!1;Yi.prototype.commaSeparated=!1;Yi.prototype.spaceSeparated=!1;Yi.prototype.commaOrSpaceSeparated=!1;Yi.prototype.mustUseProperty=!1;Yi.prototype.defined=!1;let $W=0;const mt=bl(),kn=bl(),WR=bl(),Ie=bl(),Zt=bl(),Ou=bl(),ui=bl();function bl(){return 2**++$W}const jv=Object.freeze(Object.defineProperty({__proto__:null,boolean:mt,booleanish:kn,commaOrSpaceSeparated:ui,commaSeparated:Ou,number:Ie,overloadedBoolean:WR,spaceSeparated:Zt},Symbol.toStringTag,{value:"Module"})),px=Object.keys(jv);class xE extends Yi{constructor(e,n,r,i){let a=-1;if(super(e,n),xO(this,"space",i),typeof r=="number")for(;++a<px.length;){const s=px[a];xO(this,px[a],(r&jv[s])===jv[s])}}}xE.prototype.defined=!0;function xO(t,e,n){n&&(t[e]=n)}const qW={}.hasOwnProperty;function Ju(t){const e={},n={};let r;for(r in t.properties)if(qW.call(t.properties,r)){const i=t.properties[r],a=new xE(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),e[r]=a,n[kv(r)]=r,n[kv(a.attribute)]=r}return new Ih(e,n,t.space)}const XR=Ju({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),KR=Ju({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function QR(t,e){return e in t?t[e]:e}function ZR(t,e){return QR(t,e.toLowerCase())}const JR=Ju({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:ZR,properties:{xmlns:null,xmlnsXLink:null}}),e4=Ju({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:kn,ariaAutoComplete:null,ariaBusy:kn,ariaChecked:kn,ariaColCount:Ie,ariaColIndex:Ie,ariaColSpan:Ie,ariaControls:Zt,ariaCurrent:null,ariaDescribedBy:Zt,ariaDetails:null,ariaDisabled:kn,ariaDropEffect:Zt,ariaErrorMessage:null,ariaExpanded:kn,ariaFlowTo:Zt,ariaGrabbed:kn,ariaHasPopup:null,ariaHidden:kn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Zt,ariaLevel:Ie,ariaLive:null,ariaModal:kn,ariaMultiLine:kn,ariaMultiSelectable:kn,ariaOrientation:null,ariaOwns:Zt,ariaPlaceholder:null,ariaPosInSet:Ie,ariaPressed:kn,ariaReadOnly:kn,ariaRelevant:null,ariaRequired:kn,ariaRoleDescription:Zt,ariaRowCount:Ie,ariaRowIndex:Ie,ariaRowSpan:Ie,ariaSelected:kn,ariaSetSize:Ie,ariaSort:null,ariaValueMax:Ie,ariaValueMin:Ie,ariaValueNow:Ie,ariaValueText:null,role:null}}),YW=Ju({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:ZR,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ou,acceptCharset:Zt,accessKey:Zt,action:null,allow:null,allowFullScreen:mt,allowPaymentRequest:mt,allowUserMedia:mt,alt:null,as:null,async:mt,autoCapitalize:null,autoComplete:Zt,autoFocus:mt,autoPlay:mt,blocking:Zt,capture:null,charSet:null,checked:mt,cite:null,className:Zt,cols:Ie,colSpan:null,content:null,contentEditable:kn,controls:mt,controlsList:Zt,coords:Ie|Ou,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mt,defer:mt,dir:null,dirName:null,disabled:mt,download:WR,draggable:kn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mt,formTarget:null,headers:Zt,height:Ie,hidden:mt,high:Ie,href:null,hrefLang:null,htmlFor:Zt,httpEquiv:Zt,id:null,imageSizes:null,imageSrcSet:null,inert:mt,inputMode:null,integrity:null,is:null,isMap:mt,itemId:null,itemProp:Zt,itemRef:Zt,itemScope:mt,itemType:Zt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mt,low:Ie,manifest:null,max:null,maxLength:Ie,media:null,method:null,min:null,minLength:Ie,multiple:mt,muted:mt,name:null,nonce:null,noModule:mt,noValidate:mt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mt,optimum:Ie,pattern:null,ping:Zt,placeholder:null,playsInline:mt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mt,referrerPolicy:null,rel:Zt,required:mt,reversed:mt,rows:Ie,rowSpan:Ie,sandbox:Zt,scope:null,scoped:mt,seamless:mt,selected:mt,shadowRootClonable:mt,shadowRootDelegatesFocus:mt,shadowRootMode:null,shape:null,size:Ie,sizes:null,slot:null,span:Ie,spellCheck:kn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ie,step:null,style:null,tabIndex:Ie,target:null,title:null,translate:null,type:null,typeMustMatch:mt,useMap:null,value:kn,width:Ie,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Zt,axis:null,background:null,bgColor:null,border:Ie,borderColor:null,bottomMargin:Ie,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mt,declare:mt,event:null,face:null,frame:null,frameBorder:null,hSpace:Ie,leftMargin:Ie,link:null,longDesc:null,lowSrc:null,marginHeight:Ie,marginWidth:Ie,noResize:mt,noHref:mt,noShade:mt,noWrap:mt,object:null,profile:null,prompt:null,rev:null,rightMargin:Ie,rules:null,scheme:null,scrolling:kn,standby:null,summary:null,text:null,topMargin:Ie,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ie,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mt,disableRemotePlayback:mt,prefix:null,property:null,results:Ie,security:null,unselectable:null}}),VW=Ju({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:QR,properties:{about:ui,accentHeight:Ie,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ie,amplitude:Ie,arabicForm:null,ascent:Ie,attributeName:null,attributeType:null,azimuth:Ie,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ie,by:null,calcMode:null,capHeight:Ie,className:Zt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ie,diffuseConstant:Ie,direction:null,display:null,dur:null,divisor:Ie,dominantBaseline:null,download:mt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ie,enableBackground:null,end:null,event:null,exponent:Ie,externalResourcesRequired:null,fill:null,fillOpacity:Ie,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ou,g2:Ou,glyphName:Ou,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ie,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ie,horizOriginX:Ie,horizOriginY:Ie,id:null,ideographic:Ie,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ie,k:Ie,k1:Ie,k2:Ie,k3:Ie,k4:Ie,kernelMatrix:ui,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ie,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ie,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ie,overlineThickness:Ie,paintOrder:null,panose1:null,path:null,pathLength:Ie,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Zt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ie,pointsAtY:Ie,pointsAtZ:Ie,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ui,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ui,rev:ui,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ui,requiredFeatures:ui,requiredFonts:ui,requiredFormats:ui,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ie,specularExponent:Ie,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ie,strikethroughThickness:Ie,string:null,stroke:null,strokeDashArray:ui,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ie,strokeOpacity:Ie,strokeWidth:null,style:null,surfaceScale:Ie,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ui,tabIndex:Ie,tableValues:null,target:null,targetX:Ie,targetY:Ie,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ui,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ie,underlineThickness:Ie,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ie,values:null,vAlphabetic:Ie,vMathematical:Ie,vectorEffect:null,vHanging:Ie,vIdeographic:Ie,version:null,vertAdvY:Ie,vertOriginX:Ie,vertOriginY:Ie,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ie,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),GW=/^data[-\w.:]+$/i,vO=/-[a-z]/g,WW=/[A-Z]/g;function XW(t,e){const n=kv(e);let r=e,i=Yi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&GW.test(e)){if(e.charAt(4)==="-"){const a=e.slice(5).replace(vO,QW);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=e.slice(4);if(!vO.test(a)){let s=a.replace(WW,KW);s.charAt(0)!=="-"&&(s="-"+s),e="data"+s}}i=xE}return new i(r,e)}function KW(t){return"-"+t.toLowerCase()}function QW(t){return t.charAt(1).toUpperCase()}const ZW=GR([KR,XR,JR,e4,YW],"html"),t4=GR([KR,XR,JR,e4,VW],"svg"),wO={}.hasOwnProperty;function n4(t,e){const n=e||{};function r(i,...a){let s=r.invalid;const l=r.handlers;if(i&&wO.call(i,t)){const c=String(i[t]);s=wO.call(l,c)?l[c]:r.unknown}if(s)return s.call(this,i,...a)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const JW={},eX={}.hasOwnProperty,r4=n4("type",{handlers:{root:nX,element:oX,text:aX,comment:sX,doctype:iX}});function tX(t,e){const r=(e||JW).space;return r4(t,r==="svg"?t4:ZW)}function nX(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=vE(t.children,n,e),ec(t,n),n}function rX(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=vE(t.children,n,e),ec(t,n),n}function iX(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return ec(t,e),e}function aX(t){const e={nodeName:"#text",value:t.value,parentNode:null};return ec(t,e),e}function sX(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return ec(t,e),e}function oX(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=t4);const i=[];let a;if(t.properties){for(a in t.properties)if(a!=="children"&&eX.call(t.properties,a)){const c=lX(r,a,t.properties[a]);c&&i.push(c)}}const s=r.space,l={nodeName:t.tagName,tagName:t.tagName,attrs:i,namespaceURI:zo[s],childNodes:[],parentNode:null};return l.childNodes=vE(t.children,l,r),ec(t,l),t.tagName==="template"&&t.content&&(l.content=rX(t.content,r)),l}function lX(t,e,n){const r=XW(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?uR(n):bR(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const a=i.name.indexOf(":");a<0?i.prefix="":(i.name=i.name.slice(a+1),i.prefix=r.attribute.slice(0,a)),i.namespace=zo[r.space]}return i}function vE(t,e,n){let r=-1;const i=[];if(t)for(;++r<t.length;){const a=r4(t[r],n);a.parentNode=e,i.push(a)}return i}function ec(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const uX=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],cX=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),ln="";var F;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(F||(F={}));const Hr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function i4(t){return t>=55296&&t<=57343}function dX(t){return t>=56320&&t<=57343}function hX(t,e){return(t-55296)*1024+9216+e}function a4(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function s4(t){return t>=64976&&t<=65007||cX.has(t)}var Ee;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ee||(Ee={}));const fX=65536;class mX{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=fX,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:i,offset:a}=this,s=i+n,l=a+n;return{code:e,startLine:r,endLine:r,startCol:s,endCol:s,startOffset:l,endOffset:l}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(dX(n))return this.pos++,this._addGap(),hX(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,F.EOF;return this._err(Ee.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,F.EOF;const r=this.html.charCodeAt(n);return r===F.CARRIAGE_RETURN?F.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,F.EOF;let e=this.html.charCodeAt(this.pos);return e===F.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,F.LINE_FEED):e===F.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,i4(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===F.LINE_FEED||e===F.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){a4(e)?this._err(Ee.controlCharacterInInputStream):s4(e)&&this._err(Ee.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var wt;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(wt||(wt={}));function o4(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const pX=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),gX=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function bX(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=gX.get(t))!==null&&e!==void 0?e:t}var Xn;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Xn||(Xn={}));const yX=32;var io;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(io||(io={}));function Pv(t){return t>=Xn.ZERO&&t<=Xn.NINE}function xX(t){return t>=Xn.UPPER_A&&t<=Xn.UPPER_F||t>=Xn.LOWER_A&&t<=Xn.LOWER_F}function vX(t){return t>=Xn.UPPER_A&&t<=Xn.UPPER_Z||t>=Xn.LOWER_A&&t<=Xn.LOWER_Z||Pv(t)}function wX(t){return t===Xn.EQUALS||vX(t)}var Gn;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Gn||(Gn={}));var Ja;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Ja||(Ja={}));class EX{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=Gn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ja.Strict}startEntity(e){this.decodeMode=e,this.state=Gn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Gn.EntityStart:return e.charCodeAt(n)===Xn.NUM?(this.state=Gn.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Gn.NamedEntity,this.stateNamedEntity(e,n));case Gn.NumericStart:return this.stateNumericStart(e,n);case Gn.NumericDecimal:return this.stateNumericDecimal(e,n);case Gn.NumericHex:return this.stateNumericHex(e,n);case Gn.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|yX)===Xn.LOWER_X?(this.state=Gn.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Gn.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,i){if(n!==r){const a=r-n;this.result=this.result*Math.pow(i,a)+Number.parseInt(e.substr(n,a),i),this.consumed+=a}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(Pv(i)||xX(i))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const i=e.charCodeAt(n);if(Pv(i))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Xn.SEMI)this.consumed+=1;else if(this.decodeMode===Ja.Strict)return 0;return this.emitCodePoint(bX(this.result),this.consumed),this.errors&&(e!==Xn.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let i=r[this.treeIndex],a=(i&io.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const s=e.charCodeAt(n);if(this.treeIndex=AX(r,i,this.treeIndex+Math.max(1,a),s),this.treeIndex<0)return this.result===0||this.decodeMode===Ja.Attribute&&(a===0||wX(s))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],a=(i&io.VALUE_LENGTH)>>14,a!==0){if(s===Xn.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==Ja.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,i=(r[n]&io.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[e]&~io.VALUE_LENGTH:i[e+1],r),n===3&&this.emitCodePoint(i[e+2],r),r}end(){var e;switch(this.state){case Gn.NamedEntity:return this.result!==0&&(this.decodeMode!==Ja.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Gn.NumericDecimal:return this.emitNumericEntity(0,2);case Gn.NumericHex:return this.emitNumericEntity(0,3);case Gn.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Gn.EntityStart:return 0}}}function AX(t,e,n,r){const i=(e&io.BRANCH_LENGTH)>>7,a=e&io.JUMP_TABLE;if(i===0)return a!==0&&r===a?n:-1;if(a){const c=r-a;return c<0||c>=i?-1:t[n+c]-1}let s=n,l=s+i-1;for(;s<=l;){const c=s+l>>>1,d=t[c];if(d<r)s=c+1;else if(d>r)l=c-1;else return t[c+i]}return-1}var je;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(je||(je={}));var Zo;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Zo||(Zo={}));var Mi;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Mi||(Mi={}));var de;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(de||(de={}));var _;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(_||(_={}));const SX=new Map([[de.A,_.A],[de.ADDRESS,_.ADDRESS],[de.ANNOTATION_XML,_.ANNOTATION_XML],[de.APPLET,_.APPLET],[de.AREA,_.AREA],[de.ARTICLE,_.ARTICLE],[de.ASIDE,_.ASIDE],[de.B,_.B],[de.BASE,_.BASE],[de.BASEFONT,_.BASEFONT],[de.BGSOUND,_.BGSOUND],[de.BIG,_.BIG],[de.BLOCKQUOTE,_.BLOCKQUOTE],[de.BODY,_.BODY],[de.BR,_.BR],[de.BUTTON,_.BUTTON],[de.CAPTION,_.CAPTION],[de.CENTER,_.CENTER],[de.CODE,_.CODE],[de.COL,_.COL],[de.COLGROUP,_.COLGROUP],[de.DD,_.DD],[de.DESC,_.DESC],[de.DETAILS,_.DETAILS],[de.DIALOG,_.DIALOG],[de.DIR,_.DIR],[de.DIV,_.DIV],[de.DL,_.DL],[de.DT,_.DT],[de.EM,_.EM],[de.EMBED,_.EMBED],[de.FIELDSET,_.FIELDSET],[de.FIGCAPTION,_.FIGCAPTION],[de.FIGURE,_.FIGURE],[de.FONT,_.FONT],[de.FOOTER,_.FOOTER],[de.FOREIGN_OBJECT,_.FOREIGN_OBJECT],[de.FORM,_.FORM],[de.FRAME,_.FRAME],[de.FRAMESET,_.FRAMESET],[de.H1,_.H1],[de.H2,_.H2],[de.H3,_.H3],[de.H4,_.H4],[de.H5,_.H5],[de.H6,_.H6],[de.HEAD,_.HEAD],[de.HEADER,_.HEADER],[de.HGROUP,_.HGROUP],[de.HR,_.HR],[de.HTML,_.HTML],[de.I,_.I],[de.IMG,_.IMG],[de.IMAGE,_.IMAGE],[de.INPUT,_.INPUT],[de.IFRAME,_.IFRAME],[de.KEYGEN,_.KEYGEN],[de.LABEL,_.LABEL],[de.LI,_.LI],[de.LINK,_.LINK],[de.LISTING,_.LISTING],[de.MAIN,_.MAIN],[de.MALIGNMARK,_.MALIGNMARK],[de.MARQUEE,_.MARQUEE],[de.MATH,_.MATH],[de.MENU,_.MENU],[de.META,_.META],[de.MGLYPH,_.MGLYPH],[de.MI,_.MI],[de.MO,_.MO],[de.MN,_.MN],[de.MS,_.MS],[de.MTEXT,_.MTEXT],[de.NAV,_.NAV],[de.NOBR,_.NOBR],[de.NOFRAMES,_.NOFRAMES],[de.NOEMBED,_.NOEMBED],[de.NOSCRIPT,_.NOSCRIPT],[de.OBJECT,_.OBJECT],[de.OL,_.OL],[de.OPTGROUP,_.OPTGROUP],[de.OPTION,_.OPTION],[de.P,_.P],[de.PARAM,_.PARAM],[de.PLAINTEXT,_.PLAINTEXT],[de.PRE,_.PRE],[de.RB,_.RB],[de.RP,_.RP],[de.RT,_.RT],[de.RTC,_.RTC],[de.RUBY,_.RUBY],[de.S,_.S],[de.SCRIPT,_.SCRIPT],[de.SEARCH,_.SEARCH],[de.SECTION,_.SECTION],[de.SELECT,_.SELECT],[de.SOURCE,_.SOURCE],[de.SMALL,_.SMALL],[de.SPAN,_.SPAN],[de.STRIKE,_.STRIKE],[de.STRONG,_.STRONG],[de.STYLE,_.STYLE],[de.SUB,_.SUB],[de.SUMMARY,_.SUMMARY],[de.SUP,_.SUP],[de.TABLE,_.TABLE],[de.TBODY,_.TBODY],[de.TEMPLATE,_.TEMPLATE],[de.TEXTAREA,_.TEXTAREA],[de.TFOOT,_.TFOOT],[de.TD,_.TD],[de.TH,_.TH],[de.THEAD,_.THEAD],[de.TITLE,_.TITLE],[de.TR,_.TR],[de.TRACK,_.TRACK],[de.TT,_.TT],[de.U,_.U],[de.UL,_.UL],[de.SVG,_.SVG],[de.VAR,_.VAR],[de.WBR,_.WBR],[de.XMP,_.XMP]]);function tc(t){var e;return(e=SX.get(t))!==null&&e!==void 0?e:_.UNKNOWN}const Pe=_,TX={[je.HTML]:new Set([Pe.ADDRESS,Pe.APPLET,Pe.AREA,Pe.ARTICLE,Pe.ASIDE,Pe.BASE,Pe.BASEFONT,Pe.BGSOUND,Pe.BLOCKQUOTE,Pe.BODY,Pe.BR,Pe.BUTTON,Pe.CAPTION,Pe.CENTER,Pe.COL,Pe.COLGROUP,Pe.DD,Pe.DETAILS,Pe.DIR,Pe.DIV,Pe.DL,Pe.DT,Pe.EMBED,Pe.FIELDSET,Pe.FIGCAPTION,Pe.FIGURE,Pe.FOOTER,Pe.FORM,Pe.FRAME,Pe.FRAMESET,Pe.H1,Pe.H2,Pe.H3,Pe.H4,Pe.H5,Pe.H6,Pe.HEAD,Pe.HEADER,Pe.HGROUP,Pe.HR,Pe.HTML,Pe.IFRAME,Pe.IMG,Pe.INPUT,Pe.LI,Pe.LINK,Pe.LISTING,Pe.MAIN,Pe.MARQUEE,Pe.MENU,Pe.META,Pe.NAV,Pe.NOEMBED,Pe.NOFRAMES,Pe.NOSCRIPT,Pe.OBJECT,Pe.OL,Pe.P,Pe.PARAM,Pe.PLAINTEXT,Pe.PRE,Pe.SCRIPT,Pe.SECTION,Pe.SELECT,Pe.SOURCE,Pe.STYLE,Pe.SUMMARY,Pe.TABLE,Pe.TBODY,Pe.TD,Pe.TEMPLATE,Pe.TEXTAREA,Pe.TFOOT,Pe.TH,Pe.THEAD,Pe.TITLE,Pe.TR,Pe.TRACK,Pe.UL,Pe.WBR,Pe.XMP]),[je.MATHML]:new Set([Pe.MI,Pe.MO,Pe.MN,Pe.MS,Pe.MTEXT,Pe.ANNOTATION_XML]),[je.SVG]:new Set([Pe.TITLE,Pe.FOREIGN_OBJECT,Pe.DESC]),[je.XLINK]:new Set,[je.XML]:new Set,[je.XMLNS]:new Set},Dv=new Set([Pe.H1,Pe.H2,Pe.H3,Pe.H4,Pe.H5,Pe.H6]);de.STYLE,de.SCRIPT,de.XMP,de.IFRAME,de.NOEMBED,de.NOFRAMES,de.PLAINTEXT;var q;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(q||(q={}));const En={DATA:q.DATA,RCDATA:q.RCDATA,RAWTEXT:q.RAWTEXT,SCRIPT_DATA:q.SCRIPT_DATA,PLAINTEXT:q.PLAINTEXT,CDATA_SECTION:q.CDATA_SECTION};function _X(t){return t>=F.DIGIT_0&&t<=F.DIGIT_9}function Pd(t){return t>=F.LATIN_CAPITAL_A&&t<=F.LATIN_CAPITAL_Z}function NX(t){return t>=F.LATIN_SMALL_A&&t<=F.LATIN_SMALL_Z}function Qs(t){return NX(t)||Pd(t)}function EO(t){return Qs(t)||_X(t)}function Cm(t){return t+32}function l4(t){return t===F.SPACE||t===F.LINE_FEED||t===F.TABULATION||t===F.FORM_FEED}function AO(t){return l4(t)||t===F.SOLIDUS||t===F.GREATER_THAN_SIGN}function CX(t){return t===F.NULL?Ee.nullCharacterReference:t>1114111?Ee.characterReferenceOutsideUnicodeRange:i4(t)?Ee.surrogateCharacterReference:s4(t)?Ee.noncharacterCharacterReference:a4(t)||t===F.CARRIAGE_RETURN?Ee.controlCharacterReference:null}class OX{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=q.DATA,this.returnState=q.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new mX(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new EX(pX,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(Ee.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(Ee.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=CX(r);i&&this._err(i,1)}}:void 0)}_err(e,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:wt.START_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:wt.END_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:wt.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:wt.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(o4(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ee.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=tc(e.tagName),e.type===wt.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(Ee.endTagWithAttributes),e.selfClosing&&this._err(Ee.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case wt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case wt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case wt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:wt.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=l4(e)?wt.WHITESPACE_CHARACTER:e===F.NULL?wt.NULL_CHARACTER:wt.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(wt.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=q.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Ja.Attribute:Ja.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===q.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===q.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===q.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case q.DATA:{this._stateData(e);break}case q.RCDATA:{this._stateRcdata(e);break}case q.RAWTEXT:{this._stateRawtext(e);break}case q.SCRIPT_DATA:{this._stateScriptData(e);break}case q.PLAINTEXT:{this._statePlaintext(e);break}case q.TAG_OPEN:{this._stateTagOpen(e);break}case q.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case q.TAG_NAME:{this._stateTagName(e);break}case q.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case q.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case q.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case q.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case q.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case q.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case q.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case q.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case q.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case q.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case q.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case q.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case q.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case q.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case q.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case q.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case q.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case q.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case q.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case q.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case q.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case q.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case q.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case q.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case q.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case q.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case q.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case q.BOGUS_COMMENT:{this._stateBogusComment(e);break}case q.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case q.COMMENT_START:{this._stateCommentStart(e);break}case q.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case q.COMMENT:{this._stateComment(e);break}case q.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case q.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case q.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case q.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case q.COMMENT_END:{this._stateCommentEnd(e);break}case q.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case q.DOCTYPE:{this._stateDoctype(e);break}case q.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case q.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case q.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case q.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case q.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case q.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case q.CDATA_SECTION:{this._stateCdataSection(e);break}case q.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case q.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case q.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case q.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case F.LESS_THAN_SIGN:{this.state=q.TAG_OPEN;break}case F.AMPERSAND:{this._startCharacterReference();break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitCodePoint(e);break}case F.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case F.AMPERSAND:{this._startCharacterReference();break}case F.LESS_THAN_SIGN:{this.state=q.RCDATA_LESS_THAN_SIGN;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(ln);break}case F.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case F.LESS_THAN_SIGN:{this.state=q.RAWTEXT_LESS_THAN_SIGN;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(ln);break}case F.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case F.LESS_THAN_SIGN:{this.state=q.SCRIPT_DATA_LESS_THAN_SIGN;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(ln);break}case F.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case F.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(ln);break}case F.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Qs(e))this._createStartTagToken(),this.state=q.TAG_NAME,this._stateTagName(e);else switch(e){case F.EXCLAMATION_MARK:{this.state=q.MARKUP_DECLARATION_OPEN;break}case F.SOLIDUS:{this.state=q.END_TAG_OPEN;break}case F.QUESTION_MARK:{this._err(Ee.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=q.BOGUS_COMMENT,this._stateBogusComment(e);break}case F.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=q.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Qs(e))this._createEndTagToken(),this.state=q.TAG_NAME,this._stateTagName(e);else switch(e){case F.GREATER_THAN_SIGN:{this._err(Ee.missingEndTagName),this.state=q.DATA;break}case F.EOF:{this._err(Ee.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ee.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=q.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:{this.state=q.BEFORE_ATTRIBUTE_NAME;break}case F.SOLIDUS:{this.state=q.SELF_CLOSING_START_TAG;break}case F.GREATER_THAN_SIGN:{this.state=q.DATA,this.emitCurrentTagToken();break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),n.tagName+=ln;break}case F.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Pd(e)?Cm(e):e)}}_stateRcdataLessThanSign(e){e===F.SOLIDUS?this.state=q.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=q.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Qs(e)?(this.state=q.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=q.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=q.BEFORE_ATTRIBUTE_NAME,!1;case F.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=q.SELF_CLOSING_START_TAG,!1;case F.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=q.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=q.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===F.SOLIDUS?this.state=q.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=q.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Qs(e)?(this.state=q.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=q.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=q.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case F.SOLIDUS:{this.state=q.SCRIPT_DATA_END_TAG_OPEN;break}case F.EXCLAMATION_MARK:{this.state=q.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=q.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Qs(e)?(this.state=q.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=q.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=q.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===F.HYPHEN_MINUS?(this.state=q.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=q.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===F.HYPHEN_MINUS?(this.state=q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=q.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case F.HYPHEN_MINUS:{this.state=q.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case F.LESS_THAN_SIGN:{this.state=q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(ln);break}case F.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case F.HYPHEN_MINUS:{this.state=q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case F.LESS_THAN_SIGN:{this.state=q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=q.SCRIPT_DATA_ESCAPED,this._emitChars(ln);break}case F.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case F.HYPHEN_MINUS:{this._emitChars("-");break}case F.LESS_THAN_SIGN:{this.state=q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case F.GREATER_THAN_SIGN:{this.state=q.SCRIPT_DATA,this._emitChars(">");break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=q.SCRIPT_DATA_ESCAPED,this._emitChars(ln);break}case F.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===F.SOLIDUS?this.state=q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Qs(e)?(this._emitChars("<"),this.state=q.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Qs(e)?(this.state=q.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Hr.SCRIPT,!1)&&AO(this.preprocessor.peek(Hr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Hr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case F.HYPHEN_MINUS:{this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case F.LESS_THAN_SIGN:{this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this._emitChars(ln);break}case F.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case F.HYPHEN_MINUS:{this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case F.LESS_THAN_SIGN:{this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ln);break}case F.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case F.HYPHEN_MINUS:{this._emitChars("-");break}case F.LESS_THAN_SIGN:{this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case F.GREATER_THAN_SIGN:{this.state=q.SCRIPT_DATA,this._emitChars(">");break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(ln);break}case F.EOF:{this._err(Ee.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===F.SOLIDUS?(this.state=q.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Hr.SCRIPT,!1)&&AO(this.preprocessor.peek(Hr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Hr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=q.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.SOLIDUS:case F.GREATER_THAN_SIGN:case F.EOF:{this.state=q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case F.EQUALS_SIGN:{this._err(Ee.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=q.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=q.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:case F.SOLIDUS:case F.GREATER_THAN_SIGN:case F.EOF:{this._leaveAttrName(),this.state=q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case F.EQUALS_SIGN:{this._leaveAttrName(),this.state=q.BEFORE_ATTRIBUTE_VALUE;break}case F.QUOTATION_MARK:case F.APOSTROPHE:case F.LESS_THAN_SIGN:{this._err(Ee.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.name+=ln;break}default:this.currentAttr.name+=String.fromCodePoint(Pd(e)?Cm(e):e)}}_stateAfterAttributeName(e){switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.SOLIDUS:{this.state=q.SELF_CLOSING_START_TAG;break}case F.EQUALS_SIGN:{this.state=q.BEFORE_ATTRIBUTE_VALUE;break}case F.GREATER_THAN_SIGN:{this.state=q.DATA,this.emitCurrentTagToken();break}case F.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=q.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.QUOTATION_MARK:{this.state=q.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case F.APOSTROPHE:{this.state=q.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case F.GREATER_THAN_SIGN:{this._err(Ee.missingAttributeValue),this.state=q.DATA,this.emitCurrentTagToken();break}default:this.state=q.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case F.QUOTATION_MARK:{this.state=q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case F.AMPERSAND:{this._startCharacterReference();break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=ln;break}case F.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case F.APOSTROPHE:{this.state=q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case F.AMPERSAND:{this._startCharacterReference();break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=ln;break}case F.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:{this._leaveAttrValue(),this.state=q.BEFORE_ATTRIBUTE_NAME;break}case F.AMPERSAND:{this._startCharacterReference();break}case F.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=q.DATA,this.emitCurrentTagToken();break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),this.currentAttr.value+=ln;break}case F.QUOTATION_MARK:case F.APOSTROPHE:case F.LESS_THAN_SIGN:case F.EQUALS_SIGN:case F.GRAVE_ACCENT:{this._err(Ee.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case F.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:{this._leaveAttrValue(),this.state=q.BEFORE_ATTRIBUTE_NAME;break}case F.SOLIDUS:{this._leaveAttrValue(),this.state=q.SELF_CLOSING_START_TAG;break}case F.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=q.DATA,this.emitCurrentTagToken();break}case F.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBetweenAttributes),this.state=q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case F.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=q.DATA,this.emitCurrentTagToken();break}case F.EOF:{this._err(Ee.eofInTag),this._emitEOFToken();break}default:this._err(Ee.unexpectedSolidusInTag),this.state=q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case F.GREATER_THAN_SIGN:{this.state=q.DATA,this.emitCurrentComment(n);break}case F.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),n.data+=ln;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Hr.DASH_DASH,!0)?(this._createCommentToken(Hr.DASH_DASH.length+1),this.state=q.COMMENT_START):this._consumeSequenceIfMatch(Hr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Hr.DOCTYPE.length+1),this.state=q.DOCTYPE):this._consumeSequenceIfMatch(Hr.CDATA_START,!0)?this.inForeignNode?this.state=q.CDATA_SECTION:(this._err(Ee.cdataInHtmlContent),this._createCommentToken(Hr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=q.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ee.incorrectlyOpenedComment),this._createCommentToken(2),this.state=q.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case F.HYPHEN_MINUS:{this.state=q.COMMENT_START_DASH;break}case F.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=q.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=q.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case F.HYPHEN_MINUS:{this.state=q.COMMENT_END;break}case F.GREATER_THAN_SIGN:{this._err(Ee.abruptClosingOfEmptyComment),this.state=q.DATA,this.emitCurrentComment(n);break}case F.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=q.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case F.HYPHEN_MINUS:{this.state=q.COMMENT_END_DASH;break}case F.LESS_THAN_SIGN:{n.data+="<",this.state=q.COMMENT_LESS_THAN_SIGN;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),n.data+=ln;break}case F.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case F.EXCLAMATION_MARK:{n.data+="!",this.state=q.COMMENT_LESS_THAN_SIGN_BANG;break}case F.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=q.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===F.HYPHEN_MINUS?this.state=q.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=q.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===F.HYPHEN_MINUS?this.state=q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=q.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==F.GREATER_THAN_SIGN&&e!==F.EOF&&this._err(Ee.nestedComment),this.state=q.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case F.HYPHEN_MINUS:{this.state=q.COMMENT_END;break}case F.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=q.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case F.GREATER_THAN_SIGN:{this.state=q.DATA,this.emitCurrentComment(n);break}case F.EXCLAMATION_MARK:{this.state=q.COMMENT_END_BANG;break}case F.HYPHEN_MINUS:{n.data+="-";break}case F.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=q.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case F.HYPHEN_MINUS:{n.data+="--!",this.state=q.COMMENT_END_DASH;break}case F.GREATER_THAN_SIGN:{this._err(Ee.incorrectlyClosedComment),this.state=q.DATA,this.emitCurrentComment(n);break}case F.EOF:{this._err(Ee.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=q.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:{this.state=q.BEFORE_DOCTYPE_NAME;break}case F.GREATER_THAN_SIGN:{this.state=q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case F.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingWhitespaceBeforeDoctypeName),this.state=q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Pd(e))this._createDoctypeToken(String.fromCharCode(Cm(e))),this.state=q.DOCTYPE_NAME;else switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.NULL:{this._err(Ee.unexpectedNullCharacter),this._createDoctypeToken(ln),this.state=q.DOCTYPE_NAME;break}case F.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=q.DATA;break}case F.EOF:{this._err(Ee.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=q.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:{this.state=q.AFTER_DOCTYPE_NAME;break}case F.GREATER_THAN_SIGN:{this.state=q.DATA,this.emitCurrentDoctype(n);break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),n.name+=ln;break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Pd(e)?Cm(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.GREATER_THAN_SIGN:{this.state=q.DATA,this.emitCurrentDoctype(n);break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Hr.PUBLIC,!1)?this.state=q.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Hr.SYSTEM,!1)?this.state=q.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ee.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=q.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:{this.state=q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case F.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case F.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case F.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=q.DATA,this.emitCurrentDoctype(n);break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.QUOTATION_MARK:{n.publicId="",this.state=q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case F.APOSTROPHE:{n.publicId="",this.state=q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case F.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=q.DATA,this.emitCurrentDoctype(n);break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case F.QUOTATION_MARK:{this.state=q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),n.publicId+=ln;break}case F.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=q.DATA;break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case F.APOSTROPHE:{this.state=q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),n.publicId+=ln;break}case F.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=q.DATA;break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:{this.state=q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case F.GREATER_THAN_SIGN:{this.state=q.DATA,this.emitCurrentDoctype(n);break}case F.QUOTATION_MARK:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case F.APOSTROPHE:{this._err(Ee.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=q.DATA;break}case F.QUOTATION_MARK:{n.systemId="",this.state=q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case F.APOSTROPHE:{n.systemId="",this.state=q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:{this.state=q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case F.QUOTATION_MARK:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case F.APOSTROPHE:{this._err(Ee.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case F.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=q.DATA,this.emitCurrentDoctype(n);break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.QUOTATION_MARK:{n.systemId="",this.state=q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case F.APOSTROPHE:{n.systemId="",this.state=q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case F.GREATER_THAN_SIGN:{this._err(Ee.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=q.DATA,this.emitCurrentDoctype(n);break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case F.QUOTATION_MARK:{this.state=q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),n.systemId+=ln;break}case F.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=q.DATA;break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case F.APOSTROPHE:{this.state=q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter),n.systemId+=ln;break}case F.GREATER_THAN_SIGN:{this._err(Ee.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=q.DATA;break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case F.SPACE:case F.LINE_FEED:case F.TABULATION:case F.FORM_FEED:break;case F.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=q.DATA;break}case F.EOF:{this._err(Ee.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ee.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=q.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case F.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=q.DATA;break}case F.NULL:{this._err(Ee.unexpectedNullCharacter);break}case F.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case F.RIGHT_SQUARE_BRACKET:{this.state=q.CDATA_SECTION_BRACKET;break}case F.EOF:{this._err(Ee.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===F.RIGHT_SQUARE_BRACKET?this.state=q.CDATA_SECTION_END:(this._emitChars("]"),this.state=q.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case F.GREATER_THAN_SIGN:{this.state=q.DATA;break}case F.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=q.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(F.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&EO(this.preprocessor.peek(1))?q.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){EO(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===F.SEMICOLON&&this._err(Ee.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const u4=new Set([_.DD,_.DT,_.LI,_.OPTGROUP,_.OPTION,_.P,_.RB,_.RP,_.RT,_.RTC]),SO=new Set([...u4,_.CAPTION,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]),gp=new Set([_.APPLET,_.CAPTION,_.HTML,_.MARQUEE,_.OBJECT,_.TABLE,_.TD,_.TEMPLATE,_.TH]),kX=new Set([...gp,_.OL,_.UL]),jX=new Set([...gp,_.BUTTON]),TO=new Set([_.ANNOTATION_XML,_.MI,_.MN,_.MO,_.MS,_.MTEXT]),_O=new Set([_.DESC,_.FOREIGN_OBJECT,_.TITLE]),PX=new Set([_.TR,_.TEMPLATE,_.HTML]),DX=new Set([_.TBODY,_.TFOOT,_.THEAD,_.TEMPLATE,_.HTML]),RX=new Set([_.TABLE,_.TEMPLATE,_.HTML]),IX=new Set([_.TD,_.TH]);class LX{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=_.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===_.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===je.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const i=this._indexOf(e)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==je.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(Dv,je.HTML)}popUntilTableCellPopped(){this.popUntilPopped(IX,je.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(RX,je.HTML)}clearBackToTableBodyContext(){this.clearBackTo(DX,je.HTML)}clearBackToTableRowContext(){this.clearBackTo(PX,je.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===_.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===_.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case je.HTML:{if(i===e)return!0;if(n.has(i))return!1;break}case je.SVG:{if(_O.has(i))return!1;break}case je.MATHML:{if(TO.has(i))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,gp)}hasInListItemScope(e){return this.hasInDynamicScope(e,kX)}hasInButtonScope(e){return this.hasInDynamicScope(e,jX)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case je.HTML:{if(Dv.has(n))return!0;if(gp.has(n))return!1;break}case je.SVG:{if(_O.has(n))return!1;break}case je.MATHML:{if(TO.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===je.HTML)switch(this.tagIDs[n]){case e:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===je.HTML)switch(this.tagIDs[e]){case _.TBODY:case _.THEAD:case _.TFOOT:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===je.HTML)switch(this.tagIDs[n]){case e:return!0;case _.OPTION:case _.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&u4.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&SO.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&SO.has(this.currentTagId);)this.pop()}}const gx=3;var ba;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(ba||(ba={}));const NO={type:ba.Marker};class MX{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],i=n.length,a=this.treeAdapter.getTagName(e),s=this.treeAdapter.getNamespaceURI(e);for(let l=0;l<this.entries.length;l++){const c=this.entries[l];if(c.type===ba.Marker)break;const{element:d}=c;if(this.treeAdapter.getTagName(d)===a&&this.treeAdapter.getNamespaceURI(d)===s){const h=this.treeAdapter.getAttrList(d);h.length===i&&r.push({idx:l,attrs:h})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<gx)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<gx)return;const i=new Map(n.map(s=>[s.name,s.value]));let a=0;for(let s=0;s<r.length;s++){const l=r[s];l.attrs.every(c=>i.get(c.name)===c.value)&&(a+=1,a>=gx&&this.entries.splice(l.idx,1))}}insertMarker(){this.entries.unshift(NO)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:ba.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:ba.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(NO);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===ba.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===ba.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===ba.Element&&n.element===e)}}const Zs={createDocument(){return{nodeName:"#document",mode:Mi.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const i=t.childNodes.find(a=>a.nodeName==="#documentType");if(i)i.name=e,i.publicId=n,i.systemId=r;else{const a={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Zs.appendChild(t,a)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Zs.isTextNode(n)){n.value+=e;return}}Zs.appendChild(t,Zs.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Zs.isTextNode(r)?r.value+=e:Zs.insertBefore(t,Zs.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},c4="html",BX="about:legacy-compat",FX="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",d4=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],UX=[...d4,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],HX=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),h4=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],zX=[...h4,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function CO(t,e){return e.some(n=>t.startsWith(n))}function $X(t){return t.name===c4&&t.publicId===null&&(t.systemId===null||t.systemId===BX)}function qX(t){if(t.name!==c4)return Mi.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===FX)return Mi.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),HX.has(n))return Mi.QUIRKS;let r=e===null?UX:d4;if(CO(n,r))return Mi.QUIRKS;if(r=e===null?h4:zX,CO(n,r))return Mi.LIMITED_QUIRKS}return Mi.NO_QUIRKS}const OO={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},YX="definitionurl",VX="definitionURL",GX=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),WX=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:je.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:je.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:je.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:je.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:je.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:je.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:je.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:je.XML}],["xml:space",{prefix:"xml",name:"space",namespace:je.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:je.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:je.XMLNS}]]),XX=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),KX=new Set([_.B,_.BIG,_.BLOCKQUOTE,_.BODY,_.BR,_.CENTER,_.CODE,_.DD,_.DIV,_.DL,_.DT,_.EM,_.EMBED,_.H1,_.H2,_.H3,_.H4,_.H5,_.H6,_.HEAD,_.HR,_.I,_.IMG,_.LI,_.LISTING,_.MENU,_.META,_.NOBR,_.OL,_.P,_.PRE,_.RUBY,_.S,_.SMALL,_.SPAN,_.STRONG,_.STRIKE,_.SUB,_.SUP,_.TABLE,_.TT,_.U,_.UL,_.VAR]);function QX(t){const e=t.tagID;return e===_.FONT&&t.attrs.some(({name:r})=>r===Zo.COLOR||r===Zo.SIZE||r===Zo.FACE)||KX.has(e)}function f4(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===YX){t.attrs[e].name=VX;break}}function m4(t){for(let e=0;e<t.attrs.length;e++){const n=GX.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function wE(t){for(let e=0;e<t.attrs.length;e++){const n=WX.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function ZX(t){const e=XX.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=tc(t.tagName))}function JX(t,e){return e===je.MATHML&&(t===_.MI||t===_.MO||t===_.MN||t===_.MS||t===_.MTEXT)}function eK(t,e,n){if(e===je.MATHML&&t===_.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Zo.ENCODING){const i=n[r].value.toLowerCase();return i===OO.TEXT_HTML||i===OO.APPLICATION_XML}}return e===je.SVG&&(t===_.FOREIGN_OBJECT||t===_.DESC||t===_.TITLE)}function tK(t,e,n,r){return(!r||r===je.HTML)&&eK(t,e,n)||(!r||r===je.MATHML)&&JX(t,e)}const nK="hidden",rK=8,iK=3;var V;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(V||(V={}));const aK={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},p4=new Set([_.TABLE,_.TBODY,_.TFOOT,_.THEAD,_.TR]),kO={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Zs,onParseError:null};class jO{constructor(e,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=V.INITIAL,this.originalInsertionMode=V.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...kO,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new OX(this.options,this),this.activeFormattingElements=new MX(this.treeAdapter),this.fragmentContextID=r?tc(this.treeAdapter.getTagName(r)):_.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new LX(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...kO,...n};e??(e=r.treeAdapter.createElement(de.TEMPLATE,je.HTML,[]));const i=r.treeAdapter.createElement("documentmock",je.HTML,[]),a=new this(r,i,e);return a.fragmentContextID===_.TEMPLATE&&a.tmplInsertionModeStack.unshift(V.IN_TEMPLATE),a._initTokenizerForFragmentParsing(),a._insertFakeRootElement(),a._resetInsertionMode(),a._findFormInFragmentContext(),a}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var i;if(!this.onParseError)return;const a=(i=e.location)!==null&&i!==void 0?i:aK,s={code:n,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:r?a.startLine:a.endLine,endCol:r?a.startCol:a.endCol,endOffset:r?a.startOffset:a.endOffset};this.onParseError(s)}onItemPush(e,n,r){var i,a;(a=(i=this.treeAdapter).onItemPush)===null||a===void 0||a.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),n){let a,s;this.openElements.stackTop===0&&this.fragmentContext?(a=this.fragmentContext,s=this.fragmentContextID):{current:a,currentTagId:s}=this.openElements,this._setContextModes(a,s)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===je.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,je.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=V.TEXT}switchToPlaintextParsing(){this.insertionMode=V.TEXT,this.originalInsertionMode=V.IN_BODY,this.tokenizer.state=En.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===de.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==je.HTML))switch(this.fragmentContextID){case _.TITLE:case _.TEXTAREA:{this.tokenizer.state=En.RCDATA;break}case _.STYLE:case _.XMP:case _.IFRAME:case _.NOEMBED:case _.NOFRAMES:case _.NOSCRIPT:{this.tokenizer.state=En.RAWTEXT;break}case _.SCRIPT:{this.tokenizer.state=En.SCRIPT_DATA;break}case _.PLAINTEXT:{this.tokenizer.state=En.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),e.location){const s=this.treeAdapter.getChildNodes(this.document).find(l=>this.treeAdapter.isDocumentTypeNode(l));s&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,je.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,je.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(de.HTML,je.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,_.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(n),a=r?i.lastIndexOf(r):i.length,s=i[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:c,endCol:d,endOffset:h}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:c,endCol:d,endOffset:h})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(e),a=n.type===wt.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,a)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===_.SVG&&this.treeAdapter.getTagName(n)===de.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===je.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===_.MGLYPH||e.tagID===_.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,je.HTML)}_processToken(e){switch(e.type){case wt.CHARACTER:{this.onCharacter(e);break}case wt.NULL_CHARACTER:{this.onNullCharacter(e);break}case wt.COMMENT:{this.onComment(e);break}case wt.DOCTYPE:{this.onDoctype(e);break}case wt.START_TAG:{this._processStartTag(e);break}case wt.END_TAG:{this.onEndTag(e);break}case wt.EOF:{this.onEof(e);break}case wt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const i=this.treeAdapter.getNamespaceURI(n),a=this.treeAdapter.getAttrList(n);return tK(e,i,a,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===ba.Marker||this.openElements.contains(i.element)),r=n===-1?e-1:n-1;for(let i=r;i>=0;i--){const a=this.activeFormattingElements.entries[i];this._insertElement(a.token,this.treeAdapter.getNamespaceURI(a.element)),a.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=V.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(_.P),this.openElements.popUntilTagNamePopped(_.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case _.TR:{this.insertionMode=V.IN_ROW;return}case _.TBODY:case _.THEAD:case _.TFOOT:{this.insertionMode=V.IN_TABLE_BODY;return}case _.CAPTION:{this.insertionMode=V.IN_CAPTION;return}case _.COLGROUP:{this.insertionMode=V.IN_COLUMN_GROUP;return}case _.TABLE:{this.insertionMode=V.IN_TABLE;return}case _.BODY:{this.insertionMode=V.IN_BODY;return}case _.FRAMESET:{this.insertionMode=V.IN_FRAMESET;return}case _.SELECT:{this._resetInsertionModeForSelect(e);return}case _.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case _.HTML:{this.insertionMode=this.headElement?V.AFTER_HEAD:V.BEFORE_HEAD;return}case _.TD:case _.TH:{if(e>0){this.insertionMode=V.IN_CELL;return}break}case _.HEAD:{if(e>0){this.insertionMode=V.IN_HEAD;return}break}}this.insertionMode=V.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===_.TEMPLATE)break;if(r===_.TABLE){this.insertionMode=V.IN_SELECT_IN_TABLE;return}}this.insertionMode=V.IN_SELECT}_isElementCausesFosterParenting(e){return p4.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case _.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===je.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case _.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return TX[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){IQ(this,e);return}switch(this.insertionMode){case V.INITIAL:{xd(this,e);break}case V.BEFORE_HTML:{Hd(this,e);break}case V.BEFORE_HEAD:{zd(this,e);break}case V.IN_HEAD:{$d(this,e);break}case V.IN_HEAD_NO_SCRIPT:{qd(this,e);break}case V.AFTER_HEAD:{Yd(this,e);break}case V.IN_BODY:case V.IN_CAPTION:case V.IN_CELL:case V.IN_TEMPLATE:{b4(this,e);break}case V.TEXT:case V.IN_SELECT:case V.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case V.IN_TABLE:case V.IN_TABLE_BODY:case V.IN_ROW:{bx(this,e);break}case V.IN_TABLE_TEXT:{A4(this,e);break}case V.IN_COLUMN_GROUP:{bp(this,e);break}case V.AFTER_BODY:{yp(this,e);break}case V.AFTER_AFTER_BODY:{ep(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){RQ(this,e);return}switch(this.insertionMode){case V.INITIAL:{xd(this,e);break}case V.BEFORE_HTML:{Hd(this,e);break}case V.BEFORE_HEAD:{zd(this,e);break}case V.IN_HEAD:{$d(this,e);break}case V.IN_HEAD_NO_SCRIPT:{qd(this,e);break}case V.AFTER_HEAD:{Yd(this,e);break}case V.TEXT:{this._insertCharacters(e);break}case V.IN_TABLE:case V.IN_TABLE_BODY:case V.IN_ROW:{bx(this,e);break}case V.IN_COLUMN_GROUP:{bp(this,e);break}case V.AFTER_BODY:{yp(this,e);break}case V.AFTER_AFTER_BODY:{ep(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){Rv(this,e);return}switch(this.insertionMode){case V.INITIAL:case V.BEFORE_HTML:case V.BEFORE_HEAD:case V.IN_HEAD:case V.IN_HEAD_NO_SCRIPT:case V.AFTER_HEAD:case V.IN_BODY:case V.IN_TABLE:case V.IN_CAPTION:case V.IN_COLUMN_GROUP:case V.IN_TABLE_BODY:case V.IN_ROW:case V.IN_CELL:case V.IN_SELECT:case V.IN_SELECT_IN_TABLE:case V.IN_TEMPLATE:case V.IN_FRAMESET:case V.AFTER_FRAMESET:{Rv(this,e);break}case V.IN_TABLE_TEXT:{vd(this,e);break}case V.AFTER_BODY:{hK(this,e);break}case V.AFTER_AFTER_BODY:case V.AFTER_AFTER_FRAMESET:{fK(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case V.INITIAL:{mK(this,e);break}case V.BEFORE_HEAD:case V.IN_HEAD:case V.IN_HEAD_NO_SCRIPT:case V.AFTER_HEAD:{this._err(e,Ee.misplacedDoctype);break}case V.IN_TABLE_TEXT:{vd(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,Ee.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?LQ(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case V.INITIAL:{xd(this,e);break}case V.BEFORE_HTML:{pK(this,e);break}case V.BEFORE_HEAD:{bK(this,e);break}case V.IN_HEAD:{ra(this,e);break}case V.IN_HEAD_NO_SCRIPT:{vK(this,e);break}case V.AFTER_HEAD:{EK(this,e);break}case V.IN_BODY:{yr(this,e);break}case V.IN_TABLE:{Mu(this,e);break}case V.IN_TABLE_TEXT:{vd(this,e);break}case V.IN_CAPTION:{yQ(this,e);break}case V.IN_COLUMN_GROUP:{SE(this,e);break}case V.IN_TABLE_BODY:{jg(this,e);break}case V.IN_ROW:{Pg(this,e);break}case V.IN_CELL:{wQ(this,e);break}case V.IN_SELECT:{_4(this,e);break}case V.IN_SELECT_IN_TABLE:{AQ(this,e);break}case V.IN_TEMPLATE:{TQ(this,e);break}case V.AFTER_BODY:{NQ(this,e);break}case V.IN_FRAMESET:{CQ(this,e);break}case V.AFTER_FRAMESET:{kQ(this,e);break}case V.AFTER_AFTER_BODY:{PQ(this,e);break}case V.AFTER_AFTER_FRAMESET:{DQ(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?MQ(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case V.INITIAL:{xd(this,e);break}case V.BEFORE_HTML:{gK(this,e);break}case V.BEFORE_HEAD:{yK(this,e);break}case V.IN_HEAD:{xK(this,e);break}case V.IN_HEAD_NO_SCRIPT:{wK(this,e);break}case V.AFTER_HEAD:{AK(this,e);break}case V.IN_BODY:{kg(this,e);break}case V.TEXT:{lQ(this,e);break}case V.IN_TABLE:{sh(this,e);break}case V.IN_TABLE_TEXT:{vd(this,e);break}case V.IN_CAPTION:{xQ(this,e);break}case V.IN_COLUMN_GROUP:{vQ(this,e);break}case V.IN_TABLE_BODY:{Iv(this,e);break}case V.IN_ROW:{T4(this,e);break}case V.IN_CELL:{EQ(this,e);break}case V.IN_SELECT:{N4(this,e);break}case V.IN_SELECT_IN_TABLE:{SQ(this,e);break}case V.IN_TEMPLATE:{_Q(this,e);break}case V.AFTER_BODY:{O4(this,e);break}case V.IN_FRAMESET:{OQ(this,e);break}case V.AFTER_FRAMESET:{jQ(this,e);break}case V.AFTER_AFTER_BODY:{ep(this,e);break}}}onEof(e){switch(this.insertionMode){case V.INITIAL:{xd(this,e);break}case V.BEFORE_HTML:{Hd(this,e);break}case V.BEFORE_HEAD:{zd(this,e);break}case V.IN_HEAD:{$d(this,e);break}case V.IN_HEAD_NO_SCRIPT:{qd(this,e);break}case V.AFTER_HEAD:{Yd(this,e);break}case V.IN_BODY:case V.IN_TABLE:case V.IN_CAPTION:case V.IN_COLUMN_GROUP:case V.IN_TABLE_BODY:case V.IN_ROW:case V.IN_CELL:case V.IN_SELECT:case V.IN_SELECT_IN_TABLE:{w4(this,e);break}case V.TEXT:{uQ(this,e);break}case V.IN_TABLE_TEXT:{vd(this,e);break}case V.IN_TEMPLATE:{C4(this,e);break}case V.AFTER_BODY:case V.IN_FRAMESET:case V.AFTER_FRAMESET:case V.AFTER_AFTER_BODY:case V.AFTER_AFTER_FRAMESET:{AE(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===F.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case V.IN_HEAD:case V.IN_HEAD_NO_SCRIPT:case V.AFTER_HEAD:case V.TEXT:case V.IN_COLUMN_GROUP:case V.IN_SELECT:case V.IN_SELECT_IN_TABLE:case V.IN_FRAMESET:case V.AFTER_FRAMESET:{this._insertCharacters(e);break}case V.IN_BODY:case V.IN_CAPTION:case V.IN_CELL:case V.IN_TEMPLATE:case V.AFTER_BODY:case V.AFTER_AFTER_BODY:case V.AFTER_AFTER_FRAMESET:{g4(this,e);break}case V.IN_TABLE:case V.IN_TABLE_BODY:case V.IN_ROW:{bx(this,e);break}case V.IN_TABLE_TEXT:{E4(this,e);break}}}}function sK(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):v4(t,e),n}function oK(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[r])&&(n=i)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function lK(t,e,n){let r=e,i=t.openElements.getCommonAncestor(e);for(let a=0,s=i;s!==n;a++,s=i){i=t.openElements.getCommonAncestor(s);const l=t.activeFormattingElements.getElementEntry(s),c=l&&a>=iK;!l||c?(c&&t.activeFormattingElements.removeEntry(l),t.openElements.remove(s)):(s=uK(t,l),r===e&&(t.activeFormattingElements.bookmark=l),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(s,r),r=s)}return r}function uK(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function cK(t,e,n){const r=t.treeAdapter.getTagName(e),i=tc(r);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(n);else{const a=t.treeAdapter.getNamespaceURI(e);i===_.TEMPLATE&&a===je.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function dK(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:i}=n,a=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,a),t.treeAdapter.appendChild(e,a),t.activeFormattingElements.insertElementAfterBookmark(a,i),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,a,i.tagID)}function EE(t,e){for(let n=0;n<rK;n++){const r=sK(t,e);if(!r)break;const i=oK(t,r);if(!i)break;t.activeFormattingElements.bookmark=r;const a=lK(t,i,r.element),s=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(a),s&&cK(t,s,a),dK(t,i,r)}}function Rv(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function hK(t,e){t._appendCommentNode(e,t.openElements.items[0])}function fK(t,e){t._appendCommentNode(e,t.document)}function AE(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const a=t.openElements.items[1],s=t.treeAdapter.getNodeSourceCodeLocation(a);s&&!s.endTag&&t._setEndLocation(a,e)}}}}function mK(t,e){t._setDocumentType(e);const n=e.forceQuirks?Mi.QUIRKS:qX(e);$X(e)||t._err(e,Ee.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=V.BEFORE_HTML}function xd(t,e){t._err(e,Ee.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Mi.QUIRKS),t.insertionMode=V.BEFORE_HTML,t._processToken(e)}function pK(t,e){e.tagID===_.HTML?(t._insertElement(e,je.HTML),t.insertionMode=V.BEFORE_HEAD):Hd(t,e)}function gK(t,e){const n=e.tagID;(n===_.HTML||n===_.HEAD||n===_.BODY||n===_.BR)&&Hd(t,e)}function Hd(t,e){t._insertFakeRootElement(),t.insertionMode=V.BEFORE_HEAD,t._processToken(e)}function bK(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.HEAD:{t._insertElement(e,je.HTML),t.headElement=t.openElements.current,t.insertionMode=V.IN_HEAD;break}default:zd(t,e)}}function yK(t,e){const n=e.tagID;n===_.HEAD||n===_.BODY||n===_.HTML||n===_.BR?zd(t,e):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function zd(t,e){t._insertFakeElement(de.HEAD,_.HEAD),t.headElement=t.openElements.current,t.insertionMode=V.IN_HEAD,t._processToken(e)}function ra(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:{t._appendElement(e,je.HTML),e.ackSelfClosing=!0;break}case _.TITLE:{t._switchToTextParsing(e,En.RCDATA);break}case _.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,En.RAWTEXT):(t._insertElement(e,je.HTML),t.insertionMode=V.IN_HEAD_NO_SCRIPT);break}case _.NOFRAMES:case _.STYLE:{t._switchToTextParsing(e,En.RAWTEXT);break}case _.SCRIPT:{t._switchToTextParsing(e,En.SCRIPT_DATA);break}case _.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=V.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(V.IN_TEMPLATE);break}case _.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:$d(t,e)}}function xK(t,e){switch(e.tagID){case _.HEAD:{t.openElements.pop(),t.insertionMode=V.AFTER_HEAD;break}case _.BODY:case _.BR:case _.HTML:{$d(t,e);break}case _.TEMPLATE:{yl(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function yl(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==_.TEMPLATE&&t._err(e,Ee.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,Ee.endTagWithoutMatchingOpenElement)}function $d(t,e){t.openElements.pop(),t.insertionMode=V.AFTER_HEAD,t._processToken(e)}function vK(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.BASEFONT:case _.BGSOUND:case _.HEAD:case _.LINK:case _.META:case _.NOFRAMES:case _.STYLE:{ra(t,e);break}case _.NOSCRIPT:{t._err(e,Ee.nestedNoscriptInHead);break}default:qd(t,e)}}function wK(t,e){switch(e.tagID){case _.NOSCRIPT:{t.openElements.pop(),t.insertionMode=V.IN_HEAD;break}case _.BR:{qd(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function qd(t,e){const n=e.type===wt.EOF?Ee.openElementsLeftAfterEof:Ee.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=V.IN_HEAD,t._processToken(e)}function EK(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.BODY:{t._insertElement(e,je.HTML),t.framesetOk=!1,t.insertionMode=V.IN_BODY;break}case _.FRAMESET:{t._insertElement(e,je.HTML),t.insertionMode=V.IN_FRAMESET;break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{t._err(e,Ee.abandonedHeadElementChild),t.openElements.push(t.headElement,_.HEAD),ra(t,e),t.openElements.remove(t.headElement);break}case _.HEAD:{t._err(e,Ee.misplacedStartTagForHeadElement);break}default:Yd(t,e)}}function AK(t,e){switch(e.tagID){case _.BODY:case _.HTML:case _.BR:{Yd(t,e);break}case _.TEMPLATE:{yl(t,e);break}default:t._err(e,Ee.endTagWithoutMatchingOpenElement)}}function Yd(t,e){t._insertFakeElement(de.BODY,_.BODY),t.insertionMode=V.IN_BODY,Og(t,e)}function Og(t,e){switch(e.type){case wt.CHARACTER:{b4(t,e);break}case wt.WHITESPACE_CHARACTER:{g4(t,e);break}case wt.COMMENT:{Rv(t,e);break}case wt.START_TAG:{yr(t,e);break}case wt.END_TAG:{kg(t,e);break}case wt.EOF:{w4(t,e);break}}}function g4(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function b4(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function SK(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function TK(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function _K(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,je.HTML),t.insertionMode=V.IN_FRAMESET)}function NK(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,je.HTML)}function CK(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&Dv.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,je.HTML)}function OK(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,je.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function kK(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,je.HTML),n||(t.formElement=t.openElements.current))}function jK(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const i=t.openElements.tagIDs[r];if(n===_.LI&&i===_.LI||(n===_.DD||n===_.DT)&&(i===_.DD||i===_.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==_.ADDRESS&&i!==_.DIV&&i!==_.P&&t._isSpecialElement(t.openElements.items[r],i))break}t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,je.HTML)}function PK(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,je.HTML),t.tokenizer.state=En.PLAINTEXT}function DK(t,e){t.openElements.hasInScope(_.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.framesetOk=!1}function RK(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(de.A);n&&(EE(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function IK(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function LK(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(_.NOBR)&&(EE(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,je.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function MK(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function BK(t,e){t.treeAdapter.getDocumentMode(t.document)!==Mi.QUIRKS&&t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,je.HTML),t.framesetOk=!1,t.insertionMode=V.IN_TABLE}function y4(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,je.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function x4(t){const e=o4(t,Zo.TYPE);return e!=null&&e.toLowerCase()===nK}function FK(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,je.HTML),x4(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function UK(t,e){t._appendElement(e,je.HTML),e.ackSelfClosing=!0}function HK(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._appendElement(e,je.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function zK(t,e){e.tagName=de.IMG,e.tagID=_.IMG,y4(t,e)}function $K(t,e){t._insertElement(e,je.HTML),t.skipNextNewLine=!0,t.tokenizer.state=En.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=V.TEXT}function qK(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,En.RAWTEXT)}function YK(t,e){t.framesetOk=!1,t._switchToTextParsing(e,En.RAWTEXT)}function PO(t,e){t._switchToTextParsing(e,En.RAWTEXT)}function VK(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===V.IN_TABLE||t.insertionMode===V.IN_CAPTION||t.insertionMode===V.IN_TABLE_BODY||t.insertionMode===V.IN_ROW||t.insertionMode===V.IN_CELL?V.IN_SELECT_IN_TABLE:V.IN_SELECT}function GK(t,e){t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML)}function WK(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,je.HTML)}function XK(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(_.RTC),t._insertElement(e,je.HTML)}function KK(t,e){t._reconstructActiveFormattingElements(),f4(e),wE(e),e.selfClosing?t._appendElement(e,je.MATHML):t._insertElement(e,je.MATHML),e.ackSelfClosing=!0}function QK(t,e){t._reconstructActiveFormattingElements(),m4(e),wE(e),e.selfClosing?t._appendElement(e,je.SVG):t._insertElement(e,je.SVG),e.ackSelfClosing=!0}function DO(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,je.HTML)}function yr(t,e){switch(e.tagID){case _.I:case _.S:case _.B:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.SMALL:case _.STRIKE:case _.STRONG:{IK(t,e);break}case _.A:{RK(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{CK(t,e);break}case _.P:case _.DL:case _.OL:case _.UL:case _.DIV:case _.DIR:case _.NAV:case _.MAIN:case _.MENU:case _.ASIDE:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.DETAILS:case _.ADDRESS:case _.ARTICLE:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{NK(t,e);break}case _.LI:case _.DD:case _.DT:{jK(t,e);break}case _.BR:case _.IMG:case _.WBR:case _.AREA:case _.EMBED:case _.KEYGEN:{y4(t,e);break}case _.HR:{HK(t,e);break}case _.RB:case _.RTC:{WK(t,e);break}case _.RT:case _.RP:{XK(t,e);break}case _.PRE:case _.LISTING:{OK(t,e);break}case _.XMP:{qK(t,e);break}case _.SVG:{QK(t,e);break}case _.HTML:{SK(t,e);break}case _.BASE:case _.LINK:case _.META:case _.STYLE:case _.TITLE:case _.SCRIPT:case _.BGSOUND:case _.BASEFONT:case _.TEMPLATE:{ra(t,e);break}case _.BODY:{TK(t,e);break}case _.FORM:{kK(t,e);break}case _.NOBR:{LK(t,e);break}case _.MATH:{KK(t,e);break}case _.TABLE:{BK(t,e);break}case _.INPUT:{FK(t,e);break}case _.PARAM:case _.TRACK:case _.SOURCE:{UK(t,e);break}case _.IMAGE:{zK(t,e);break}case _.BUTTON:{DK(t,e);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{MK(t,e);break}case _.IFRAME:{YK(t,e);break}case _.SELECT:{VK(t,e);break}case _.OPTION:case _.OPTGROUP:{GK(t,e);break}case _.NOEMBED:case _.NOFRAMES:{PO(t,e);break}case _.FRAMESET:{_K(t,e);break}case _.TEXTAREA:{$K(t,e);break}case _.NOSCRIPT:{t.options.scriptingEnabled?PO(t,e):DO(t,e);break}case _.PLAINTEXT:{PK(t,e);break}case _.COL:case _.TH:case _.TD:case _.TR:case _.HEAD:case _.FRAME:case _.TBODY:case _.TFOOT:case _.THEAD:case _.CAPTION:case _.COLGROUP:break;default:DO(t,e)}}function ZK(t,e){if(t.openElements.hasInScope(_.BODY)&&(t.insertionMode=V.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function JK(t,e){t.openElements.hasInScope(_.BODY)&&(t.insertionMode=V.AFTER_BODY,O4(t,e))}function eQ(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function tQ(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(_.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(_.FORM):n&&t.openElements.remove(n))}function nQ(t){t.openElements.hasInButtonScope(_.P)||t._insertFakeElement(de.P,_.P),t._closePElement()}function rQ(t){t.openElements.hasInListItemScope(_.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(_.LI),t.openElements.popUntilTagNamePopped(_.LI))}function iQ(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function aQ(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function sQ(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function oQ(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(de.BR,_.BR),t.openElements.pop(),t.framesetOk=!1}function v4(t,e){const n=e.tagName,r=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const a=t.openElements.items[i],s=t.openElements.tagIDs[i];if(r===s&&(r!==_.UNKNOWN||t.treeAdapter.getTagName(a)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(a,s))break}}function kg(t,e){switch(e.tagID){case _.A:case _.B:case _.I:case _.S:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.NOBR:case _.SMALL:case _.STRIKE:case _.STRONG:{EE(t,e);break}case _.P:{nQ(t);break}case _.DL:case _.UL:case _.OL:case _.DIR:case _.DIV:case _.NAV:case _.PRE:case _.MAIN:case _.MENU:case _.ASIDE:case _.BUTTON:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.ADDRESS:case _.ARTICLE:case _.DETAILS:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.LISTING:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{eQ(t,e);break}case _.LI:{rQ(t);break}case _.DD:case _.DT:{iQ(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{aQ(t);break}case _.BR:{oQ(t);break}case _.BODY:{ZK(t,e);break}case _.HTML:{JK(t,e);break}case _.FORM:{tQ(t);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{sQ(t,e);break}case _.TEMPLATE:{yl(t,e);break}default:v4(t,e)}}function w4(t,e){t.tmplInsertionModeStack.length>0?C4(t,e):AE(t,e)}function lQ(t,e){var n;e.tagID===_.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function uQ(t,e){t._err(e,Ee.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function bx(t,e){if(t.openElements.currentTagId!==void 0&&p4.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=V.IN_TABLE_TEXT,e.type){case wt.CHARACTER:{A4(t,e);break}case wt.WHITESPACE_CHARACTER:{E4(t,e);break}}else Lh(t,e)}function cQ(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,je.HTML),t.insertionMode=V.IN_CAPTION}function dQ(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,je.HTML),t.insertionMode=V.IN_COLUMN_GROUP}function hQ(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(de.COLGROUP,_.COLGROUP),t.insertionMode=V.IN_COLUMN_GROUP,SE(t,e)}function fQ(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,je.HTML),t.insertionMode=V.IN_TABLE_BODY}function mQ(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(de.TBODY,_.TBODY),t.insertionMode=V.IN_TABLE_BODY,jg(t,e)}function pQ(t,e){t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function gQ(t,e){x4(e)?t._appendElement(e,je.HTML):Lh(t,e),e.ackSelfClosing=!0}function bQ(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,je.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function Mu(t,e){switch(e.tagID){case _.TD:case _.TH:case _.TR:{mQ(t,e);break}case _.STYLE:case _.SCRIPT:case _.TEMPLATE:{ra(t,e);break}case _.COL:{hQ(t,e);break}case _.FORM:{bQ(t,e);break}case _.TABLE:{pQ(t,e);break}case _.TBODY:case _.TFOOT:case _.THEAD:{fQ(t,e);break}case _.INPUT:{gQ(t,e);break}case _.CAPTION:{cQ(t,e);break}case _.COLGROUP:{dQ(t,e);break}default:Lh(t,e)}}function sh(t,e){switch(e.tagID){case _.TABLE:{t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode());break}case _.TEMPLATE:{yl(t,e);break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:Lh(t,e)}}function Lh(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,Og(t,e),t.fosterParentingEnabled=n}function E4(t,e){t.pendingCharacterTokens.push(e)}function A4(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function vd(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Lh(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const S4=new Set([_.CAPTION,_.COL,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]);function yQ(t,e){const n=e.tagID;S4.has(n)?t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=V.IN_TABLE,Mu(t,e)):yr(t,e)}function xQ(t,e){const n=e.tagID;switch(n){case _.CAPTION:case _.TABLE:{t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=V.IN_TABLE,n===_.TABLE&&sh(t,e));break}case _.BODY:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:kg(t,e)}}function SE(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.COL:{t._appendElement(e,je.HTML),e.ackSelfClosing=!0;break}case _.TEMPLATE:{ra(t,e);break}default:bp(t,e)}}function vQ(t,e){switch(e.tagID){case _.COLGROUP:{t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=V.IN_TABLE);break}case _.TEMPLATE:{yl(t,e);break}case _.COL:break;default:bp(t,e)}}function bp(t,e){t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=V.IN_TABLE,t._processToken(e))}function jg(t,e){switch(e.tagID){case _.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,je.HTML),t.insertionMode=V.IN_ROW;break}case _.TH:case _.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(de.TR,_.TR),t.insertionMode=V.IN_ROW,Pg(t,e);break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=V.IN_TABLE,Mu(t,e));break}default:Mu(t,e)}}function Iv(t,e){const n=e.tagID;switch(e.tagID){case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=V.IN_TABLE);break}case _.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=V.IN_TABLE,sh(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:case _.TR:break;default:sh(t,e)}}function Pg(t,e){switch(e.tagID){case _.TH:case _.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,je.HTML),t.insertionMode=V.IN_CELL,t.activeFormattingElements.insertMarker();break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=V.IN_TABLE_BODY,jg(t,e));break}default:Mu(t,e)}}function T4(t,e){switch(e.tagID){case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=V.IN_TABLE_BODY);break}case _.TABLE:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=V.IN_TABLE_BODY,Iv(t,e));break}case _.TBODY:case _.TFOOT:case _.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(_.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=V.IN_TABLE_BODY,Iv(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:break;default:sh(t,e)}}function wQ(t,e){const n=e.tagID;S4.has(n)?(t.openElements.hasInTableScope(_.TD)||t.openElements.hasInTableScope(_.TH))&&(t._closeTableCell(),Pg(t,e)):yr(t,e)}function EQ(t,e){const n=e.tagID;switch(n){case _.TD:case _.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=V.IN_ROW);break}case _.TABLE:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),T4(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:break;default:kg(t,e)}}function _4(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._insertElement(e,je.HTML);break}case _.OPTGROUP:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._insertElement(e,je.HTML);break}case _.HR:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._appendElement(e,je.HTML),e.ackSelfClosing=!0;break}case _.INPUT:case _.KEYGEN:case _.TEXTAREA:case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),e.tagID!==_.SELECT&&t._processStartTag(e));break}case _.SCRIPT:case _.TEMPLATE:{ra(t,e);break}}}function N4(t,e){switch(e.tagID){case _.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===_.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===_.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop();break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop();break}case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode());break}case _.TEMPLATE:{yl(t,e);break}}}function AQ(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t._processStartTag(e)):_4(t,e)}function SQ(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t.onEndTag(e)):N4(t,e)}function TQ(t,e){switch(e.tagID){case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{ra(t,e);break}case _.CAPTION:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.tmplInsertionModeStack[0]=V.IN_TABLE,t.insertionMode=V.IN_TABLE,Mu(t,e);break}case _.COL:{t.tmplInsertionModeStack[0]=V.IN_COLUMN_GROUP,t.insertionMode=V.IN_COLUMN_GROUP,SE(t,e);break}case _.TR:{t.tmplInsertionModeStack[0]=V.IN_TABLE_BODY,t.insertionMode=V.IN_TABLE_BODY,jg(t,e);break}case _.TD:case _.TH:{t.tmplInsertionModeStack[0]=V.IN_ROW,t.insertionMode=V.IN_ROW,Pg(t,e);break}default:t.tmplInsertionModeStack[0]=V.IN_BODY,t.insertionMode=V.IN_BODY,yr(t,e)}}function _Q(t,e){e.tagID===_.TEMPLATE&&yl(t,e)}function C4(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):AE(t,e)}function NQ(t,e){e.tagID===_.HTML?yr(t,e):yp(t,e)}function O4(t,e){var n;if(e.tagID===_.HTML){if(t.fragmentContext||(t.insertionMode=V.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===_.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else yp(t,e)}function yp(t,e){t.insertionMode=V.IN_BODY,Og(t,e)}function CQ(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.FRAMESET:{t._insertElement(e,je.HTML);break}case _.FRAME:{t._appendElement(e,je.HTML),e.ackSelfClosing=!0;break}case _.NOFRAMES:{ra(t,e);break}}}function OQ(t,e){e.tagID===_.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==_.FRAMESET&&(t.insertionMode=V.AFTER_FRAMESET))}function kQ(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.NOFRAMES:{ra(t,e);break}}}function jQ(t,e){e.tagID===_.HTML&&(t.insertionMode=V.AFTER_AFTER_FRAMESET)}function PQ(t,e){e.tagID===_.HTML?yr(t,e):ep(t,e)}function ep(t,e){t.insertionMode=V.IN_BODY,Og(t,e)}function DQ(t,e){switch(e.tagID){case _.HTML:{yr(t,e);break}case _.NOFRAMES:{ra(t,e);break}}}function RQ(t,e){e.chars=ln,t._insertCharacters(e)}function IQ(t,e){t._insertCharacters(e),t.framesetOk=!1}function k4(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==je.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function LQ(t,e){if(QX(e))k4(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===je.MATHML?f4(e):r===je.SVG&&(ZX(e),m4(e)),wE(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function MQ(t,e){if(e.tagID===_.P||e.tagID===_.BR){k4(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===je.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(n);break}}}de.AREA,de.BASE,de.BASEFONT,de.BGSOUND,de.BR,de.COL,de.EMBED,de.FRAME,de.HR,de.IMG,de.INPUT,de.KEYGEN,de.LINK,de.META,de.PARAM,de.SOURCE,de.TRACK,de.WBR;const BQ=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,FQ=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),RO={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function j4(t,e){const n=XQ(t),r=n4("type",{handlers:{root:UQ,element:HQ,text:zQ,comment:D4,doctype:$Q,raw:YQ},unknown:VQ}),i={parser:n?new jO(RO):jO.getFragmentParser(void 0,RO),handle(l){r(l,i)},stitches:!1,options:e||{}};r(t,i),nc(i,ja());const a=n?i.parser.document:i.parser.getFragment(),s=UW(a,{file:i.options.file});return i.stitches&&gE(s,"comment",function(l,c,d){const h=l;if(h.value.stitch&&d&&c!==void 0){const p=d.children;return p[c]=h.value.stitch,c}}),s.type==="root"&&s.children.length===1&&s.children[0].type===t.type?s.children[0]:s}function P4(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function UQ(t,e){P4(t.children,e)}function HQ(t,e){GQ(t,e),P4(t.children,e),WQ(t,e)}function zQ(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:wt.CHARACTER,chars:t.value,location:Mh(t)};nc(e,ja(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function $Q(t,e){const n={type:wt.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Mh(t)};nc(e,ja(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function qQ(t,e){e.stitches=!0;const n=KQ(t);if("children"in t&&"children"in n){const r=j4({type:"root",children:t.children},e.options);n.children=r.children}D4({type:"comment",value:{stitch:n}},e)}function D4(t,e){const n=t.value,r={type:wt.COMMENT,data:n,location:Mh(t)};nc(e,ja(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function YQ(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,R4(e,ja(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(BQ,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function VQ(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))qQ(n,e);else{let r="";throw FQ.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function nc(t,e){R4(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=En.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function R4(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function GQ(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===En.PLAINTEXT)return;nc(e,ja(t));const r=e.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:zo.html;i===zo.html&&n==="svg"&&(i=zo.svg);const a=tX({...t,children:[]},{space:i===zo.svg?"svg":"html"}),s={type:wt.START_TAG,tagName:n,tagID:tc(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in a?a.attrs:[],location:Mh(t)};e.parser.currentToken=s,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function WQ(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&uX.includes(n)||e.parser.tokenizer.state===En.PLAINTEXT)return;nc(e,Tg(t));const r={type:wt.END_TAG,tagName:n,tagID:tc(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Mh(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===En.RCDATA||e.parser.tokenizer.state===En.RAWTEXT||e.parser.tokenizer.state===En.SCRIPT_DATA)&&(e.parser.tokenizer.state=En.DATA)}function XQ(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function Mh(t){const e=ja(t)||{line:void 0,column:void 0,offset:void 0},n=Tg(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function KQ(t){return"children"in t?Lu({...t,children:[]}):Lu(t)}function QQ(t){return function(e,n){return j4(e,{...t,file:n})}}function ZQ(){const{id:t}=MP(),e=qi(),{user:n}=ka(),[r,i]=A.useState(null),[a,s]=A.useState(!0),[l,c]=A.useState(null),[d,h]=A.useState(!0),[p,b]=A.useState(!0),[y,x]=A.useState(!0),[w,E]=A.useState(!1),[T,C]=A.useState(!1),[N,P]=A.useState([]),[k,j]=A.useState(""),[D,H]=A.useState(!1),Y=A.useRef(null);A.useEffect(()=>{X()},[t]);const X=async()=>{s(!0),c(null);try{console.log(" ID:",t);const R=await fetch(`/api/ocr/documents/${t}/`);if(!R.ok){console.error(" HTTP:",R.status,R.statusText),c(`HTTP ${R.status}: ${R.statusText}`),s(!1);return}const B=await R.json();console.log(" API:",B),B.status==="success"?(console.log(" "),i(B.data)):(console.error(" API:",B.message),c(B.message||""))}catch(R){console.error(" :",R),c("")}finally{s(!1)}},z=R=>R?Number(R).toLocaleString("zh-CN"):"-",K=R=>R?`${z(R)}`:"-",ce=()=>{C(!0),N.length===0&&P([{role:"assistant",content:"",timestamp:new Date}])},te=()=>{C(!1)},W=async()=>{if(!k.trim()||D)return;const R={role:"user",content:k.trim(),timestamp:new Date};P(re=>[...re,R]),j(""),H(!0);const B={role:"assistant",content:"",timestamp:new Date,isStreaming:!0};P(re=>[...re,B]);try{const re=await fetch(`/api/ocr/documents/${t}/chat/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:R.content,history:N.map(Q=>({role:Q.role,content:Q.content})),stream:!0})});if(!re.ok)throw new Error("");const le=re.body.getReader(),M=new TextDecoder;let U="";for(;;){const{done:Q,value:I}=await le.read();if(Q)break;const $=M.decode(I,{stream:!0}).split(`
`);for(const ie of $)if(ie.startsWith("data: ")){const me=ie.slice(6);if(me==="[DONE]")break;try{const be=JSON.parse(me);be.content&&(U+=be.content,P(J=>{const Oe=[...J];return Oe[Oe.length-1]={...Oe[Oe.length-1],content:U},Oe}))}catch(be){console.error(":",be)}}}P(Q=>{const I=[...Q];return I[I.length-1]={...I[I.length-1],isStreaming:!1},I})}catch(re){console.error(":",re),P(le=>{const M=[...le];return M[M.length-1]={role:"assistant",content:"",timestamp:new Date,isStreaming:!1},M})}finally{H(!1)}};return A.useEffect(()=>{Y.current&&Y.current.scrollIntoView({behavior:"smooth"})},[N]),a?f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsx(Bt,{className:"w-8 h-8 animate-spin text-blue-500"})}):l?f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md",children:[f.jsx(Ld,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center mb-2",children:""}),f.jsx("p",{className:"text-gray-600 text-center mb-4",children:l}),f.jsx("button",{onClick:()=>e("/plan-management"),className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition",children:""})]})}):r?f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-3 sm:py-4",children:[f.jsxs("div",{className:"flex flex-col gap-3 sm:hidden",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("button",{onClick:()=>e("/plan-management"),className:"flex items-center space-x-1 text-gray-600 hover:text-gray-800",children:[f.jsx(Kd,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm",children:""})]}),f.jsxs("button",{onClick:ce,disabled:r.processing_stage!=="all_completed",className:`flex items-center space-x-1.5 px-3 py-1 rounded-lg shadow transition-all ${r.processing_stage!=="all_completed"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-cyan-600 text-white hover:shadow-lg"}`,children:[f.jsx(Wm,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm",children:""})]})]}),f.jsx("h1",{className:"text-base font-bold text-gray-800 line-clamp-2 break-words",children:r.file_name})]}),f.jsxs("div",{className:"hidden sm:flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-4 min-w-0 flex-1",children:[f.jsxs("button",{onClick:()=>e("/plan-management"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-800 flex-shrink-0",children:[f.jsx(Kd,{className:"w-5 h-5"}),f.jsx("span",{children:""})]}),f.jsx("div",{className:"h-6 w-px bg-gray-300 flex-shrink-0"}),f.jsx("h1",{className:"text-xl font-bold text-gray-800 truncate",children:r.file_name})]}),f.jsxs("button",{onClick:ce,disabled:r.processing_stage!=="all_completed",className:`flex items-center space-x-2 px-4 py-1.5 rounded-lg shadow transition-all flex-shrink-0 ${r.processing_stage!=="all_completed"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-600 to-cyan-600 text-white hover:shadow-lg"}`,children:[f.jsx(Wm,{className:"w-4 h-4"}),f.jsx("span",{children:""})]})]})]})}),f.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-2 sm:py-4 space-y-2 sm:space-y-4",children:[r&&r.processing_stage==="error"&&f.jsx("div",{className:"w-full bg-gradient-to-r from-red-50 to-rose-50 border-2 border-red-300 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Ld,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-sm font-semibold text-red-900 mb-1",children:""}),f.jsx("p",{className:"text-xs text-red-800 mb-2",children:r.error_message||""})]}),f.jsx("button",{onClick:()=>e("/plan-management"),className:"px-3 py-1.5 bg-red-600 text-white text-xs rounded-lg hover:bg-red-700 transition-colors flex-shrink-0",children:""})]})}),r&&r.processing_stage!=="all_completed"&&r.processing_stage!=="error"&&f.jsx("div",{className:"w-full bg-gradient-to-r from-amber-50 to-orange-50 border-2 border-amber-300 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Bt,{className:"w-5 h-5 text-amber-600 animate-spin flex-shrink-0 mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-sm font-semibold text-amber-900 mb-1",children:""}),f.jsx("p",{className:"text-xs text-amber-800 mb-2",children:""}),f.jsxs("div",{className:"flex items-center gap-2 text-xs text-amber-700",children:[f.jsx("span",{className:"font-medium",children:":"}),f.jsxs("span",{className:"px-2 py-0.5 bg-amber-100 rounded",children:[r.processing_stage==="ocr_pending"&&"OCR",r.processing_stage==="pending"&&"",r.processing_stage==="extracting_basic_info"&&"",r.processing_stage==="basic_info_completed"&&"",r.processing_stage==="extracting_tablesummary"&&"",r.processing_stage==="tablesummary_completed"&&"",r.processing_stage==="extracting_table"&&"",r.processing_stage==="table_completed"&&"",r.processing_stage==="extracting_wellness_table"&&"",r.processing_stage==="wellness_table_completed"&&"",r.processing_stage==="extracting_summary"&&"",!r.processing_stage&&""]})]})]}),f.jsx("button",{onClick:X,className:"px-3 py-1.5 bg-amber-600 text-white text-xs rounded-lg hover:bg-amber-700 transition-colors flex-shrink-0",children:""})]})}),f.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border border-gray-200 p-2 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 -mx-2 sm:-mx-4 px-2 sm:px-4 py-1 rounded",onClick:()=>h(!d),children:[f.jsxs("div",{className:"flex items-center space-x-1.5",children:[f.jsx(kH,{className:"w-4 h-4 text-blue-500"}),f.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:""})]}),d?f.jsx(Uo,{className:"w-4 h-4 text-gray-400"}):f.jsx(Fo,{className:"w-4 h-4 text-gray-400"})]}),d&&f.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-xs sm:text-sm mt-2",children:[!r.insured_name&&!r.insured_age&&!r.insured_gender&&!r.insurance_company&&!r.insurance_product&&!r.sum_assured&&!r.annual_premium&&f.jsxs("div",{className:"w-full text-center py-4 text-gray-500",children:[f.jsx(Bt,{className:"w-5 h-5 animate-spin mx-auto mb-2"}),f.jsx("p",{className:"text-xs",children:"..."})]}),r.insured_name&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsx("span",{className:"font-medium text-gray-800",children:r.insured_name})]}),r.insured_age&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsxs("span",{className:"font-medium text-gray-800",children:[r.insured_age,""]})]}),r.insured_gender&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsx("span",{className:"font-medium text-gray-800",children:r.insured_gender})]}),(r.insured_name||r.insured_age||r.insured_gender)&&(r.insurance_company||r.insurance_product)&&f.jsx("div",{className:"hidden sm:block w-px h-4 bg-gray-300"}),r.insurance_company&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsx("span",{className:"font-medium text-gray-800",children:r.insurance_company})]}),r.insurance_product&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsx("span",{className:"font-medium text-gray-800 max-w-[200px] truncate",title:r.insurance_product,children:r.insurance_product})]}),(r.insurance_company||r.insurance_product)&&(r.sum_assured||r.annual_premium)&&f.jsx("div",{className:"hidden sm:block w-px h-4 bg-gray-300"}),r.sum_assured&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsx("span",{className:"font-medium text-gray-800",children:K(r.sum_assured)})]}),r.annual_premium&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsx("span",{className:"font-medium text-gray-800",children:K(r.annual_premium)})]}),r.payment_years&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsxs("span",{className:"font-medium text-gray-800",children:[r.payment_years,""]})]}),r.total_premium&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsx("span",{className:"font-medium text-gray-800",children:K(r.total_premium)})]}),r.insurance_period&&f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"text-gray-500",children:":"}),f.jsx("span",{className:"font-medium text-gray-800",children:r.insurance_period})]})]})]}),(r.summary&&typeof r.summary=="string"&&r.summary.trim().length>0||r.processing_stage!=="all_completed")&&f.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border border-gray-200 p-2 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 -mx-2 sm:-mx-4 px-2 sm:px-4 py-1 rounded",onClick:()=>b(!p),children:[f.jsxs("div",{className:"flex items-center space-x-1.5",children:[f.jsx(Vr,{className:"w-4 h-4 text-green-500"}),f.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:""})]}),p?f.jsx(Uo,{className:"w-4 h-4 text-gray-400"}):f.jsx(Fo,{className:"w-4 h-4 text-gray-400"})]}),p&&(r.summary&&typeof r.summary=="string"&&r.summary.trim().length>0?f.jsx("div",{className:"mt-3 prose prose-sm max-w-none",children:f.jsx(Cv,{rehypePlugins:[QQ],className:"text-xs sm:text-sm text-gray-600 leading-relaxed",components:{h1:({node:R,...B})=>f.jsx("h1",{className:"text-base sm:text-lg font-bold text-gray-900 mt-4 mb-3",...B}),h2:({node:R,...B})=>f.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800 mt-4 mb-2",...B}),h3:({node:R,...B})=>f.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-700 mt-3 mb-1",...B}),p:({node:R,...B})=>f.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-2 leading-relaxed",...B}),ul:({node:R,...B})=>f.jsx("ul",{className:"list-disc list-inside space-y-1 mb-2",...B}),ol:({node:R,...B})=>f.jsx("ol",{className:"list-decimal list-inside space-y-1 mb-2",...B}),li:({node:R,...B})=>f.jsx("li",{className:"text-xs sm:text-sm text-gray-600",...B}),strong:({node:R,...B})=>f.jsx("strong",{className:"font-semibold text-gray-800",...B}),table:({node:R,...B})=>f.jsx("div",{className:"overflow-x-auto my-4",children:f.jsx("table",{className:"min-w-full border-collapse border border-gray-300",...B})}),thead:({node:R,...B})=>f.jsx("thead",{className:"bg-gray-100",...B}),tbody:({node:R,...B})=>f.jsx("tbody",{...B}),tr:({node:R,...B})=>f.jsx("tr",{className:"border-b border-gray-300",...B}),th:({node:R,...B})=>f.jsx("th",{className:"border border-gray-300 px-2 sm:px-4 py-1 sm:py-2 text-left text-xs sm:text-sm font-semibold text-gray-700",...B}),td:({node:R,...B})=>f.jsx("td",{className:"border border-gray-300 px-2 sm:px-4 py-1 sm:py-2 text-xs sm:text-sm text-gray-600",...B})},children:r.summary})}):f.jsxs("div",{className:"mt-3 text-center py-6 text-gray-500",children:[f.jsx(Bt,{className:"w-5 h-5 animate-spin mx-auto mb-2"}),f.jsx("p",{className:"text-xs",children:"..."})]}))]}),(r.table1&&r.table1.years&&r.table1.years.length>0||r.processing_stage!=="all_completed")&&f.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border border-gray-200 p-2 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 -mx-2 sm:-mx-4 px-2 sm:px-4 py-1 rounded",onClick:()=>x(!y),children:[f.jsxs("div",{className:"flex items-center space-x-1.5",children:[f.jsx(iH,{className:"w-4 h-4 text-purple-500"}),f.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:""}),r.table1?.years?.length>0&&f.jsxs("span",{className:"text-xs text-gray-500",children:["(",r.table1.years.length," )"]})]}),y?f.jsx(Uo,{className:"w-4 h-4 text-gray-400"}):f.jsx(Fo,{className:"w-4 h-4 text-gray-400"})]}),y&&(r.table1&&r.table1.years&&r.table1.years.length>0?f.jsx("div",{className:"overflow-x-auto -mx-2 sm:mx-0 mt-2",children:f.jsxs("table",{className:"w-full text-xs border-collapse",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-gray-50 border-b-2 border-gray-200",children:[f.jsx("th",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-left font-medium text-gray-700 border-r border-gray-200 whitespace-nowrap",colSpan:"2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:""}),f.jsx("span",{className:"text-gray-400",children:"/"}),f.jsx("span",{children:""})]})}),f.jsx("th",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-right font-medium text-gray-700 border-r border-gray-200 whitespace-nowrap",children:""}),f.jsx("th",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-right font-medium text-gray-700 border-r border-gray-200 whitespace-nowrap",children:""}),f.jsx("th",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-right font-medium text-gray-700 border-r border-gray-200 whitespace-nowrap",children:"%"}),f.jsx("th",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-right font-medium text-gray-700 whitespace-nowrap",children:"IRR%"})]})}),f.jsx("tbody",{className:"bg-white",children:r.table1.years.map((R,B)=>{console.log(" :",R);const re=r.insured_age?parseInt(r.insured_age)+parseInt(R.policy_year):null,le=r?.annual_premium?parseInt(r.annual_premium):0,M=r?.payment_years?parseInt(r.payment_years):0,U=le*Math.min(R.policy_year,M),Q=R.total||0,I=U>0&&Q>0&&R.policy_year>0?(Q-U)/U/R.policy_year*100:0,oe=U>0&&Q>0&&R.policy_year>0?(Math.pow(Q/U,1/R.policy_year)-1)*100:0;return f.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[f.jsx("td",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-gray-800 border-r border-gray-100",colSpan:"2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:R.policy_year||"-"}),f.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),f.jsx("span",{children:re?`${re}`:"-"})]})}),f.jsx("td",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-right text-gray-800 border-r border-gray-100",children:z(R.guaranteed)}),f.jsx("td",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-right font-medium text-gray-900 border-r border-gray-100",children:z(R.total)}),f.jsx("td",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-right font-semibold text-purple-600 border-r border-gray-100",children:!isNaN(I)&&I!==0?I.toFixed(2):"-"}),f.jsx("td",{className:"px-1.5 sm:px-3 py-1.5 sm:py-2 text-right font-semibold text-green-600",children:!isNaN(oe)&&oe!==0?oe.toFixed(2):"-"})]},B)})})]})}):f.jsxs("div",{className:"mt-2 text-center py-6 text-gray-500",children:[f.jsx(Bt,{className:"w-5 h-5 animate-spin mx-auto mb-2"}),f.jsx("p",{className:"text-xs",children:"..."})]}))]}),f.jsxs("div",{className:"w-full bg-white rounded-lg shadow-sm border border-gray-200 p-2 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 -mx-2 sm:-mx-4 px-2 sm:px-4 py-1 rounded",onClick:()=>E(!w),children:[f.jsxs("div",{className:"flex items-center space-x-1.5",children:[f.jsx(Vr,{className:"w-4 h-4 text-orange-500"}),f.jsx("h2",{className:"text-sm sm:text-base font-semibold text-gray-800",children:""}),r.content&&f.jsxs("span",{className:"text-xs text-gray-500",children:["(",r.content_length?.toLocaleString()||0," )"]})]}),w?f.jsx(Uo,{className:"w-4 h-4 text-gray-400"}):f.jsx(Fo,{className:"w-4 h-4 text-gray-400"})]}),w&&(r.content?f.jsx("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3 max-h-60 sm:max-h-80 overflow-y-auto mt-2 sm:mt-3",children:f.jsx("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-mono leading-snug",children:r.content})}):f.jsxs("div",{className:"mt-2 text-center py-6 text-gray-500",children:[f.jsx(Bt,{className:"w-5 h-5 animate-spin mx-auto mb-2"}),f.jsx("p",{className:"text-xs",children:"OCR..."})]}))]}),f.jsx("div",{className:"w-full",children:f.jsxs("button",{onClick:()=>e(`/document/${t}/content-editor`),className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center space-x-2 font-medium",children:[f.jsx(Vr,{className:"w-5 h-5"}),f.jsx("span",{children:""})]})})]}),T&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl h-[calc(100vh-2rem)] sm:h-[600px] flex flex-col",children:[f.jsxs("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-t-2xl",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(Wm,{className:"w-4 h-4 sm:w-5 sm:h-5"}),f.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:""})]}),f.jsx("button",{onClick:te,className:"p-1 hover:bg-white/20 rounded-lg transition-colors",children:f.jsx(Ru,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-2 sm:p-4 space-y-2 sm:space-y-4 bg-gray-50",children:[N.map((R,B)=>f.jsx("div",{className:`flex ${R.role==="user"?"justify-end":"justify-start"}`,children:f.jsx("div",{className:`max-w-[85%] sm:max-w-[80%] rounded-lg p-2 sm:p-3 ${R.role==="user"?"bg-blue-600 text-white":"bg-white text-gray-800 shadow"}`,children:R.role==="user"?f.jsx("p",{className:"text-xs sm:text-sm whitespace-pre-wrap break-words",children:R.content}):f.jsx("div",{className:"text-xs sm:text-sm prose prose-sm max-w-none prose-headings:text-gray-800 prose-p:text-gray-800 prose-strong:text-gray-900 prose-ul:text-gray-800 prose-ol:text-gray-800 prose-li:text-gray-800",children:f.jsx(Cv,{children:R.content})})})},B)),D&&f.jsx("div",{className:"flex justify-start",children:f.jsx("div",{className:"bg-white text-gray-800 shadow rounded-lg p-2 sm:p-3",children:f.jsx(Bt,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"})})}),f.jsx("div",{ref:Y})]}),f.jsx("div",{className:"p-2 sm:p-4 border-t bg-white rounded-b-2xl",children:f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:k,onChange:R=>j(R.target.value),onKeyPress:R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),W())},placeholder:"...",className:"flex-1 px-3 sm:px-4 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:D}),f.jsxs("button",{onClick:W,disabled:D||!k.trim(),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 sm:gap-2",children:[f.jsx(vH,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden sm:inline",children:""})]})]})})]})})]}):f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md",children:[f.jsx(Ld,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center mb-2",children:""}),f.jsx("p",{className:"text-gray-600 text-center mb-4",children:""}),f.jsx("button",{onClick:()=>e("/plan-management"),className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition",children:""})]})})}function I4(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=I4(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Gt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=I4(t))&&(r&&(r+=" "),r+=e);return r}var JQ=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function TE(t){if(typeof t!="string")return!1;var e=JQ;return e.includes(t)}var eZ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function L4(t){if(typeof t!="string")return!1;var e=eZ;return e.includes(t)}function M4(t){return typeof t=="string"&&t.startsWith("data-")}function Ta(t){var e=Object.entries(t).filter(n=>{var[r]=n;return L4(r)||M4(r)});return Object.fromEntries(e)}function Dg(t){if(t==null)return null;if(A.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ta(e)}return typeof t=="object"&&!Array.isArray(t)?Ta(t):null}function kr(t){var e=Object.entries(t).filter(n=>{var[r]=n;return L4(r)||M4(r)||TE(r)});return Object.fromEntries(e)}function tZ(t){return t==null?null:A.isValidElement(t)?kr(t.props):typeof t=="object"&&!Array.isArray(t)?kr(t):null}var nZ=["children","width","height","viewBox","className","style","title","desc"];function Lv(){return Lv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lv.apply(null,arguments)}function rZ(t,e){if(t==null)return{};var n,r,i=iZ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function iZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var _E=A.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:l,title:c,desc:d}=t,h=rZ(t,nZ),p=a||{width:r,height:i,x:0,y:0},b=Gt("recharts-surface",s);return A.createElement("svg",Lv({},kr(h),{className:b,width:r,height:i,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),A.createElement("title",null,c),A.createElement("desc",null,d),n)}),aZ=["children","className"];function Mv(){return Mv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mv.apply(null,arguments)}function sZ(t,e){if(t==null)return{};var n,r,i=oZ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lo=A.forwardRef((t,e)=>{var{children:n,className:r}=t,i=sZ(t,aZ),a=Gt("recharts-layer",r);return A.createElement("g",Mv({className:a},kr(i),{ref:e}),n)}),B4=A.createContext(null),lZ=()=>A.useContext(B4);function Jt(t){return function(){return t}}const F4=Math.cos,xp=Math.sin,ia=Math.sqrt,vp=Math.PI,Rg=2*vp,Bv=Math.PI,Fv=2*Bv,Io=1e-6,uZ=Fv-Io;function U4(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function cZ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return U4;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class dZ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?U4:cZ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=r-e,d=i-n,h=s-e,p=l-n,b=h*h+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(b>Io)if(!(Math.abs(p*c-d*h)>Io)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let y=r-s,x=i-l,w=c*c+d*d,E=y*y+x*x,T=Math.sqrt(w),C=Math.sqrt(b),N=a*Math.tan((Bv-Math.acos((w+b-E)/(2*T*C)))/2),P=N/C,k=N/T;Math.abs(P-1)>Io&&this._append`L${e+P*h},${n+P*p}`,this._append`A${a},${a},0,0,${+(p*y>h*x)},${this._x1=e+k*c},${this._y1=n+k*d}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),d=e+l,h=n+c,p=1^s,b=s?i-a:a-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>Io||Math.abs(this._y1-h)>Io)&&this._append`L${d},${h}`,r&&(b<0&&(b=b%Fv+Fv),b>uZ?this._append`A${r},${r},0,1,${p},${e-l},${n-c}A${r},${r},0,1,${p},${this._x1=d},${this._y1=h}`:b>Io&&this._append`A${r},${r},0,${+(b>=Bv)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function NE(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new dZ(e)}function CE(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function H4(t){this._context=t}H4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Ig(t){return new H4(t)}function z4(t){return t[0]}function $4(t){return t[1]}function q4(t,e){var n=Jt(!0),r=null,i=Ig,a=null,s=NE(l);t=typeof t=="function"?t:t===void 0?z4:Jt(t),e=typeof e=="function"?e:e===void 0?$4:Jt(e);function l(c){var d,h=(c=CE(c)).length,p,b=!1,y;for(r==null&&(a=i(y=s())),d=0;d<=h;++d)!(d<h&&n(p=c[d],d,c))===b&&((b=!b)?a.lineStart():a.lineEnd()),b&&a.point(+t(p,d,c),+e(p,d,c));if(y)return a=null,y+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:Jt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:Jt(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Jt(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),l):r},l}function Om(t,e,n){var r=null,i=Jt(!0),a=null,s=Ig,l=null,c=NE(d);t=typeof t=="function"?t:t===void 0?z4:Jt(+t),e=typeof e=="function"?e:Jt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?$4:Jt(+n);function d(p){var b,y,x,w=(p=CE(p)).length,E,T=!1,C,N=new Array(w),P=new Array(w);for(a==null&&(l=s(C=c())),b=0;b<=w;++b){if(!(b<w&&i(E=p[b],b,p))===T)if(T=!T)y=b,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=b-1;x>=y;--x)l.point(N[x],P[x]);l.lineEnd(),l.areaEnd()}T&&(N[b]=+t(E,b,p),P[b]=+e(E,b,p),l.point(r?+r(E,b,p):N[b],n?+n(E,b,p):P[b]))}if(C)return l=null,C+""||null}function h(){return q4().defined(i).curve(s).context(a)}return d.x=function(p){return arguments.length?(t=typeof p=="function"?p:Jt(+p),r=null,d):t},d.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Jt(+p),d):t},d.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Jt(+p),d):r},d.y=function(p){return arguments.length?(e=typeof p=="function"?p:Jt(+p),n=null,d):e},d.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Jt(+p),d):e},d.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Jt(+p),d):n},d.lineX0=d.lineY0=function(){return h().x(t).y(e)},d.lineY1=function(){return h().x(t).y(n)},d.lineX1=function(){return h().x(r).y(e)},d.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Jt(!!p),d):i},d.curve=function(p){return arguments.length?(s=p,a!=null&&(l=s(a)),d):s},d.context=function(p){return arguments.length?(p==null?a=l=null:l=s(a=p),d):a},d}class Y4{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function hZ(t){return new Y4(t,!0)}function fZ(t){return new Y4(t,!1)}const OE={draw(t,e){const n=ia(e/vp);t.moveTo(n,0),t.arc(0,0,n,0,Rg)}},mZ={draw(t,e){const n=ia(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},V4=ia(1/3),pZ=V4*2,gZ={draw(t,e){const n=ia(e/pZ),r=n*V4;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},bZ={draw(t,e){const n=ia(e),r=-n/2;t.rect(r,r,n,n)}},yZ=.8908130915292852,G4=xp(vp/10)/xp(7*vp/10),xZ=xp(Rg/10)*G4,vZ=-F4(Rg/10)*G4,wZ={draw(t,e){const n=ia(e*yZ),r=xZ*n,i=vZ*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=Rg*a/5,l=F4(s),c=xp(s);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},yx=ia(3),EZ={draw(t,e){const n=-ia(e/(yx*3));t.moveTo(0,n*2),t.lineTo(-yx*n,-n),t.lineTo(yx*n,-n),t.closePath()}},ji=-.5,Pi=ia(3)/2,Uv=1/ia(12),AZ=(Uv/2+1)*3,SZ={draw(t,e){const n=ia(e/AZ),r=n/2,i=n*Uv,a=r,s=n*Uv+n,l=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(l,c),t.lineTo(ji*r-Pi*i,Pi*r+ji*i),t.lineTo(ji*a-Pi*s,Pi*a+ji*s),t.lineTo(ji*l-Pi*c,Pi*l+ji*c),t.lineTo(ji*r+Pi*i,ji*i-Pi*r),t.lineTo(ji*a+Pi*s,ji*s-Pi*a),t.lineTo(ji*l+Pi*c,ji*c-Pi*l),t.closePath()}};function TZ(t,e){let n=null,r=NE(i);t=typeof t=="function"?t:Jt(t||OE),e=typeof e=="function"?e:Jt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Jt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Jt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function wp(){}function Ep(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function W4(t){this._context=t}W4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ep(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ep(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _Z(t){return new W4(t)}function X4(t){this._context=t}X4.prototype={areaStart:wp,areaEnd:wp,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Ep(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function NZ(t){return new X4(t)}function K4(t){this._context=t}K4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ep(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function CZ(t){return new K4(t)}function Q4(t){this._context=t}Q4.prototype={areaStart:wp,areaEnd:wp,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function OZ(t){return new Q4(t)}function IO(t){return t<0?-1:1}function LO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),l=(a*i+s*r)/(r+i);return(IO(a)+IO(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function MO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function xx(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,l=(a-r)/3;t._context.bezierCurveTo(r+l,i+l*e,a-l,s-l*n,a,s)}function Ap(t){this._context=t}Ap.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xx(this,this._t0,MO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,xx(this,MO(this,n=LO(this,t,e)),n);break;default:xx(this,this._t0,n=LO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function Z4(t){this._context=new J4(t)}(Z4.prototype=Object.create(Ap.prototype)).point=function(t,e){Ap.prototype.point.call(this,e,t)};function J4(t){this._context=t}J4.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function kZ(t){return new Ap(t)}function jZ(t){return new Z4(t)}function eI(t){this._context=t}eI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=BO(t),i=BO(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function BO(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function PZ(t){return new eI(t)}function Lg(t,e){this._context=t,this._t=e}Lg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function DZ(t){return new Lg(t,.5)}function RZ(t){return new Lg(t,0)}function IZ(t){return new Lg(t,1)}function Bu(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,l=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Hv(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function LZ(t,e){return t[e]}function MZ(t){const e=[];return e.key=t,e}function BZ(){var t=Jt([]),e=Hv,n=Bu,r=LZ;function i(a){var s=Array.from(t.apply(this,arguments),MZ),l,c=s.length,d=-1,h;for(const p of a)for(l=0,++d;l<c;++l)(s[l][d]=[0,+r(p,s[l].key,d,a)]).data=p;for(l=0,h=CE(e(s));l<c;++l)s[h[l]].index=l;return n(s,h),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Jt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Jt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?Hv:typeof a=="function"?a:Jt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Bu,i):n},i}function FZ(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Bu(t,e)}}function UZ(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,l=0;s<i;++s)l+=t[s][n][1]||0;r[n][1]+=r[n][0]=-l/2}Bu(t,e)}}function HZ(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var l=0,c=0,d=0;l<s;++l){for(var h=t[e[l]],p=h[r][1]||0,b=h[r-1][1]||0,y=(p-b)/2,x=0;x<l;++x){var w=t[e[x]],E=w[r][1]||0,T=w[r-1][1]||0;y+=E-T}c+=p,d+=y*p}i[r-1][1]+=i[r-1][0]=n,c&&(n-=d/c)}i[r-1][1]+=i[r-1][0]=n,Bu(t,e)}}var vx={},Ex={},FO;function zZ(){return FO||(FO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(Ex)),Ex}var Ax={},UO;function tI(){return UO||(UO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(Ax)),Ax}var Sx={},HO;function kE(){return HO||(HO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(Sx)),Sx}var Tx={},_x={},zO;function $Z(){return zO||(zO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(_x)),_x}var $O;function jE(){return $O||($O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$Z(),n=kE();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let l=0,c="",d="",h=!1;for(i.charCodeAt(0)===46&&(a.push(""),l++);l<s;){const p=i[l];d?p==="\\"&&l+1<s?(l++,c+=i[l]):p===d?d="":c+=p:h?p==='"'||p==="'"?d=p:p==="]"?(h=!1,a.push(c),c=""):c+=p:p==="["?(h=!0,c&&(a.push(c),c="")):p==="."?c&&(a.push(c),c=""):c+=p,l++}return c&&a.push(c),a}t.toPath=r})(Tx)),Tx}var qO;function PE(){return qO||(qO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zZ(),n=tI(),r=kE(),i=jE();function a(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return d;const h=l[c];return h===void 0?n.isDeepKey(c)?a(l,i.toPath(c),d):d:h}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const h=l[c];return h===void 0?d:h}default:{if(Array.isArray(c))return s(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return d;const h=l[c];return h===void 0?d:h}}}function s(l,c,d){if(c.length===0)return d;let h=l;for(let p=0;p<c.length;p++){if(h==null||e.isUnsafeProperty(c[p]))return d;h=h[c[p]]}return h===void 0?d:h}t.get=a})(vx)),vx}var Nx,YO;function qZ(){return YO||(YO=1,Nx=PE().get),Nx}var YZ=qZ();const Mg=Ji(YZ);var Bi=t=>t===0?0:t>0?1:-1,_a=t=>typeof t=="number"&&t!=+t,us=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,et=t=>(typeof t=="number"||t instanceof Number)&&!_a(t),Na=t=>et(t)||typeof t=="string",VZ=0,oh=t=>{var e=++VZ;return"".concat(t||"").concat(e)},uo=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!et(e)&&typeof e!="string")return r;var a;if(us(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return _a(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},nI=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function Gr(t,e,n){return et(t)&&et(e)?t+n*(e-t):e}function rI(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Mg(r,e))===n)}var Kn=t=>t===null||typeof t>"u",Bh=t=>Kn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function GZ(t){return t!=null}function rc(){}var WZ=["type","size","sizeType"];function zv(){return zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zv.apply(null,arguments)}function VO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function GO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VO(Object(n),!0).forEach(function(r){XZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function XZ(t,e,n){return(e=KZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KZ(t){var e=QZ(t,"string");return typeof e=="symbol"?e:e+""}function QZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ZZ(t,e){if(t==null)return{};var n,r,i=JZ(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function JZ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var iI={symbolCircle:OE,symbolCross:mZ,symbolDiamond:gZ,symbolSquare:bZ,symbolStar:wZ,symbolTriangle:EZ,symbolWye:SZ},eJ=Math.PI/180,tJ=t=>{var e="symbol".concat(Bh(t));return iI[e]||OE},nJ=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*eJ;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},rJ=(t,e)=>{iI["symbol".concat(Bh(t))]=e},DE=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=ZZ(t,WZ),a=GO(GO({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var l=()=>{var b=tJ(s),y=TZ().type(b).size(nJ(n,r,s)),x=y();if(x!==null)return x},{className:c,cx:d,cy:h}=a,p=kr(a);return et(d)&&et(h)&&et(n)?A.createElement("path",zv({},p,{className:Gt("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(h,")"),d:l()})):null};DE.registerSymbol=rJ;var aI=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,RE=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(A.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{TE(i)&&(r[i]=(a=>n[i](n,a)))}),r},iJ=(t,e,n)=>r=>(t(e,n,r),null),sI=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];TE(i)&&typeof a=="function"&&(r||(r={}),r[i]=iJ(a,e,n))}),r};function WO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WO(Object(n),!0).forEach(function(r){sJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sJ(t,e,n){return(e=oJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oJ(t){var e=lJ(t,"string");return typeof e=="symbol"?e:e+""}function lJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xr(t,e){var n=aJ({},t),r=e,i=Object.keys(e),a=i.reduce((s,l)=>(s[l]===void 0&&r[l]!==void 0&&(s[l]=r[l]),s),n);return a}function Sp(){return Sp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sp.apply(null,arguments)}function XO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uJ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XO(Object(n),!0).forEach(function(r){cJ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cJ(t,e,n){return(e=dJ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dJ(t){var e=hJ(t,"string");return typeof e=="symbol"?e:e+""}function hJ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ri=32,fJ={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function mJ(t){var{data:e,iconType:n,inactiveColor:r}=t,i=Ri/2,a=Ri/6,s=Ri/3,l=e.inactive?r:e.color,c=n??e.type;if(c==="none")return null;if(c==="plainline"){var d;return A.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(d=e.payload)===null||d===void 0?void 0:d.strokeDasharray,x1:0,y1:i,x2:Ri,y2:i,className:"recharts-legend-icon"})}if(c==="line")return A.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(Ri,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return A.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Ri/8,"h").concat(Ri,"v").concat(Ri*3/4,"h").concat(-Ri,"z"),className:"recharts-legend-icon"});if(A.isValidElement(e.legendIcon)){var h=uJ({},e);return delete h.legendIcon,A.cloneElement(e.legendIcon,h)}return A.createElement(DE,{fill:l,cx:i,cy:i,size:Ri,sizeType:"diameter",type:c})}function pJ(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:s}=t,l={x:0,y:0,width:Ri,height:Ri},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((h,p)=>{var b=h.formatter||i,y=Gt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:h.inactive});if(h.type==="none")return null;var x=h.inactive?a:h.color,w=b?b(h.value,h,p):h.value;return A.createElement("li",Sp({className:y,style:c,key:"legend-item-".concat(p)},sI(t,h,p)),A.createElement(_E,{width:n,height:n,viewBox:l,style:d,"aria-label":"".concat(w," legend icon")},A.createElement(mJ,{data:h,iconType:s,inactiveColor:a})),A.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},w))})}var gJ=t=>{var e=xr(t,fJ),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return A.createElement("ul",{className:"recharts-default-legend",style:a},A.createElement(pJ,Sp({},e,{payload:n})))},Cx={},Ox={},KO;function bJ(){return KO||(KO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],l=r(s);i.has(l)||i.set(l,s)}return Array.from(i.values())}t.uniqBy=e})(Ox)),Ox}var kx={},QO;function oI(){return QO||(QO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(kx)),kx}var jx={},Px={},Dx={},ZO;function yJ(){return ZO||(ZO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(Dx)),Dx}var JO;function IE(){return JO||(JO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yJ();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(Px)),Px}var Rx={},e3;function xJ(){return e3||(e3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(Rx)),Rx}var t3;function vJ(){return t3||(t3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=IE(),n=xJ();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(jx)),jx}var Ix={},Lx={},n3;function wJ(){return n3||(n3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=PE();function n(r){return function(i){return e.get(i,r)}}t.property=n})(Lx)),Lx}var Mx={},Bx={},Fx={},Ux={},r3;function lI(){return r3||(r3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(Ux)),Ux}var Hx={},i3;function uI(){return i3||(i3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(Hx)),Hx}var zx={},a3;function cI(){return a3||(a3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(zx)),zx}var s3;function EJ(){return s3||(s3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=lI(),n=uI(),r=cI();function i(h,p,b){return typeof b!="function"?i(h,p,()=>{}):a(h,p,function y(x,w,E,T,C,N){const P=b(x,w,E,T,C,N);return P!==void 0?!!P:a(x,w,y,N)},new Map)}function a(h,p,b,y){if(p===h)return!0;switch(typeof p){case"object":return s(h,p,b,y);case"function":return Object.keys(p).length>0?a(h,{...p},b,y):r.eq(h,p);default:return e.isObject(h)?typeof p=="string"?p==="":!0:r.eq(h,p)}}function s(h,p,b,y){if(p==null)return!0;if(Array.isArray(p))return c(h,p,b,y);if(p instanceof Map)return l(h,p,b,y);if(p instanceof Set)return d(h,p,b,y);const x=Object.keys(p);if(h==null)return x.length===0;if(x.length===0)return!0;if(y?.has(p))return y.get(p)===h;y?.set(p,h);try{for(let w=0;w<x.length;w++){const E=x[w];if(!n.isPrimitive(h)&&!(E in h)||p[E]===void 0&&h[E]!==void 0||p[E]===null&&h[E]!==null||!b(h[E],p[E],E,h,p,y))return!1}return!0}finally{y?.delete(p)}}function l(h,p,b,y){if(p.size===0)return!0;if(!(h instanceof Map))return!1;for(const[x,w]of p.entries()){const E=h.get(x);if(b(E,w,x,h,p,y)===!1)return!1}return!0}function c(h,p,b,y){if(p.length===0)return!0;if(!Array.isArray(h))return!1;const x=new Set;for(let w=0;w<p.length;w++){const E=p[w];let T=!1;for(let C=0;C<h.length;C++){if(x.has(C))continue;const N=h[C];let P=!1;if(b(N,E,w,h,p,y)&&(P=!0),P){x.add(C),T=!0;break}}if(!T)return!1}return!0}function d(h,p,b,y){return p.size===0?!0:h instanceof Set?c([...h],[...p],b,y):!1}t.isMatchWith=i,t.isSetMatch=d})(Fx)),Fx}var o3;function dI(){return o3||(o3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=EJ();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(Bx)),Bx}var $x={},qx={},Yx={},l3;function AJ(){return l3||(l3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(Yx)),Yx}var Vx={},u3;function hI(){return u3||(u3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(Vx)),Vx}var Gx={},c3;function fI(){return c3||(c3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",h="[object Array]",p="[object Function]",b="[object ArrayBuffer]",y="[object Object]",x="[object Error]",w="[object DataView]",E="[object Uint8Array]",T="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]",P="[object BigUint64Array]",k="[object Int8Array]",j="[object Int16Array]",D="[object Int32Array]",H="[object BigInt64Array]",Y="[object Float32Array]",X="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=b,t.arrayTag=h,t.bigInt64ArrayTag=H,t.bigUint64ArrayTag=P,t.booleanTag=i,t.dataViewTag=w,t.dateTag=l,t.errorTag=x,t.float32ArrayTag=Y,t.float64ArrayTag=X,t.functionTag=p,t.int16ArrayTag=j,t.int32ArrayTag=D,t.int8ArrayTag=k,t.mapTag=c,t.numberTag=r,t.objectTag=y,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=C,t.uint32ArrayTag=N,t.uint8ArrayTag=E,t.uint8ClampedArrayTag=T})(Gx)),Gx}var Wx={},d3;function SJ(){return d3||(d3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(Wx)),Wx}var h3;function mI(){return h3||(h3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AJ(),n=hI(),r=fI(),i=uI(),a=SJ();function s(h,p){return l(h,void 0,h,new Map,p)}function l(h,p,b,y=new Map,x=void 0){const w=x?.(h,p,b,y);if(w!==void 0)return w;if(i.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const E=new Array(h.length);y.set(h,E);for(let T=0;T<h.length;T++)E[T]=l(h[T],T,b,y,x);return Object.hasOwn(h,"index")&&(E.index=h.index),Object.hasOwn(h,"input")&&(E.input=h.input),E}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const E=new RegExp(h.source,h.flags);return E.lastIndex=h.lastIndex,E}if(h instanceof Map){const E=new Map;y.set(h,E);for(const[T,C]of h)E.set(T,l(C,T,b,y,x));return E}if(h instanceof Set){const E=new Set;y.set(h,E);for(const T of h)E.add(l(T,void 0,b,y,x));return E}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(a.isTypedArray(h)){const E=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,E);for(let T=0;T<h.length;T++)E[T]=l(h[T],T,b,y,x);return E}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const E=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,E),c(E,h,b,y,x),E}if(typeof File<"u"&&h instanceof File){const E=new File([h],h.name,{type:h.type});return y.set(h,E),c(E,h,b,y,x),E}if(typeof Blob<"u"&&h instanceof Blob){const E=new Blob([h],{type:h.type});return y.set(h,E),c(E,h,b,y,x),E}if(h instanceof Error){const E=new h.constructor;return y.set(h,E),E.message=h.message,E.name=h.name,E.stack=h.stack,E.cause=h.cause,c(E,h,b,y,x),E}if(h instanceof Boolean){const E=new Boolean(h.valueOf());return y.set(h,E),c(E,h,b,y,x),E}if(h instanceof Number){const E=new Number(h.valueOf());return y.set(h,E),c(E,h,b,y,x),E}if(h instanceof String){const E=new String(h.valueOf());return y.set(h,E),c(E,h,b,y,x),E}if(typeof h=="object"&&d(h)){const E=Object.create(Object.getPrototypeOf(h));return y.set(h,E),c(E,h,b,y,x),E}return h}function c(h,p,b=h,y,x){const w=[...Object.keys(p),...e.getSymbols(p)];for(let E=0;E<w.length;E++){const T=w[E],C=Object.getOwnPropertyDescriptor(h,T);(C==null||C.writable)&&(h[T]=l(p[T],T,b,y,x))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=l,t.copyProperties=c})(qx)),qx}var f3;function TJ(){return f3||(f3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mI();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})($x)),$x}var m3;function _J(){return m3||(m3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dI(),n=TJ();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(Mx)),Mx}var Xx={},Kx={},Qx={},p3;function NJ(){return p3||(p3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=mI(),n=fI();function r(i,a){return e.cloneDeepWith(i,(s,l,c,d)=>{const h=a?.(s,l,c,d);if(h!==void 0)return h;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i?.valueOf());return e.copyProperties(p,i),p}case n.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=r})(Qx)),Qx}var g3;function CJ(){return g3||(g3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NJ();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(Kx)),Kx}var Zx={},Jx={},b3;function pI(){return b3||(b3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(Jx)),Jx}var e1={},y3;function OJ(){return y3||(y3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hI();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(e1)),e1}var x3;function kJ(){return x3||(x3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=tI(),n=pI(),r=OJ(),i=jE();function a(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&s?.[l]==null?c=i.toPath(l):c=[l],c.length===0)return!1;let d=s;for(let h=0;h<c.length;h++){const p=c[h];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}t.has=a})(Zx)),Zx}var v3;function jJ(){return v3||(v3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dI(),n=kE(),r=CJ(),i=PE(),a=kJ();function s(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=r.cloneDeep(c),function(d){const h=i.get(d,l);return h===void 0?a.has(d,l):c===void 0?h===void 0:e.isMatch(h,c)}}t.matchesProperty=s})(Xx)),Xx}var w3;function PJ(){return w3||(w3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=oI(),n=wJ(),r=_J(),i=jJ();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(Ix)),Ix}var E3;function DJ(){return E3||(E3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=bJ(),n=oI(),r=vJ(),i=PJ();function a(s,l=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(l)):[]}t.uniqBy=a})(Cx)),Cx}var t1,A3;function RJ(){return A3||(A3=1,t1=DJ().uniqBy),t1}var IJ=RJ();const S3=Ji(IJ);function gI(t,e,n){return e===!0?S3(t,n):typeof e=="function"?S3(t,e):t}var n1={exports:{}},r1={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T3;function LJ(){if(T3)return r1;T3=1;var t=qu(),e=TD();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,l=t.useMemo,c=t.useDebugValue;return r1.useSyncExternalStoreWithSelector=function(d,h,p,b,y){var x=a(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=l(function(){function T(j){if(!C){if(C=!0,N=j,j=b(j),y!==void 0&&w.hasValue){var D=w.value;if(y(D,j))return P=D}return P=j}if(D=P,r(N,j))return D;var H=b(j);return y!==void 0&&y(D,H)?(N=j,D):(N=j,P=H)}var C=!1,N,P,k=p===void 0?null:p;return[function(){return T(h())},k===null?void 0:function(){return T(k())}]},[h,p,b,y]);var E=i(d,x[0],x[1]);return s(function(){w.hasValue=!0,w.value=E},[E]),c(E),E},r1}var _3;function MJ(){return _3||(_3=1,n1.exports=LJ()),n1.exports}var BJ=MJ(),LE=A.createContext(null),FJ=t=>t,Dn=()=>{var t=A.useContext(LE);return t?t.store.dispatch:FJ},tp=()=>{},UJ=()=>tp,HJ=(t,e)=>t===e;function Qe(t){var e=A.useContext(LE);return BJ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:UJ,e?e.store.getState:tp,e?e.store.getState:tp,e?t:tp,HJ)}function zJ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function $J(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function qJ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var N3=t=>Array.isArray(t)?t:[t];function YJ(t){const e=Array.isArray(t[0])?t[0]:t;return qJ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function VJ(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var GJ=class{constructor(t){this.value=t}deref(){return this.value}},WJ=typeof WeakRef<"u"?WeakRef:GJ,XJ=0,C3=1;function km(){return{s:XJ,v:void 0,o:null,p:null}}function bI(t,e={}){let n=km();const{resultEqualityCheck:r}=e;let i,a=0;function s(){let l=n;const{length:c}=arguments;for(let p=0,b=c;p<b;p++){const y=arguments[p];if(typeof y=="function"||typeof y=="object"&&y!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const w=x.get(y);w===void 0?(l=km(),x.set(y,l)):l=w}else{let x=l.p;x===null&&(l.p=x=new Map);const w=x.get(y);w===void 0?(l=km(),x.set(y,l)):l=w}}const d=l;let h;if(l.s===C3)h=l.v;else if(h=t.apply(null,arguments),a++,r){const p=i?.deref?.()??i;p!=null&&r(p,h)&&(h=p,a!==0&&a--),i=typeof h=="object"&&h!==null||typeof h=="function"?new WJ(h):h}return d.s=C3,d.v=h,h}return s.clearCache=()=>{n=km(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function KJ(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,l,c={},d=i.pop();typeof d=="object"&&(c=d,d=i.pop()),zJ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...c},{memoize:p,memoizeOptions:b=[],argsMemoize:y=bI,argsMemoizeOptions:x=[]}=h,w=N3(b),E=N3(x),T=YJ(i),C=p(function(){return a++,d.apply(null,arguments)},...w),N=y(function(){s++;const k=VJ(T,arguments);return l=C.apply(null,k),l},...E);return Object.assign(N,{resultFunc:d,memoizedResultFunc:C,dependencies:T,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:y})};return Object.assign(r,{withTypes:()=>r}),r}var Se=KJ(bI),QJ=Object.assign((t,e=Se)=>{$J(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,l,c)=>(s[n[c]]=l,s),{}))},{withTypes:()=>QJ}),i1={},a1={},s1={},O3;function ZJ(){return O3||(O3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),l=e(i);if(s===l&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?l-s:s-l}return 0};t.compareValues=n})(s1)),s1}var o1={},l1={},k3;function yI(){return k3||(k3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(l1)),l1}var j3;function JJ(){return j3||(j3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yI(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(o1)),o1}var P3;function eee(){return P3||(P3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ZJ(),n=JJ(),r=jE();function i(a,s,l,c){if(a==null)return[];l=c?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(y=>String(y));const d=(y,x)=>{let w=y;for(let E=0;E<x.length&&w!=null;++E)w=w[x[E]];return w},h=(y,x)=>x==null||y==null?x:typeof y=="object"&&"key"in y?Object.hasOwn(x,y.key)?x[y.key]:d(x,y.path):typeof y=="function"?y(x):Array.isArray(y)?d(x,y):typeof x=="object"?x[y]:x,p=s.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:r.toPath(y)}));return a.map(y=>({original:y,criteria:p.map(x=>h(x,y))})).slice().sort((y,x)=>{for(let w=0;w<p.length;w++){const E=e.compareValues(y.criteria[w],x.criteria[w],l[w]);if(E!==0)return E}return 0}).map(y=>y.original)}t.orderBy=i})(a1)),a1}var u1={},D3;function tee(){return D3||(D3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(l,c)=>{for(let d=0;d<l.length;d++){const h=l[d];Array.isArray(h)&&c<a?s(h,c+1):i.push(h)}};return s(n,0),i}t.flatten=e})(u1)),u1}var c1={},R3;function xI(){return R3||(R3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pI(),n=IE(),r=lI(),i=cI();function a(s,l,c){return r.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?i.eq(c[l],s):!1}t.isIterateeCall=a})(c1)),c1}var I3;function nee(){return I3||(I3=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eee(),n=tee(),r=xI();function i(a,...s){const l=s.length;return l>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:l>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(i1)),i1}var d1,L3;function ree(){return L3||(L3=1,d1=nee().sortBy),d1}var iee=ree();const Bg=Ji(iee);var vI=t=>t.legend.settings,aee=t=>t.legend.size,see=t=>t.legend.payload,oee=Se([see,vI],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Bg(r,n):r});function lee(){return Qe(oee)}var jm=1;function wI(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=A.useState({height:0,left:0,top:0,width:0}),r=A.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>jm||Math.abs(s.left-e.left)>jm||Math.abs(s.top-e.top)>jm||Math.abs(s.width-e.width)>jm)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function sr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var uee=typeof Symbol=="function"&&Symbol.observable||"@@observable",M3=uee,h1=()=>Math.random().toString(36).substring(7).split("").join("."),cee={INIT:`@@redux/INIT${h1()}`,REPLACE:`@@redux/REPLACE${h1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${h1()}`},Tp=cee;function ME(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function EI(t,e,n){if(typeof t!="function")throw new Error(sr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(sr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(sr(1));return n(EI)(t,e)}let r=t,i=e,a=new Map,s=a,l=0,c=!1;function d(){s===a&&(s=new Map,a.forEach((E,T)=>{s.set(T,E)}))}function h(){if(c)throw new Error(sr(3));return i}function p(E){if(typeof E!="function")throw new Error(sr(4));if(c)throw new Error(sr(5));let T=!0;d();const C=l++;return s.set(C,E),function(){if(T){if(c)throw new Error(sr(6));T=!1,d(),s.delete(C),a=null}}}function b(E){if(!ME(E))throw new Error(sr(7));if(typeof E.type>"u")throw new Error(sr(8));if(typeof E.type!="string")throw new Error(sr(17));if(c)throw new Error(sr(9));try{c=!0,i=r(i,E)}finally{c=!1}return(a=s).forEach(C=>{C()}),E}function y(E){if(typeof E!="function")throw new Error(sr(10));r=E,b({type:Tp.REPLACE})}function x(){const E=p;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(sr(11));function C(){const P=T;P.next&&P.next(h())}return C(),{unsubscribe:E(C)}},[M3](){return this}}}return b({type:Tp.INIT}),{dispatch:b,subscribe:p,getState:h,replaceReducer:y,[M3]:x}}function dee(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Tp.INIT})>"u")throw new Error(sr(12));if(typeof n(void 0,{type:Tp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(sr(13))})}function AI(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{dee(n)}catch(a){i=a}return function(s={},l){if(i)throw i;let c=!1;const d={};for(let h=0;h<r.length;h++){const p=r[h],b=n[p],y=s[p],x=b(y,l);if(typeof x>"u")throw l&&l.type,new Error(sr(14));d[p]=x,c=c||x!==y}return c=c||r.length!==Object.keys(s).length,c?d:s}}function _p(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function hee(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(sr(15))};const s={getState:i.getState,dispatch:(c,...d)=>a(c,...d)},l=t.map(c=>c(s));return a=_p(...l)(i.dispatch),{...i,dispatch:a}}}function SI(t){return ME(t)&&"type"in t&&typeof t.type=="string"}var TI=Symbol.for("immer-nothing"),B3=Symbol.for("immer-draftable"),yi=Symbol.for("immer-state");function Qi(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var lh=Object.getPrototypeOf;function ol(t){return!!t&&!!t[yi]}function cs(t){return t?_I(t)||Array.isArray(t)||!!t[B3]||!!t.constructor?.[B3]||Fh(t)||Ug(t):!1}var fee=Object.prototype.constructor.toString(),F3=new WeakMap;function _I(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=F3.get(n);return r===void 0&&(r=Function.toString.call(n),F3.set(n,r)),r===fee}function Np(t,e,n=!0){Fg(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Fg(t){const e=t[yi];return e?e.type_:Array.isArray(t)?1:Fh(t)?2:Ug(t)?3:0}function $v(t,e){return Fg(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function NI(t,e,n){const r=Fg(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function mee(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Fh(t){return t instanceof Map}function Ug(t){return t instanceof Set}function Lo(t){return t.copy_||t.base_}function qv(t,e){if(Fh(t))return new Map(t);if(Ug(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=_I(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[yi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(lh(t),r)}else{const r=lh(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function BE(t,e=!1){return Hg(t)||ol(t)||!cs(t)||(Fg(t)>1&&Object.defineProperties(t,{set:Pm,add:Pm,clear:Pm,delete:Pm}),Object.freeze(t),e&&Object.values(t).forEach(n=>BE(n,!0))),t}function pee(){Qi(2)}var Pm={value:pee};function Hg(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var gee={};function ll(t){const e=gee[t];return e||Qi(0,t),e}var uh;function CI(){return uh}function bee(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function U3(t,e){e&&(ll("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Yv(t){Vv(t),t.drafts_.forEach(yee),t.drafts_=null}function Vv(t){t===uh&&(uh=t.parent_)}function H3(t){return uh=bee(uh,t)}function yee(t){const e=t[yi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function z3(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[yi].modified_&&(Yv(e),Qi(4)),cs(t)&&(t=Cp(e,t),e.parent_||Op(e,t)),e.patches_&&ll("Patches").generateReplacementPatches_(n[yi].base_,t,e.patches_,e.inversePatches_)):t=Cp(e,n,[]),Yv(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==TI?t:void 0}function Cp(t,e,n){if(Hg(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[yi];if(!i)return Np(e,(a,s)=>$3(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Op(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,l=!1;i.type_===3&&(s=new Set(a),a.clear(),l=!0),Np(s,(c,d)=>$3(t,i,a,c,d,n,l),r),Op(t,a,!1),n&&t.patches_&&ll("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function $3(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const l=Hg(i);if(!(l&&!s)){if(ol(i)){const c=a&&e&&e.type_!==3&&!$v(e.assigned_,r)?a.concat(r):void 0,d=Cp(t,i,c);if(NI(n,r,d),ol(d))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(cs(i)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&l)return;Cp(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Fh(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Op(t,i)}}}function Op(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&BE(e,n)}function xee(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:CI(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=FE;n&&(i=[r],a=ch);const{revoke:s,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=s,l}var FE={get(t,e){if(e===yi)return t;const n=Lo(t);if(!$v(n,e))return vee(t,n,e);const r=n[e];return t.finalized_||!cs(r)?r:r===f1(t.base_,e)?(m1(t),t.copy_[e]=Wv(r,t)):r},has(t,e){return e in Lo(t)},ownKeys(t){return Reflect.ownKeys(Lo(t))},set(t,e,n){const r=OI(Lo(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=f1(Lo(t),e),a=i?.[yi];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(mee(n,i)&&(n!==void 0||$v(t.base_,e)))return!0;m1(t),Gv(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return f1(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,m1(t),Gv(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Lo(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Qi(11)},getPrototypeOf(t){return lh(t.base_)},setPrototypeOf(){Qi(12)}},ch={};Np(FE,(t,e)=>{ch[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ch.deleteProperty=function(t,e){return ch.set.call(this,t,e,void 0)};ch.set=function(t,e,n){return FE.set.call(this,t[0],e,n,t[0])};function f1(t,e){const n=t[yi];return(n?Lo(n):t)[e]}function vee(t,e,n){const r=OI(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function OI(t,e){if(!(e in t))return;let n=lh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=lh(n)}}function Gv(t){t.modified_||(t.modified_=!0,t.parent_&&Gv(t.parent_))}function m1(t){t.copy_||(t.copy_=qv(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var wee=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...d){return s.produce(c,h=>n.call(this,h,...d))}}typeof n!="function"&&Qi(6),r!==void 0&&typeof r!="function"&&Qi(7);let i;if(cs(e)){const a=H3(this),s=Wv(e,void 0);let l=!0;try{i=n(s),l=!1}finally{l?Yv(a):Vv(a)}return U3(a,r),z3(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===TI&&(i=void 0),this.autoFreeze_&&BE(i,!0),r){const a=[],s=[];ll("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else Qi(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let r,i;return[this.produce(e,n,(s,l)=>{r=s,i=l}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){cs(t)||Qi(8),ol(t)&&(t=ss(t));const e=H3(this),n=Wv(t,void 0);return n[yi].isManual_=!0,Vv(e),n}finishDraft(t,e){const n=t&&t[yi];(!n||!n.isManual_)&&Qi(9);const{scope_:r}=n;return U3(r,e),z3(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=ll("Patches").applyPatches_;return ol(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Wv(t,e){const n=Fh(t)?ll("MapSet").proxyMap_(t,e):Ug(t)?ll("MapSet").proxySet_(t,e):xee(t,e);return(e?e.scope_:CI()).drafts_.push(n),n}function ss(t){return ol(t)||Qi(10,t),kI(t)}function kI(t){if(!cs(t)||Hg(t))return t;const e=t[yi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=qv(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=qv(t,!0);return Np(n,(i,a)=>{NI(n,i,kI(a))},r),e&&(e.finalized_=!1),n}var Xv=new wee,jI=Xv.produce,Eee=Xv.setUseStrictIteration.bind(Xv);function PI(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var Aee=PI(),See=PI,Tee=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_p:_p.apply(null,arguments)};function zi(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(bi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>SI(r)&&r.type===t,n}var DI=class Dd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Dd.prototype)}static get[Symbol.species](){return Dd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Dd(...e[0].concat(this)):new Dd(...e.concat(this))}};function q3(t){return cs(t)?jI(t,()=>{}):t}function Dm(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function _ee(t){return typeof t=="boolean"}var Nee=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new DI;return n&&(_ee(n)?s.push(Aee):s.push(See(n.extraArgument))),s},RI="RTK_autoBatch",Mn=()=>t=>({payload:t,meta:{[RI]:!0}}),Y3=t=>e=>{setTimeout(e,t)},II=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Y3(10):t.type==="callback"?t.queueNotification:Y3(t.timeout),d=()=>{s=!1,a&&(a=!1,l.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const p=()=>i&&h(),b=r.subscribe(p);return l.add(h),()=>{b(),l.delete(h)}},dispatch(h){try{return i=!h?.meta?.[RI],a=!i,a&&(s||(s=!0,c(d))),r.dispatch(h)}finally{i=!0}}})},Cee=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new DI(t);return r&&i.push(II(typeof r=="object"?r:void 0)),i};function Oee(t){const e=Nee(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(ME(n))l=AI(n);else throw new Error(bi(1));let c;typeof r=="function"?c=r(e):c=e();let d=_p;i&&(d=Tee({trace:!1,...typeof i=="object"&&i}));const h=hee(...c),p=Cee(h);let b=typeof s=="function"?s(p):p();const y=d(...b);return EI(l,a,y)}function LI(t){const e={},n=[];let r;const i={addCase(a,s){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(bi(28));if(l in e)throw new Error(bi(29));return e[l]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}Eee(!1);function kee(t){return typeof t=="function"}function jee(t,e){let[n,r,i]=LI(e),a;if(kee(t))a=()=>q3(t());else{const l=q3(t);a=()=>l}function s(l=a(),c){let d=[n[c.type],...r.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,p)=>{if(p)if(ol(h)){const y=p(h,c);return y===void 0?h:y}else{if(cs(h))return jI(h,b=>p(b,c));{const b=p(h,c);if(b===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return h},l)}return s.getInitialState=a,s}var Pee="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Dee=(t=21)=>{let e="",n=t;for(;n--;)e+=Pee[Math.random()*64|0];return e},Ree=Symbol.for("rtk-slice-createasyncthunk");function Iee(t,e){return`${t}/${e}`}function Lee({creators:t}={}){const e=t?.asyncThunk?.[Ree];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(bi(11));const s=(typeof r.reducers=="function"?r.reducers(Bee()):r.reducers)||{},l=Object.keys(s),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(N,P){const k=typeof N=="string"?N:N.type;if(!k)throw new Error(bi(12));if(k in c.sliceCaseReducersByType)throw new Error(bi(13));return c.sliceCaseReducersByType[k]=P,d},addMatcher(N,P){return c.sliceMatchers.push({matcher:N,reducer:P}),d},exposeAction(N,P){return c.actionCreators[N]=P,d},exposeCaseReducer(N,P){return c.sliceCaseReducersByName[N]=P,d}};l.forEach(N=>{const P=s[N],k={reducerName:N,type:Iee(i,N),createNotation:typeof r.reducers=="function"};Uee(P)?zee(k,P,d,e):Fee(k,P,d)});function h(){const[N={},P=[],k=void 0]=typeof r.extraReducers=="function"?LI(r.extraReducers):[r.extraReducers],j={...N,...c.sliceCaseReducersByType};return jee(r.initialState,D=>{for(let H in j)D.addCase(H,j[H]);for(let H of c.sliceMatchers)D.addMatcher(H.matcher,H.reducer);for(let H of P)D.addMatcher(H.matcher,H.reducer);k&&D.addDefaultCase(k)})}const p=N=>N,b=new Map,y=new WeakMap;let x;function w(N,P){return x||(x=h()),x(N,P)}function E(){return x||(x=h()),x.getInitialState()}function T(N,P=!1){function k(D){let H=D[N];return typeof H>"u"&&P&&(H=Dm(y,k,E)),H}function j(D=p){const H=Dm(b,P,()=>new WeakMap);return Dm(H,D,()=>{const Y={};for(const[X,z]of Object.entries(r.selectors??{}))Y[X]=Mee(z,D,()=>Dm(y,D,E),P);return Y})}return{reducerPath:N,getSelectors:j,get selectors(){return j(k)},selectSlice:k}}const C={name:i,reducer:w,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:E,...T(a),injectInto(N,{reducerPath:P,...k}={}){const j=P??a;return N.inject({reducerPath:j,reducer:w},k),{...C,...T(j,!0)}}};return C}}function Mee(t,e,n,r){function i(a,...s){let l=e(a);return typeof l>"u"&&r&&(l=n()),t(l,...s)}return i.unwrapped=t,i}var Jr=Lee();function Bee(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Fee({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!Hee(r))throw new Error(bi(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?zi(t,s):zi(t))}function Uee(t){return t._reducerDefinitionType==="asyncThunk"}function Hee(t){return t._reducerDefinitionType==="reducerWithPrepare"}function zee({type:t,reducerName:e},n,r,i){if(!i)throw new Error(bi(18));const{payloadCreator:a,fulfilled:s,pending:l,rejected:c,settled:d,options:h}=n,p=i(t,a,h);r.exposeAction(e,p),s&&r.addCase(p.fulfilled,s),l&&r.addCase(p.pending,l),c&&r.addCase(p.rejected,c),d&&r.addMatcher(p.settled,d),r.exposeCaseReducer(e,{fulfilled:s||Rm,pending:l||Rm,rejected:c||Rm,settled:d||Rm})}function Rm(){}var $ee="task",MI="listener",BI="completed",UE="cancelled",qee=`task-${UE}`,Yee=`task-${BI}`,Kv=`${MI}-${UE}`,Vee=`${MI}-${BI}`,zg=class{constructor(t){this.code=t,this.message=`${$ee} ${UE} (reason: ${t})`}name="TaskAbortError";message},HE=(t,e)=>{if(typeof t!="function")throw new TypeError(bi(32))},kp=()=>{},FI=(t,e=kp)=>(t.catch(e),t),UI=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Jo=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},el=t=>{if(t.aborted){const{reason:e}=t;throw new zg(e)}};function HI(t,e){let n=kp;return new Promise((r,i)=>{const a=()=>i(new zg(t.reason));if(t.aborted){a();return}n=UI(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=kp})}var Gee=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof zg?"cancelled":"rejected",error:n}}finally{e?.()}},jp=t=>e=>FI(HI(t,e).then(n=>(el(t),n))),zI=t=>{const e=jp(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:ku}=Object,V3={},$g="listenerMiddleware",Wee=(t,e)=>{const n=r=>UI(t,()=>Jo(r,t.reason));return(r,i)=>{HE(r);const a=new AbortController;n(a);const s=Gee(async()=>{el(t),el(a.signal);const l=await r({pause:jp(a.signal),delay:zI(a.signal),signal:a.signal});return el(a.signal),l},()=>Jo(a,Yee));return i?.autoJoin&&e.push(s.catch(kp)),{result:jp(t)(s),cancel(){Jo(a,qee)}}}},Xee=(t,e)=>{const n=async(r,i)=>{el(e);let a=()=>{};const l=[new Promise((c,d)=>{let h=t({predicate:r,effect:(p,b)=>{b.unsubscribe(),c([p,b.getState(),b.getOriginalState()])}});a=()=>{h(),d()}})];i!=null&&l.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await HI(e,Promise.race(l));return el(e),c}finally{a()}};return(r,i)=>FI(n(r,i))},$I=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=zi(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(bi(21));return HE(a),{predicate:i,type:e,effect:a}},qI=ku(t=>{const{type:e,predicate:n,effect:r}=$I(t);return{id:Dee(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(bi(22))}}},{withTypes:()=>qI}),G3=(t,e)=>{const{type:n,effect:r,predicate:i}=$I(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},Qv=t=>{t.pending.forEach(e=>{Jo(e,Kv)})},Kee=(t,e)=>()=>{for(const n of e.keys())Qv(n);t.clear()},W3=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},YI=ku(zi(`${$g}/add`),{withTypes:()=>YI}),Qee=zi(`${$g}/removeAll`),VI=ku(zi(`${$g}/remove`),{withTypes:()=>VI}),Zee=(...t)=>{console.error(`${$g}/error`,...t)},Uh=(t={})=>{const e=new Map,n=new Map,r=y=>{const x=n.get(y)??0;n.set(y,x+1)},i=y=>{const x=n.get(y)??1;x===1?n.delete(y):n.set(y,x-1)},{extra:a,onError:s=Zee}=t;HE(s);const l=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),x=>{y.unsubscribe(),x?.cancelActive&&Qv(y)}),c=y=>{const x=G3(e,y)??qI(y);return l(x)};ku(c,{withTypes:()=>c});const d=y=>{const x=G3(e,y);return x&&(x.unsubscribe(),y.cancelActive&&Qv(x)),!!x};ku(d,{withTypes:()=>d});const h=async(y,x,w,E)=>{const T=new AbortController,C=Xee(c,T.signal),N=[];try{y.pending.add(T),r(y),await Promise.resolve(y.effect(x,ku({},w,{getOriginalState:E,condition:(P,k)=>C(P,k).then(Boolean),take:C,delay:zI(T.signal),pause:jp(T.signal),extra:a,signal:T.signal,fork:Wee(T.signal,N),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((P,k,j)=>{P!==T&&(Jo(P,Kv),j.delete(P))})},cancel:()=>{Jo(T,Kv),y.pending.delete(T)},throwIfCancelled:()=>{el(T.signal)}})))}catch(P){P instanceof zg||W3(s,P,{raisedBy:"effect"})}finally{await Promise.all(N),Jo(T,Vee),i(y),y.pending.delete(T)}},p=Kee(e,n);return{middleware:y=>x=>w=>{if(!SI(w))return x(w);if(YI.match(w))return c(w.payload);if(Qee.match(w)){p();return}if(VI.match(w))return d(w.payload);let E=y.getState();const T=()=>{if(E===V3)throw new Error(bi(23));return E};let C;try{if(C=x(w),e.size>0){const N=y.getState(),P=Array.from(e.values());for(const k of P){let j=!1;try{j=k.predicate(w,N,E)}catch(D){j=!1,W3(s,D,{raisedBy:"predicate"})}j&&h(k,w,y,T)}}}finally{E=V3}return C},startListening:c,stopListening:d,clearListeners:p}};function bi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Jee={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},GI=Jr({name:"chartLayout",initialState:Jee,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:ete,setLayout:tte,setChartSize:nte,setScale:rte}=GI.actions,ite=GI.reducer;function WI(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function X3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X3(Object(n),!0).forEach(function(r){ate(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ate(t,e,n){return(e=ste(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ste(t){var e=ote(t,"string");return typeof e=="symbol"?e:e+""}function ote(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Or(t,e,n){return Kn(t)||Kn(e)?n:Na(e)?Mg(t,e,n):typeof e=="function"?e(t):n}var lte=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:l}=e;if((l==="vertical"||l==="horizontal"&&s==="middle")&&a!=="center"&&et(t[a]))return vu(vu({},t),{},{[a]:t[a]+(r||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&s!=="middle"&&et(t[s]))return vu(vu({},t),{},{[s]:t[s]+(i||0)})}return t},fo=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",XI=(t,e,n,r)=>{if(r)return t.map(l=>l.coordinate);var i,a,s=t.map(l=>(l.coordinate===e&&(i=!0),l.coordinate===n&&(a=!0),l.coordinate));return i||s.push(e),a||s.push(n),s},KI=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:h,ticks:p,niceTicks:b,axisType:y}=t;if(!s)return null;var x=l==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,w=i==="category"&&s.bandwidth?s.bandwidth()/x:0;if(w=y==="angleAxis"&&a&&a.length>=2?Bi(a[0]-a[1])*2*w:w,p||b){var E=(p||b||[]).map((T,C)=>{var N=r?r.indexOf(T):T;return{coordinate:s(N)+w,value:T,offset:w,index:C}});return E.filter(T=>!_a(T.coordinate))}return c&&d?d.map((T,C)=>({coordinate:s(T)+w,value:T,index:C,offset:w})):s.ticks&&h!=null?s.ticks(h).map((T,C)=>({coordinate:s(T)+w,value:T,offset:w,index:C})):s.domain().map((T,C)=>({coordinate:s(T)+w,value:r?r[T]:T,index:C,offset:w}))},K3=1e-4,ute=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-K3,a=Math.max(r[0],r[1])+K3,s=t(e[0]),l=t(e[n-1]);(s<i||s>a||l<i||l>a)&&t.domain([e[0],e[n-1]])}},cte=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0,s=0;s<e;++s){var l=_a(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=a,t[s][n][1]=a+l,a=t[s][n][1])}},dte=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0;a<e;++a){var s=_a(t[a][n][1])?t[a][n][0]:t[a][n][1];s>=0?(t[a][n][0]=i,t[a][n][1]=i+s,i=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},hte={sign:cte,expand:FZ,none:Bu,silhouette:UZ,wiggle:HZ,positive:dte},fte=(t,e,n)=>{var r=hte[n],i=BZ().keys(e).value((a,s)=>Number(Or(a,s,0))).order(Hv).offset(r);return i(t)};function Q3(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:s}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Kn(i[e.dataKey])){var l=rI(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=Or(i,Kn(s)?e.dataKey:s);return Kn(c)?null:e.scale(c)}var mte=t=>{var e=t.flat(2).filter(et);return[Math.min(...e),Math.max(...e)]},pte=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],gte=(t,e,n)=>{if(t!=null)return pte(Object.keys(t).reduce((r,i)=>{var a=t[i],{stackedData:s}=a,l=s.reduce((c,d)=>{var h=WI(d,e,n),p=mte(h);return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},Z3=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,J3=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pp=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Bg(e,h=>h.coordinate),a=1/0,s=1,l=i.length;s<l;s++){var c=i[s],d=i[s-1];a=Math.min((c.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function ek(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return vu(vu({},e),{},{dataKey:n,payload:r,value:i,name:a})}function QI(t,e){if(t)return String(t);if(typeof e=="string")return e}var bte=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},yte=(t,e)=>e==="centric"?t.angle:t.radius,gs=t=>t.layout.width,bs=t=>t.layout.height,xte=t=>t.layout.scale,ZI=t=>t.layout.margin,qg=Se(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),Yg=Se(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),vte="data-recharts-item-index",wte="data-recharts-item-data-key",Hh=60;function tk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Im(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tk(Object(n),!0).forEach(function(r){Ete(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ete(t,e,n){return(e=Ate(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ate(t){var e=Ste(t,"string");return typeof e=="symbol"?e:e+""}function Ste(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tte=t=>t.brush.height;function _te(t){var e=Yg(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Hh;return n+i}return n},0)}function Nte(t){var e=Yg(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Hh;return n+i}return n},0)}function Cte(t){var e=qg(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Ote(t){var e=qg(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var cr=Se([gs,bs,ZI,Tte,_te,Nte,Cte,Ote,vI,aee],(t,e,n,r,i,a,s,l,c,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+a},p={top:(n.top||0)+s,bottom:(n.bottom||0)+l},b=Im(Im({},p),h),y=b.bottom;b.bottom+=r,b=lte(b,c,d);var x=t-b.left-b.right,w=e-b.top-b.bottom;return Im(Im({brushBottom:y},b),{},{width:Math.max(x,0),height:Math.max(w,0)})}),kte=Se(cr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),JI=Se(gs,bs,(t,e)=>({x:0,y:0,width:t,height:e})),jte=A.createContext(null),ei=()=>A.useContext(jte)!=null,Vg=t=>t.brush,Gg=Se([Vg,cr,ZI],(t,e,n)=>({height:t.height,x:et(t.x)?t.x:e.left,y:et(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:et(t.width)?t.width:e.width})),p1={},g1={},b1={},nk;function Pte(){return nk||(nk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,l=null;const c=a!=null&&a.includes("leading"),d=a==null||a.includes("trailing"),h=()=>{l!==null&&(n.apply(s,l),s=void 0,l=null)},p=()=>{d&&h(),w()};let b=null;const y=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,p()},r)},x=()=>{b!==null&&(clearTimeout(b),b=null)},w=()=>{x(),s=void 0,l=null},E=()=>{h()},T=function(...C){if(i?.aborted)return;s=this,l=C;const N=b==null;y(),c&&N&&h()};return T.schedule=y,T.cancel=w,T.flush=E,i?.addEventListener("abort",w,{once:!0}),T}t.debounce=e})(b1)),b1}var rk;function Dte(){return rk||(rk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pte();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:l=!0,maxWait:c}=a,d=Array(2);s&&(d[0]="leading"),l&&(d[1]="trailing");let h,p=null;const b=e.debounce(function(...w){h=r.apply(this,w),p=null},i,{edges:d}),y=function(...w){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(h=r.apply(this,w),p=Date.now(),b.cancel(),b.schedule(),h):(b.apply(this,w),h)},x=()=>(b.flush(),h);return y.cancel=b.cancel,y.flush=x,y}t.debounce=n})(g1)),g1}var ik;function Rte(){return ik||(ik=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dte();function n(r,i=0,a={}){const{leading:s=!0,trailing:l=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:l})}t.throttle=n})(p1)),p1}var y1,ak;function Ite(){return ak||(ak=1,y1=Rte().throttle),y1}var Lte=Ite();const Mte=Ji(Lte);var Dp=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]},e5=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,l=us(r)?t:Number(r),c=us(i)?e:Number(i);return a&&a>0&&(l?c=l/a:c&&(l=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:l,calculatedHeight:c}},Bte={width:0,height:0,overflow:"visible"},Fte={width:0,overflowX:"visible"},Ute={height:0,overflowY:"visible"},Hte={},zte=t=>{var{width:e,height:n}=t,r=us(e),i=us(n);return r&&i?Bte:r?Fte:i?Ute:Hte};function $te(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function Qn(t){return Number.isFinite(t)}function Ca(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zv.apply(null,arguments)}function sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ok(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sk(Object(n),!0).forEach(function(r){qte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function qte(t,e,n){return(e=Yte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yte(t){var e=Vte(t,"string");return typeof e=="symbol"?e:e+""}function Vte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t5=A.createContext({width:-1,height:-1});function Gte(t){return Ca(t.width)&&Ca(t.height)}function n5(t){var{children:e,width:n,height:r}=t,i=A.useMemo(()=>({width:n,height:r}),[n,r]);return Gte(i)?A.createElement(t5.Provider,{value:i},e):null}var zE=()=>A.useContext(t5),Wte=A.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:l,maxHeight:c,children:d,debounce:h=0,id:p,className:b,onResize:y,style:x={}}=t,w=A.useRef(null),E=A.useRef();E.current=y,A.useImperativeHandle(e,()=>w.current);var[T,C]=A.useState({containerWidth:r.width,containerHeight:r.height}),N=A.useCallback((H,Y)=>{C(X=>{var z=Math.round(H),K=Math.round(Y);return X.containerWidth===z&&X.containerHeight===K?X:{containerWidth:z,containerHeight:K}})},[]);A.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return rc;var H=K=>{var ce,{width:te,height:W}=K[0].contentRect;N(te,W),(ce=E.current)===null||ce===void 0||ce.call(E,te,W)};h>0&&(H=Mte(H,h,{trailing:!0,leading:!1}));var Y=new ResizeObserver(H),{width:X,height:z}=w.current.getBoundingClientRect();return N(X,z),Y.observe(w.current),()=>{Y.disconnect()}},[N,h]);var{containerWidth:P,containerHeight:k}=T;Dp(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:j,calculatedHeight:D}=e5(P,k,{width:i,height:a,aspect:n,maxHeight:c});return Dp(j!=null&&j>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,D,i,a,s,l,n),A.createElement("div",{id:p?"".concat(p):void 0,className:Gt("recharts-responsive-container",b),style:ok(ok({},x),{},{width:i,height:a,minWidth:s,minHeight:l,maxHeight:c}),ref:w},A.createElement("div",{style:zte({width:i,height:a})},A.createElement(n5,{width:j,height:D},d)))}),Xte=A.forwardRef((t,e)=>{var n=zE();if(Ca(n.width)&&Ca(n.height))return t.children;var{width:r,height:i}=$te({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=e5(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return et(a)&&et(s)?A.createElement(n5,{width:a,height:s},t.children):A.createElement(Wte,Zv({},t,{width:r,height:i,ref:e}))});function r5(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var Wg=()=>{var t,e=ei(),n=Qe(kte),r=Qe(Gg),i=(t=Qe(Vg))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Kte={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},i5=()=>{var t;return(t=Qe(cr))!==null&&t!==void 0?t:Kte},$E=()=>Qe(gs),qE=()=>Qe(bs),Qte=()=>Qe(t=>t.layout.margin),an=t=>t.layout.layoutType,Xg=()=>Qe(an),Zte=()=>{var t=Xg();return t!==void 0},Kg=t=>{var e=Dn(),n=ei(),{width:r,height:i}=t,a=zE(),s=r,l=i;return a&&(s=a.width>0?a.width:r,l=a.height>0?a.height:i),A.useEffect(()=>{!n&&Ca(s)&&Ca(l)&&e(nte({width:s,height:l}))},[e,n,s,l]),null},Jte={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},a5=Jr({name:"legend",initialState:Jte,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Mn()},removeLegendPayload:{reducer(t,e){var n=ss(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Mn()}}}),{setLegendSize:lk,setLegendSettings:ene,addLegendPayload:tne,removeLegendPayload:nne}=a5.actions,rne=a5.reducer,ine=["contextPayload"];function Jv(){return Jv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jv.apply(null,arguments)}function uk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uk(Object(n),!0).forEach(function(r){ane(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ane(t,e,n){return(e=sne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sne(t){var e=one(t,"string");return typeof e=="symbol"?e:e+""}function one(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lne(t,e){if(t==null)return{};var n,r,i=une(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function une(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function cne(t){return t.value}function dne(t){var{contextPayload:e}=t,n=lne(t,ine),r=gI(e,t.payloadUniqBy,cne),i=Fu(Fu({},n),{},{payload:r});return A.isValidElement(t.content)?A.cloneElement(t.content,i):typeof t.content=="function"?A.createElement(t.content,i):A.createElement(gJ,i)}function hne(t,e,n,r,i,a){var{layout:s,align:l,verticalAlign:c}=e,d,h;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&s==="vertical"?d={left:((r||0)-a.width)/2}:d=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?h={top:((i||0)-a.height)/2}:h=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Fu(Fu({},d),h)}function fne(t){var e=Dn();return A.useEffect(()=>{e(ene(t))},[e,t]),null}function mne(t){var e=Dn();return A.useEffect(()=>(e(lk(t)),()=>{e(lk({width:0,height:0}))}),[e,t]),null}function pne(t,e,n,r){return t==="vertical"&&et(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var gne={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function s5(t){var e=xr(t,gne),n=lee(),r=lZ(),i=Qte(),{width:a,height:s,wrapperStyle:l,portal:c}=e,[d,h]=wI([n]),p=$E(),b=qE();if(p==null||b==null)return null;var y=p-(i?.left||0)-(i?.right||0),x=pne(e.layout,s,a,y),w=c?l:Fu(Fu({position:"absolute",width:x?.width||a||"auto",height:x?.height||s||"auto"},hne(l,e,i,p,b,d)),l),E=c??r;if(E==null||n==null)return null;var T=A.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:h},A.createElement(fne,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),A.createElement(mne,{width:d.width,height:d.height}),A.createElement(dne,Jv({},e,x,{margin:i,chartWidth:p,chartHeight:b,contextPayload:n})));return Mw.createPortal(T,E)}s5.displayName="Legend";function ew(){return ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ew.apply(null,arguments)}function ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ck(Object(n),!0).forEach(function(r){bne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bne(t,e,n){return(e=yne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yne(t){var e=xne(t,"string");return typeof e=="symbol"?e:e+""}function xne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vne(t){return Array.isArray(t)&&Na(t[0])&&Na(t[1])?t.join(" ~ "):t}var wne=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:d,label:h,labelFormatter:p,accessibilityLayer:b=!1}=t,y=()=>{if(a&&a.length){var k={padding:0,margin:0},j=(l?Bg(a,l):a).map((D,H)=>{if(D.type==="none")return null;var Y=D.formatter||s||vne,{value:X,name:z}=D,K=X,ce=z;if(Y){var te=Y(X,z,D,H,a);if(Array.isArray(te))[K,ce]=te;else if(te!=null)K=te;else return null}var W=x1({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},r);return A.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:W},Na(ce)?A.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,Na(ce)?A.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,A.createElement("span",{className:"recharts-tooltip-item-value"},K),A.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return A.createElement("ul",{className:"recharts-tooltip-item-list",style:k},j)}return null},x=x1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),w=x1({margin:0},i),E=!Kn(h),T=E?h:"",C=Gt("recharts-default-tooltip",c),N=Gt("recharts-tooltip-label",d);E&&p&&a!==void 0&&a!==null&&(T=p(h,a));var P=b?{role:"status","aria-live":"assertive"}:{};return A.createElement("div",ew({className:C,style:x},P),A.createElement("p",{className:N,style:w},A.isValidElement(T)?T:"".concat(T)),y())},wd="recharts-tooltip-wrapper",Ene={visibility:"hidden"};function Ane(t){var{coordinate:e,translateX:n,translateY:r}=t;return Gt(wd,{["".concat(wd,"-right")]:et(n)&&e&&et(e.x)&&n>=e.x,["".concat(wd,"-left")]:et(n)&&e&&et(e.x)&&n<e.x,["".concat(wd,"-bottom")]:et(r)&&e&&et(e.y)&&r>=e.y,["".concat(wd,"-top")]:et(r)&&e&&et(e.y)&&r<e.y})}function dk(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=t;if(a&&et(a[r]))return a[r];var h=n[r]-l-(i>0?i:0),p=n[r]+i;if(e[r])return s[r]?h:p;var b=c[r];if(b==null)return 0;if(s[r]){var y=h,x=b;return y<x?Math.max(p,b):Math.max(h,b)}if(d==null)return 0;var w=p+l,E=b+d;return w>E?Math.max(h,b):Math.max(p,b)}function Sne(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Tne(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:l,viewBox:c}=t,d,h,p;return s.height>0&&s.width>0&&n?(h=dk({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),p=dk({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),d=Sne({translateX:h,translateY:p,useTranslate3d:l})):d=Ene,{cssProperties:d,cssClasses:Ane({translateX:h,translateY:p,coordinate:n})}}function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(n),!0).forEach(function(r){tw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tw(t,e,n){return(e=_ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ne(t){var e=Nne(t,"string");return typeof e=="symbol"?e:e+""}function Nne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Cne extends A.PureComponent{constructor(){super(...arguments),tw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),tw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:l,isAnimationActive:c,offset:d,position:h,reverseDirection:p,useTranslate3d:b,viewBox:y,wrapperStyle:x,lastBoundingBox:w,innerRef:E,hasPortalFromProps:T}=this.props,{cssClasses:C,cssProperties:N}=Tne({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:d,position:h,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:b,viewBox:y}),P=T?{}:Lm(Lm({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),k=Lm(Lm({},P),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},x);return A.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:k,ref:E},a)}}var One=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),ic={devToolsEnabled:!1,isSsr:One()},o5=()=>{var t;return(t=Qe(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function nw(){return nw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nw.apply(null,arguments)}function fk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fk(Object(n),!0).forEach(function(r){kne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kne(t,e,n){return(e=jne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jne(t){var e=Pne(t,"string");return typeof e=="symbol"?e:e+""}function Pne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pk={curveBasisClosed:NZ,curveBasisOpen:CZ,curveBasis:_Z,curveBumpX:hZ,curveBumpY:fZ,curveLinearClosed:OZ,curveLinear:Ig,curveMonotoneX:kZ,curveMonotoneY:jZ,curveNatural:PZ,curveStep:DZ,curveStepAfter:IZ,curveStepBefore:RZ},Rp=t=>Qn(t.x)&&Qn(t.y),gk=t=>t.base!=null&&Rp(t.base)&&Rp(t),Ed=t=>t.x,Ad=t=>t.y,Dne=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Bh(t));return(n==="curveMonotone"||n==="curveBump")&&e?pk["".concat(n).concat(e==="vertical"?"Y":"X")]:pk[n]||Ig},Rne=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=Dne(e,i),l=a?n.filter(Rp):n,c;if(Array.isArray(r)){var d=n.map((y,x)=>mk(mk({},y),{},{base:r[x]}));i==="vertical"?c=Om().y(Ad).x1(Ed).x0(y=>y.base.x):c=Om().x(Ed).y1(Ad).y0(y=>y.base.y);var h=c.defined(gk).curve(s),p=a?d.filter(gk):d;return h(p)}i==="vertical"&&et(r)?c=Om().y(Ad).x1(Ed).x0(r):et(r)?c=Om().x(Ed).y1(Ad).y0(r):c=q4().x(Ed).y(Ad);var b=c.defined(Rp).curve(s);return b(l)},l5=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Rne(t):r;return A.createElement("path",nw({},Ta(t),RE(t),{className:Gt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},Ine=["x","y","top","left","width","height","className"];function rw(){return rw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rw.apply(null,arguments)}function bk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bk(Object(n),!0).forEach(function(r){Mne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mne(t,e,n){return(e=Bne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bne(t){var e=Fne(t,"string");return typeof e=="symbol"?e:e+""}function Fne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Une(t,e){if(t==null)return{};var n,r,i=Hne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Hne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var zne=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),$ne=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:l}=t,c=Une(t,Ine),d=Lne({x:e,y:n,top:r,left:i,width:a,height:s},c);return!et(e)||!et(n)||!et(a)||!et(s)||!et(r)||!et(i)?null:A.createElement("path",rw({},kr(d),{className:Gt("recharts-cross",l),d:zne(e,n,a,s,r,i)}))};function qne(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yk(Object(n),!0).forEach(function(r){Yne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yne(t,e,n){return(e=Vne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vne(t){var e=Gne(t,"string");return typeof e=="symbol"?e:e+""}function Gne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wne=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),u5=(t,e,n)=>t.map(r=>"".concat(Wne(r)," ").concat(e,"ms ").concat(n)).join(","),Xne=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),dh=(t,e)=>Object.keys(e).reduce((n,r)=>xk(xk({},n),{},{[r]:t(r,e[r])}),{});function vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ln(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vk(Object(n),!0).forEach(function(r){Kne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kne(t,e,n){return(e=Qne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qne(t){var e=Zne(t,"string");return typeof e=="symbol"?e:e+""}function Zne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ip=(t,e,n)=>t+(e-t)*n,iw=t=>{var{from:e,to:n}=t;return e!==n},c5=(t,e,n)=>{var r=dh((i,a)=>{if(iw(a)){var[s,l]=t(a.from,a.to,a.velocity);return Ln(Ln({},a),{},{from:s,velocity:l})}return a},e);return n<1?dh((i,a)=>iw(a)?Ln(Ln({},a),{},{velocity:Ip(a.velocity,r[i].velocity,n),from:Ip(a.from,r[i].from,n)}):a,e):c5(t,r,n-1)};function Jne(t,e,n,r,i,a){var s,l=r.reduce((b,y)=>Ln(Ln({},b),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),c=()=>dh((b,y)=>y.from,l),d=()=>!Object.values(l).filter(iw).length,h=null,p=b=>{s||(s=b);var y=b-s,x=y/n.dt;l=c5(n,l,x),i(Ln(Ln(Ln({},t),e),c())),s=b,d()||(h=a.setTimeout(p))};return()=>(h=a.setTimeout(p),()=>{var b;(b=h)===null||b===void 0||b()})}function ere(t,e,n,r,i,a,s){var l=null,c=i.reduce((p,b)=>Ln(Ln({},p),{},{[b]:[t[b],e[b]]}),{}),d,h=p=>{d||(d=p);var b=(p-d)/r,y=dh((w,E)=>Ip(...E,n(b)),c);if(a(Ln(Ln(Ln({},t),e),y)),b<1)l=s.setTimeout(h);else{var x=dh((w,E)=>Ip(...E,n(1)),c);a(Ln(Ln(Ln({},t),e),x))}};return()=>(l=s.setTimeout(h),()=>{var p;(p=l)===null||p===void 0||p()})}const tre=(t,e,n,r,i,a)=>{var s=Xne(t,e);return n==null?()=>(i(Ln(Ln({},t),e)),()=>{}):n.isStepper===!0?Jne(t,e,n,s,i,a):ere(t,e,n,r,s,i,a)};var Lp=1e-4,d5=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],h5=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),wk=(t,e)=>n=>{var r=d5(t,e);return h5(r,n)},nre=(t,e)=>n=>{var r=d5(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return h5(i,n)},rre=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=n[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(l=>parseFloat(l));return[s[0],s[1],s[2],s[3]]}}}return n.length===4?n:[0,0,1,1]},ire=(t,e,n,r)=>{var i=wk(t,n),a=wk(e,r),s=nre(t,n),l=d=>d>1?1:d<0?0:d,c=d=>{for(var h=d>1?1:d,p=h,b=0;b<8;++b){var y=i(p)-h,x=s(p);if(Math.abs(y-h)<Lp||x<Lp)return a(p);p=l(p-y/x)}return a(p)};return c.isStepper=!1,c},Ek=function(){return ire(...rre(...arguments))},are=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,l,c)=>{var d=-(s-l)*n,h=c*r,p=c+(d-h)*i/1e3,b=c*i/1e3+s;return Math.abs(b-l)<Lp&&Math.abs(p)<Lp?[l,0]:[b,p]};return a.isStepper=!0,a.dt=i,a},sre=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Ek(t);case"spring":return are();default:if(t.split("(")[0]==="cubic-bezier")return Ek(t)}return typeof t=="function"?t:null};function ore(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...d]=l;if(typeof c=="number"){i=t.setTimeout(a.bind(null,d),c);return}a(c),i=t.setTimeout(a.bind(null,d));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class lre{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function ure(){return ore(new lre)}var cre=A.createContext(ure);function dre(t,e){var n=A.useContext(cre);return A.useMemo(()=>e??n(t),[t,e,n])}var hre={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Ak={t:0},v1={t:1};function YE(t){var e=xr(t,hre),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:l,onAnimationStart:c,children:d}=e,h=dre(e.animationId,e.animationManager),[p,b]=A.useState(n?Ak:v1),y=A.useRef(null);return A.useEffect(()=>{n||b(v1)},[n]),A.useEffect(()=>{if(!n||!r)return rc;var x=tre(Ak,v1,sre(a),i,b,h.getTimeoutController()),w=()=>{y.current=x()};return h.start([c,s,w,i,l]),()=>{h.stop(),y.current&&y.current(),l()}},[n,r,i,a,s,c,l,h]),d(p.t)}function VE(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=A.useRef(oh(e)),r=A.useRef(t);return r.current!==t&&(n.current=oh(e),r.current=t),n.current}var fre=["radius"],mre=["radius"];function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(r){pre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pre(t,e,n){return(e=gre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gre(t){var e=bre(t,"string");return typeof e=="symbol"?e:e+""}function bre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mp(){return Mp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mp.apply(null,arguments)}function _k(t,e){if(t==null)return{};var n,r,i=yre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Nk=(t,e,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,d;if(a>0&&i instanceof Array){for(var h=[0,0,0,0],p=0,b=4;p<b;p++)h[p]=i[p]>a?a:i[p];d="M".concat(t,",").concat(e+s*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(c,",").concat(t+l*h[0],",").concat(e)),d+="L ".concat(t+n-l*h[1],",").concat(e),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+s*h[1])),d+="L ".concat(t+n,",").concat(e+r-s*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(c,`,
        `).concat(t+n-l*h[2],",").concat(e+r)),d+="L ".concat(t+l*h[3],",").concat(e+r),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+r-s*h[3])),d+="Z"}else if(a>0&&i===+i&&i>0){var y=Math.min(a,i);d="M ".concat(t,",").concat(e+s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+l*y,",").concat(e,`
            L `).concat(t+n-l*y,",").concat(e,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+n,",").concat(e+s*y,`
            L `).concat(t+n,",").concat(e+r-s*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t+n-l*y,",").concat(e+r,`
            L `).concat(t+l*y,",").concat(e+r,`
            A `).concat(y,",").concat(y,",0,0,").concat(c,",").concat(t,",").concat(e+r-s*y," Z")}else d="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return d},Ck={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},f5=t=>{var e=xr(t,Ck),n=A.useRef(null),[r,i]=A.useState(-1);A.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var B=n.current.getTotalLength();B&&i(B)}catch{}},[]);var{x:a,y:s,width:l,height:c,radius:d,className:h}=e,{animationEasing:p,animationDuration:b,animationBegin:y,isAnimationActive:x,isUpdateAnimationActive:w}=e,E=A.useRef(l),T=A.useRef(c),C=A.useRef(a),N=A.useRef(s),P=A.useMemo(()=>({x:a,y:s,width:l,height:c,radius:d}),[a,s,l,c,d]),k=VE(P,"rectangle-");if(a!==+a||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var j=Gt("recharts-rectangle",h);if(!w){var D=kr(e),{radius:H}=D,Y=_k(D,fre);return A.createElement("path",Mp({},Y,{radius:typeof d=="number"?d:void 0,className:j,d:Nk(a,s,l,c,d)}))}var X=E.current,z=T.current,K=C.current,ce=N.current,te="0px ".concat(r===-1?1:r,"px"),W="".concat(r,"px 0px"),R=u5(["strokeDasharray"],b,typeof p=="string"?p:Ck.animationEasing);return A.createElement(YE,{animationId:k,key:k,canBegin:r>0,duration:b,easing:p,isActive:w,begin:y},B=>{var re=Gr(X,l,B),le=Gr(z,c,B),M=Gr(K,a,B),U=Gr(ce,s,B);n.current&&(E.current=re,T.current=le,C.current=M,N.current=U);var Q;x?B>0?Q={transition:R,strokeDasharray:W}:Q={strokeDasharray:te}:Q={strokeDasharray:W};var I=kr(e),{radius:oe}=I,$=_k(I,mre);return A.createElement("path",Mp({},$,{radius:typeof d=="number"?d:void 0,className:j,d:Nk(M,U,re,le,d),ref:n,style:Tk(Tk({},Q),e.style)}))})};function Ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ok(Object(n),!0).forEach(function(r){xre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ok(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xre(t,e,n){return(e=vre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vre(t){var e=wre(t,"string");return typeof e=="symbol"?e:e+""}function wre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bp=Math.PI/180,Ere=t=>t*180/Math.PI,lr=(t,e,n,r)=>({x:t+Math.cos(-Bp*r)*n,y:e+Math.sin(-Bp*r)*n}),Are=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Sre=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},Tre=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=Sre({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var l=(n-i)/s,c=Math.acos(l);return r>a&&(c=2*Math.PI-c),{radius:s,angle:Ere(c),angleInRadian:c}},_re=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},Nre=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},Cre=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=Tre({x:n,y:r},e),{innerRadius:s,outerRadius:l}=e;if(i<s||i>l||i===0)return null;var{startAngle:c,endAngle:d}=_re(e),h=a,p;if(c<=d){for(;h>d;)h-=360;for(;h<c;)h+=360;p=h>=c&&h<=d}else{for(;h>c;)h-=360;for(;h<d;)h+=360;p=h>=d&&h<=c}return p?kk(kk({},e),{},{radius:i,angle:Nre(h,e)}):null};function m5(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=lr(e,n,r,i),l=lr(e,n,r,a);return{points:[s,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function aw(){return aw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aw.apply(null,arguments)}var Ore=(t,e)=>{var n=Bi(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Mm=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:l,cornerIsExternal:c}=t,d=l*(s?1:-1)+r,h=Math.asin(l/d)/Bp,p=c?i:i+a*h,b=lr(e,n,d,p),y=lr(e,n,r,p),x=c?i-a*h:i,w=lr(e,n,d*Math.cos(h*Bp),x);return{center:b,circleTangency:y,lineTangency:w,theta:h}},p5=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,l=Ore(a,s),c=a+l,d=lr(e,n,i,a),h=lr(e,n,i,c),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(r>0){var b=lr(e,n,r,a),y=lr(e,n,r,c);p+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(b.x,",").concat(b.y," Z")}else p+="L ".concat(e,",").concat(n," Z");return p},kre=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:d}=t,h=Bi(d-c),{circleTangency:p,lineTangency:b,theta:y}=Mm({cx:e,cy:n,radius:i,angle:c,sign:h,cornerRadius:a,cornerIsExternal:l}),{circleTangency:x,lineTangency:w,theta:E}=Mm({cx:e,cy:n,radius:i,angle:d,sign:-h,cornerRadius:a,cornerIsExternal:l}),T=l?Math.abs(c-d):Math.abs(c-d)-y-E;if(T<0)return s?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):p5({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:d});var C="M ".concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
  `);if(r>0){var{circleTangency:N,lineTangency:P,theta:k}=Mm({cx:e,cy:n,radius:r,angle:c,sign:h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:j,lineTangency:D,theta:H}=Mm({cx:e,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),Y=l?Math.abs(c-d):Math.abs(c-d)-k-H;if(Y<0&&a===0)return"".concat(C,"L").concat(e,",").concat(n,"Z");C+="L".concat(D.x,",").concat(D.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(Y>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,"Z")}else C+="L".concat(e,",").concat(n,"Z");return C},jre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},g5=t=>{var e=xr(t,jre),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:h,className:p}=e;if(a<i||d===h)return null;var b=Gt("recharts-sector",p),y=a-i,x=uo(s,y,0,!0),w;return x>0&&Math.abs(d-h)<360?w=kre({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(x,y/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:h}):w=p5({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:d,endAngle:h}),A.createElement("path",aw({},kr(e),{className:b,d:w}))};function Pre(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(aI(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:l}=e,c=lr(r,i,a,l),d=lr(r,i,s,l);return[{x:c.x,y:c.y},{x:d.x,y:d.y}]}return m5(e)}}var w1={},E1={},A1={},jk;function Dre(){return jk||(jk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yI();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(A1)),A1}var Pk;function Rre(){return Pk||(Pk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Dre();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(E1)),E1}var Dk;function Ire(){return Dk||(Dk=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xI(),n=Rre();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const l=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=i,i+=s;return c}t.range=r})(w1)),w1}var S1,Rk;function Lre(){return Rk||(Rk=1,S1=Ire().range),S1}var Mre=Lre();const b5=Ji(Mre);function ao(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bre(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GE(t){let e,n,r;t.length!==2?(e=ao,n=(l,c)=>ao(t(l),c),r=(l,c)=>t(l)-c):(e=t===ao||t===Bre?t:Fre,n=t,r=t);function i(l,c,d=0,h=l.length){if(d<h){if(e(c,c)!==0)return h;do{const p=d+h>>>1;n(l[p],c)<0?d=p+1:h=p}while(d<h)}return d}function a(l,c,d=0,h=l.length){if(d<h){if(e(c,c)!==0)return h;do{const p=d+h>>>1;n(l[p],c)<=0?d=p+1:h=p}while(d<h)}return d}function s(l,c,d=0,h=l.length){const p=i(l,c,d,h-1);return p>d&&r(l[p-1],c)>-r(l[p],c)?p-1:p}return{left:i,center:s,right:a}}function Fre(){return 0}function y5(t){return t===null?NaN:+t}function*Ure(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Hre=GE(ao),zh=Hre.right;GE(y5).center;class Ik extends Map{constructor(e,n=qre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Lk(this,e))}has(e){return super.has(Lk(this,e))}set(e,n){return super.set(zre(this,e),n)}delete(e){return super.delete($re(this,e))}}function Lk({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function zre({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function $re({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function qre(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Yre(t=ao){if(t===ao)return x5;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function x5(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Vre=Math.sqrt(50),Gre=Math.sqrt(10),Wre=Math.sqrt(2);function Fp(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Vre?10:a>=Gre?5:a>=Wre?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/s,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,i)*s,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=n&&n<2?Fp(t,e,n*2):[l,c,d]}function sw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Fp(e,t,n):Fp(t,e,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(s<0)for(let d=0;d<l;++d)c[d]=(a-d)/-s;else for(let d=0;d<l;++d)c[d]=(a-d)*s;else if(s<0)for(let d=0;d<l;++d)c[d]=(i+d)/-s;else for(let d=0;d<l;++d)c[d]=(i+d)*s;return c}function ow(t,e,n){return e=+e,t=+t,n=+n,Fp(t,e,n)[2]}function lw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?ow(e,t,n):ow(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Mk(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Bk(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function v5(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?x5:Yre(i);r>n;){if(r-n>600){const c=r-n+1,d=e-n+1,h=Math.log(c),p=.5*Math.exp(2*h/3),b=.5*Math.sqrt(h*p*(c-p)/c)*(d-c/2<0?-1:1),y=Math.max(n,Math.floor(e-d*p/c+b)),x=Math.min(r,Math.floor(e+(c-d)*p/c+b));v5(t,e,y,x,i)}const a=t[e];let s=n,l=r;for(Sd(t,n,e),i(t[r],a)>0&&Sd(t,n,r);s<l;){for(Sd(t,s,l),++s,--l;i(t[s],a)<0;)++s;for(;i(t[l],a)>0;)--l}i(t[n],a)===0?Sd(t,n,l):(++l,Sd(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Sd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Xre(t,e,n){if(t=Float64Array.from(Ure(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Bk(t);if(e>=1)return Mk(t);var r,i=(r-1)*e,a=Math.floor(i),s=Mk(v5(t,a).subarray(0,a+1)),l=Bk(t.subarray(a+1));return s+(l-s)*(i-a)}}function Kre(t,e,n=y5){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),l=+n(t[a+1],a+1,t);return s+(l-s)*(i-a)}}function Qre(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Vi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function ys(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const uw=Symbol("implicit");function WE(){var t=new Ik,e=[],n=[],r=uw;function i(a){let s=t.get(a);if(s===void 0){if(r!==uw)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Ik;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return WE(e,n).unknown(r)},Vi.apply(i,arguments),i}function XE(){var t=WE().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,l=!1,c=0,d=0,h=.5;delete t.unknown;function p(){var b=e().length,y=i<r,x=y?i:r,w=y?r:i;a=(w-x)/Math.max(1,b-c+d*2),l&&(a=Math.floor(a)),x+=(w-x-a*(b-c))*h,s=a*(1-c),l&&(x=Math.round(x),s=Math.round(s));var E=Qre(b).map(function(T){return x+a*T});return n(y?E.reverse():E)}return t.domain=function(b){return arguments.length?(e(b),p()):e()},t.range=function(b){return arguments.length?([r,i]=b,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(b){return[r,i]=b,r=+r,i=+i,l=!0,p()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(b){return arguments.length?(l=!!b,p()):l},t.padding=function(b){return arguments.length?(c=Math.min(1,d=+b),p()):c},t.paddingInner=function(b){return arguments.length?(c=Math.min(1,b),p()):c},t.paddingOuter=function(b){return arguments.length?(d=+b,p()):d},t.align=function(b){return arguments.length?(h=Math.max(0,Math.min(1,b)),p()):h},t.copy=function(){return XE(e(),[r,i]).round(l).paddingInner(c).paddingOuter(d).align(h)},Vi.apply(p(),arguments)}function w5(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return w5(e())},t}function Zre(){return w5(XE.apply(null,arguments).paddingInner(1))}function KE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function E5(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function $h(){}var hh=.7,Up=1/hh,ju="\\s*([+-]?\\d+)\\s*",fh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jre=/^#([0-9a-f]{3,8})$/,eie=new RegExp(`^rgb\\(${ju},${ju},${ju}\\)$`),tie=new RegExp(`^rgb\\(${Ea},${Ea},${Ea}\\)$`),nie=new RegExp(`^rgba\\(${ju},${ju},${ju},${fh}\\)$`),rie=new RegExp(`^rgba\\(${Ea},${Ea},${Ea},${fh}\\)$`),iie=new RegExp(`^hsl\\(${fh},${Ea},${Ea}\\)$`),aie=new RegExp(`^hsla\\(${fh},${Ea},${Ea},${fh}\\)$`),Fk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};KE($h,mh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Uk,formatHex:Uk,formatHex8:sie,formatHsl:oie,formatRgb:Hk,toString:Hk});function Uk(){return this.rgb().formatHex()}function sie(){return this.rgb().formatHex8()}function oie(){return A5(this).formatHsl()}function Hk(){return this.rgb().formatRgb()}function mh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Jre.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?zk(e):n===3?new Wr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Bm(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Bm(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=eie.exec(t))?new Wr(e[1],e[2],e[3],1):(e=tie.exec(t))?new Wr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nie.exec(t))?Bm(e[1],e[2],e[3],e[4]):(e=rie.exec(t))?Bm(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=iie.exec(t))?Yk(e[1],e[2]/100,e[3]/100,1):(e=aie.exec(t))?Yk(e[1],e[2]/100,e[3]/100,e[4]):Fk.hasOwnProperty(t)?zk(Fk[t]):t==="transparent"?new Wr(NaN,NaN,NaN,0):null}function zk(t){return new Wr(t>>16&255,t>>8&255,t&255,1)}function Bm(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wr(t,e,n,r)}function lie(t){return t instanceof $h||(t=mh(t)),t?(t=t.rgb(),new Wr(t.r,t.g,t.b,t.opacity)):new Wr}function cw(t,e,n,r){return arguments.length===1?lie(t):new Wr(t,e,n,r??1)}function Wr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}KE(Wr,cw,E5($h,{brighter(t){return t=t==null?Up:Math.pow(Up,t),new Wr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?hh:Math.pow(hh,t),new Wr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wr(tl(this.r),tl(this.g),tl(this.b),Hp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$k,formatHex:$k,formatHex8:uie,formatRgb:qk,toString:qk}));function $k(){return`#${$o(this.r)}${$o(this.g)}${$o(this.b)}`}function uie(){return`#${$o(this.r)}${$o(this.g)}${$o(this.b)}${$o((isNaN(this.opacity)?1:this.opacity)*255)}`}function qk(){const t=Hp(this.opacity);return`${t===1?"rgb(":"rgba("}${tl(this.r)}, ${tl(this.g)}, ${tl(this.b)}${t===1?")":`, ${t})`}`}function Hp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function tl(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function $o(t){return t=tl(t),(t<16?"0":"")+t.toString(16)}function Yk(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Zi(t,e,n,r)}function A5(t){if(t instanceof Zi)return new Zi(t.h,t.s,t.l,t.opacity);if(t instanceof $h||(t=mh(t)),!t)return new Zi;if(t instanceof Zi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,l=a-i,c=(a+i)/2;return l?(e===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-e)/l+2:s=(e-n)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new Zi(s,l,c,t.opacity)}function cie(t,e,n,r){return arguments.length===1?A5(t):new Zi(t,e,n,r??1)}function Zi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}KE(Zi,cie,E5($h,{brighter(t){return t=t==null?Up:Math.pow(Up,t),new Zi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?hh:Math.pow(hh,t),new Zi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wr(T1(t>=240?t-240:t+120,i,r),T1(t,i,r),T1(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Zi(Vk(this.h),Fm(this.s),Fm(this.l),Hp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Hp(this.opacity);return`${t===1?"hsl(":"hsla("}${Vk(this.h)}, ${Fm(this.s)*100}%, ${Fm(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Vk(t){return t=(t||0)%360,t<0?t+360:t}function Fm(t){return Math.max(0,Math.min(1,t||0))}function T1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const QE=t=>()=>t;function die(t,e){return function(n){return t+n*e}}function hie(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function fie(t){return(t=+t)==1?S5:function(e,n){return n-e?hie(e,n,t):QE(isNaN(e)?n:e)}}function S5(t,e){var n=e-t;return n?die(t,n):QE(isNaN(t)?e:t)}const Gk=(function t(e){var n=fie(e);function r(i,a){var s=n((i=cw(i)).r,(a=cw(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),d=S5(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=l(h),i.b=c(h),i.opacity=d(h),i+""}}return r.gamma=t,r})(1);function mie(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function pie(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function gie(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=ac(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function bie(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function zp(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yie(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ac(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var dw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_1=new RegExp(dw.source,"g");function xie(t){return function(){return t}}function vie(t){return function(e){return t(e)+""}}function wie(t,e){var n=dw.lastIndex=_1.lastIndex=0,r,i,a,s=-1,l=[],c=[];for(t=t+"",e=e+"";(r=dw.exec(t))&&(i=_1.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:zp(r,i)})),n=_1.lastIndex;return n<e.length&&(a=e.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?vie(c[0].x):xie(e):(e=c.length,function(d){for(var h=0,p;h<e;++h)l[(p=c[h]).i]=p.x(d);return l.join("")})}function ac(t,e){var n=typeof e,r;return e==null||n==="boolean"?QE(e):(n==="number"?zp:n==="string"?(r=mh(e))?(e=r,Gk):wie:e instanceof mh?Gk:e instanceof Date?bie:pie(e)?mie:Array.isArray(e)?gie:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?yie:zp)(t,e)}function ZE(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Eie(t,e){e===void 0&&(e=t,t=ac);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var l=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[l](s-l)}}function Aie(t){return function(){return t}}function $p(t){return+t}var Wk=[0,1];function _r(t){return t}function hw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Aie(isNaN(e)?NaN:.5)}function Sie(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Tie(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=hw(i,r),a=n(s,a)):(r=hw(r,i),a=n(a,s)),function(l){return a(r(l))}}function _ie(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=hw(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(l){var c=zh(t,l,1,r)-1;return a[c](i[c](l))}}function qh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qg(){var t=Wk,e=Wk,n=ac,r,i,a,s=_r,l,c,d;function h(){var b=Math.min(t.length,e.length);return s!==_r&&(s=Sie(t[0],t[b-1])),l=b>2?_ie:Tie,c=d=null,p}function p(b){return b==null||isNaN(b=+b)?a:(c||(c=l(t.map(r),e,n)))(r(s(b)))}return p.invert=function(b){return s(i((d||(d=l(e,t.map(r),zp)))(b)))},p.domain=function(b){return arguments.length?(t=Array.from(b,$p),h()):t.slice()},p.range=function(b){return arguments.length?(e=Array.from(b),h()):e.slice()},p.rangeRound=function(b){return e=Array.from(b),n=ZE,h()},p.clamp=function(b){return arguments.length?(s=b?!0:_r,h()):s!==_r},p.interpolate=function(b){return arguments.length?(n=b,h()):n},p.unknown=function(b){return arguments.length?(a=b,p):a},function(b,y){return r=b,i=y,h()}}function JE(){return Qg()(_r,_r)}function Nie(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function qp(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Uu(t){return t=qp(Math.abs(t)),t?t[1]:NaN}function Cie(t,e){return function(n,r){for(var i=n.length,a=[],s=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Oie(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var kie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ph(t){if(!(e=kie.exec(t)))throw new Error("invalid format: "+t);var e;return new e2({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ph.prototype=e2.prototype;function e2(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}e2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function jie(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var T5;function Pie(t,e){var n=qp(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(T5=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+qp(t,Math.max(0,e+a-1))[0]}function Xk(t,e){var n=qp(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Kk={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Nie,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Xk(t*100,e),r:Xk,s:Pie,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Qk(t){return t}var Zk=Array.prototype.map,Jk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Die(t){var e=t.grouping===void 0||t.thousands===void 0?Qk:Cie(Zk.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Qk:Oie(Zk.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(p){p=ph(p);var b=p.fill,y=p.align,x=p.sign,w=p.symbol,E=p.zero,T=p.width,C=p.comma,N=p.precision,P=p.trim,k=p.type;k==="n"?(C=!0,k="g"):Kk[k]||(N===void 0&&(N=12),P=!0,k="g"),(E||b==="0"&&y==="=")&&(E=!0,b="0",y="=");var j=w==="$"?n:w==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",D=w==="$"?r:/[%p]/.test(k)?s:"",H=Kk[k],Y=/[defgprs%]/.test(k);N=N===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function X(z){var K=j,ce=D,te,W,R;if(k==="c")ce=H(z)+ce,z="";else{z=+z;var B=z<0||1/z<0;if(z=isNaN(z)?c:H(Math.abs(z),N),P&&(z=jie(z)),B&&+z==0&&x!=="+"&&(B=!1),K=(B?x==="("?x:l:x==="-"||x==="("?"":x)+K,ce=(k==="s"?Jk[8+T5/3]:"")+ce+(B&&x==="("?")":""),Y){for(te=-1,W=z.length;++te<W;)if(R=z.charCodeAt(te),48>R||R>57){ce=(R===46?i+z.slice(te+1):z.slice(te))+ce,z=z.slice(0,te);break}}}C&&!E&&(z=e(z,1/0));var re=K.length+z.length+ce.length,le=re<T?new Array(T-re+1).join(b):"";switch(C&&E&&(z=e(le+z,le.length?T-ce.length:1/0),le=""),y){case"<":z=K+z+ce+le;break;case"=":z=K+le+z+ce;break;case"^":z=le.slice(0,re=le.length>>1)+K+z+ce+le.slice(re);break;default:z=le+K+z+ce;break}return a(z)}return X.toString=function(){return p+""},X}function h(p,b){var y=d((p=ph(p),p.type="f",p)),x=Math.max(-8,Math.min(8,Math.floor(Uu(b)/3)))*3,w=Math.pow(10,-x),E=Jk[8+x/3];return function(T){return y(w*T)+E}}return{format:d,formatPrefix:h}}var Um,t2,_5;Rie({thousands:",",grouping:[3],currency:["$",""]});function Rie(t){return Um=Die(t),t2=Um.format,_5=Um.formatPrefix,Um}function Iie(t){return Math.max(0,-Uu(Math.abs(t)))}function Lie(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Uu(e)/3)))*3-Uu(Math.abs(t)))}function Mie(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Uu(e)-Uu(t))+1}function N5(t,e,n,r){var i=lw(t,e,n),a;switch(r=ph(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Lie(i,s))&&(r.precision=a),_5(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Mie(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Iie(i))&&(r.precision=a-(r.type==="%")*2);break}}return t2(r)}function mo(t){var e=t.domain;return t.ticks=function(n){var r=e();return sw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return N5(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],l=r[a],c,d,h=10;for(l<s&&(d=s,s=l,l=d,d=i,i=a,a=d);h-- >0;){if(d=ow(s,l,n),d===c)return r[i]=s,r[a]=l,e(r);if(d>0)s=Math.floor(s/d)*d,l=Math.ceil(l/d)*d;else if(d<0)s=Math.ceil(s*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function C5(){var t=JE();return t.copy=function(){return qh(t,C5())},Vi.apply(t,arguments),mo(t)}function O5(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,$p),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return O5(t).unknown(e)},t=arguments.length?Array.from(t,$p):[0,1],mo(n)}function k5(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function ej(t){return Math.log(t)}function tj(t){return Math.exp(t)}function Bie(t){return-Math.log(-t)}function Fie(t){return-Math.exp(-t)}function Uie(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Hie(t){return t===10?Uie:t===Math.E?Math.exp:e=>Math.pow(t,e)}function zie(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function nj(t){return(e,n)=>-t(-e,n)}function n2(t){const e=t(ej,tj),n=e.domain;let r=10,i,a;function s(){return i=zie(r),a=Hie(r),n()[0]<0?(i=nj(i),a=nj(a),t(Bie,Fie)):t(ej,tj),e}return e.base=function(l){return arguments.length?(r=+l,s()):r},e.domain=function(l){return arguments.length?(n(l),s()):n()},e.ticks=l=>{const c=n();let d=c[0],h=c[c.length-1];const p=h<d;p&&([d,h]=[h,d]);let b=i(d),y=i(h),x,w;const E=l==null?10:+l;let T=[];if(!(r%1)&&y-b<E){if(b=Math.floor(b),y=Math.ceil(y),d>0){for(;b<=y;++b)for(x=1;x<r;++x)if(w=b<0?x/a(-b):x*a(b),!(w<d)){if(w>h)break;T.push(w)}}else for(;b<=y;++b)for(x=r-1;x>=1;--x)if(w=b>0?x/a(-b):x*a(b),!(w<d)){if(w>h)break;T.push(w)}T.length*2<E&&(T=sw(d,h,E))}else T=sw(b,y,Math.min(y-b,E)).map(a);return p?T.reverse():T},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=ph(c)).precision==null&&(c.trim=!0),c=t2(c)),l===1/0)return c;const d=Math.max(1,r*l/e.ticks().length);return h=>{let p=h/a(Math.round(i(h)));return p*r<r-.5&&(p*=r),p<=d?c(h):""}},e.nice=()=>n(k5(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),e}function j5(){const t=n2(Qg()).domain([1,10]);return t.copy=()=>qh(t,j5()).base(t.base()),Vi.apply(t,arguments),t}function rj(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function ij(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function r2(t){var e=1,n=t(rj(e),ij(e));return n.constant=function(r){return arguments.length?t(rj(e=+r),ij(e)):e},mo(n)}function P5(){var t=r2(Qg());return t.copy=function(){return qh(t,P5()).constant(t.constant())},Vi.apply(t,arguments)}function aj(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function $ie(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function qie(t){return t<0?-t*t:t*t}function i2(t){var e=t(_r,_r),n=1;function r(){return n===1?t(_r,_r):n===.5?t($ie,qie):t(aj(n),aj(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},mo(e)}function a2(){var t=i2(Qg());return t.copy=function(){return qh(t,a2()).exponent(t.exponent())},Vi.apply(t,arguments),t}function Yie(){return a2.apply(null,arguments).exponent(.5)}function sj(t){return Math.sign(t)*t*t}function Vie(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function D5(){var t=JE(),e=[0,1],n=!1,r;function i(a){var s=Vie(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(sj(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,$p)).map(sj)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return D5(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Vi.apply(i,arguments),mo(i)}function R5(){var t=[],e=[],n=[],r;function i(){var s=0,l=Math.max(1,e.length);for(n=new Array(l-1);++s<l;)n[s-1]=Kre(t,s/l);return a}function a(s){return s==null||isNaN(s=+s)?r:e[zh(n,s)]}return a.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ao),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return R5().domain(t).range(e).unknown(r)},Vi.apply(a,arguments)}function I5(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[zh(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return I5().domain([t,e]).range(i).unknown(a)},Vi.apply(mo(s),arguments)}function L5(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[zh(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return L5().domain(t).range(e).unknown(n)},Vi.apply(i,arguments)}const N1=new Date,C1=new Date;function Bn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let d;do c.push(d=new Date(+a)),e(a,l),t(a);while(d<a&&a<s);return c},i.filter=a=>Bn(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!a(s););else for(;--l>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(N1.setTime(+a),C1.setTime(+s),t(N1),t(C1),Math.floor(n(N1,C1))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Yp=Bn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Yp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Bn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Yp);Yp.range;const rs=1e3,Fi=rs*60,is=Fi*60,ds=is*24,s2=ds*7,oj=ds*30,O1=ds*365,qo=Bn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*rs)},(t,e)=>(e-t)/rs,t=>t.getUTCSeconds());qo.range;const o2=Bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rs)},(t,e)=>{t.setTime(+t+e*Fi)},(t,e)=>(e-t)/Fi,t=>t.getMinutes());o2.range;const l2=Bn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Fi)},(t,e)=>(e-t)/Fi,t=>t.getUTCMinutes());l2.range;const u2=Bn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*rs-t.getMinutes()*Fi)},(t,e)=>{t.setTime(+t+e*is)},(t,e)=>(e-t)/is,t=>t.getHours());u2.range;const c2=Bn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*is)},(t,e)=>(e-t)/is,t=>t.getUTCHours());c2.range;const Yh=Bn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Fi)/ds,t=>t.getDate()-1);Yh.range;const Zg=Bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ds,t=>t.getUTCDate()-1);Zg.range;const M5=Bn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ds,t=>Math.floor(t/ds));M5.range;function xl(t){return Bn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Fi)/s2)}const Jg=xl(0),Vp=xl(1),Gie=xl(2),Wie=xl(3),Hu=xl(4),Xie=xl(5),Kie=xl(6);Jg.range;Vp.range;Gie.range;Wie.range;Hu.range;Xie.range;Kie.range;function vl(t){return Bn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/s2)}const e0=vl(0),Gp=vl(1),Qie=vl(2),Zie=vl(3),zu=vl(4),Jie=vl(5),eae=vl(6);e0.range;Gp.range;Qie.range;Zie.range;zu.range;Jie.range;eae.range;const d2=Bn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());d2.range;const h2=Bn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());h2.range;const hs=Bn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());hs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});hs.range;const fs=Bn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());fs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Bn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});fs.range;function B5(t,e,n,r,i,a){const s=[[qo,1,rs],[qo,5,5*rs],[qo,15,15*rs],[qo,30,30*rs],[a,1,Fi],[a,5,5*Fi],[a,15,15*Fi],[a,30,30*Fi],[i,1,is],[i,3,3*is],[i,6,6*is],[i,12,12*is],[r,1,ds],[r,2,2*ds],[n,1,s2],[e,1,oj],[e,3,3*oj],[t,1,O1]];function l(d,h,p){const b=h<d;b&&([d,h]=[h,d]);const y=p&&typeof p.range=="function"?p:c(d,h,p),x=y?y.range(d,+h+1):[];return b?x.reverse():x}function c(d,h,p){const b=Math.abs(h-d)/p,y=GE(([,,E])=>E).right(s,b);if(y===s.length)return t.every(lw(d/O1,h/O1,p));if(y===0)return Yp.every(Math.max(lw(d,h,p),1));const[x,w]=s[b/s[y-1][2]<s[y][2]/b?y-1:y];return x.every(w)}return[l,c]}const[tae,nae]=B5(fs,h2,e0,M5,c2,l2),[rae,iae]=B5(hs,d2,Jg,Yh,u2,o2);function k1(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function j1(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Td(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function aae(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,l=t.months,c=t.shortMonths,d=_d(i),h=Nd(i),p=_d(a),b=Nd(a),y=_d(s),x=Nd(s),w=_d(l),E=Nd(l),T=_d(c),C=Nd(c),N={a:B,A:re,b:le,B:M,c:null,d:fj,e:fj,f:Cae,g:Bae,G:Uae,H:Tae,I:_ae,j:Nae,L:F5,m:Oae,M:kae,p:U,q:Q,Q:gj,s:bj,S:jae,u:Pae,U:Dae,V:Rae,w:Iae,W:Lae,x:null,X:null,y:Mae,Y:Fae,Z:Hae,"%":pj},P={a:I,A:oe,b:$,B:ie,c:null,d:mj,e:mj,f:Yae,g:tse,G:rse,H:zae,I:$ae,j:qae,L:H5,m:Vae,M:Gae,p:me,q:be,Q:gj,s:bj,S:Wae,u:Xae,U:Kae,V:Qae,w:Zae,W:Jae,x:null,X:null,y:ese,Y:nse,Z:ise,"%":pj},k={a:X,A:z,b:K,B:ce,c:te,d:dj,e:dj,f:wae,g:cj,G:uj,H:hj,I:hj,j:bae,L:vae,m:gae,M:yae,p:Y,q:pae,Q:Aae,s:Sae,S:xae,u:cae,U:dae,V:hae,w:uae,W:fae,x:W,X:R,y:cj,Y:uj,Z:mae,"%":Eae};N.x=j(n,N),N.X=j(r,N),N.c=j(e,N),P.x=j(n,P),P.X=j(r,P),P.c=j(e,P);function j(J,Oe){return function(Be){var se=[],ze=-1,Fe=0,tt=J.length,ee,ye,He;for(Be instanceof Date||(Be=new Date(+Be));++ze<tt;)J.charCodeAt(ze)===37&&(se.push(J.slice(Fe,ze)),(ye=lj[ee=J.charAt(++ze)])!=null?ee=J.charAt(++ze):ye=ee==="e"?" ":"0",(He=Oe[ee])&&(ee=He(Be,ye)),se.push(ee),Fe=ze+1);return se.push(J.slice(Fe,ze)),se.join("")}}function D(J,Oe){return function(Be){var se=Td(1900,void 0,1),ze=H(se,J,Be+="",0),Fe,tt;if(ze!=Be.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(Oe&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Fe=j1(Td(se.y,0,1)),tt=Fe.getUTCDay(),Fe=tt>4||tt===0?Gp.ceil(Fe):Gp(Fe),Fe=Zg.offset(Fe,(se.V-1)*7),se.y=Fe.getUTCFullYear(),se.m=Fe.getUTCMonth(),se.d=Fe.getUTCDate()+(se.w+6)%7):(Fe=k1(Td(se.y,0,1)),tt=Fe.getDay(),Fe=tt>4||tt===0?Vp.ceil(Fe):Vp(Fe),Fe=Yh.offset(Fe,(se.V-1)*7),se.y=Fe.getFullYear(),se.m=Fe.getMonth(),se.d=Fe.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),tt="Z"in se?j1(Td(se.y,0,1)).getUTCDay():k1(Td(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(tt+5)%7:se.w+se.U*7-(tt+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,j1(se)):k1(se)}}function H(J,Oe,Be,se){for(var ze=0,Fe=Oe.length,tt=Be.length,ee,ye;ze<Fe;){if(se>=tt)return-1;if(ee=Oe.charCodeAt(ze++),ee===37){if(ee=Oe.charAt(ze++),ye=k[ee in lj?Oe.charAt(ze++):ee],!ye||(se=ye(J,Be,se))<0)return-1}else if(ee!=Be.charCodeAt(se++))return-1}return se}function Y(J,Oe,Be){var se=d.exec(Oe.slice(Be));return se?(J.p=h.get(se[0].toLowerCase()),Be+se[0].length):-1}function X(J,Oe,Be){var se=y.exec(Oe.slice(Be));return se?(J.w=x.get(se[0].toLowerCase()),Be+se[0].length):-1}function z(J,Oe,Be){var se=p.exec(Oe.slice(Be));return se?(J.w=b.get(se[0].toLowerCase()),Be+se[0].length):-1}function K(J,Oe,Be){var se=T.exec(Oe.slice(Be));return se?(J.m=C.get(se[0].toLowerCase()),Be+se[0].length):-1}function ce(J,Oe,Be){var se=w.exec(Oe.slice(Be));return se?(J.m=E.get(se[0].toLowerCase()),Be+se[0].length):-1}function te(J,Oe,Be){return H(J,e,Oe,Be)}function W(J,Oe,Be){return H(J,n,Oe,Be)}function R(J,Oe,Be){return H(J,r,Oe,Be)}function B(J){return s[J.getDay()]}function re(J){return a[J.getDay()]}function le(J){return c[J.getMonth()]}function M(J){return l[J.getMonth()]}function U(J){return i[+(J.getHours()>=12)]}function Q(J){return 1+~~(J.getMonth()/3)}function I(J){return s[J.getUTCDay()]}function oe(J){return a[J.getUTCDay()]}function $(J){return c[J.getUTCMonth()]}function ie(J){return l[J.getUTCMonth()]}function me(J){return i[+(J.getUTCHours()>=12)]}function be(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var Oe=j(J+="",N);return Oe.toString=function(){return J},Oe},parse:function(J){var Oe=D(J+="",!1);return Oe.toString=function(){return J},Oe},utcFormat:function(J){var Oe=j(J+="",P);return Oe.toString=function(){return J},Oe},utcParse:function(J){var Oe=D(J+="",!0);return Oe.toString=function(){return J},Oe}}}var lj={"-":"",_:" ",0:"0"},Zn=/^\s*\d+/,sae=/^%/,oae=/[\\^$*+?|[\]().{}]/g;function Pt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function lae(t){return t.replace(oae,"\\$&")}function _d(t){return new RegExp("^(?:"+t.map(lae).join("|")+")","i")}function Nd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function uae(t,e,n){var r=Zn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function cae(t,e,n){var r=Zn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function dae(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function hae(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function fae(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function uj(t,e,n){var r=Zn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function cj(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mae(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pae(t,e,n){var r=Zn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function gae(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function dj(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function bae(t,e,n){var r=Zn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function hj(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function yae(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function xae(t,e,n){var r=Zn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function vae(t,e,n){var r=Zn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function wae(t,e,n){var r=Zn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Eae(t,e,n){var r=sae.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Aae(t,e,n){var r=Zn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Sae(t,e,n){var r=Zn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function fj(t,e){return Pt(t.getDate(),e,2)}function Tae(t,e){return Pt(t.getHours(),e,2)}function _ae(t,e){return Pt(t.getHours()%12||12,e,2)}function Nae(t,e){return Pt(1+Yh.count(hs(t),t),e,3)}function F5(t,e){return Pt(t.getMilliseconds(),e,3)}function Cae(t,e){return F5(t,e)+"000"}function Oae(t,e){return Pt(t.getMonth()+1,e,2)}function kae(t,e){return Pt(t.getMinutes(),e,2)}function jae(t,e){return Pt(t.getSeconds(),e,2)}function Pae(t){var e=t.getDay();return e===0?7:e}function Dae(t,e){return Pt(Jg.count(hs(t)-1,t),e,2)}function U5(t){var e=t.getDay();return e>=4||e===0?Hu(t):Hu.ceil(t)}function Rae(t,e){return t=U5(t),Pt(Hu.count(hs(t),t)+(hs(t).getDay()===4),e,2)}function Iae(t){return t.getDay()}function Lae(t,e){return Pt(Vp.count(hs(t)-1,t),e,2)}function Mae(t,e){return Pt(t.getFullYear()%100,e,2)}function Bae(t,e){return t=U5(t),Pt(t.getFullYear()%100,e,2)}function Fae(t,e){return Pt(t.getFullYear()%1e4,e,4)}function Uae(t,e){var n=t.getDay();return t=n>=4||n===0?Hu(t):Hu.ceil(t),Pt(t.getFullYear()%1e4,e,4)}function Hae(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Pt(e/60|0,"0",2)+Pt(e%60,"0",2)}function mj(t,e){return Pt(t.getUTCDate(),e,2)}function zae(t,e){return Pt(t.getUTCHours(),e,2)}function $ae(t,e){return Pt(t.getUTCHours()%12||12,e,2)}function qae(t,e){return Pt(1+Zg.count(fs(t),t),e,3)}function H5(t,e){return Pt(t.getUTCMilliseconds(),e,3)}function Yae(t,e){return H5(t,e)+"000"}function Vae(t,e){return Pt(t.getUTCMonth()+1,e,2)}function Gae(t,e){return Pt(t.getUTCMinutes(),e,2)}function Wae(t,e){return Pt(t.getUTCSeconds(),e,2)}function Xae(t){var e=t.getUTCDay();return e===0?7:e}function Kae(t,e){return Pt(e0.count(fs(t)-1,t),e,2)}function z5(t){var e=t.getUTCDay();return e>=4||e===0?zu(t):zu.ceil(t)}function Qae(t,e){return t=z5(t),Pt(zu.count(fs(t),t)+(fs(t).getUTCDay()===4),e,2)}function Zae(t){return t.getUTCDay()}function Jae(t,e){return Pt(Gp.count(fs(t)-1,t),e,2)}function ese(t,e){return Pt(t.getUTCFullYear()%100,e,2)}function tse(t,e){return t=z5(t),Pt(t.getUTCFullYear()%100,e,2)}function nse(t,e){return Pt(t.getUTCFullYear()%1e4,e,4)}function rse(t,e){var n=t.getUTCDay();return t=n>=4||n===0?zu(t):zu.ceil(t),Pt(t.getUTCFullYear()%1e4,e,4)}function ise(){return"+0000"}function pj(){return"%"}function gj(t){return+t}function bj(t){return Math.floor(+t/1e3)}var cu,$5,q5;ase({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ase(t){return cu=aae(t),$5=cu.format,cu.parse,q5=cu.utcFormat,cu.utcParse,cu}function sse(t){return new Date(t)}function ose(t){return t instanceof Date?+t:+new Date(+t)}function f2(t,e,n,r,i,a,s,l,c,d){var h=JE(),p=h.invert,b=h.domain,y=d(".%L"),x=d(":%S"),w=d("%I:%M"),E=d("%I %p"),T=d("%a %d"),C=d("%b %d"),N=d("%B"),P=d("%Y");function k(j){return(c(j)<j?y:l(j)<j?x:s(j)<j?w:a(j)<j?E:r(j)<j?i(j)<j?T:C:n(j)<j?N:P)(j)}return h.invert=function(j){return new Date(p(j))},h.domain=function(j){return arguments.length?b(Array.from(j,ose)):b().map(sse)},h.ticks=function(j){var D=b();return t(D[0],D[D.length-1],j??10)},h.tickFormat=function(j,D){return D==null?k:d(D)},h.nice=function(j){var D=b();return(!j||typeof j.range!="function")&&(j=e(D[0],D[D.length-1],j??10)),j?b(k5(D,j)):h},h.copy=function(){return qh(h,f2(t,e,n,r,i,a,s,l,c,d))},h}function lse(){return Vi.apply(f2(rae,iae,hs,d2,Jg,Yh,u2,o2,qo,$5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function use(){return Vi.apply(f2(tae,nae,fs,h2,e0,Zg,c2,l2,qo,q5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function t0(){var t=0,e=1,n,r,i,a,s=_r,l=!1,c;function d(p){return p==null||isNaN(p=+p)?c:s(i===0?.5:(p=(a(p)-n)*i,l?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(p){return arguments.length?(l=!!p,d):l},d.interpolator=function(p){return arguments.length?(s=p,d):s};function h(p){return function(b){var y,x;return arguments.length?([y,x]=b,s=p(y,x),d):[s(0),s(1)]}}return d.range=h(ac),d.rangeRound=h(ZE),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return a=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),d}}function po(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Y5(){var t=mo(t0()(_r));return t.copy=function(){return po(t,Y5())},ys.apply(t,arguments)}function V5(){var t=n2(t0()).domain([1,10]);return t.copy=function(){return po(t,V5()).base(t.base())},ys.apply(t,arguments)}function G5(){var t=r2(t0());return t.copy=function(){return po(t,G5()).constant(t.constant())},ys.apply(t,arguments)}function m2(){var t=i2(t0());return t.copy=function(){return po(t,m2()).exponent(t.exponent())},ys.apply(t,arguments)}function cse(){return m2.apply(null,arguments).exponent(.5)}function W5(){var t=[],e=_r;function n(r){if(r!=null&&!isNaN(r=+r))return e((zh(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ao),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Xre(t,a/r))},n.copy=function(){return W5(e).domain(t)},ys.apply(n,arguments)}function n0(){var t=0,e=.5,n=1,r=1,i,a,s,l,c,d=_r,h,p=!1,b;function y(w){return isNaN(w=+w)?b:(w=.5+((w=+h(w))-a)*(r*w<r*a?l:c),d(p?Math.max(0,Math.min(1,w)):w))}y.domain=function(w){return arguments.length?([t,e,n]=w,i=h(t=+t),a=h(e=+e),s=h(n=+n),l=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y):[t,e,n]},y.clamp=function(w){return arguments.length?(p=!!w,y):p},y.interpolator=function(w){return arguments.length?(d=w,y):d};function x(w){return function(E){var T,C,N;return arguments.length?([T,C,N]=E,d=Eie(w,[T,C,N]),y):[d(0),d(.5),d(1)]}}return y.range=x(ac),y.rangeRound=x(ZE),y.unknown=function(w){return arguments.length?(b=w,y):b},function(w){return h=w,i=w(t),a=w(e),s=w(n),l=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,y}}function X5(){var t=mo(n0()(_r));return t.copy=function(){return po(t,X5())},ys.apply(t,arguments)}function K5(){var t=n2(n0()).domain([.1,1,10]);return t.copy=function(){return po(t,K5()).base(t.base())},ys.apply(t,arguments)}function Q5(){var t=r2(n0());return t.copy=function(){return po(t,Q5()).constant(t.constant())},ys.apply(t,arguments)}function p2(){var t=i2(n0());return t.copy=function(){return po(t,p2()).exponent(t.exponent())},ys.apply(t,arguments)}function dse(){return p2.apply(null,arguments).exponent(.5)}const Rd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:XE,scaleDiverging:X5,scaleDivergingLog:K5,scaleDivergingPow:p2,scaleDivergingSqrt:dse,scaleDivergingSymlog:Q5,scaleIdentity:O5,scaleImplicit:uw,scaleLinear:C5,scaleLog:j5,scaleOrdinal:WE,scalePoint:Zre,scalePow:a2,scaleQuantile:R5,scaleQuantize:I5,scaleRadial:D5,scaleSequential:Y5,scaleSequentialLog:V5,scaleSequentialPow:m2,scaleSequentialQuantile:W5,scaleSequentialSqrt:cse,scaleSequentialSymlog:G5,scaleSqrt:Yie,scaleSymlog:P5,scaleThreshold:L5,scaleTime:lse,scaleUtc:use,tickFormat:N5},Symbol.toStringTag,{value:"Module"}));var go=t=>t.chartData,hse=Se([go],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),g2=(t,e,n,r)=>r?hse(t):go(t);function ul(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Qn(e)&&Qn(n))return!0}return!1}function yj(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Z5(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(Qn(n))i=n;else if(typeof n=="function")return;if(Qn(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(ul(s))return s}}function fse(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(ul(r))return yj(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,l;if(i==="auto")e!=null&&(s=Math.min(...e));else if(et(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e?.[0]))}catch{}else if(typeof i=="string"&&Z3.test(i)){var c=Z3.exec(i);if(c==null||e==null)s=void 0;else{var d=+c[1];s=e[0]-d}}else s=e?.[0];if(a==="auto")e!=null&&(l=Math.max(...e));else if(et(a))l=a;else if(typeof a=="function")try{e!=null&&(l=a(e?.[1]))}catch{}else if(typeof a=="string"&&J3.test(a)){var h=J3.exec(a);if(h==null||e==null)l=void 0;else{var p=+h[1];l=e[1]+p}}else l=e?.[1];var b=[s,l];if(ul(b))return e==null?b:yj(b,e,n)}}}var sc=1e9,mse={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},y2,cn=!0,$i="[DecimalError] ",nl=$i+"Invalid argument: ",b2=$i+"Exponent out of range: ",oc=Math.floor,Mo=Math.pow,pse=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pi,Wn=1e7,rn=7,J5=9007199254740991,Wp=oc(J5/rn),qe={};qe.absoluteValue=qe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};qe.comparedTo=qe.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};qe.decimalPlaces=qe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*rn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};qe.dividedBy=qe.div=function(t){return os(this,new this.constructor(t))};qe.dividedToIntegerBy=qe.idiv=function(t){var e=this,n=e.constructor;return Kt(os(e,new n(t),0,1),n.precision)};qe.equals=qe.eq=function(t){return!this.cmp(t)};qe.exponent=function(){return Pn(this)};qe.greaterThan=qe.gt=function(t){return this.cmp(t)>0};qe.greaterThanOrEqualTo=qe.gte=function(t){return this.cmp(t)>=0};qe.isInteger=qe.isint=function(){return this.e>this.d.length-2};qe.isNegative=qe.isneg=function(){return this.s<0};qe.isPositive=qe.ispos=function(){return this.s>0};qe.isZero=function(){return this.s===0};qe.lessThan=qe.lt=function(t){return this.cmp(t)<0};qe.lessThanOrEqualTo=qe.lte=function(t){return this.cmp(t)<1};qe.logarithm=qe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(pi))throw Error($i+"NaN");if(n.s<1)throw Error($i+(n.s?"NaN":"-Infinity"));return n.eq(pi)?new r(0):(cn=!1,e=os(gh(n,a),gh(t,a),a),cn=!0,Kt(e,i))};qe.minus=qe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?nL(e,t):eL(e,(t.s=-t.s,t))};qe.modulo=qe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error($i+"NaN");return n.s?(cn=!1,e=os(n,t,0,1).times(t),cn=!0,n.minus(e)):Kt(new r(n),i)};qe.naturalExponential=qe.exp=function(){return tL(this)};qe.naturalLogarithm=qe.ln=function(){return gh(this)};qe.negated=qe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};qe.plus=qe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?eL(e,t):nL(e,(t.s=-t.s,t))};qe.precision=qe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(nl+t);if(e=Pn(i)+1,r=i.d.length-1,n=r*rn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};qe.squareRoot=qe.sqrt=function(){var t,e,n,r,i,a,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error($i+"NaN")}for(t=Pn(l),cn=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=wa(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=oc((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(os(l,a,s+2)).times(.5),wa(a.d).slice(0,s)===(e=wa(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(Kt(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(e!="9999")break;s+=4}return cn=!0,Kt(r,n)};qe.times=qe.mul=function(t){var e,n,r,i,a,s,l,c,d,h=this,p=h.constructor,b=h.d,y=(t=new p(t)).d;if(!h.s||!t.s)return new p(0);for(t.s*=h.s,n=h.e+t.e,c=b.length,d=y.length,c<d&&(a=b,b=y,y=a,s=c,c=d,d=s),a=[],s=c+d,r=s;r--;)a.push(0);for(r=d;--r>=0;){for(e=0,i=c+r;i>r;)l=a[i]+y[r]*b[i-r-1]+e,a[i--]=l%Wn|0,e=l/Wn|0;a[i]=(a[i]+e)%Wn|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,cn?Kt(t,p.precision):t};qe.toDecimalPlaces=qe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Oa(t,0,sc),e===void 0?e=r.rounding:Oa(e,0,8),Kt(n,t+Pn(n)+1,e))};qe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=cl(r,!0):(Oa(t,0,sc),e===void 0?e=i.rounding:Oa(e,0,8),r=Kt(new i(r),t+1,e),n=cl(r,!0,t+1)),n};qe.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?cl(i):(Oa(t,0,sc),e===void 0?e=a.rounding:Oa(e,0,8),r=Kt(new a(i),t+Pn(i)+1,e),n=cl(r.abs(),!1,t+Pn(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};qe.toInteger=qe.toint=function(){var t=this,e=t.constructor;return Kt(new e(t),Pn(t)+1,e.rounding)};qe.toNumber=function(){return+this};qe.toPower=qe.pow=function(t){var e,n,r,i,a,s,l=this,c=l.constructor,d=12,h=+(t=new c(t));if(!t.s)return new c(pi);if(l=new c(l),!l.s){if(t.s<1)throw Error($i+"Infinity");return l}if(l.eq(pi))return l;if(r=c.precision,t.eq(pi))return Kt(l,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=l.s,s){if((n=h<0?-h:h)<=J5){for(i=new c(pi),e=Math.ceil(r/rn+4),cn=!1;n%2&&(i=i.times(l),vj(i.d,e)),n=oc(n/2),n!==0;)l=l.times(l),vj(l.d,e);return cn=!0,t.s<0?new c(pi).div(i):Kt(i,r)}}else if(a<0)throw Error($i+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,cn=!1,i=t.times(gh(l,r+d)),cn=!0,i=tL(i),i.s=a,i};qe.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Pn(i),r=cl(i,n<=a.toExpNeg||n>=a.toExpPos)):(Oa(t,1,sc),e===void 0?e=a.rounding:Oa(e,0,8),i=Kt(new a(i),t,e),n=Pn(i),r=cl(i,t<=n||n<=a.toExpNeg,t)),r};qe.toSignificantDigits=qe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Oa(t,1,sc),e===void 0?e=r.rounding:Oa(e,0,8)),Kt(new r(n),t,e)};qe.toString=qe.valueOf=qe.val=qe.toJSON=qe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Pn(t),n=t.constructor;return cl(t,e<=n.toExpNeg||e>=n.toExpPos)};function eL(t,e){var n,r,i,a,s,l,c,d,h=t.constructor,p=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),cn?Kt(e,p):e;if(c=t.d,d=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,l=d.length):(r=d,i=s,l=c.length),s=Math.ceil(p/rn),l=s>l?s+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,r=d,d=c,c=r),n=0;a;)n=(c[--a]=c[a]+d[a]+n)/Wn|0,c[a]%=Wn;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,cn?Kt(e,p):e}function Oa(t,e,n){if(t!==~~t||t<e||t>n)throw Error(nl+t)}function wa(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=rn-r.length,n&&(a+=Js(n)),a+=r;s=t[e],r=s+"",n=rn-r.length,n&&(a+=Js(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var os=(function(){function t(r,i){var a,s=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+s,r[l]=a%Wn|0,s=a/Wn|0;return s&&r.unshift(s),r}function e(r,i,a,s){var l,c;if(a!=s)c=a>s?1:-1;else for(l=c=0;l<a;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*Wn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var l,c,d,h,p,b,y,x,w,E,T,C,N,P,k,j,D,H,Y=r.constructor,X=r.s==i.s?1:-1,z=r.d,K=i.d;if(!r.s)return new Y(r);if(!i.s)throw Error($i+"Division by zero");for(c=r.e-i.e,D=K.length,k=z.length,y=new Y(X),x=y.d=[],d=0;K[d]==(z[d]||0);)++d;if(K[d]>(z[d]||0)&&--c,a==null?C=a=Y.precision:s?C=a+(Pn(r)-Pn(i))+1:C=a,C<0)return new Y(0);if(C=C/rn+2|0,d=0,D==1)for(h=0,K=K[0],C++;(d<k||h)&&C--;d++)N=h*Wn+(z[d]||0),x[d]=N/K|0,h=N%K|0;else{for(h=Wn/(K[0]+1)|0,h>1&&(K=t(K,h),z=t(z,h),D=K.length,k=z.length),P=D,w=z.slice(0,D),E=w.length;E<D;)w[E++]=0;H=K.slice(),H.unshift(0),j=K[0],K[1]>=Wn/2&&++j;do h=0,l=e(K,w,D,E),l<0?(T=w[0],D!=E&&(T=T*Wn+(w[1]||0)),h=T/j|0,h>1?(h>=Wn&&(h=Wn-1),p=t(K,h),b=p.length,E=w.length,l=e(p,w,b,E),l==1&&(h--,n(p,D<b?H:K,b))):(h==0&&(l=h=1),p=K.slice()),b=p.length,b<E&&p.unshift(0),n(w,p,E),l==-1&&(E=w.length,l=e(K,w,D,E),l<1&&(h++,n(w,D<E?H:K,E))),E=w.length):l===0&&(h++,w=[0]),x[d++]=h,l&&w[0]?w[E++]=z[P]||0:(w=[z[P]],E=1);while((P++<k||w[0]!==void 0)&&C--)}return x[0]||x.shift(),y.e=c,Kt(y,s?a+Pn(y)+1:a)}})();function tL(t,e){var n,r,i,a,s,l,c=0,d=0,h=t.constructor,p=h.precision;if(Pn(t)>16)throw Error(b2+Pn(t));if(!t.s)return new h(pi);for(cn=!1,l=p,s=new h(.03125);t.abs().gte(.1);)t=t.times(s),d+=5;for(r=Math.log(Mo(2,d))/Math.LN10*2+5|0,l+=r,n=i=a=new h(pi),h.precision=l;;){if(i=Kt(i.times(t),l),n=n.times(++c),s=a.plus(os(i,n,l)),wa(s.d).slice(0,l)===wa(a.d).slice(0,l)){for(;d--;)a=Kt(a.times(a),l);return h.precision=p,e==null?(cn=!0,Kt(a,p)):a}a=s}}function Pn(t){for(var e=t.e*rn,n=t.d[0];n>=10;n/=10)e++;return e}function P1(t,e,n){if(e>t.LN10.sd())throw cn=!0,n&&(t.precision=n),Error($i+"LN10 precision limit exceeded");return Kt(new t(t.LN10),e)}function Js(t){for(var e="";t--;)e+="0";return e}function gh(t,e){var n,r,i,a,s,l,c,d,h,p=1,b=10,y=t,x=y.d,w=y.constructor,E=w.precision;if(y.s<1)throw Error($i+(y.s?"NaN":"-Infinity"));if(y.eq(pi))return new w(0);if(e==null?(cn=!1,d=E):d=e,y.eq(10))return e==null&&(cn=!0),P1(w,d);if(d+=b,w.precision=d,n=wa(x),r=n.charAt(0),a=Pn(y),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)y=y.times(t),n=wa(y.d),r=n.charAt(0),p++;a=Pn(y),r>1?(y=new w("0."+n),a++):y=new w(r+"."+n.slice(1))}else return c=P1(w,d+2,E).times(a+""),y=gh(new w(r+"."+n.slice(1)),d-b).plus(c),w.precision=E,e==null?(cn=!0,Kt(y,E)):y;for(l=s=y=os(y.minus(pi),y.plus(pi),d),h=Kt(y.times(y),d),i=3;;){if(s=Kt(s.times(h),d),c=l.plus(os(s,new w(i),d)),wa(c.d).slice(0,d)===wa(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(P1(w,d+2,E).times(a+""))),l=os(l,new w(p),d),w.precision=E,e==null?(cn=!0,Kt(l,E)):l;l=c,i+=2}}function xj(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=oc(n/rn),t.d=[],r=(n+1)%rn,n<0&&(r+=rn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=rn;r<i;)t.d.push(+e.slice(r,r+=rn));e=e.slice(r),r=rn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),cn&&(t.e>Wp||t.e<-Wp))throw Error(b2+n)}else t.s=0,t.e=0,t.d=[0];return t}function Kt(t,e,n){var r,i,a,s,l,c,d,h,p=t.d;for(s=1,a=p[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=rn,i=e,d=p[h=0];else{if(h=Math.ceil((r+1)/rn),a=p.length,h>=a)return t;for(d=a=p[h],s=1;a>=10;a/=10)s++;r%=rn,i=r-rn+s}if(n!==void 0&&(a=Mo(10,s-i-1),l=d/a%10|0,c=e<0||p[h+1]!==void 0||d%a,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?d/Mo(10,s-i):0:p[h-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return c?(a=Pn(t),p.length=1,e=e-a-1,p[0]=Mo(10,(rn-e%rn)%rn),t.e=oc(-e/rn)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=h,a=1,h--):(p.length=h+1,a=Mo(10,rn-r),p[h]=i>0?(d/Mo(10,s-i)%Mo(10,i)|0)*a:0),c)for(;;)if(h==0){(p[0]+=a)==Wn&&(p[0]=1,++t.e);break}else{if(p[h]+=a,p[h]!=Wn)break;p[h--]=0,a=1}for(r=p.length;p[--r]===0;)p.pop();if(cn&&(t.e>Wp||t.e<-Wp))throw Error(b2+Pn(t));return t}function nL(t,e){var n,r,i,a,s,l,c,d,h,p,b=t.constructor,y=b.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new b(t),cn?Kt(e,y):e;if(c=t.d,p=e.d,r=e.e,d=t.e,c=c.slice(),s=d-r,s){for(h=s<0,h?(n=c,s=-s,l=p.length):(n=p,r=d,l=c.length),i=Math.max(Math.ceil(y/rn),l)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=p.length,h=i<l,h&&(l=i),i=0;i<l;i++)if(c[i]!=p[i]){h=c[i]<p[i];break}s=0}for(h&&(n=c,c=p,p=n,e.s=-e.s),l=c.length,i=p.length-l;i>0;--i)c[l++]=0;for(i=p.length;i>s;){if(c[--i]<p[i]){for(a=i;a&&c[--a]===0;)c[a]=Wn-1;--c[a],c[i]+=Wn}c[i]-=p[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,cn?Kt(e,y):e):new b(0)}function cl(t,e,n){var r,i=Pn(t),a=wa(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Js(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Js(-i-1)+a,n&&(r=n-s)>0&&(a+=Js(r))):i>=s?(a+=Js(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Js(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Js(r))),t.s<0?"-"+a:a}function vj(t,e){if(t.length>e)return t.length=e,!0}function rL(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(nl+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return xj(s,a.toString())}else if(typeof a!="string")throw Error(nl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,pse.test(a))xj(s,a);else throw Error(nl+a)}if(i.prototype=qe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=rL,i.config=i.set=gse,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function gse(t){if(!t||typeof t!="object")throw Error($i+"Object expected");var e,n,r,i=["precision",1,sc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(oc(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(nl+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(nl+n+": "+r);return this}var y2=rL(mse);pi=new y2(1);const zt=y2;var bse=t=>t,iL={},aL=t=>t===iL,wj=t=>function e(){return arguments.length===0||arguments.length===1&&aL(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},sL=(t,e)=>t===1?e:wj(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==iL).length;return a>=t?e(...r):sL(t-a,wj(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=r.map(h=>aL(h)?l.shift():h);return e(...d,...l)}))}),r0=t=>sL(t.length,t),fw=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},yse=r0((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),xse=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return bse;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((l,c)=>c(l),a(...arguments))}},mw=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),oL=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e&&i.every((s,l)=>{var c;return s===((c=e)===null||c===void 0?void 0:c[l])})||(e=i,n=t(...i)),n}};function lL(t){var e;return t===0?e=1:e=Math.floor(new zt(t).abs().log(10).toNumber())+1,e}function uL(t,e,n){for(var r=new zt(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}r0((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});r0((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});r0((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var cL=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},dL=(t,e,n)=>{if(t.lte(0))return new zt(0);var r=lL(t.toNumber()),i=new zt(10).pow(r),a=t.div(i),s=r!==1?.05:.1,l=new zt(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=l.mul(i);return e?new zt(c.toNumber()):new zt(Math.ceil(c.toNumber()))},vse=(t,e,n)=>{var r=new zt(1),i=new zt(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new zt(10).pow(lL(t)-1),i=new zt(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new zt(Math.floor(t)))}else t===0?i=new zt(Math.floor((e-1)/2)):n||(i=new zt(Math.floor(t)));var s=Math.floor((e-1)/2),l=xse(yse(c=>i.add(new zt(c-s).mul(r)).toNumber()),fw);return l(0,e)},hL=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new zt(0),tickMin:new zt(0),tickMax:new zt(0)};var s=dL(new zt(n).sub(e).div(r-1),i,a),l;e<=0&&n>=0?l=new zt(0):(l=new zt(e).add(n).div(2),l=l.sub(new zt(l).mod(s)));var c=Math.ceil(l.sub(e).div(s).toNumber()),d=Math.ceil(new zt(n).sub(l).div(s).toNumber()),h=c+d+1;return h>r?hL(e,n,r,i,a+1):(h<r&&(d=n>0?d+(r-h):d,c=n>0?c:c+(r-h)),{step:s,tickMin:l.sub(new zt(c).mul(s)),tickMax:l.add(new zt(d).mul(s))})};function wse(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[s,l]=cL([e,n]);if(s===-1/0||l===1/0){var c=l===1/0?[s,...fw(0,r-1).map(()=>1/0)]:[...fw(0,r-1).map(()=>-1/0),l];return e>n?mw(c):c}if(s===l)return vse(s,r,i);var{step:d,tickMin:h,tickMax:p}=hL(s,l,a,i,0),b=uL(h,p.add(new zt(.1).mul(d)),d);return e>n?mw(b):b}function Ese(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,s]=cL([n,r]);if(a===-1/0||s===1/0)return[n,r];if(a===s)return[a];var l=Math.max(e,2),c=dL(new zt(s).sub(a).div(l-1),i,0),d=[...uL(new zt(a),new zt(s),c),s];return i===!1&&(d=d.map(h=>Math.round(h))),n>r?mw(d):d}var Ase=oL(wse),Sse=oL(Ese),Tse=t=>t.rootProps.barCategoryGap,i0=t=>t.rootProps.stackOffset,x2=t=>t.options.chartName,v2=t=>t.rootProps.syncId,fL=t=>t.rootProps.syncMethod,w2=t=>t.options.eventEmitter,Nr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},es={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},mi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},a0=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},_se={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:es.angleAxisId,includeHidden:!1,name:void 0,reversed:es.reversed,scale:es.scale,tick:es.tick,tickCount:void 0,ticks:void 0,type:es.type,unit:void 0},Nse={allowDataOverflow:mi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mi.scale,tick:mi.tick,tickCount:mi.tickCount,ticks:void 0,type:mi.type,unit:void 0},Cse={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:es.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:es.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:es.scale,tick:es.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Ose={allowDataOverflow:mi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mi.scale,tick:mi.tick,tickCount:mi.tickCount,ticks:void 0,type:"category",unit:void 0},E2=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Cse:_se,A2=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Ose:Nse,s0=t=>t.polarOptions,S2=Se([gs,bs,cr],Are),mL=Se([s0,S2],(t,e)=>{if(t!=null)return uo(t.innerRadius,e,0)}),pL=Se([s0,S2],(t,e)=>{if(t!=null)return uo(t.outerRadius,e,e*.8)}),kse=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},gL=Se([s0],kse);Se([E2,gL],a0);var bL=Se([S2,mL,pL],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});Se([A2,bL],a0);var yL=Se([an,s0,mL,pL,gs,bs],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:l,startAngle:c,endAngle:d}=e;return{cx:uo(s,i,i/2),cy:uo(l,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:d,clockWise:!1}}}),Fn=(t,e)=>e,o0=(t,e,n)=>n;function xL(t){return t?.id}function vL(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(l=>{var c,d=(c=l.data)!==null&&c!==void 0?c:r;if(!(d==null||d.length===0)){var h=xL(l);d.forEach((p,b)=>{var y=a==null||i?b:String(Or(p,a,null)),x=Or(p,l.dataKey,0),w;s.has(y)?w=s.get(y):w={},Object.assign(w,{[h]:x}),s.set(y,w)})}}),Array.from(s.values())}function T2(t){return t.stackId!=null&&t.dataKey!=null}var l0=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function u0(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function jse(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Un=t=>{var e=an(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},lc=t=>t.tooltip.settings.axisId;function Ej(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ej(Object(n),!0).forEach(function(r){Pse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ej(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pse(t,e,n){return(e=Dse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dse(t){var e=Rse(t,"string");return typeof e=="symbol"?e:e+""}function Rse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pw=[0,"auto"],ci={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},wL=(t,e)=>t.cartesianAxis.xAxis[e],xs=(t,e)=>{var n=wL(t,e);return n??ci},di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:pw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Hh},EL=(t,e)=>t.cartesianAxis.yAxis[e],vs=(t,e)=>{var n=EL(t,e);return n??di},Ise={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},_2=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Ise},jr=(t,e,n)=>{switch(e){case"xAxis":return xs(t,n);case"yAxis":return vs(t,n);case"zAxis":return _2(t,n);case"angleAxis":return E2(t,n);case"radiusAxis":return A2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Lse=(t,e,n)=>{switch(e){case"xAxis":return xs(t,n);case"yAxis":return vs(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Vh=(t,e,n)=>{switch(e){case"xAxis":return xs(t,n);case"yAxis":return vs(t,n);case"angleAxis":return E2(t,n);case"radiusAxis":return A2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},AL=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function SL(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var TL=t=>t.graphicalItems.cartesianItems,Mse=Se([Fn,o0],SL),_L=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Gh=Se([TL,jr,Mse],_L,{memoizeOptions:{resultEqualityCheck:u0}}),NL=Se([Gh],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(T2)),CL=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Bse=Se([Gh],CL),OL=t=>t.map(e=>e.data).filter(Boolean).flat(1),Fse=Se([Gh],OL,{memoizeOptions:{resultEqualityCheck:u0}}),kL=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},N2=Se([Fse,g2],kL),jL=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:Or(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:Or(i,r)}))):t.map(r=>({value:r})),c0=Se([N2,jr,Gh],jL);function PL(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function np(t){if(Na(t)||t instanceof Date){var e=Number(t);if(Qn(e))return e}}function Aj(t){if(Array.isArray(t)){var e=[np(t[0]),np(t[1])];return ul(e)?e:void 0}var n=np(t);if(n!=null)return[n,n]}function ms(t){return t.map(np).filter(GZ)}function Use(t,e,n){return!n||typeof e!="number"||_a(e)?[]:n.length?ms(n.flatMap(r=>{var i=Or(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Qn(a)||!Qn(s)))return[e-a,e+s]})):[]}var Hn=t=>{var e=Un(t),n=lc(t);return Vh(t,e,n)},DL=Se([Hn],t=>t?.dataKey),Hse=Se([NL,g2,Hn],vL),RL=(t,e,n)=>{var r={},i=e.reduce((a,s)=>(s.stackId==null||(a[s.stackId]==null&&(a[s.stackId]=[]),a[s.stackId].push(s)),a),r);return Object.fromEntries(Object.entries(i).map(a=>{var[s,l]=a,c=l.map(xL);return[s,{stackedData:fte(t,c,n),graphicalItems:l}]}))},zse=Se([Hse,NL,i0],RL),IL=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=gte(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},$se=Se([jr],t=>t.allowDataOverflow),C2=t=>{var e;if(t==null||!("domain"in t))return pw;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=ms(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:pw},LL=Se([jr],C2),ML=Se([LL,$se],Z5),qse=Se([zse,go,Fn,ML],IL,{memoizeOptions:{resultEqualityCheck:l0}}),O2=t=>t.errorBars,Yse=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>PL(n,r)),Kp=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),l=Math.max(...a);return[s,l]}},BL=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(l=>{n.forEach(c=>{var d,h,p=(d=r[c.id])===null||d===void 0?void 0:d.filter(T=>PL(i,T)),b=Or(l,(h=e.dataKey)!==null&&h!==void 0?h:c.dataKey),y=Use(l,b,p);if(y.length>=2){var x=Math.min(...y),w=Math.max(...y);(a==null||x<a)&&(a=x),(s==null||w>s)&&(s=w)}var E=Aj(b);E!=null&&(a=a==null?E[0]:Math.min(a,E[0]),s=s==null?E[1]:Math.max(s,E[1]))})}),e?.dataKey!=null&&t.forEach(l=>{var c=Aj(Or(l,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Qn(a)&&Qn(s))return[a,s]},Vse=Se([N2,jr,Bse,O2,Fn],BL,{memoizeOptions:{resultEqualityCheck:l0}});function Gse(t){var{value:e}=t;if(Na(e)||e instanceof Date)return e}var Wse=(t,e,n)=>{var r=t.map(Gse).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&nI(r))?b5(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},FL=t=>t.referenceElements.dots,uc=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Xse=Se([FL,Fn,o0],uc),UL=t=>t.referenceElements.areas,Kse=Se([UL,Fn,o0],uc),HL=t=>t.referenceElements.lines,Qse=Se([HL,Fn,o0],uc),zL=(t,e)=>{var n=ms(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Zse=Se(Xse,Fn,zL),$L=(t,e)=>{var n=ms(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Jse=Se([Kse,Fn],$L);function eoe(t){var e;if(t.x!=null)return ms([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:ms(n)}function toe(t){var e;if(t.y!=null)return ms([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:ms(n)}var qL=(t,e)=>{var n=t.flatMap(r=>e==="xAxis"?eoe(r):toe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},noe=Se([Qse,Fn],qL),roe=Se(Zse,noe,Jse,(t,e,n)=>Kp(t,n,e)),YL=(t,e,n,r,i,a,s,l)=>{if(n!=null)return n;var c=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",d=c?Kp(r,a,i):Kp(a,i);return fse(e,d,t.allowDataOverflow)},ioe=Se([jr,LL,ML,qse,Vse,roe,an,Fn],YL,{memoizeOptions:{resultEqualityCheck:l0}}),aoe=[0,1],VL=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:l,type:c}=t,d=fo(e,a);if(d&&l==null){var h;return b5(0,(h=n?.length)!==null&&h!==void 0?h:0)}return c==="category"?Wse(r,t,d):i==="expand"?aoe:s}},k2=Se([jr,an,N2,c0,i0,Fn,ioe],VL),GL=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var l="scale".concat(Bh(a));return l in Rd?l:"point"}}},Wh=Se([jr,an,AL,x2,Fn],GL);function soe(t){if(t!=null){if(t in Rd)return Rd[t]();var e="scale".concat(Bh(t));if(e in Rd)return Rd[e]()}}function j2(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=soe(e);if(i!=null){var a=i.domain(n).range(r);return ute(a),a}}}var WL=(t,e,n)=>{var r=C2(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ul(t))return Ase(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&ul(t))return Sse(t,e.tickCount,e.allowDecimals)}},P2=Se([k2,Vh,Wh],WL),XL=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&ul(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],l=n[n.length-1];return[Math.min(i,a),Math.max(s,l)]}return e},ooe=Se([jr,k2,P2,Fn],XL),loe=Se(c0,jr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(ms(t.map(l=>l.value))).sort((l,c)=>l-c);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var s=r[a+1]-r[a];n=Math.min(n,s)}return n/i}}),KL=Se(loe,an,Tse,cr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Qn(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=uo(n,t*a),l=t*a/2;return l-s-(l-s)/a*s}return 0}),uoe=(t,e)=>{var n=xs(t,e);return n==null||typeof n.padding!="string"?0:KL(t,"xAxis",e,n.padding)},coe=(t,e)=>{var n=vs(t,e);return n==null||typeof n.padding!="string"?0:KL(t,"yAxis",e,n.padding)},doe=Se(xs,uoe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),hoe=Se(vs,coe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),foe=Se([cr,doe,Gg,Vg,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),moe=Se([cr,an,hoe,Gg,Vg,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Xh=(t,e,n,r)=>{var i;switch(e){case"xAxis":return foe(t,n,r);case"yAxis":return moe(t,n,r);case"zAxis":return(i=_2(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return gL(t);case"radiusAxis":return bL(t,n);default:return}},QL=Se([jr,Xh],a0),cc=Se([jr,Wh,ooe,QL],j2);Se([Gh,O2,Fn],Yse);function ZL(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var d0=(t,e)=>e,h0=(t,e,n)=>n,poe=Se(qg,d0,h0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(ZL)),goe=Se(Yg,d0,h0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(ZL)),JL=(t,e)=>({width:t.width,height:e.height}),boe=(t,e)=>{var n=typeof e.width=="number"?e.width:Hh;return{width:n,height:t.height}},yoe=Se(cr,xs,JL),xoe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},voe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},woe=Se(bs,cr,poe,d0,h0,(t,e,n,r,i)=>{var a={},s;return n.forEach(l=>{var c=JL(e,l);s==null&&(s=xoe(e,r,t));var d=r==="top"&&!i||r==="bottom"&&i;a[l.id]=s-Number(d)*c.height,s+=(d?-1:1)*c.height}),a}),Eoe=Se(gs,cr,goe,d0,h0,(t,e,n,r,i)=>{var a={},s;return n.forEach(l=>{var c=boe(e,l);s==null&&(s=voe(e,r,t));var d=r==="left"&&!i||r==="right"&&i;a[l.id]=s-Number(d)*c.width,s+=(d?-1:1)*c.width}),a}),Aoe=(t,e)=>{var n=xs(t,e);if(n!=null)return woe(t,n.orientation,n.mirror)},Soe=Se([cr,xs,Aoe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Toe=(t,e)=>{var n=vs(t,e);if(n!=null)return Eoe(t,n.orientation,n.mirror)},_oe=Se([cr,vs,Toe,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n?.[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Noe=Se(cr,vs,(t,e)=>{var n=typeof e.width=="number"?e.width:Hh;return{width:n,height:t.height}}),eM=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,l=fo(t,r),c=e.map(d=>d.value);if(s&&l&&a==="category"&&i&&nI(c))return c}},D2=Se([an,c0,jr,Fn],eM),tM=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=fo(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(l=>l.value)}},R2=Se([an,c0,Vh,Fn],tM),Sj=Se([an,Lse,Wh,cc,D2,R2,Xh,P2,Fn],(t,e,n,r,i,a,s,l,c)=>{if(e!=null){var d=fo(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:d,niceTicks:l,range:s,realScaleType:n,scale:r}}}),Coe=(t,e,n,r,i,a,s,l,c)=>{if(!(e==null||r==null)){var d=fo(t,c),{type:h,ticks:p,tickCount:b}=e,y=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,x=h==="category"&&r.bandwidth?r.bandwidth()/y:0;x=c==="angleAxis"&&a!=null&&a.length>=2?Bi(a[0]-a[1])*2*x:x;var w=p||i;if(w){var E=w.map((T,C)=>{var N=s?s.indexOf(T):T;return{index:C,coordinate:r(N)+x,value:T,offset:x}});return E.filter(T=>Qn(T.coordinate))}return d&&l?l.map((T,C)=>({coordinate:r(T)+x,value:T,index:C,offset:x})).filter(T=>Qn(T.coordinate)):r.ticks?r.ticks(b).map(T=>({coordinate:r(T)+x,value:T,offset:x})):r.domain().map((T,C)=>({coordinate:r(T)+x,value:s?s[T]:T,index:C,offset:x}))}},nM=Se([an,Vh,Wh,cc,P2,Xh,D2,R2,Fn],Coe),Ooe=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var l=fo(t,s),{tickCount:c}=e,d=0;return d=s==="angleAxis"&&r?.length>=2?Bi(r[0]-r[1])*2*d:d,l&&a?a.map((h,p)=>({coordinate:n(h)+d,value:h,index:p,offset:d})):n.ticks?n.ticks(c).map(h=>({coordinate:n(h)+d,value:h,offset:d})):n.domain().map((h,p)=>({coordinate:n(h)+d,value:i?i[h]:h,index:p,offset:d}))}},rM=Se([an,Vh,cc,Xh,D2,R2,Fn],Ooe),iM=Se(jr,cc,(t,e)=>{if(!(t==null||e==null))return Xp(Xp({},t),{},{scale:e})}),koe=Se([jr,Wh,k2,QL],j2);Se((t,e,n)=>_2(t,n),koe,(t,e)=>{if(!(t==null||e==null))return Xp(Xp({},t),{},{scale:e})});var joe=Se([an,qg,Yg],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),aM=t=>t.options.defaultTooltipEventType,sM=t=>t.options.validateTooltipEventTypes;function oM(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function I2(t,e){var n=aM(t),r=sM(t);return oM(e,n,r)}function Poe(t){return Qe(e=>I2(e,t))}var lM=(t,e)=>{var n,r=Number(e);if(!(_a(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Doe=t=>t.tooltip.settings,no={active:!1,index:null,dataKey:void 0,coordinate:void 0},Roe={itemInteraction:{click:no,hover:no},axisInteraction:{click:no,hover:no},keyboardInteraction:no,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},uM=Jr({name:"tooltip",initialState:Roe,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Mn()},removeTooltipEntrySettings:{reducer(t,e){var n=ss(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Mn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Ioe,removeTooltipEntrySettings:Loe,setTooltipSettingsState:Moe,setActiveMouseOverItemIndex:Boe,mouseLeaveItem:Ipe,mouseLeaveChart:cM,setActiveClickItemIndex:Lpe,setMouseOverAxisIndex:dM,setMouseClickAxisIndex:Foe,setSyncInteraction:gw,setKeyboardInteraction:bw}=uM.actions,Uoe=uM.reducer;function Tj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tj(Object(n),!0).forEach(function(r){Hoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hoe(t,e,n){return(e=zoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zoe(t){var e=$oe(t,"string");return typeof e=="symbol"?e:e+""}function $oe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qoe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Yoe(t){return t.index!=null}var hM=(t,e,n,r)=>{if(e==null)return no;var i=qoe(t,e,n);if(i==null)return no;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(Yoe(i)){if(a)return Hm(Hm({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Hm(Hm({},no),{},{coordinate:i.coordinate})},L2=(t,e)=>{var n=t?.index;if(n==null)return null;var r=Number(n);if(!Qn(r))return n;var i=0,a=1/0;return e.length>0&&(a=e.length-1),String(Math.max(i,Math.min(r,a)))},fM=(t,e,n,r,i,a,s,l)=>{if(!(a==null||l==null)){var c=s[0],d=c==null?void 0:l(c.positions,a);if(d!=null)return d;var h=i?.[Number(a)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:h.coordinate}}}},mM=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},Kh=t=>t.options.tooltipPayloadSearcher,dc=t=>t.tooltip;function _j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_j(Object(n),!0).forEach(function(r){Voe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Voe(t,e,n){return(e=Goe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Goe(t){var e=Woe(t,"string");return typeof e=="symbol"?e:e+""}function Woe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xoe(t,e){return t??e}var pM=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:h}=n,p=[];return t.reduce((b,y)=>{var x,{dataDefinedOnItem:w,settings:E}=y,T=Xoe(w,l),C=Array.isArray(T)?WI(T,d,h):T,N=(x=E?.dataKey)!==null&&x!==void 0?x:r,P=E?.nameKey,k;if(r&&Array.isArray(C)&&!Array.isArray(C[0])&&s==="axis"?k=rI(C,r,i):k=a(C,e,c,P),Array.isArray(k))k.forEach(D=>{var H=Nj(Nj({},E),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});b.push(ek({tooltipEntrySettings:H,dataKey:D.dataKey,payload:D.payload,value:Or(D.payload,D.dataKey),name:D.name}))});else{var j;b.push(ek({tooltipEntrySettings:E,dataKey:N,payload:k,value:Or(k,N),name:(j=Or(k,P))!==null&&j!==void 0?j:E?.name}))}return b},p)}},M2=Se([Hn,an,AL,x2,Un],GL),Koe=Se([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Qoe=Se([Un,lc],SL),Qh=Se([Koe,Hn,Qoe],_L,{memoizeOptions:{resultEqualityCheck:u0}}),Zoe=Se([Qh],t=>t.filter(T2)),Joe=Se([Qh],OL,{memoizeOptions:{resultEqualityCheck:u0}}),hc=Se([Joe,go],kL),ele=Se([Zoe,go,Hn],vL),B2=Se([hc,Hn,Qh],jL),gM=Se([Hn],C2),tle=Se([Hn],t=>t.allowDataOverflow),bM=Se([gM,tle],Z5),nle=Se([Qh],t=>t.filter(T2)),rle=Se([ele,nle,i0],RL),ile=Se([rle,go,Un,bM],IL),ale=Se([Qh],CL),sle=Se([hc,Hn,ale,O2,Un],BL,{memoizeOptions:{resultEqualityCheck:l0}}),ole=Se([FL,Un,lc],uc),lle=Se([ole,Un],zL),ule=Se([UL,Un,lc],uc),cle=Se([ule,Un],$L),dle=Se([HL,Un,lc],uc),hle=Se([dle,Un],qL),fle=Se([lle,hle,cle],Kp),mle=Se([Hn,gM,bM,ile,sle,fle,an,Un],YL),yM=Se([Hn,an,hc,B2,i0,Un,mle],VL),ple=Se([yM,Hn,M2],WL),gle=Se([Hn,yM,ple,Un],XL),xM=t=>{var e=Un(t),n=lc(t),r=!1;return Xh(t,e,n,r)},vM=Se([Hn,xM],a0),wM=Se([Hn,M2,gle,vM],j2),ble=Se([an,B2,Hn,Un],eM),yle=Se([an,B2,Hn,Un],tM),xle=(t,e,n,r,i,a,s,l)=>{if(e){var{type:c}=e,d=fo(t,l);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=c==="category"&&r.bandwidth?r.bandwidth()/h:0;return p=l==="angleAxis"&&i!=null&&i?.length>=2?Bi(i[0]-i[1])*2*p:p,d&&s?s.map((b,y)=>({coordinate:r(b)+p,value:b,index:y,offset:p})):r.domain().map((b,y)=>({coordinate:r(b)+p,value:a?a[b]:b,index:y,offset:p}))}}},ws=Se([an,Hn,M2,wM,xM,ble,yle,Un],xle),F2=Se([aM,sM,Doe],(t,e,n)=>oM(n.shared,t,e)),EM=t=>t.tooltip.settings.trigger,U2=t=>t.tooltip.settings.defaultIndex,f0=Se([dc,F2,EM,U2],hM),bh=Se([f0,hc],L2),AM=Se([ws,bh],lM),vle=Se([f0],t=>{if(t)return t.dataKey}),SM=Se([dc,F2,EM,U2],mM),wle=Se([gs,bs,an,cr,ws,U2,SM,Kh],fM),Ele=Se([f0,wle],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Ale=Se([f0],t=>t.active),Sle=Se([SM,bh,go,DL,AM,Kh,F2],pM),Tle=Se([Sle],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function Cj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cj(Object(n),!0).forEach(function(r){_le(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _le(t,e,n){return(e=Nle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nle(t){var e=Cle(t,"string");return typeof e=="symbol"?e:e+""}function Cle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ole=()=>Qe(Hn),kle=()=>{var t=Ole(),e=Qe(ws),n=Qe(wM);return Pp(!t||!n?void 0:Oj(Oj({},t),{},{scale:n}),e)};function kj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function du(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kj(Object(n),!0).forEach(function(r){jle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jle(t,e,n){return(e=Ple(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ple(t){var e=Dle(t,"string");return typeof e=="symbol"?e:e+""}function Dle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rle=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Ile=(t,e,n,r)=>{var i=e.find(d=>d&&d.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return du(du(du({},r),lr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var l=i.coordinate,{angle:c}=r;return du(du(du({},r),lr(r.cx,r.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Lle(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var TM=(t,e,n,r,i)=>{var a,s=-1,l=(a=e?.length)!==null&&a!==void 0?a:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?n[c-1].coordinate:n[l-1].coordinate,h=n[c].coordinate,p=c>=l-1?n[0].coordinate:n[c+1].coordinate,b=void 0;if(Bi(h-d)!==Bi(p-h)){var y=[];if(Bi(p-h)===Bi(i[1]-i[0])){b=p;var x=h+i[1]-i[0];y[0]=Math.min(x,(x+d)/2),y[1]=Math.max(x,(x+d)/2)}else{b=d;var w=p+i[1]-i[0];y[0]=Math.min(h,(w+h)/2),y[1]=Math.max(h,(w+h)/2)}var E=[Math.min(h,(b+h)/2),Math.max(h,(b+h)/2)];if(t>E[0]&&t<=E[1]||t>=y[0]&&t<=y[1]){({index:s}=n[c]);break}}else{var T=Math.min(d,p),C=Math.max(d,p);if(t>(T+h)/2&&t<=(C+h)/2){({index:s}=n[c]);break}}}else if(e){for(var N=0;N<l;N++)if(N===0&&t<=(e[N].coordinate+e[N+1].coordinate)/2||N>0&&N<l-1&&t>(e[N].coordinate+e[N-1].coordinate)/2&&t<=(e[N].coordinate+e[N+1].coordinate)/2||N===l-1&&t>(e[N].coordinate+e[N-1].coordinate)/2){({index:s}=e[N]);break}}return s},Mle=()=>Qe(x2),H2=(t,e)=>e,_M=(t,e,n)=>n,z2=(t,e,n,r)=>r,Ble=Se(ws,t=>Bg(t,e=>e.coordinate)),$2=Se([dc,H2,_M,z2],hM),NM=Se([$2,hc],L2),Fle=(t,e,n)=>{if(e!=null){var r=dc(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},CM=Se([dc,H2,_M,z2],mM),Qp=Se([gs,bs,an,cr,ws,z2,CM,Kh],fM),Ule=Se([$2,Qp],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),OM=Se([ws,NM],lM),Hle=Se([CM,NM,go,DL,OM,Kh,H2],pM),zle=Se([$2],t=>({isActive:t.active,activeIndex:t.index})),$le=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&Lle(t,s)){var l=bte(t,e),c=TM(l,a,i,n,r),d=Rle(e,i,c,t);return{activeIndex:String(c),activeCoordinate:d}}},qle=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var l=Cre(t,n);if(l){var c=yte(l,e),d=TM(c,s,a,r,i),h=Ile(e,a,d,l);return{activeIndex:String(d),activeCoordinate:h}}}},Yle=(t,e,n,r,i,a,s,l)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?$le(t,e,r,i,a,s,l):qle(t,e,n,r,i,a,s)},Vle=Se(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElementId:r.elementId}}),Gle=Se(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Nr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:jse}});function jj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jj(Object(n),!0).forEach(function(r){Wle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wle(t,e,n){return(e=Xle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xle(t){var e=Kle(t,"string");return typeof e=="symbol"?e:e+""}function Kle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qle={},Zle={zIndexMap:Object.values(Nr).reduce((t,e)=>Pj(Pj({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),Qle)},Jle=new Set(Object.values(Nr));function eue(t){return Jle.has(t)}var kM=Jr({name:"zIndex",initialState:Zle,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Mn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!eue(n)&&delete t.zIndexMap[n])},prepare:Mn()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElementId=r:t.zIndexMap[n].elementId=r:t.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:Mn()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:Mn()}}}),{registerZIndexPortal:tue,unregisterZIndexPortal:nue,registerZIndexPortalId:rue,unregisterZIndexPortalId:iue}=kM.actions,aue=kM.reducer;function Es(t){var{zIndex:e,children:n}=t,r=Zte(),i=r&&e!==void 0&&e!==0,a=ei(),s=Dn();A.useLayoutEffect(()=>i?(s(tue({zIndex:e})),()=>{s(nue({zIndex:e}))}):rc,[s,e,i]);var l=Qe(d=>Vle(d,e,a));if(!i)return n;if(!l)return null;var c=document.getElementById(l);return c?Mw.createPortal(n,c):null}function yw(){return yw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yw.apply(null,arguments)}function Dj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dj(Object(n),!0).forEach(function(r){sue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sue(t,e,n){return(e=oue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oue(t){var e=lue(t,"string");return typeof e=="symbol"?e:e+""}function lue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uue(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return A.isValidElement(e)?A.cloneElement(e,r):A.createElement(n,r)}function cue(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:l,cursor:c,tooltipEventType:d,chartName:h}=t,p=n,b=r,y=i;if(!c||!p||h!=="ScatterChart"&&d!=="axis")return null;var x,w,E;if(h==="ScatterChart")x=p,w=$ne,E=Nr.cursorLine;else if(h==="BarChart")x=qne(l,p,a,s),w=f5,E=Nr.cursorRectangle;else if(l==="radial"&&aI(p)){var{cx:T,cy:C,radius:N,startAngle:P,endAngle:k}=m5(p);x={cx:T,cy:C,startAngle:P,endAngle:k,innerRadius:N,outerRadius:N},w=g5,E=Nr.cursorLine}else x={points:Pre(l,p,a)},w=l5,E=Nr.cursorLine;var j=typeof c=="object"&&"className"in c?c.className:void 0,D=zm(zm(zm(zm({stroke:"#ccc",pointerEvents:"none"},a),x),Dg(c)),{},{payload:b,payloadIndex:y,className:Gt("recharts-tooltip-cursor",j)});return A.createElement(Es,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:E},A.createElement(uue,{cursor:c,cursorComp:w,cursorProps:D}))}function due(t){var e=kle(),n=i5(),r=Xg(),i=Mle();return e==null||n==null||r==null||i==null?null:A.createElement(cue,yw({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var jM=A.createContext(null),hue=()=>A.useContext(jM),D1={exports:{}},Rj;function fue(){return Rj||(Rj=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,d,h){this.fn=c,this.context=d,this.once=h||!1}function a(c,d,h,p,b){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new i(h,p||c,b),x=n?n+d:d;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],y]:c._events[x].push(y):(c._events[x]=y,c._eventsCount++),c}function s(c,d){--c._eventsCount===0?c._events=new r:delete c._events[d]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},l.prototype.listeners=function(d){var h=n?n+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var b=0,y=p.length,x=new Array(y);b<y;b++)x[b]=p[b].fn;return x},l.prototype.listenerCount=function(d){var h=n?n+d:d,p=this._events[h];return p?p.fn?1:p.length:0},l.prototype.emit=function(d,h,p,b,y,x){var w=n?n+d:d;if(!this._events[w])return!1;var E=this._events[w],T=arguments.length,C,N;if(E.fn){switch(E.once&&this.removeListener(d,E.fn,void 0,!0),T){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,h),!0;case 3:return E.fn.call(E.context,h,p),!0;case 4:return E.fn.call(E.context,h,p,b),!0;case 5:return E.fn.call(E.context,h,p,b,y),!0;case 6:return E.fn.call(E.context,h,p,b,y,x),!0}for(N=1,C=new Array(T-1);N<T;N++)C[N-1]=arguments[N];E.fn.apply(E.context,C)}else{var P=E.length,k;for(N=0;N<P;N++)switch(E[N].once&&this.removeListener(d,E[N].fn,void 0,!0),T){case 1:E[N].fn.call(E[N].context);break;case 2:E[N].fn.call(E[N].context,h);break;case 3:E[N].fn.call(E[N].context,h,p);break;case 4:E[N].fn.call(E[N].context,h,p,b);break;default:if(!C)for(k=1,C=new Array(T-1);k<T;k++)C[k-1]=arguments[k];E[N].fn.apply(E[N].context,C)}}return!0},l.prototype.on=function(d,h,p){return a(this,d,h,p,!1)},l.prototype.once=function(d,h,p){return a(this,d,h,p,!0)},l.prototype.removeListener=function(d,h,p,b){var y=n?n+d:d;if(!this._events[y])return this;if(!h)return s(this,y),this;var x=this._events[y];if(x.fn)x.fn===h&&(!b||x.once)&&(!p||x.context===p)&&s(this,y);else{for(var w=0,E=[],T=x.length;w<T;w++)(x[w].fn!==h||b&&!x[w].once||p&&x[w].context!==p)&&E.push(x[w]);E.length?this._events[y]=E.length===1?E[0]:E:s(this,y)}return this},l.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&s(this,h)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(D1)),D1.exports}var mue=fue();const pue=Ji(mue);var yh=new pue,xw="recharts.syncEvent.tooltip",Ij="recharts.syncEvent.brush";function gue(t,e){if(e){var n=Number.parseInt(e,10);if(!_a(n))return t?.[n]}}var bue={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},PM=Jr({name:"options",initialState:bue,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),yue=PM.reducer,{createEventEmitter:xue}=PM.actions;function vue(t){return t.tooltip.syncInteraction}var wue={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},DM=Jr({name:"chartData",initialState:wue,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:Lj,setDataStartEndIndexes:Eue,setComputedData:Mpe}=DM.actions,Aue=DM.reducer,Sue=["x","y"];function Mj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mj(Object(n),!0).forEach(function(r){Tue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tue(t,e,n){return(e=_ue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ue(t){var e=Nue(t,"string");return typeof e=="symbol"?e:e+""}function Nue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cue(t,e){if(t==null)return{};var n,r,i=Oue(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Oue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function kue(){var t=Qe(v2),e=Qe(w2),n=Dn(),r=Qe(fL),i=Qe(ws),a=Xg(),s=Wg(),l=Qe(c=>c.rootProps.className);A.useEffect(()=>{if(t==null)return rc;var c=(d,h,p)=>{if(e!==p&&t===d){if(r==="index"){var b;if(s&&h!==null&&h!==void 0&&(b=h.payload)!==null&&b!==void 0&&b.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x,y:w}=y,E=Cue(y,Sue),{x:T,y:C,width:N,height:P}=h.payload.sourceViewBox,k=hu(hu({},E),{},{x:s.x+(N?(x-T)/N:0)*s.width,y:s.y+(P?(w-C)/P:0)*s.height});n(hu(hu({},h),{},{payload:hu(hu({},h.payload),{},{coordinate:k})}))}else n(h);return}if(i!=null){var j;if(typeof r=="function"){var D={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},H=r(i,D);j=i[H]}else r==="value"&&(j=i.find(R=>String(R.value)===h.payload.label));var{coordinate:Y}=h.payload;if(j==null||h.payload.active===!1||Y==null||s==null){n(gw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:X,y:z}=Y,K=Math.min(X,s.x+s.width),ce=Math.min(z,s.y+s.height),te={x:a==="horizontal"?j.coordinate:K,y:a==="horizontal"?ce:j.coordinate},W=gw({active:h.payload.active,coordinate:te,dataKey:h.payload.dataKey,index:String(j.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox});n(W)}}};return yh.on(xw,c),()=>{yh.off(xw,c)}},[l,n,e,t,r,i,a,s])}function jue(){var t=Qe(v2),e=Qe(w2),n=Dn();A.useEffect(()=>{if(t==null)return rc;var r=(i,a,s)=>{e!==s&&t===i&&n(Eue(a))};return yh.on(Ij,r),()=>{yh.off(Ij,r)}},[n,e,t])}function Pue(){var t=Dn();A.useEffect(()=>{t(xue())},[t]),kue(),jue()}function Due(t,e,n,r,i,a){var s=Qe(y=>Fle(y,t,e)),l=Qe(w2),c=Qe(v2),d=Qe(fL),h=Qe(vue),p=h?.active,b=Wg();A.useEffect(()=>{if(!p&&c!=null&&l!=null){var y=gw({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:b});yh.emit(xw,c,y,l)}},[p,n,s,i,r,l,c,d,a,b])}function Bj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bj(Object(n),!0).forEach(function(r){Rue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rue(t,e,n){return(e=Iue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iue(t){var e=Lue(t,"string");return typeof e=="symbol"?e:e+""}function Lue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mue(t){return t.dataKey}function Bue(t,e){return A.isValidElement(t)?A.cloneElement(t,e):typeof t=="function"?A.createElement(t,e):A.createElement(wne,e)}var Uj=[],Fue={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!ic.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Uue(t){var e,n,r=xr(t,Fue),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:l,content:c,filterNull:d,isAnimationActive:h,offset:p,payloadUniqBy:b,position:y,reverseDirection:x,useTranslate3d:w,wrapperStyle:E,cursor:T,shared:C,trigger:N,defaultIndex:P,portal:k,axisId:j}=r,D=Dn(),H=typeof P=="number"?String(P):P;A.useEffect(()=>{D(Moe({shared:C,trigger:N,axisId:j,active:i,defaultIndex:H}))},[D,C,N,j,i,H]);var Y=Wg(),X=o5(),z=Poe(C),{activeIndex:K,isActive:ce}=(e=Qe(me=>zle(me,z,N,H)))!==null&&e!==void 0?e:{},te=Qe(me=>Hle(me,z,N,H)),W=Qe(me=>OM(me,z,N,H)),R=Qe(me=>Ule(me,z,N,H)),B=te,re=hue(),le=(n=i??ce)!==null&&n!==void 0?n:!1,[M,U]=wI([B,le]),Q=z==="axis"?W:void 0;Due(z,N,R,Q,K,le);var I=k??re;if(I==null||Y==null||z==null)return null;var oe=B??Uj;le||(oe=Uj),d&&oe.length&&(oe=gI(oe.filter(me=>me.value!=null&&(me.hide!==!0||r.includeHidden)),b,Mue));var $=oe.length>0,ie=A.createElement(Cne,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:h,active:le,coordinate:R,hasPayload:$,offset:p,position:y,reverseDirection:x,useTranslate3d:w,viewBox:Y,wrapperStyle:E,lastBoundingBox:M,innerRef:U,hasPortalFromProps:!!k},Bue(c,Fj(Fj({},r),{},{payload:oe,label:Q,active:le,activeIndex:K,coordinate:R,accessibilityLayer:X})));return A.createElement(A.Fragment,null,Mw.createPortal(ie,I),le&&A.createElement(due,{cursor:T,tooltipEventType:z,coordinate:R,payload:oe,index:K}))}function Hue(t,e,n){return(e=zue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zue(t){var e=$ue(t,"string");return typeof e=="symbol"?e:e+""}function $ue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class que{constructor(e){Hue(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function Hj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hj(Object(n),!0).forEach(function(r){Vue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vue(t,e,n){return(e=Gue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gue(t){var e=Wue(t,"string");return typeof e=="symbol"?e:e+""}function Wue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xue={cacheSize:2e3,enableCache:!0},RM=Yue({},Xue),zj=new que(RM.cacheSize),Kue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$j="recharts_measurement_span";function Que(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(l)}var qj=(t,e)=>{try{var n=document.getElementById($j);n||(n=document.createElement("span"),n.setAttribute("id",$j),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Kue,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Vd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||ic.isSsr)return{width:0,height:0};if(!RM.enableCache)return qj(e,n);var r=Que(e,n),i=zj.get(r);if(i)return i;var a=qj(e,n);return zj.set(r,a),a},Yj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Vj=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Zue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,IM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ece=Object.keys(IM),wu="NaN";function tce(t,e){return t*IM[e]}class Yr{static parse(e){var n,[,r,i]=(n=Jue.exec(e))!==null&&n!==void 0?n:[];return new Yr(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,_a(e)&&(this.unit=""),n!==""&&!Zue.test(n)&&(this.num=NaN,this.unit=""),ece.includes(n)&&(this.num=tce(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Yr(NaN,""):new Yr(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return _a(this.num)}}function LM(t){if(t.includes(wu))return wu;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=Yj.exec(e))!==null&&n!==void 0?n:[],s=Yr.parse(r??""),l=Yr.parse(a??""),c=i==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return wu;e=e.replace(Yj,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,h,p,b]=(d=Vj.exec(e))!==null&&d!==void 0?d:[],y=Yr.parse(h??""),x=Yr.parse(b??""),w=p==="+"?y.add(x):y.subtract(x);if(w.isNaN())return wu;e=e.replace(Vj,w.toString())}return e}var Gj=/\(([^()]*)\)/;function nce(t){for(var e=t,n;(n=Gj.exec(e))!=null;){var[,r]=n;e=e.replace(Gj,LM(r))}return e}function rce(t){var e=t.replace(/\s+/g,"");return e=nce(e),e=LM(e),e}function ice(t){try{return rce(t)}catch{return wu}}function R1(t){var e=ice(t.slice(5,-1));return e===wu?"":e}var ace=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],sce=["dx","dy","angle","className","breakAll"];function vw(){return vw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vw.apply(null,arguments)}function Wj(t,e){if(t==null)return{};var n,r,i=oce(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var MM=/[ \f\n\r\t\v\u2028\u2029]+/,BM=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Kn(e)||(n?i=e.toString().split(""):i=e.toString().split(MM));var a=i.map(l=>({word:l,width:Vd(l,r).width})),s=n?0:Vd("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function lce(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var FM=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:l}=a,c=i[i.length-1];if(c&&l!=null&&(e==null||r||c.width+l+n<Number(e)))c.words.push(s),c.width+=l+n;else{var d={words:[s],width:l};i.push(d)}return i},[]),UM=t=>t.reduce((e,n)=>e.width>n.width?e:n),uce="",Xj=(t,e,n,r,i,a,s,l)=>{var c=t.slice(0,e),d=BM({breakAll:n,style:r,children:c+uce});if(!d)return[!1,[]];var h=FM(d.wordsWithComputedWidth,a,s,l),p=h.length>i||UM(h).width>Number(a);return[p,h]},cce=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:l,breakAll:c}=t,d=et(a),h=String(s),p=FM(e,r,n,i);if(!d||i)return p;var b=p.length>a||UM(p).width>Number(r);if(!b)return p;for(var y=0,x=h.length-1,w=0,E;y<=x&&w<=h.length-1;){var T=Math.floor((y+x)/2),C=T-1,[N,P]=Xj(h,C,c,l,a,r,n,i),[k]=Xj(h,T,c,l,a,r,n,i);if(!N&&!k&&(y=T+1),N&&k&&(x=T-1),!N&&k){E=P;break}w++}return E||p},Kj=t=>{var e=Kn(t)?[]:t.toString().split(MM);return[{words:e,width:void 0}]},dce=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!ic.isSsr){var l,c,d=BM({breakAll:a,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:p}=d;l=h,c=p}else return Kj(r);return cce({breakAll:a,children:r,maxLines:s,style:i},l,c,e,!!n)}return Kj(r)},HM="#808080",hce={breakAll:!1,capHeight:"0.71em",fill:HM,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},q2=A.forwardRef((t,e)=>{var n=xr(t,hce),{x:r,y:i,lineHeight:a,capHeight:s,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:h}=n,p=Wj(n,ace),b=A.useMemo(()=>dce({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:y,dy:x,angle:w,className:E,breakAll:T}=p,C=Wj(p,sce);if(!Na(r)||!Na(i)||b.length===0)return null;var N=Number(r)+(et(y)?y:0),P=Number(i)+(et(x)?x:0);if(!Qn(N)||!Qn(P))return null;var k;switch(h){case"start":k=R1("calc(".concat(s,")"));break;case"middle":k=R1("calc(".concat((b.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:k=R1("calc(".concat(b.length-1," * -").concat(a,")"));break}var j=[];if(c){var D=b[0].width,{width:H}=p;j.push("scale(".concat(et(H)&&et(D)?H/D:1,")"))}return w&&j.push("rotate(".concat(w,", ").concat(N,", ").concat(P,")")),j.length&&(C.transform=j.join(" ")),A.createElement("text",vw({},kr(C),{ref:e,x:N,y:P,className:Gt("recharts-text",E),textAnchor:d,fill:l.includes("url")?HM:l}),b.map((Y,X)=>{var z=Y.words.join(T?"":" ");return A.createElement("tspan",{x:N,dy:X===0?k:a,key:"".concat(z,"-").concat(X)},z)}))});q2.displayName="Text";var fce=["labelRef"];function mce(t,e){if(t==null)return{};var n,r,i=pce(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Qj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qj(Object(n),!0).forEach(function(r){gce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gce(t,e,n){return(e=bce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bce(t){var e=yce(t,"string");return typeof e=="symbol"?e:e+""}function yce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ts(){return ts=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ts.apply(null,arguments)}var zM=A.createContext(null),xce=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:l}=t,c=A.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return A.createElement(zM.Provider,{value:c},l)},$M=()=>{var t=A.useContext(zM),e=Wg();return t||r5(e)},vce=A.createContext(null),wce=()=>{var t=A.useContext(vce),e=Qe(yL);return t||e},Ece=t=>{var{value:e,formatter:n}=t,r=Kn(t.children)?e:t.children;return typeof n=="function"?n(r):r},Y2=t=>t!=null&&typeof t=="function",Ace=(t,e)=>{var n=Bi(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Sce=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:l,cy:c,innerRadius:d,outerRadius:h,startAngle:p,endAngle:b,clockWise:y}=i,x=(d+h)/2,w=Ace(p,b),E=w>=0?1:-1,T,C;switch(e){case"insideStart":T=p+E*a,C=y;break;case"insideEnd":T=b-E*a,C=!y;break;case"end":T=b+E*a,C=y;break;default:throw new Error("Unsupported position ".concat(e))}C=w<=0?C:!C;var N=lr(l,c,x,T),P=lr(l,c,x,T+(C?1:-1)*359),k="M".concat(N.x,",").concat(N.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(C?0:1,`,
    `).concat(P.x,",").concat(P.y),j=Kn(t.id)?oh("recharts-radial-line-"):t.id;return A.createElement("text",ts({},r,{dominantBaseline:"central",className:Gt("recharts-radial-bar-label",s)}),A.createElement("defs",null,A.createElement("path",{id:j,d:k})),A.createElement("textPath",{xlinkHref:"#".concat(j)},n))},Tce=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:l,endAngle:c}=t,d=(l+c)/2;if(n==="outside"){var{x:h,y:p}=lr(r,i,s+e,d);return{x:h,y:p,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var b=(a+s)/2,{x:y,y:x}=lr(r,i,b,d);return{x:y,y:x,textAnchor:"middle",verticalAnchor:"middle"}},ww=t=>"cx"in t&&et(t.cx),_ce=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!ww(n)&&(a=n);var{x:s,y:l,upperWidth:c,lowerWidth:d,height:h}=e,p=s,b=s+(c-d)/2,y=(p+b)/2,x=(c+d)/2,w=p+c/2,E=h>=0?1:-1,T=E*r,C=E>0?"end":"start",N=E>0?"start":"end",P=c>=0?1:-1,k=P*r,j=P>0?"end":"start",D=P>0?"start":"end";if(i==="top"){var H={x:p+c/2,y:l-T,textAnchor:"middle",verticalAnchor:C};return wn(wn({},H),a?{height:Math.max(l-a.y,0),width:c}:{})}if(i==="bottom"){var Y={x:b+d/2,y:l+h+T,textAnchor:"middle",verticalAnchor:N};return wn(wn({},Y),a?{height:Math.max(a.y+a.height-(l+h),0),width:d}:{})}if(i==="left"){var X={x:y-k,y:l+h/2,textAnchor:j,verticalAnchor:"middle"};return wn(wn({},X),a?{width:Math.max(X.x-a.x,0),height:h}:{})}if(i==="right"){var z={x:y+x+k,y:l+h/2,textAnchor:D,verticalAnchor:"middle"};return wn(wn({},z),a?{width:Math.max(a.x+a.width-z.x,0),height:h}:{})}var K=a?{width:x,height:h}:{};return i==="insideLeft"?wn({x:y+k,y:l+h/2,textAnchor:D,verticalAnchor:"middle"},K):i==="insideRight"?wn({x:y+x-k,y:l+h/2,textAnchor:j,verticalAnchor:"middle"},K):i==="insideTop"?wn({x:p+c/2,y:l+T,textAnchor:"middle",verticalAnchor:N},K):i==="insideBottom"?wn({x:b+d/2,y:l+h-T,textAnchor:"middle",verticalAnchor:C},K):i==="insideTopLeft"?wn({x:p+k,y:l+T,textAnchor:D,verticalAnchor:N},K):i==="insideTopRight"?wn({x:p+c-k,y:l+T,textAnchor:j,verticalAnchor:N},K):i==="insideBottomLeft"?wn({x:b+k,y:l+h-T,textAnchor:D,verticalAnchor:C},K):i==="insideBottomRight"?wn({x:b+d-k,y:l+h-T,textAnchor:j,verticalAnchor:C},K):i&&typeof i=="object"&&(et(i.x)||us(i.x))&&(et(i.y)||us(i.y))?wn({x:s+uo(i.x,x),y:l+uo(i.y,h),textAnchor:"end",verticalAnchor:"end"},K):wn({x:w,y:l+h/2,textAnchor:"middle",verticalAnchor:"middle"},K)},Nce={offset:5,zIndex:Nr.label};function eo(t){var e=xr(t,Nce),{viewBox:n,position:r,value:i,children:a,content:s,className:l="",textBreakAll:c,labelRef:d}=e,h=wce(),p=$M(),b=r==="center"?p:h??p,y,x,w;if(n==null?y=b:ww(n)?y=n:y=r5(n),!y||Kn(i)&&Kn(a)&&!A.isValidElement(s)&&typeof s!="function")return null;var E=wn(wn({},e),{},{viewBox:y});if(A.isValidElement(s)){var{labelRef:T}=E,C=mce(E,fce);return A.cloneElement(s,C)}if(typeof s=="function"){if(x=A.createElement(s,E),A.isValidElement(x))return x}else x=Ece(e);var N=kr(e);if(ww(y)){if(r==="insideStart"||r==="insideEnd"||r==="end")return Sce(e,r,x,N,y);w=Tce(y,e.offset,e.position)}else w=_ce(e,y);return A.createElement(Es,{zIndex:e.zIndex},A.createElement(q2,ts({ref:d,className:Gt("recharts-label",l)},N,w,{textAnchor:lce(N.textAnchor)?N.textAnchor:w.textAnchor,breakAll:c}),x))}eo.displayName="Label";var Cce=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?A.createElement(eo,ts({key:"label-implicit"},r)):Na(t)?A.createElement(eo,ts({key:"label-implicit",value:t},r)):A.isValidElement(t)?t.type===eo?A.cloneElement(t,wn({key:"label-implicit"},r)):A.createElement(eo,ts({key:"label-implicit",content:t},r)):Y2(t)?A.createElement(eo,ts({key:"label-implicit",content:t},r)):t&&typeof t=="object"?A.createElement(eo,ts({},t,{key:"label-implicit"},r)):null};function Oce(t){var{label:e,labelRef:n}=t,r=$M();return Cce(e,r,n)||null}var I1={},L1={},Zj;function kce(){return Zj||(Zj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(L1)),L1}var M1={},Jj;function jce(){return Jj||(Jj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(M1)),M1}var eP;function Pce(){return eP||(eP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=kce(),n=jce(),r=IE();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(I1)),I1}var B1,tP;function Dce(){return tP||(tP=1,B1=Pce().last),B1}var Rce=Dce();const Ice=Ji(Rce);var Lce=["valueAccessor"],Mce=["dataKey","clockWise","id","textBreakAll","zIndex"];function Zp(){return Zp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zp.apply(null,arguments)}function nP(t,e){if(t==null)return{};var n,r,i=Bce(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Bce(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Fce=t=>Array.isArray(t.value)?Ice(t.value):t.value,qM=A.createContext(void 0),Uce=qM.Provider,YM=A.createContext(void 0);YM.Provider;function Hce(){return A.useContext(qM)}function zce(){return A.useContext(YM)}function rp(t){var{valueAccessor:e=Fce}=t,n=nP(t,Lce),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:l}=n,c=nP(n,Mce),d=Hce(),h=zce(),p=d||h;return!p||!p.length?null:A.createElement(Es,{zIndex:l??Nr.label},A.createElement(lo,{className:"recharts-label-list"},p.map((b,y)=>{var x,w=Kn(r)?e(b,y):Or(b&&b.payload,r),E=Kn(a)?{}:{id:"".concat(a,"-").concat(y)};return A.createElement(eo,Zp({key:"label-".concat(y)},kr(b),c,E,{fill:(x=n.fill)!==null&&x!==void 0?x:b.fill,parentViewBox:b.parentViewBox,value:w,textBreakAll:s,viewBox:b.viewBox,index:y,zIndex:0}))})))}rp.displayName="LabelList";function $ce(t){var{label:e}=t;return e?e===!0?A.createElement(rp,{key:"labelList-implicit"}):A.isValidElement(e)||Y2(e)?A.createElement(rp,{key:"labelList-implicit",content:e}):typeof e=="object"?A.createElement(rp,Zp({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function Ew(){return Ew=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ew.apply(null,arguments)}var VM=t=>{var{cx:e,cy:n,r,className:i}=t,a=Gt("recharts-dot",i);return et(e)&&et(n)&&et(r)?A.createElement("circle",Ew({},Ta(t),RE(t),{className:a,cx:e,cy:n,r})):null},qce={radiusAxis:{},angleAxis:{}},GM=Jr({name:"polarAxis",initialState:qce,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Bpe,removeRadiusAxis:Fpe,addAngleAxis:Upe,removeAngleAxis:Hpe}=GM.actions,Yce=GM.reducer,WM=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,F1={},rP;function Vce(){return rP||(rP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(F1)),F1}var U1,iP;function Gce(){return iP||(iP=1,U1=Vce().isPlainObject),U1}var Wce=Gce();const Xce=Ji(Wce);function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(n),!0).forEach(function(r){Kce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kce(t,e,n){return(e=Qce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qce(t){var e=Zce(t,"string");return typeof e=="symbol"?e:e+""}function Zce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jp(){return Jp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jp.apply(null,arguments)}var oP=(t,e,n,r,i)=>{var a=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-a/2,",").concat(e+i),s+="L ".concat(t+n-a/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},Jce={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ede=t=>{var e=xr(t,Jce),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:l}=e,{animationEasing:c,animationDuration:d,animationBegin:h,isUpdateAnimationActive:p}=e,b=A.useRef(null),[y,x]=A.useState(-1),w=A.useRef(i),E=A.useRef(a),T=A.useRef(s),C=A.useRef(n),N=A.useRef(r),P=VE(t,"trapezoid-");if(A.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var te=b.current.getTotalLength();te&&x(te)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var k=Gt("recharts-trapezoid",l);if(!p)return A.createElement("g",null,A.createElement("path",Jp({},kr(e),{className:k,d:oP(n,r,i,a,s)})));var j=w.current,D=E.current,H=T.current,Y=C.current,X=N.current,z="0px ".concat(y===-1?1:y,"px"),K="".concat(y,"px 0px"),ce=u5(["strokeDasharray"],d,c);return A.createElement(YE,{animationId:P,key:P,canBegin:y>0,duration:d,easing:c,isActive:p,begin:h},te=>{var W=Gr(j,i,te),R=Gr(D,a,te),B=Gr(H,s,te),re=Gr(Y,n,te),le=Gr(X,r,te);b.current&&(w.current=W,E.current=R,T.current=B,C.current=re,N.current=le);var M=te>0?{transition:ce,strokeDasharray:K}:{strokeDasharray:z};return A.createElement("path",Jp({},kr(e),{className:k,d:oP(re,le,W,R,B),ref:b,style:sP(sP({},M),e.style)}))})},tde=["option","shapeType","propTransformer","activeClassName","isActive"];function nde(t,e){if(t==null)return{};var n,r,i=rde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function lP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lP(Object(n),!0).forEach(function(r){ide(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ide(t,e,n){return(e=ade(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ade(t){var e=sde(t,"string");return typeof e=="symbol"?e:e+""}function sde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ode(t,e){return eg(eg({},e),t)}function lde(t,e){return t==="symbols"}function uP(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return A.createElement(f5,n);case"trapezoid":return A.createElement(ede,n);case"sector":return A.createElement(g5,n);case"symbols":if(lde(e))return A.createElement(DE,n);break;case"curve":return A.createElement(l5,n);default:return null}}function ude(t){return A.isValidElement(t)?t.props:t}function cde(t){var{option:e,shapeType:n,propTransformer:r=ode,activeClassName:i="recharts-active-shape",isActive:a}=t,s=nde(t,tde),l;if(A.isValidElement(e))l=A.cloneElement(e,eg(eg({},s),ude(e)));else if(typeof e=="function")l=e(s);else if(Xce(e)&&typeof e!="boolean"){var c=r(e,s);l=A.createElement(uP,{shapeType:n,elementProps:c})}else{var d=s;l=A.createElement(uP,{shapeType:n,elementProps:d})}return a?A.createElement(lo,{className:i},l):l}function dde(t){var{fn:e,args:n}=t,r=Dn(),i=ei();return A.useLayoutEffect(()=>{if(!i){var a=e(n);return r(Ioe(a)),()=>{r(Loe(a))}}},[e,n,r,i]),null}function hde(t){var{legendPayload:e}=t,n=Dn(),r=ei();return A.useLayoutEffect(()=>r?rc:(n(tne(e)),()=>{n(nne(e))}),[n,r,e]),null}var H1,fde=()=>{var[t]=A.useState(()=>oh("uid-"));return t},mde=(H1=FB.useId)!==null&&H1!==void 0?H1:fde;function XM(t,e){var n=mde();return e||(t?"".concat(t,"-").concat(n):n)}var pde=A.createContext(void 0),gde=t=>{var{id:e,type:n,children:r}=t,i=XM("recharts-".concat(n),e);return A.createElement(pde.Provider,{value:i},r(i))},bde={cartesianItems:[],polarItems:[]},KM=Jr({name:"graphicalItems",initialState:bde,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Mn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=ss(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Mn()},removeCartesianGraphicalItem:{reducer(t,e){var n=ss(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Mn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Mn()},removePolarGraphicalItem:{reducer(t,e){var n=ss(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Mn()}}}),{addCartesianGraphicalItem:yde,replaceCartesianGraphicalItem:xde,removeCartesianGraphicalItem:vde,addPolarGraphicalItem:zpe,removePolarGraphicalItem:$pe}=KM.actions,wde=KM.reducer;function Ede(t){var e=Dn(),n=A.useRef(null);return A.useLayoutEffect(()=>{n.current===null?e(yde(t)):n.current!==t&&e(xde({prev:n.current,next:t})),n.current=t},[e,t]),A.useLayoutEffect(()=>()=>{n.current&&(e(vde(n.current)),n.current=null)},[e]),null}var Ade=["points"];function cP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function z1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(n),!0).forEach(function(r){Sde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sde(t,e,n){return(e=Tde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tde(t){var e=_de(t,"string");return typeof e=="symbol"?e:e+""}function _de(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tg(){return tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tg.apply(null,arguments)}function Nde(t,e){if(t==null)return{};var n,r,i=Cde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Cde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ode(t){var{option:e,dotProps:n,className:r}=t;if(A.isValidElement(e))return A.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Gt(r,typeof e!="boolean"?e.className:""),a=n??{},{points:s}=a,l=Nde(a,Ade);return A.createElement(VM,tg({},l,{className:i}))}function kde(t,e){return t==null?!1:e?!0:t.length===1}function jde(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:s,needClip:l,clipPathId:c,zIndex:d=Nr.scatter}=t;if(!kde(e,n))return null;var h=WM(n),p=tZ(n),b=e.map((x,w)=>{var E,T,C=z1(z1(z1({r:3},s),p),{},{index:w,cx:(E=x.x)!==null&&E!==void 0?E:void 0,cy:(T=x.y)!==null&&T!==void 0?T:void 0,dataKey:a,value:x.value,payload:x.payload,points:e});return A.createElement(Ode,{key:"dot-".concat(w),option:n,dotProps:C,className:i})}),y={};return l&&c!=null&&(y.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(c,")")),A.createElement(Es,{zIndex:d},A.createElement(lo,tg({className:r},y),b))}function dP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(n),!0).forEach(function(r){Pde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pde(t,e,n){return(e=Dde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dde(t){var e=Rde(t,"string");return typeof e=="symbol"?e:e+""}function Rde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ide={xAxis:{},yAxis:{},zAxis:{}},QM=Jr({name:"cartesianAxis",initialState:Ide,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Mn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Mn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Mn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Mn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Mn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Mn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=hP(hP({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:Lde,removeXAxis:Mde,addYAxis:Bde,removeYAxis:Fde,addZAxis:qpe,removeZAxis:Ype,updateYAxisWidth:Ude}=QM.actions,Hde=QM.reducer,zde=Se([cr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),$de=Se([zde,gs,bs],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),V2=()=>Qe($de),qde=()=>Qe(Tle);function fP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(n),!0).forEach(function(r){Yde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yde(t,e,n){return(e=Vde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vde(t){var e=Gde(t,"string");return typeof e=="symbol"?e:e+""}function Gde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wde=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a}=t;if(i===!1||e.x==null||e.y==null)return null;var s={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},l=$1($1($1({},s),Dg(i)),RE(i)),c;return A.isValidElement(i)?c=A.cloneElement(i,l):typeof i=="function"?c=i(l):c=A.createElement(VM,l),A.createElement(lo,{className:"recharts-active-dot"},c)};function Xde(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,zIndex:a=Nr.activeDot}=t,s=Qe(bh),l=qde();if(e==null||l==null)return null;var c=e.find(d=>l.includes(d.payload));return Kn(c)?null:A.createElement(Es,{zIndex:a},A.createElement(Wde,{point:c,childIndex:Number(s),mainColor:n,dataKey:i,activeDot:r}))}var Kde={},ZM=Jr({name:"errorBars",initialState:Kde,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Vpe,replaceErrorBar:Gpe,removeErrorBar:Wpe}=ZM.actions,Qde=ZM.reducer,Zde=["children"];function Jde(t,e){if(t==null)return{};var n,r,i=ehe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ehe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var the={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},nhe=A.createContext(the);function rhe(t){var{children:e}=t,n=Jde(t,Zde);return A.createElement(nhe.Provider,{value:n},e)}function JM(t,e){var n,r,i=Qe(d=>xs(d,t)),a=Qe(d=>vs(d,e)),s=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:ci.allowDataOverflow,l=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:di.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function ihe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=V2(),{needClipX:a,needClipY:s,needClip:l}=JM(e,n);if(!l||!i)return null;var{x:c,y:d,width:h,height:p}=i;return A.createElement("clipPath",{id:"clipPath-".concat(r)},A.createElement("rect",{x:a?c:c-h/2,y:s?d:d-p/2,width:a?h:h*2,height:s?p:p*2}))}var ahe=t=>{var{chartData:e}=t,n=Dn(),r=ei();return A.useEffect(()=>r?()=>{}:(n(Lj(e)),()=>{n(Lj(void 0))}),[e,n,r]),null},mP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},e6=Jr({name:"brush",initialState:mP,reducers:{setBrushSettings(t,e){return e.payload==null?mP:e.payload}}}),{setBrushSettings:Xpe}=e6.actions,she=e6.reducer;function ohe(t,e,n){return(e=lhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lhe(t){var e=uhe(t,"string");return typeof e=="symbol"?e:e+""}function uhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class G2{static create(e){return new G2(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}ohe(G2,"EPS",1e-4);function che(t){return(t%180+180)%180}var dhe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=che(i),s=a*Math.PI/180,l=Math.atan(r/n),c=s>l&&s<Math.PI-l?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},hhe={dots:[],areas:[],lines:[]},t6=Jr({name:"referenceElements",initialState:hhe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=ss(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=ss(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=ss(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:Kpe,removeDot:Qpe,addArea:Zpe,removeArea:Jpe,addLine:ege,removeLine:tge}=t6.actions,fhe=t6.reducer,mhe=A.createContext(void 0),phe=t=>{var{children:e}=t,[n]=A.useState("".concat(oh("recharts"),"-clip")),r=V2();if(r==null)return null;var{x:i,y:a,width:s,height:l}=r;return A.createElement(mhe.Provider,{value:n},A.createElement("defs",null,A.createElement("clipPath",{id:n},A.createElement("rect",{x:i,y:a,height:l,width:s}))),e)};function $u(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function n6(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e)n.push(t[r]);return n}function ghe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return dhe(r,n)}function bhe(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:l}=t;return e===1?{start:r?i:a,end:r?i+s:a+l}:{start:r?i+s:a+l,end:r?i:a}}function ng(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function yhe(t,e){return n6(t,e+1)}function xhe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:l}=e,c=0,d=1,h=s,p=function(){var x=r?.[c];if(x===void 0)return{v:n6(r,d)};var w=c,E,T=()=>(E===void 0&&(E=n(x,w)),E),C=x.coordinate,N=c===0||ng(t,C,T,h,l);N||(c=0,h=s,d+=1),N&&(h=C+t*(T()/2+i),c+=d)},b;d<=a.length;)if(b=p(),b)return b.v;return[]}function pP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pP(Object(n),!0).forEach(function(r){vhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vhe(t,e,n){return(e=whe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function whe(t){var e=Ehe(t,"string");return typeof e=="symbol"?e:e+""}function Ehe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ahe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:l}=e,{end:c}=e,d=function(b){var y=a[b],x,w=()=>(x===void 0&&(x=n(y,b)),x);if(b===s-1){var E=t*(y.coordinate+t*w()/2-c);a[b]=y=fr(fr({},y),{},{tickCoord:E>0?y.coordinate-E*t:y.coordinate})}else a[b]=y=fr(fr({},y),{},{tickCoord:y.coordinate});if(y.tickCoord!=null){var T=ng(t,y.tickCoord,w,l,c);T&&(c=y.tickCoord-t*(w()/2+i),a[b]=fr(fr({},y),{},{isShow:!0}))}},h=s-1;h>=0;h--)d(h);return a}function She(t,e,n,r,i,a){var s=(r||[]).slice(),l=s.length,{start:c,end:d}=e;if(a){var h=r[l-1],p=n(h,l-1),b=t*(h.coordinate+t*p/2-d);if(s[l-1]=h=fr(fr({},h),{},{tickCoord:b>0?h.coordinate-b*t:h.coordinate}),h.tickCoord!=null){var y=ng(t,h.tickCoord,()=>p,c,d);y&&(d=h.tickCoord-t*(p/2+i),s[l-1]=fr(fr({},h),{},{isShow:!0}))}}for(var x=a?l-1:l,w=function(C){var N=s[C],P,k=()=>(P===void 0&&(P=n(N,C)),P);if(C===0){var j=t*(N.coordinate-t*k()/2-c);s[C]=N=fr(fr({},N),{},{tickCoord:j<0?N.coordinate-j*t:N.coordinate})}else s[C]=N=fr(fr({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var D=ng(t,N.tickCoord,k,c,d);D&&(c=N.tickCoord+t*(k()/2+i),s[C]=fr(fr({},N),{},{isShow:!0}))}},E=0;E<x;E++)w(E);return s}function W2(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:l,interval:c,tickFormatter:d,unit:h,angle:p}=t;if(!i||!i.length||!r)return[];if(et(c)||ic.isSsr){var b;return(b=yhe(i,et(c)?c:0))!==null&&b!==void 0?b:[]}var y=[],x=l==="top"||l==="bottom"?"width":"height",w=h&&x==="width"?Vd(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},E=(N,P)=>{var k=typeof d=="function"?d(N.value,P):N.value;return x==="width"?ghe(Vd(k,{fontSize:e,letterSpacing:n}),w,p):Vd(k,{fontSize:e,letterSpacing:n})[x]},T=i.length>=2?Bi(i[1].coordinate-i[0].coordinate):1,C=bhe(a,T,x);return c==="equidistantPreserveStart"?xhe(T,C,E,i,s):(c==="preserveStart"||c==="preserveStartEnd"?y=She(T,C,E,i,s,c==="preserveStartEnd"):y=Ahe(T,C,E,i,s),y.filter(N=>N.isShow))}var The=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(h=>{if(h){var p=h.getBoundingClientRect();p.width>s&&(s=p.width)}});var l=n?n.getBoundingClientRect().width:0,c=i+a,d=s+c+l+(n?r:0);return Math.round(d)}return 0},_he=["axisLine","width","height","className","hide","ticks","axisType"],Nhe=["viewBox"],Che=["viewBox"];function Aw(t,e){if(t==null)return{};var n,r,i=Ohe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ohe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function dl(){return dl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dl.apply(null,arguments)}function gP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gP(Object(n),!0).forEach(function(r){khe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function khe(t,e,n){return(e=jhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jhe(t){var e=Phe(t,"string");return typeof e=="symbol"?e:e+""}function Phe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X2={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Nr.axis};function Dhe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var d=jn(jn(jn({},c),Ta(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!s||a==="bottom"&&s);d=jn(jn({},d),{},{x1:e,y1:n+h*i,x2:e+r,y2:n+h*i})}else{var p=+(a==="left"&&!s||a==="right"&&s);d=jn(jn({},d),{},{x1:e+p*r,y1:n,x2:e+p*r,y2:n+i})}return A.createElement("line",dl({},d,{className:Gt("recharts-cartesian-axis-line",Mg(l,"className"))}))}function Rhe(t,e,n,r,i,a,s,l,c){var d,h,p,b,y,x,w=l?-1:1,E=t.tickSize||s,T=et(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":d=h=t.coordinate,b=n+ +!l*i,p=b-w*E,x=p-w*c,y=T;break;case"left":p=b=t.coordinate,h=e+ +!l*r,d=h-w*E,y=d-w*c,x=T;break;case"right":p=b=t.coordinate,h=e+ +l*r,d=h+w*E,y=d+w*c,x=T;break;default:d=h=t.coordinate,b=n+ +l*i,p=b+w*E,x=p+w*c,y=T;break}return{line:{x1:d,y1:p,x2:h,y2:b},tick:{x:y,y:x}}}function Ihe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function Lhe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function Mhe(t){var{option:e,tickProps:n,value:r}=t,i,a=Gt(n.className,"recharts-cartesian-axis-tick-value");if(A.isValidElement(e))i=A.cloneElement(e,jn(jn({},n),{},{className:a}));else if(typeof e=="function")i=e(jn(jn({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Gt(s,e?.className)),i=A.createElement(q2,dl({},n,{className:s}),r)}return i}var Bhe=A.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:l,padding:c,tickTextProps:d,orientation:h,mirror:p,x:b,y,width:x,height:w,tickSize:E,tickMargin:T,fontSize:C,letterSpacing:N,getTicksConfig:P,events:k,axisType:j}=t,D=W2(jn(jn({},P),{},{ticks:n}),C,N),H=Ihe(h,p),Y=Lhe(h,p),X=Ta(P),z=Dg(r),K={};typeof i=="object"&&(K=i);var ce=jn(jn({},X),{},{fill:"none"},K),te=D.map(B=>jn({entry:B},Rhe(B,b,y,x,w,h,E,p,T))),W=te.map(B=>{var{entry:re,line:le}=B;return A.createElement(lo,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},i&&A.createElement("line",dl({},ce,le,{className:Gt("recharts-cartesian-axis-tick-line",Mg(i,"className"))})))}),R=te.map((B,re)=>{var{entry:le,tick:M}=B,U=jn(jn(jn(jn({textAnchor:H,verticalAnchor:Y},X),{},{stroke:"none",fill:a},z),M),{},{index:re,payload:le,visibleTicksCount:D.length,tickFormatter:s,padding:c},d);return A.createElement(lo,dl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},sI(k,le,re)),r&&A.createElement(Mhe,{option:r,tickProps:U,value:"".concat(typeof s=="function"?s(le.value,re):le.value).concat(l||"")}))});return A.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(j,"-ticks")},R.length>0&&A.createElement(Es,{zIndex:Nr.label},A.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(j,"-tick-labels"),ref:e},R)),W.length>0&&A.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(j,"-tick-lines")},W))}),Fhe=A.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:l,axisType:c}=t,d=Aw(t,_he),[h,p]=A.useState(""),[b,y]=A.useState(""),x=A.useRef(null);A.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var E;return The({ticks:x.current,label:(E=t.labelRef)===null||E===void 0?void 0:E.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=A.useCallback(E=>{if(E){var T=E.getElementsByClassName("recharts-cartesian-axis-tick-value");x.current=T;var C=T[0];if(C){var N=window.getComputedStyle(C),P=N.fontSize,k=N.letterSpacing;(P!==h||k!==b)&&(p(P),y(k))}}},[h,b]);return s||r!=null&&r<=0||i!=null&&i<=0?null:A.createElement(Es,{zIndex:t.zIndex},A.createElement(lo,{className:Gt("recharts-cartesian-axis",a)},A.createElement(Dhe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ta(t)}),A.createElement(Bhe,{ref:w,axisType:c,events:d,fontSize:h,getTicksConfig:t,height:t.height,letterSpacing:b,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),A.createElement(xce,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},A.createElement(Oce,{label:t.label,labelRef:t.labelRef}),t.children)))}),Uhe=A.memo(Fhe,(t,e)=>{var{viewBox:n}=t,r=Aw(t,Nhe),{viewBox:i}=e,a=Aw(e,Che);return $u(n,i)&&$u(r,a)}),K2=A.forwardRef((t,e)=>{var n=xr(t,X2);return A.createElement(Uhe,dl({},n,{ref:e}))});K2.displayName="CartesianAxis";var Hhe=["x1","y1","x2","y2","key"],zhe=["offset"],$he=["xAxisId","yAxisId"],qhe=["xAxisId","yAxisId"];function bP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bP(Object(n),!0).forEach(function(r){Yhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yhe(t,e,n){return(e=Vhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vhe(t){var e=Ghe(t,"string");return typeof e=="symbol"?e:e+""}function Ghe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Yo(){return Yo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yo.apply(null,arguments)}function rg(t,e){if(t==null)return{};var n,r,i=Whe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Whe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Xhe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:l}=t;return A.createElement("rect",{x:r,y:i,ry:l,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function r6(t){var{option:e,lineItemProps:n}=t,r;if(A.isValidElement(e))r=A.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:l,y2:c,key:d}=n,h=rg(n,Hhe),p=(i=Ta(h))!==null&&i!==void 0?i:{},{offset:b}=p,y=rg(p,zhe);r=A.createElement("line",Yo({},y,{x1:a,y1:s,x2:l,y2:c,fill:"none",key:d}))}return r}function Khe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,l=rg(t,$he),c=i.map((d,h)=>{var p=mr(mr({},l),{},{x1:e,y1:d,x2:e+n,y2:d,key:"line-".concat(h),index:h});return A.createElement(r6,{key:"line-".concat(h),option:r,lineItemProps:p})});return A.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Qhe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,l=rg(t,qhe),c=i.map((d,h)=>{var p=mr(mr({},l),{},{x1:d,y1:e,x2:d,y2:e+n,key:"line-".concat(h),index:h});return A.createElement(r6,{option:r,lineItemProps:p,key:"line-".concat(h)})});return A.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Zhe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length||l==null)return null;var d=l.map(p=>Math.round(p+i-i)).sort((p,b)=>p-b);i!==d[0]&&d.unshift(0);var h=d.map((p,b)=>{var y=!d[b+1],x=y?i+s-p:d[b+1]-p;if(x<=0)return null;var w=b%e.length;return A.createElement("rect",{key:"react-".concat(b),y:p,x:r,height:x,width:a,stroke:"none",fill:e[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Jhe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:l,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var d=c.map(p=>Math.round(p+i-i)).sort((p,b)=>p-b);i!==d[0]&&d.unshift(0);var h=d.map((p,b)=>{var y=!d[b+1],x=y?i+s-p:d[b+1]-p;if(x<=0)return null;var w=b%n.length;return A.createElement("rect",{key:"react-".concat(b),x:p,y:a,width:x,height:l,stroke:"none",fill:n[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return A.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var efe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return XI(W2(mr(mr(mr({},X2),n),{},{ticks:KI(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},tfe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return XI(W2(mr(mr(mr({},X2),n),{},{ticks:KI(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},nfe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Nr.grid};function i6(t){var e=$E(),n=qE(),r=i5(),i=mr(mr({},xr(t,nfe)),{},{x:et(t.x)?t.x:r.left,y:et(t.y)?t.y:r.top,width:et(t.width)?t.width:r.width,height:et(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:l,y:c,width:d,height:h,syncWithTicks:p,horizontalValues:b,verticalValues:y}=i,x=ei(),w=Qe(Y=>Sj(Y,"xAxis",a,x)),E=Qe(Y=>Sj(Y,"yAxis",s,x));if(!Ca(d)||!Ca(h)||!et(l)||!et(c))return null;var T=i.verticalCoordinatesGenerator||efe,C=i.horizontalCoordinatesGenerator||tfe,{horizontalPoints:N,verticalPoints:P}=i;if((!N||!N.length)&&typeof C=="function"){var k=b&&b.length,j=C({yAxis:E?mr(mr({},E),{},{ticks:k?b:E.ticks}):void 0,width:e??d,height:n??h,offset:r},k?!0:p);Dp(Array.isArray(j),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof j,"]")),Array.isArray(j)&&(N=j)}if((!P||!P.length)&&typeof T=="function"){var D=y&&y.length,H=T({xAxis:w?mr(mr({},w),{},{ticks:D?y:w.ticks}):void 0,width:e??d,height:n??h,offset:r},D?!0:p);Dp(Array.isArray(H),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof H,"]")),Array.isArray(H)&&(P=H)}return A.createElement(Es,{zIndex:i.zIndex},A.createElement("g",{className:"recharts-cartesian-grid"},A.createElement(Xhe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),A.createElement(Zhe,Yo({},i,{horizontalPoints:N})),A.createElement(Jhe,Yo({},i,{verticalPoints:P})),A.createElement(Khe,Yo({},i,{offset:r,horizontalPoints:N,xAxis:w,yAxis:E})),A.createElement(Qhe,Yo({},i,{offset:r,verticalPoints:P,xAxis:w,yAxis:E}))))}i6.displayName="CartesianGrid";var a6=(t,e,n,r)=>iM(t,"xAxis",e,r),s6=(t,e,n,r)=>rM(t,"xAxis",e,r),o6=(t,e,n,r)=>iM(t,"yAxis",n,r),l6=(t,e,n,r)=>rM(t,"yAxis",n,r),rfe=Se([an,a6,o6,s6,l6],(t,e,n,r,i)=>fo(t,"xAxis")?Pp(e,r,!1):Pp(n,i,!1)),ife=(t,e,n,r,i)=>i;function afe(t){return t.type==="line"}var sfe=Se([TL,ife],(t,e)=>t.filter(afe).find(n=>n.id===e)),ofe=Se([an,a6,o6,s6,l6,sfe,rfe,g2],(t,e,n,r,i,a,s,l)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:h}=l;if(!(a==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||s==null)){var{dataKey:p,data:b}=a,y;if(b!=null&&b.length>0?y=b:y=c?.slice(d,h+1),y!=null)return Cfe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:p,bandSize:s,displayedData:y})}});function lfe(t){var e=Dg(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),l=Number(a);return(Number.isNaN(s)||s<0)&&(s=n),(Number.isNaN(l)||l<0)&&(l=r),{r:s,strokeWidth:l}}return{r:n,strokeWidth:r}}var ufe=["id"],cfe=["type","layout","connectNulls","needClip","shape"],dfe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function xh(){return xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xh.apply(null,arguments)}function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ya(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(r){hfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hfe(t,e,n){return(e=ffe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ffe(t){var e=mfe(t,"string");return typeof e=="symbol"?e:e+""}function mfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q2(t,e){if(t==null)return{};var n,r,i=pfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gfe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:QI(n,e),payload:t}]};function bfe(t){var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:s,hide:l,unit:c}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:QI(s,e),hide:l,type:t.tooltipType,color:t.stroke,unit:c}}}var u6=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function yfe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var xfe=(t,e,n)=>{var r=n.reduce((p,b)=>p+b);if(!r)return u6(e,t);for(var i=Math.floor(t/r),a=t%r,s=e-t,l=[],c=0,d=0;c<n.length;d+=n[c],++c)if(d+n[c]>a){l=[...n.slice(0,c),a-d];break}var h=l.length%2===0?[0,s]:[s];return[...yfe(n,i),...l,...h].map(p=>"".concat(p,"px")).join(", ")};function vfe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:a,needClip:s}=r,{id:l}=r,c=Q2(r,ufe),d=Ta(c);return A.createElement(jde,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:d,needClip:s,clipPathId:e})}function wfe(t){var{showLabels:e,children:n,points:r}=t,i=A.useMemo(()=>r?.map(a=>{var s,l,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ya(ya({},c),{},{value:a.value,payload:a.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[r]);return A.createElement(Uce,{value:e?i:void 0},n)}function xP(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:a}=t,{type:s,layout:l,connectNulls:c,needClip:d,shape:h}=a,p=Q2(a,cfe),b=ya(ya({},kr(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(e,")"):void 0,points:r,type:s,layout:l,connectNulls:c,strokeDasharray:i??a.strokeDasharray});return A.createElement(A.Fragment,null,r?.length>1&&A.createElement(cde,xh({shapeType:"curve",option:h},b,{pathRef:n})),A.createElement(vfe,{points:r,clipPathId:e,props:a}))}function Efe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function Afe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:s,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:h,animationEasing:p,animateNewValues:b,width:y,height:x,onAnimationEnd:w,onAnimationStart:E}=n,T=i.current,C=VE(n,"recharts-line-"),[N,P]=A.useState(!1),k=!N,j=A.useCallback(()=>{typeof w=="function"&&w(),P(!1)},[w]),D=A.useCallback(()=>{typeof E=="function"&&E(),P(!0)},[E]),H=Efe(r.current),Y=a.current;return A.createElement(wfe,{points:s,showLabels:k},n.children,A.createElement(YE,{animationId:C,begin:d,duration:h,isActive:c,easing:p,onAnimationEnd:j,onAnimationStart:D,key:C},X=>{var z=Gr(Y,H+Y,X),K=Math.min(z,H),ce;if(c)if(l){var te="".concat(l).split(/[,\s]+/gim).map(B=>parseFloat(B));ce=xfe(K,H,te)}else ce=u6(H,K);else ce=l==null?void 0:String(l);if(T){var W=T.length/s.length,R=X===1?s:s.map((B,re)=>{var le=Math.floor(re*W);if(T[le]){var M=T[le];return ya(ya({},B),{},{x:Gr(M.x,B.x,X),y:Gr(M.y,B.y,X)})}return b?ya(ya({},B),{},{x:Gr(y*2,B.x,X),y:Gr(x/2,B.y,X)}):ya(ya({},B),{},{x:B.x,y:B.y})});return i.current=R,A.createElement(xP,{props:n,points:R,clipPathId:e,pathRef:r,strokeDasharray:ce})}return X>0&&H>0&&(i.current=s,a.current=K),A.createElement(xP,{props:n,points:s,clipPathId:e,pathRef:r,strokeDasharray:ce})}),A.createElement($ce,{label:n.label}))}function Sfe(t){var{clipPathId:e,props:n}=t,r=A.useRef(null),i=A.useRef(0),a=A.useRef(null);return A.createElement(Afe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var Tfe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:Or(t.payload,e)}};class _fe extends A.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:a,yAxisId:s,top:l,left:c,width:d,height:h,id:p,needClip:b,zIndex:y}=this.props;if(e)return null;var x=Gt("recharts-line",i),w=p,{r:E,strokeWidth:T}=lfe(n),C=WM(n),N=E*2+T;return A.createElement(Es,{zIndex:y},A.createElement(lo,{className:x},b&&A.createElement("defs",null,A.createElement(ihe,{clipPathId:w,xAxisId:a,yAxisId:s}),!C&&A.createElement("clipPath",{id:"clipPath-dots-".concat(w)},A.createElement("rect",{x:c-N/2,y:l-N/2,width:d+N,height:h+N}))),A.createElement(rhe,{xAxisId:a,yAxisId:s,data:r,dataPointFormatter:Tfe,errorBarOffset:0},A.createElement(Sfe,{props:this.props,clipPathId:w}))),A.createElement(Xde,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var c6={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!ic.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Nr.line};function Nfe(t){var e=xr(t,c6),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:l,dot:c,hide:d,isAnimationActive:h,label:p,legendType:b,xAxisId:y,yAxisId:x,id:w}=e,E=Q2(e,dfe),{needClip:T}=JM(y,x),C=V2(),N=Xg(),P=ei(),k=Qe(X=>ofe(X,y,x,P,w));if(N!=="horizontal"&&N!=="vertical"||k==null||C==null)return null;var{height:j,width:D,x:H,y:Y}=C;return A.createElement(_fe,xh({},E,{id:w,connectNulls:l,dot:c,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:h,hide:d,label:p,legendType:b,xAxisId:y,yAxisId:x,points:k,layout:N,height:j,width:D,left:H,top:Y,needClip:T}))}function Cfe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:l,displayedData:c}=t;return c.map((d,h)=>{var p=Or(d,s);if(e==="horizontal"){var b=Q3({axis:n,ticks:i,bandSize:l,entry:d,index:h}),y=Kn(p)?null:r.scale(p);return{x:b,y,value:p,payload:d}}var x=Kn(p)?null:n.scale(p),w=Q3({axis:r,ticks:a,bandSize:l,entry:d,index:h});return x==null||w==null?null:{x,y:w,value:p,payload:d}}).filter(Boolean)}function Ofe(t){var e=xr(t,c6),n=ei();return A.createElement(gde,{id:e.id,type:"line"},r=>A.createElement(A.Fragment,null,A.createElement(hde,{legendPayload:gfe(e)}),A.createElement(dde,{fn:bfe,args:e}),A.createElement(Ede,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),A.createElement(Nfe,xh({},e,{id:r}))))}var ip=A.memo(Ofe);ip.displayName="Line";var kfe=["dangerouslySetInnerHTML","ticks"],jfe=["id"],Pfe=["domain"],Dfe=["domain"];function Sw(){return Sw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sw.apply(null,arguments)}function ig(t,e){if(t==null)return{};var n,r,i=Rfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ife(t){var e=Dn();return A.useLayoutEffect(()=>(e(Lde(t)),()=>{e(Mde(t))}),[t,e]),null}var Lfe=t=>{var{xAxisId:e,className:n}=t,r=Qe(JI),i=ei(),a="xAxis",s=Qe(E=>cc(E,a,e,i)),l=Qe(E=>nM(E,a,e,i)),c=Qe(E=>yoe(E,e)),d=Qe(E=>Soe(E,e)),h=Qe(E=>wL(E,e));if(c==null||d==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:b}=t,y=ig(t,kfe),{id:x}=h,w=ig(h,jfe);return A.createElement(K2,Sw({},y,w,{scale:s,x:d.x,y:d.y,width:c.width,height:c.height,className:Gt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},Mfe={allowDataOverflow:ci.allowDataOverflow,allowDecimals:ci.allowDecimals,allowDuplicatedCategory:ci.allowDuplicatedCategory,height:ci.height,hide:!1,mirror:ci.mirror,orientation:ci.orientation,padding:ci.padding,reversed:ci.reversed,scale:ci.scale,tickCount:ci.tickCount,type:ci.type,xAxisId:0},Bfe=t=>{var e,n,r,i,a,s=xr(t,Mfe);return A.createElement(A.Fragment,null,A.createElement(Ife,{interval:(e=s.interval)!==null&&e!==void 0?e:"preserveEnd",id:s.xAxisId,scale:s.scale,type:s.type,padding:s.padding,allowDataOverflow:s.allowDataOverflow,domain:s.domain,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,includeHidden:(n=s.includeHidden)!==null&&n!==void 0?n:!1,reversed:s.reversed,ticks:s.ticks,height:s.height,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(r=s.angle)!==null&&r!==void 0?r:0,minTickGap:(i=s.minTickGap)!==null&&i!==void 0?i:5,tick:(a=s.tick)!==null&&a!==void 0?a:!0,tickFormatter:s.tickFormatter}),A.createElement(Lfe,s))},Ffe=(t,e)=>{var{domain:n}=t,r=ig(t,Pfe),{domain:i}=e,a=ig(e,Dfe);return $u(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:$u({domain:n},{domain:i}):!1},d6=A.memo(Bfe,Ffe);d6.displayName="XAxis";var Ufe=["dangerouslySetInnerHTML","ticks"],Hfe=["id"],zfe=["domain"],$fe=["domain"];function Tw(){return Tw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tw.apply(null,arguments)}function ag(t,e){if(t==null)return{};var n,r,i=qfe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Yfe(t){var e=Dn();return A.useLayoutEffect(()=>(e(Bde(t)),()=>{e(Fde(t))}),[t,e]),null}var Vfe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=A.useRef(null),s=A.useRef(null),l=Qe(JI),c=ei(),d=Dn(),h="yAxis",p=Qe(k=>cc(k,h,e,c)),b=Qe(k=>Noe(k,e)),y=Qe(k=>_oe(k,e)),x=Qe(k=>nM(k,h,e,c)),w=Qe(k=>EL(k,e));if(A.useLayoutEffect(()=>{if(!(r!=="auto"||!b||Y2(i)||A.isValidElement(i)||w==null)){var k=a.current;if(k){var j=k.getCalculatedWidth();Math.round(b.width)!==Math.round(j)&&d(Ude({id:e,width:j}))}}},[x,b,d,i,e,r,w]),b==null||y==null||w==null)return null;var{dangerouslySetInnerHTML:E,ticks:T}=t,C=ag(t,Ufe),{id:N}=w,P=ag(w,Hfe);return A.createElement(K2,Tw({},C,P,{ref:a,labelRef:s,scale:p,x:y.x,y:y.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:b.width,height:b.height,className:Gt("recharts-".concat(h," ").concat(h),n),viewBox:l,ticks:x,axisType:h}))},Gfe={allowDataOverflow:di.allowDataOverflow,allowDecimals:di.allowDecimals,allowDuplicatedCategory:di.allowDuplicatedCategory,hide:!1,mirror:di.mirror,orientation:di.orientation,padding:di.padding,reversed:di.reversed,scale:di.scale,tickCount:di.tickCount,type:di.type,width:di.width,yAxisId:0},Wfe=t=>{var e,n,r,i,a,s=xr(t,Gfe);return A.createElement(A.Fragment,null,A.createElement(Yfe,{interval:(e=s.interval)!==null&&e!==void 0?e:"preserveEnd",id:s.yAxisId,scale:s.scale,type:s.type,domain:s.domain,allowDataOverflow:s.allowDataOverflow,dataKey:s.dataKey,allowDuplicatedCategory:s.allowDuplicatedCategory,allowDecimals:s.allowDecimals,tickCount:s.tickCount,padding:s.padding,includeHidden:(n=s.includeHidden)!==null&&n!==void 0?n:!1,reversed:s.reversed,ticks:s.ticks,width:s.width,orientation:s.orientation,mirror:s.mirror,hide:s.hide,unit:s.unit,name:s.name,angle:(r=s.angle)!==null&&r!==void 0?r:0,minTickGap:(i=s.minTickGap)!==null&&i!==void 0?i:5,tick:(a=s.tick)!==null&&a!==void 0?a:!0,tickFormatter:s.tickFormatter}),A.createElement(Vfe,s))},Xfe=(t,e)=>{var{domain:n}=t,r=ag(t,zfe),{domain:i}=e,a=ag(e,$fe);return $u(r,a)?Array.isArray(n)&&n.length===2&&Array.isArray(i)&&i.length===2?n[0]===i[0]&&n[1]===i[1]:$u({domain:n},{domain:i}):!1},_w=A.memo(Wfe,Xfe);_w.displayName="YAxis";var q1={exports:{}},Y1={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vP;function Kfe(){if(vP)return Y1;vP=1;var t=qu();function e(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,l=t.useDebugValue;return Y1.useSyncExternalStoreWithSelector=function(c,d,h,p,b){var y=i(null);if(y.current===null){var x={hasValue:!1,value:null};y.current=x}else x=y.current;y=s(function(){function E(k){if(!T){if(T=!0,C=k,k=p(k),b!==void 0&&x.hasValue){var j=x.value;if(b(j,k))return N=j}return N=k}if(j=N,n(C,k))return j;var D=p(k);return b!==void 0&&b(j,D)?(C=k,j):(C=k,N=D)}var T=!1,C,N,P=h===void 0?null:h;return[function(){return E(d())},P===null?void 0:function(){return E(P())}]},[d,h,p,b]);var w=r(c,y[0],y[1]);return a(function(){x.hasValue=!0,x.value=w},[w]),l(w),w},Y1}var wP;function Qfe(){return wP||(wP=1,q1.exports=Kfe()),q1.exports}Qfe();function Zfe(t){t()}function Jfe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Zfe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var EP={notify(){},get:()=>[]};function eme(t,e){let n,r=EP,i=0,a=!1;function s(w){h();const E=r.subscribe(w);let T=!1;return()=>{T||(T=!0,E(),p())}}function l(){r.notify()}function c(){x.onStateChange&&x.onStateChange()}function d(){return a}function h(){i++,n||(n=t.subscribe(c),r=Jfe())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=EP)}function b(){a||(a=!0,h())}function y(){a&&(a=!1,p())}const x={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:b,tryUnsubscribe:y,getListeners:()=>r};return x}var tme=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nme=tme(),rme=()=>typeof navigator<"u"&&navigator.product==="ReactNative",ime=rme(),ame=()=>nme||ime?A.useLayoutEffect:A.useEffect,sme=ame(),ome=Symbol.for("react-redux-context"),lme=typeof globalThis<"u"?globalThis:{};function ume(){if(!A.createContext)return{};const t=lme[ome]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var cme=ume();function dme(t){const{children:e,context:n,serverState:r,store:i}=t,a=A.useMemo(()=>{const c=eme(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=A.useMemo(()=>i.getState(),[i]);sme(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const l=n||cme;return A.createElement(l.Provider,{value:a},e)}var hme=dme,fme=(t,e)=>e,Z2=Se([fme,an,yL,Un,vM,ws,Ble,cr],Yle),J2=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},h6=zi("mouseClick"),f6=Uh();f6.startListening({actionCreator:h6,effect:(t,e)=>{var n=t.payload,r=Z2(e.getState(),J2(n));r?.activeIndex!=null&&e.dispatch(Foe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Nw=zi("mouseMove"),m6=Uh();m6.startListening({actionCreator:Nw,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=I2(r,r.tooltip.settings.shared),a=Z2(r,J2(n));i==="axis"&&(a?.activeIndex!=null?e.dispatch(dM({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(cM()))}});var AP={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},p6=Jr({name:"rootProps",initialState:AP,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:AP.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue}}}),mme=p6.reducer,{updateOptions:pme}=p6.actions,g6=Jr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:nge}=g6.actions,gme=g6.reducer,b6=zi("keyDown"),y6=zi("focus"),eA=Uh();eA.startListening({actionCreator:b6,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=Number(L2(i,hc(n))),l=ws(n);if(a==="Enter"){var c=Qp(n,"axis","hover",String(i.index));e.dispatch(bw({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:c}));return}var d=joe(n),h=d==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,b=s+p*h;if(!(l==null||b>=l.length||b<0)){var y=Qp(n,"axis","hover",String(b));e.dispatch(bw({active:!0,activeIndex:b.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}});eA.startListening({actionCreator:y6,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=Qp(n,"axis","hover",String(a));e.dispatch(bw({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var Di=zi("externalEvent"),x6=Uh();x6.startListening({actionCreator:Di,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:Ele(n),activeDataKey:vle(n),activeIndex:bh(n),activeLabel:AM(n),activeTooltipIndex:bh(n),isTooltipActive:Ale(n)};t.payload.handler(r,t.payload.reactEvent)}}});var bme=Se([dc],t=>t.tooltipItemPayloads),yme=Se([bme,Kh,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),v6=zi("touchMove"),w6=Uh();w6.startListening({actionCreator:v6,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=I2(r,r.tooltip.settings.shared);if(i==="axis"){var a=Z2(r,J2({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&e.dispatch(dM({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,l=n.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(vte),h=(s=c.getAttribute(wte))!==null&&s!==void 0?s:void 0,p=yme(e.getState(),d,h);e.dispatch(Boe({activeDataKey:h,activeIndex:d,activeCoordinate:p}))}}}});var xme=AI({brush:she,cartesianAxis:Hde,chartData:Aue,errorBars:Qde,graphicalItems:wde,layout:ite,legend:rne,options:yue,polarAxis:Yce,polarOptions:gme,referenceElements:fhe,rootProps:mme,tooltip:Uoe,zIndex:aue}),vme=function(e){return Oee({reducer:xme,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([f6.middleware,m6.middleware,eA.middleware,x6.middleware,w6.middleware]),enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(II({type:"raf"}))},devTools:ic.devToolsEnabled})};function wme(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=ei(),a=A.useRef(null);if(i)return n;a.current==null&&(a.current=vme(e));var s=LE;return A.createElement(hme,{context:s,store:a.current},n)}function Eme(t){var{layout:e,margin:n}=t,r=Dn(),i=ei();return A.useEffect(()=>{i||(r(tte(e)),r(ete(n)))},[r,i,e,n]),null}function Ame(t){var e=Dn();return A.useEffect(()=>{e(pme(t))},[e,t]),null}function SP(t){var{zIndex:e,isPanorama:n}=t,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=XM("".concat(r).concat(e)),a=Dn();return A.useLayoutEffect(()=>(a(rue({zIndex:e,elementId:i,isPanorama:n})),()=>{a(iue({zIndex:e,isPanorama:n}))}),[a,e,i,n]),A.createElement("g",{id:i})}function TP(t){var{children:e,isPanorama:n}=t,r=Qe(Gle);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return A.createElement(A.Fragment,null,i.map(s=>A.createElement(SP,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>A.createElement(SP,{key:s,zIndex:s,isPanorama:n})))}var Sme=["children"];function Tme(t,e){if(t==null)return{};var n,r,i=_me(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _me(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function sg(){return sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sg.apply(null,arguments)}var Nme={width:"100%",height:"100%",display:"block"},Cme=A.forwardRef((t,e)=>{var n=$E(),r=qE(),i=o5();if(!Ca(n)||!Ca(r))return null;var{children:a,otherAttributes:s,title:l,desc:c}=t,d,h;return s!=null&&(typeof s.tabIndex=="number"?d=s.tabIndex:d=i?0:void 0,typeof s.role=="string"?h=s.role:h=i?"application":void 0),A.createElement(_E,sg({},s,{title:l,desc:c,role:h,tabIndex:d,width:n,height:r,style:Nme,ref:e}),a)}),Ome=t=>{var{children:e}=t,n=Qe(Gg);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return A.createElement(_E,{width:r,height:i,x:s,y:a},e)},_P=A.forwardRef((t,e)=>{var{children:n}=t,r=Tme(t,Sme),i=ei();return i?A.createElement(Ome,null,A.createElement(TP,{isPanorama:!0},n)):A.createElement(Cme,sg({ref:e},r),A.createElement(TP,{isPanorama:!1},n))});function kme(){var t=Dn(),[e,n]=A.useState(null),r=Qe(xte);return A.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Qn(a)&&a!==r&&t(rte(a))}},[e,t,r]),n}function NP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jme(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NP(Object(n),!0).forEach(function(r){Pme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pme(t,e,n){return(e=Dme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dme(t){var e=Rme(t,"string");return typeof e=="symbol"?e:e+""}function Rme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hl.apply(null,arguments)}var Ime=()=>(Pue(),null);function og(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var Lme=A.forwardRef((t,e)=>{var n,r,i=A.useRef(null),[a,s]=A.useState({containerWidth:og((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:og((r=t.style)===null||r===void 0?void 0:r.height)}),l=A.useCallback((d,h)=>{s(p=>{var b=Math.round(d),y=Math.round(h);return p.containerWidth===b&&p.containerHeight===y?p:{containerWidth:b,containerHeight:y}})},[]),c=A.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:p}=d.getBoundingClientRect();l(h,p);var b=x=>{var{width:w,height:E}=x[0].contentRect;l(w,E)},y=new ResizeObserver(b);y.observe(d),i.current=y}},[e,l]);return A.useEffect(()=>()=>{var d=i.current;d?.disconnect()},[l]),A.createElement(A.Fragment,null,A.createElement(Kg,{width:a.containerWidth,height:a.containerHeight}),A.createElement("div",hl({ref:c},t)))}),Mme=A.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=A.useState({containerWidth:og(n),containerHeight:og(r)}),s=A.useCallback((c,d)=>{a(h=>{var p=Math.round(c),b=Math.round(d);return h.containerWidth===p&&h.containerHeight===b?h:{containerWidth:p,containerHeight:b}})},[]),l=A.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:d,height:h}=c.getBoundingClientRect();s(d,h)}},[e,s]);return A.createElement(A.Fragment,null,A.createElement(Kg,{width:i.containerWidth,height:i.containerHeight}),A.createElement("div",hl({ref:l},t)))}),Bme=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return A.createElement(A.Fragment,null,A.createElement(Kg,{width:n,height:r}),A.createElement("div",hl({ref:e},t)))}),Fme=A.forwardRef((t,e)=>{var{width:n,height:r}=t;return us(n)||us(r)?A.createElement(Mme,hl({},t,{ref:e})):A.createElement(Bme,hl({},t,{ref:e}))});function Ume(t){return t===!0?Lme:Fme}var Hme=A.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:h,onMouseMove:p,onMouseUp:b,onTouchEnd:y,onTouchMove:x,onTouchStart:w,style:E,width:T,responsive:C,dispatchTouchEvents:N=!0}=t,P=A.useRef(null),k=Dn(),[j,D]=A.useState(null),[H,Y]=A.useState(null),X=kme(),z=zE(),K=z?.width>0?z.width:T,ce=z?.height>0?z.height:i,te=A.useCallback(J=>{X(J),typeof e=="function"&&e(J),D(J),Y(J),J!=null&&(P.current=J)},[X,e,D,Y]),W=A.useCallback(J=>{k(h6(J)),k(Di({handler:a,reactEvent:J}))},[k,a]),R=A.useCallback(J=>{k(Nw(J)),k(Di({handler:d,reactEvent:J}))},[k,d]),B=A.useCallback(J=>{k(cM()),k(Di({handler:h,reactEvent:J}))},[k,h]),re=A.useCallback(J=>{k(Nw(J)),k(Di({handler:p,reactEvent:J}))},[k,p]),le=A.useCallback(()=>{k(y6())},[k]),M=A.useCallback(J=>{k(b6(J.key))},[k]),U=A.useCallback(J=>{k(Di({handler:s,reactEvent:J}))},[k,s]),Q=A.useCallback(J=>{k(Di({handler:l,reactEvent:J}))},[k,l]),I=A.useCallback(J=>{k(Di({handler:c,reactEvent:J}))},[k,c]),oe=A.useCallback(J=>{k(Di({handler:b,reactEvent:J}))},[k,b]),$=A.useCallback(J=>{k(Di({handler:w,reactEvent:J}))},[k,w]),ie=A.useCallback(J=>{N&&k(v6(J)),k(Di({handler:x,reactEvent:J}))},[k,N,x]),me=A.useCallback(J=>{k(Di({handler:y,reactEvent:J}))},[k,y]),be=Ume(C);return A.createElement(jM.Provider,{value:j},A.createElement(B4.Provider,{value:H},A.createElement(be,{width:K??E?.width,height:ce??E?.height,className:Gt("recharts-wrapper",r),style:jme({position:"relative",cursor:"default",width:K,height:ce},E),onClick:W,onContextMenu:U,onDoubleClick:Q,onFocus:le,onKeyDown:M,onMouseDown:I,onMouseEnter:R,onMouseLeave:B,onMouseMove:re,onMouseUp:oe,onTouchEnd:me,onTouchMove:ie,onTouchStart:$,ref:te},A.createElement(Ime,null),n)))}),zme=["width","height","responsive","children","className","style","compact","title","desc"];function $me(t,e){if(t==null)return{};var n,r,i=qme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Yme=A.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:l,compact:c,title:d,desc:h}=t,p=$me(t,zme),b=Ta(p);return c?A.createElement(A.Fragment,null,A.createElement(Kg,{width:n,height:r}),A.createElement(_P,{otherAttributes:b,title:d,desc:h},a)):A.createElement(Hme,{className:s,style:l,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},A.createElement(_P,{otherAttributes:b,title:d,desc:h,ref:e},A.createElement(phe,null,a)))});function Cw(){return Cw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cw.apply(null,arguments)}var Vme={top:5,right:5,bottom:5,left:5},Gme={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Vme,reverseStackOrder:!1,syncMethod:"index",responsive:!1},Wme=A.forwardRef(function(e,n){var r,i=xr(e.categoricalChartProps,Gme),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:d}=e,h={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return A.createElement(wme,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:a},A.createElement(ahe,{chartData:d.data}),A.createElement(Eme,{layout:i.layout,margin:i.margin}),A.createElement(Ame,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),A.createElement(Yme,Cw({},i,{ref:n})))}),Xme=["axis"],Kme=A.forwardRef((t,e)=>A.createElement(Wme,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Xme,tooltipPayloadSearcher:gue,categoricalChartProps:t,ref:e}));function Qme(){const{id:t}=MP(),e=qi(),{user:n}=ka(),[r,i]=A.useState(null),[a,s]=A.useState(!0),[l,c]=A.useState(null),[d,h]=A.useState(""),[p,b]=A.useState(""),[y,x]=A.useState(!1),[w,E]=A.useState(""),[T,C]=A.useState([]),[N,P]=A.useState(""),[k,j]=A.useState(null),[D,H]=A.useState(null),[Y,X]=A.useState(!0),[z,K]=A.useState(!1),[ce,te]=A.useState(!0),[W,R]=A.useState(!0),[B,re]=A.useState(!0),[le,M]=A.useState(!1),[U,Q]=A.useState(!1),[I,oe]=A.useState(!1),[$,ie]=A.useState(!1),[me,be]=A.useState(""),[J,Oe]=A.useState(!0);A.useEffect(()=>{Be()},[t]);const Be=async()=>{s(!0),c(null);try{console.log(" ID:",t);const ee=await fetch(`/api/ocr/documents/${t}/`);if(!ee.ok){console.error(" HTTP:",ee.status,ee.statusText),c(`HTTP ${ee.status}: ${ee.statusText}`),s(!1);return}const ye=await ee.json();if(console.log(" API:",ye),ye.status==="success"){console.log(" "),i(ye.data);const He=ye.data.content||"";h(He);const De=ye.data.tablecontent||"";De?(C([{id:1,content:De}]),console.log(" :",De.length)):(C([]),console.log(" "));const Ue=ye.data.tablesummary||"";P(Ue),console.log(" :",Ue.length);const Ge=ye.data.table1||"";if(Ge)try{const We=typeof Ge=="string"?JSON.parse(Ge):Ge;We?.years&&(We.years=We.years.map(Ae=>((Ae.total===void 0||Ae.total===null)&&(Ae.total=(Ae.guaranteed||0)+(Ae.non_guaranteed||0)),Ae))),j(We),console.log(" table1:",We?.years?.length||0)}catch(We){console.error(" table1 JSON:",We),j(null)}else j(null);const nt=ye.data.table2||"";if(nt)try{const We=typeof nt=="string"?JSON.parse(nt):nt;H(We),console.log(" table2:",We?.years?.length||0)}catch(We){console.error(" table2 JSON:",We),H(null)}else H(null);const rt=ye.data.summary||"";be(rt),console.log(" :",rt.length)}else console.error(" API:",ye.message),c(ye.message||"")}catch(ee){console.error(" :",ee),c("")}finally{s(!1)}},se=async()=>{if(!le){alert("AI15-30..."),M(!0);try{console.log(" ");const ee=await fetch(`/api/content-editor/${t}/update-tablesummary/`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!ee.ok)throw new Error(`HTTP error! status: ${ee.status}`);const ye=await ee.json();console.log(" :",ye),ye.status==="success"?(P(ye.tablesummary),te(!0),console.log(" "),alert("")):(console.error(" :",ye.message),alert(`: ${ye.message||""}`))}catch(ee){console.error(" :",ee),ee.name==="AbortError"?alert("DeepSeek API"):alert("")}finally{M(!1)}}},ze=async()=>{if(!U){alert("AI15-30..."),Q(!0);try{console.log(" ");const ye=await(await fetch(`/api/content-editor/${t}/update-surrender-value/`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();console.log(" :",ye),ye.status==="success"?(console.log(" "),console.log("   :",ye.table1?.years?.length||0),alert(` ${ye.table1?.years?.length||0} `),Be()):(console.error(" :",ye.message),alert(`: ${ye.message||""}`))}catch(ee){console.error(" :",ee),alert("")}finally{Q(!1)}}},Fe=async()=>{if(!I){alert("AI15-30..."),oe(!0);try{const ye=await(await fetch(`/api/content-editor/${t}/update-wellness-table/`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();ye.status==="success"?(console.log(" "),ye.table2===""||ye.table2===null?(console.log("   "),alert("")):(console.log("   :",ye.table2?.years?.length||0),alert(` ${ye.table2?.years?.length||0} `)),Be()):alert(ye.message||"")}catch(ee){console.error(" :",ee),alert("")}finally{oe(!1)}}},tt=async()=>{if(!$){alert("AI30-60..."),ie(!0);try{console.log(" ");const ye=await(await fetch(`/api/content-editor/${t}/update-plan-summary/`,{method:"POST",headers:{"Content-Type":"application/json"}})).json();console.log(" :",ye),ye.status==="success"?(be(ye.summary),Oe(!0),console.log(" "),alert("")):(console.error(" :",ye.message),alert(`: ${ye.message||""}`))}catch(ee){console.error(" :",ee),alert("")}finally{ie(!1)}}};return a?f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsx(Bt,{className:"w-8 h-8 animate-spin text-blue-500"})}):l?f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md",children:[f.jsx(Ld,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center mb-2",children:""}),f.jsx("p",{className:"text-gray-600 text-center mb-4",children:l}),f.jsx("button",{onClick:()=>e(`/document/${t}`),className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition",children:""})]})}):r?f.jsxs("div",{className:"min-h-screen bg-gray-50",children:[f.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:f.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-3 sm:py-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1",children:[f.jsxs("button",{onClick:()=>e(`/document/${t}`),className:"flex items-center space-x-1 sm:space-x-2 text-gray-600 hover:text-gray-800 flex-shrink-0",children:[f.jsx(Kd,{className:"w-4 h-4 sm:w-5 sm:h-5"}),f.jsx("span",{className:"text-sm sm:text-base",children:""})]}),f.jsx("div",{className:"h-4 sm:h-6 w-px bg-gray-300 flex-shrink-0"}),f.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2 min-w-0",children:[f.jsx(Vr,{className:"w-4 h-4 sm:w-5 sm:h-5 text-indigo-600 flex-shrink-0"}),f.jsx("h1",{className:"text-base sm:text-xl font-bold text-gray-800 truncate",children:""})]})]}),f.jsx("div",{className:"flex items-center space-x-2 sm:space-x-3",children:f.jsx("span",{className:"text-xs sm:text-sm text-gray-500 hidden sm:inline",children:w?" ":""})})]})})}),f.jsxs("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 py-3 sm:py-6 space-y-3 sm:space-y-6",children:[f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-2 sm:p-4",children:f.jsxs("div",{className:"grid grid-cols-2 sm:flex sm:flex-wrap gap-2 sm:gap-3",children:[f.jsx("button",{onClick:se,disabled:le,className:"px-2 sm:px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-xs sm:text-sm font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-1 sm:space-x-2",children:le?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}),f.jsx("span",{children:"..."})]}):f.jsx("span",{className:"truncate",children:""})}),f.jsx("button",{onClick:ze,disabled:U,className:"px-2 sm:px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-xs sm:text-sm font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-1 sm:space-x-2",children:U?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}),f.jsx("span",{children:"..."})]}):f.jsx("span",{className:"truncate",children:""})}),f.jsx("button",{onClick:Fe,disabled:I,className:"px-2 sm:px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-xs sm:text-sm font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-1 sm:space-x-2",children:I?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}),f.jsx("span",{children:"..."})]}):f.jsx("span",{className:"truncate",children:""})}),f.jsx("button",{onClick:tt,disabled:$,className:"px-2 sm:px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-xs sm:text-sm font-medium shadow-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-1 sm:space-x-2",children:$?f.jsxs(f.Fragment,{children:[f.jsx(Bt,{className:"w-3 h-3 sm:w-4 sm:h-4 animate-spin"}),f.jsx("span",{children:"..."})]}):f.jsx("span",{className:"truncate",children:""})})]})}),f.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4",children:f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-800 truncate",children:r.file_name}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4 mt-2 text-xs sm:text-sm text-gray-600",children:[r.insured_name&&f.jsxs("span",{className:"truncate",children:[": ",r.insured_name]}),r.insurance_product&&f.jsxs("span",{className:"truncate",children:[": ",r.insurance_product]}),f.jsxs("span",{className:"hidden sm:inline",children:[": ",d.length.toLocaleString()," "]})]})]}),f.jsxs("button",{onClick:Be,className:"flex items-center justify-center space-x-1 sm:space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition text-xs sm:text-sm flex-shrink-0",children:[f.jsx(iv,{className:"w-3 h-3 sm:w-4 sm:h-4"}),f.jsx("span",{children:""})]})]})}),!1,f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 -mx-4 px-4 py-2 rounded",onClick:()=>Oe(!J),children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(Vr,{className:"w-4 h-4 text-orange-600"}),f.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-800",children:""}),f.jsx("span",{className:"text-sm text-gray-500",children:me?`(${me.length} )`:"()"})]}),J?f.jsx(Uo,{className:"w-4 h-4 text-gray-400"}):f.jsx(Fo,{className:"w-4 h-4 text-gray-400"})]}),J&&f.jsx("div",{className:"mt-3",children:me?f.jsx("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:f.jsx(Cv,{className:"text-sm text-gray-800 prose prose-sm max-w-none",children:me})}):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Vr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),f.jsx("p",{className:"text-sm",children:""}),f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'""'})]})})]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 -mx-4 px-4 py-2 rounded",onClick:()=>R(!W),children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(KN,{className:"w-4 h-4 text-blue-600"}),f.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-800",children:""}),f.jsx("span",{className:"text-sm text-gray-500",children:k?.years?.length>0?`(${k.years.length} )`:"()"})]}),W?f.jsx(Uo,{className:"w-4 h-4 text-gray-400"}):f.jsx(Fo,{className:"w-4 h-4 text-gray-400"})]}),W&&f.jsx("div",{className:"mt-3",children:k?.years?.length>0?f.jsx("div",{className:"bg-blue-50 rounded-lg p-2 sm:p-4 overflow-x-auto border border-blue-200",children:f.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-blue-300",children:[f.jsx("th",{className:"px-1 sm:px-2 py-1 sm:py-2 text-left font-medium text-blue-900 text-xs sm:text-sm",colSpan:"2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:""}),f.jsx("span",{className:"text-gray-400",children:"/"}),f.jsx("span",{children:""})]})}),f.jsx("th",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right font-medium text-blue-900 text-xs sm:text-sm",children:""}),f.jsx("th",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right font-medium text-blue-900 text-xs sm:text-sm",children:""}),f.jsx("th",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right font-medium text-blue-900 text-xs sm:text-sm",children:"%"}),f.jsx("th",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right font-medium text-blue-900 text-xs sm:text-sm",children:"IRR%"})]})}),f.jsx("tbody",{children:k.years.map((ee,ye)=>{const He=r?.annual_premium?parseInt(r.annual_premium):0,De=r?.payment_years?parseInt(r.payment_years):0,Ue=He*Math.min(ee.policy_year,De),Ge=ee.total||0,nt=r?.insured_age?parseInt(r.insured_age):0,rt=nt>0?nt+parseInt(ee.policy_year):null,We=Ue>0&&Ge>0&&ee.policy_year>0?(Ge-Ue)/Ue/ee.policy_year*100:0,Ae=Ue>0&&Ge>0&&ee.policy_year>0?(Math.pow(Ge/Ue,1/ee.policy_year)-1)*100:0;return f.jsxs("tr",{className:"border-b border-blue-200 hover:bg-blue-100",children:[f.jsx("td",{className:"px-1 sm:px-2 py-1 sm:py-2 text-left text-gray-700",colSpan:"2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:ee.policy_year}),f.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),f.jsx("span",{children:rt?`${rt}`:"-"})]})}),f.jsx("td",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right text-gray-700",children:ee.guaranteed?ee.guaranteed.toLocaleString():"-"}),f.jsx("td",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right text-gray-700 font-medium",children:ee.total?ee.total.toLocaleString():"-"}),f.jsx("td",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right text-purple-600 font-semibold",children:!isNaN(We)&&We!==0?We.toFixed(2):"-"}),f.jsx("td",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right text-green-600 font-semibold",children:!isNaN(Ae)&&Ae!==0?Ae.toFixed(2):"-"})]},ye)})})]})}):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Vr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),f.jsx("p",{className:"text-sm",children:""}),f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'""'})]})}),W&&k?.years?.length>0&&r?.annual_premium&&r?.payment_years&&(()=>{const ee=parseInt(r.annual_premium)||0,ye=parseInt(r.payment_years)||0,He=ee*ye;return f.jsxs("div",{className:"mt-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-200",children:[f.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[f.jsx(NH,{className:"w-5 h-5 text-indigo-600"}),f.jsx("h4",{className:"text-sm sm:text-base font-semibold text-gray-800",children:""})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-4",children:[f.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[f.jsx("p",{className:"text-xs text-gray-500",children:""}),f.jsx("p",{className:"text-lg font-bold text-indigo-600",children:He.toLocaleString()})]}),f.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[f.jsx("p",{className:"text-xs text-gray-500",children:""}),f.jsx("p",{className:"text-lg font-bold text-green-600",children:k.years[k.years.length-1]?.total?.toLocaleString()||"-"})]}),f.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[f.jsx("p",{className:"text-xs text-gray-500",children:""}),f.jsxs("p",{className:"text-lg font-bold text-purple-600",children:[((k.years[k.years.length-1]?.total||0)/He).toFixed(2),"x"]})]}),f.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[f.jsx("p",{className:"text-xs text-gray-500",children:""}),f.jsx("p",{className:"text-lg font-bold text-orange-600",children:((k.years[k.years.length-1]?.total||0)-He).toLocaleString()})]}),f.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[f.jsx("p",{className:"text-xs text-gray-500",children:""}),f.jsx("p",{className:"text-lg font-bold text-teal-600",children:(()=>{const De=k.years.find(Ue=>Ue.total>=He);return De?`${De.policy_year}`:""})()})]})]}),f.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-4",children:[f.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[f.jsx(X9,{className:"w-5 h-5 text-blue-600"}),f.jsx("h5",{className:"text-sm font-semibold text-gray-700",children:" "})]}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[5,10,20,30,40,50,60,70].filter(Ue=>k.years.some(Ge=>Ge.policy_year===Ue)).map(Ue=>{const Ge=k.years.find(ne=>ne.policy_year===Ue);if(!Ge)return null;const nt=ee*Math.min(Ue,ye),rt=Ge.total,We=(rt-nt)/nt/Ue*100,Ae=nt>0&&rt>0?(Math.pow(rt/nt,1/Ue)-1)*100:0;return f.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-200",children:[f.jsxs("p",{className:"text-xs text-gray-600 font-semibold mb-2",children:[" ",Ue," "]}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs text-gray-500",children:":"}),f.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[We.toFixed(2),"%"]})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs text-gray-500",children:"IRR:"}),f.jsxs("span",{className:"text-sm font-bold text-rose-600",children:[Ae.toFixed(2),"%"]})]}),f.jsx("div",{className:"pt-1 border-t border-blue-200",children:f.jsxs("span",{className:"text-xs text-gray-400",children:[": ",rt.toLocaleString()]})})]})]},Ue)})})]}),f.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-4",children:[f.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[f.jsx(SH,{className:"w-5 h-5 text-amber-600"}),f.jsx("h5",{className:"text-sm font-semibold text-gray-700",children:" "})]}),f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute left-8 top-0 bottom-0 w-0.5 bg-gradient-to-b from-red-300 via-yellow-300 to-green-300"}),f.jsx("div",{className:"space-y-6",children:[{label:"",multiplier:1,color:"bg-red-500",icon:"",desc:""},{label:"1.5",multiplier:1.5,color:"bg-orange-500",icon:"",desc:"50%"},{label:"2",multiplier:2,color:"bg-yellow-500",icon:"",desc:""},{label:"3",multiplier:3,color:"bg-lime-500",icon:"",desc:"3"},{label:"4",multiplier:4,color:"bg-green-500",icon:"",desc:"4"},{label:"5",multiplier:5,color:"bg-emerald-500",icon:"",desc:"5"}].map((Ue,Ge)=>{const nt=He*Ue.multiplier,rt=k.years.find(We=>We.total>=nt);return f.jsxs("div",{className:"relative pl-20 group",children:[f.jsx("div",{className:`absolute left-5 w-6 h-6 rounded-full ${Ue.color} flex items-center justify-center text-white text-xs font-bold shadow-lg z-10 group-hover:scale-125 transition-transform`,children:rt?"":""}),f.jsxs("div",{className:`bg-gradient-to-r ${rt?"from-green-50 to-emerald-50 border-green-200":"from-gray-50 to-gray-100 border-gray-200"} rounded-lg p-3 border-2 transition-all group-hover:shadow-md`,children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("span",{className:"text-2xl",children:Ue.icon}),f.jsxs("div",{children:[f.jsx("h6",{className:"font-semibold text-gray-800 text-sm",children:Ue.label}),f.jsx("p",{className:"text-xs text-gray-500",children:Ue.desc})]})]}),f.jsx("div",{className:"text-right",children:rt?f.jsxs(f.Fragment,{children:[f.jsxs("p",{className:"text-lg font-bold text-green-600",children:[" ",rt.policy_year," "]}),f.jsxs("p",{className:"text-xs text-gray-500",children:[": ",rt.total.toLocaleString()]}),f.jsxs("p",{className:"text-xs font-semibold text-rose-600 mt-1",children:["IRR: ",(()=>{const We=ee*Math.min(rt.policy_year,ye);return(We>0&&rt.total>0?(Math.pow(rt.total/We,1/rt.policy_year)-1)*100:0).toFixed(2)})(),"%"]})]}):f.jsx("p",{className:"text-sm text-gray-400",children:""})})]}),!rt&&f.jsxs("div",{className:"mt-2",children:[f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:f.jsx("div",{className:"bg-blue-500 h-1.5 rounded-full transition-all",style:{width:`${Math.min(k.years[k.years.length-1]?.total/nt*100,100)}%`}})}),f.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[": ",nt.toLocaleString()]})]})]})]},Ge)})})]})]}),f.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm mb-4",children:[f.jsx("h5",{className:"text-sm font-semibold text-gray-700 mb-3",children:" 10"}),f.jsx(Xte,{width:"100%",height:300,children:f.jsxs(Kme,{data:k.years.slice(0,10).map(De=>({...De,investment:ee*Math.min(De.policy_year,ye),roi:(De.total/(ee*Math.min(De.policy_year,ye))*100-100).toFixed(1)})),margin:{top:10,right:30,left:0,bottom:0},children:[f.jsx(i6,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),f.jsx(d6,{dataKey:"policy_year",label:{value:"",position:"insideBottom",offset:-5},stroke:"#6b7280"}),f.jsx(_w,{yAxisId:"left",label:{value:"",angle:-90,position:"insideLeft"},stroke:"#6b7280",tickFormatter:De=>`${(De/1e4).toFixed(0)}`}),f.jsx(_w,{yAxisId:"right",orientation:"right",label:{value:"%",angle:90,position:"insideRight"},stroke:"#8b5cf6"}),f.jsx(Uue,{formatter:(De,Ue)=>Ue===""?`${De}%`:De.toLocaleString(),contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"}}),f.jsx(s5,{}),f.jsx(ip,{yAxisId:"left",type:"monotone",dataKey:"investment",stroke:"#ef4444",name:"",strokeWidth:2,dot:{r:4}}),f.jsx(ip,{yAxisId:"left",type:"monotone",dataKey:"total",stroke:"#10b981",name:"",strokeWidth:3,dot:{r:4}}),f.jsx(ip,{yAxisId:"right",type:"monotone",dataKey:"roi",stroke:"#8b5cf6",name:"",strokeWidth:2,strokeDasharray:"5 5",dot:{r:3}})]})}),f.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:" = | = | =% | "})]})]})})()]}),f.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-3 sm:p-4",children:[f.jsxs("div",{className:"flex items-center justify-between cursor-pointer hover:bg-gray-50 -mx-4 px-4 py-2 rounded",onClick:()=>re(!B),children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx(KN,{className:"w-4 h-4 text-purple-600"}),f.jsx("h3",{className:"text-sm sm:text-base font-semibold text-gray-800",children:""}),f.jsx("span",{className:"text-sm text-gray-500",children:D?.years?.length>0?`(${D.years.length} )`:"()"})]}),B?f.jsx(Uo,{className:"w-4 h-4 text-gray-400"}):f.jsx(Fo,{className:"w-4 h-4 text-gray-400"})]}),B&&f.jsx("div",{className:"mt-3",children:D?.years?.length>0?f.jsx("div",{className:"bg-purple-50 rounded-lg p-2 sm:p-4 overflow-x-auto border border-purple-200",children:f.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-purple-300",children:[f.jsx("th",{className:"px-1 sm:px-2 py-1 sm:py-2 text-left font-medium text-purple-900 text-xs sm:text-sm",colSpan:"2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:""}),f.jsx("span",{className:"text-gray-400",children:"/"}),f.jsx("span",{children:""})]})}),f.jsx("th",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right font-medium text-purple-900 text-xs sm:text-sm",children:""}),f.jsx("th",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right font-medium text-purple-900 text-xs sm:text-sm hidden sm:table-cell",children:""}),f.jsx("th",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right font-medium text-purple-900 text-xs sm:text-sm",children:""})]})}),f.jsx("tbody",{children:D.years.map((ee,ye)=>{const He=r?.insured_age?parseInt(r.insured_age):0,De=He>0?He+parseInt(ee.policy_year):null;return f.jsxs("tr",{className:"border-b border-purple-200 hover:bg-purple-100",children:[f.jsx("td",{className:"px-1 sm:px-2 py-1 sm:py-2 text-left text-gray-700",colSpan:"2",children:f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{children:ee.policy_year}),f.jsx("span",{className:"text-gray-400 text-xs",children:"/"}),f.jsx("span",{children:De?`${De}`:"-"})]})}),f.jsx("td",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right text-gray-700",children:ee.withdraw!==void 0?ee.withdraw.toLocaleString():"-"}),f.jsx("td",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right text-gray-700 hidden sm:table-cell",children:ee.withdraw_total!==void 0?ee.withdraw_total.toLocaleString():"-"}),f.jsx("td",{className:"px-1 sm:px-3 py-1 sm:py-2 text-right text-gray-700 font-medium",children:ee.total!==void 0?ee.total.toLocaleString():"-"})]},ye)})})]})}):f.jsxs("div",{className:"text-center py-8 text-gray-500",children:[f.jsx(Vr,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),f.jsx("p",{className:"text-sm",children:""}),f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'""'})]})})]}),!1,!1,!1]})]}):f.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md",children:[f.jsx(Ld,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center mb-2",children:""}),f.jsx("p",{className:"text-gray-600 text-center mb-4",children:""}),f.jsx("button",{onClick:()=>e("/plan-management"),className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition",children:""})]})})}function Zme(){const t=co(),[e,n]=A.useState(""),[r,i]=A.useState(!1),[a,s]=A.useState(""),[l,c]=A.useState(""),d=async()=>{if(!e.trim()){c(" YouTube ");return}if(!e.includes("youtube.com")&&!e.includes("youtu.be")){c(" YouTube ");return}try{i(!0),c(""),s("");const p=localStorage.getItem("access_token"),b=await ut.post(`${gt}/api/content/extract-subtitle`,{video_url:e},{headers:{Authorization:`Bearer ${p}`}});b.data.code===200?s(b.data.data.subtitle):c(b.data.message||"")}catch(p){console.error(":",p),c(p.response?.data?.message||"")}finally{i(!1)}},h=()=>{navigator.clipboard.writeText(a),alert("")};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:f.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[f.jsxs("div",{className:"mb-6",children:[f.jsxs("button",{onClick:()=>t("dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[f.jsx(fl,{className:"w-5 h-5 mr-2"}),f.jsx("span",{className:"text-sm font-medium",children:""})]}),f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg",children:f.jsx(Tr,{className:"w-7 h-7 text-white"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:""}),f.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"AI "})]})]})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[f.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3 flex items-center",children:[f.jsx(Vy,{className:"w-5 h-5 mr-2 text-gray-600"}),"YouTube "]}),f.jsxs("div",{className:"flex space-x-3",children:[f.jsx("input",{type:"text",value:e,onChange:p=>{n(p.target.value),c("")},placeholder:" YouTube : https://www.youtube.com/watch?v=xxxxx  Shorts ",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",disabled:r}),f.jsx("button",{onClick:d,disabled:r||!e.trim(),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm shadow-md hover:shadow-lg flex items-center space-x-2",children:r?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),f.jsx("span",{children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(Tr,{className:"w-5 h-5"}),f.jsx("span",{children:""})]})})]}),l&&f.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start space-x-2",children:[f.jsx("svg",{className:"w-5 h-5 text-red-500 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),f.jsx("p",{className:"text-sm text-red-700",children:l})]}),f.jsx("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),f.jsxs("div",{className:"text-sm text-blue-700",children:[f.jsx("p",{className:"font-medium",children:""}),f.jsxs("ul",{className:"mt-1 space-y-0.5 list-disc list-inside",children:[f.jsx("li",{children:" YouTube  Shorts "}),f.jsx("li",{children:"AI "}),f.jsx("li",{children:""})]})]})]})})]}),a&&f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 flex items-center",children:[f.jsx(Ko,{className:"w-5 h-5 mr-2 text-gray-600"}),""]}),f.jsxs("button",{onClick:h,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium flex items-center space-x-2",children:[f.jsx(YH,{className:"w-4 h-4"}),f.jsx("span",{children:""})]})]}),f.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 max-h-96 overflow-y-auto",children:f.jsx("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 font-mono leading-relaxed",children:a})})]}),r&&!a&&f.jsxs("div",{className:"p-12 text-center",children:[f.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent"}),f.jsx("p",{className:"mt-4 text-gray-600 text-sm font-medium",children:" AI ..."}),f.jsx("p",{className:"mt-1 text-gray-500 text-xs",children:""})]}),!r&&!a&&!l&&f.jsxs("div",{className:"p-12 text-center",children:[f.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full mb-4",children:f.jsx(Vy,{className:"w-8 h-8 text-purple-600"})}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:""}),f.jsx("p",{className:"text-sm text-gray-500",children:" YouTube  AI "})]})]}),f.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:f.jsx(Tr,{className:"w-6 h-6 text-purple-600"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"AI "}),f.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:" Gemini AI "})]})]})}),f.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:f.jsx(Vy,{className:"w-6 h-6 text-blue-600"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:" YouTube"}),f.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:""})]})]})}),f.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:f.jsxs("div",{className:"flex items-center space-x-3",children:[f.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:f.jsx(Ko,{className:"w-6 h-6 text-green-600"})}),f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:""}),f.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:""})]})]})})]})]})})}const Jme=async(t,e,n="1:1")=>{try{const r=new FormData;r.append("image",t),r.append("prompt",e),r.append("aspect_ratio",n);const i=localStorage.getItem("access_token");return await(await fetch(`${gt}/api/ip-image/generate-v2`,{method:"POST",headers:{Authorization:`Bearer ${i}`},body:r})).json()}catch(r){throw console.error("IP (V2):",r),r}},epe=Jme,tpe=async(t,e=1,n={},r="1:1")=>{try{const i=new FormData;i.append("content",t),i.append("image_index",e),i.append("aspect_ratio",r),n.includeIpImage&&n.ipImageUrl&&(i.append("include_ip_image","true"),i.append("ip_image_url",n.ipImageUrl));const a=localStorage.getItem("access_token");return await(await fetch(`${gt}/api/ip-image/generate-v2`,{method:"POST",headers:{Authorization:`Bearer ${a}`},body:i})).json()}catch(i){throw console.error(" (V2):",i),i}},npe=tpe,E6=async()=>{try{const t=localStorage.getItem("access_token");return await(await fetch(`${gt}/api/ip-image/saved`,{headers:{Authorization:`Bearer ${t}`}})).json()}catch(t){throw console.error("IP:",t),t}},rpe=async(t,e)=>{try{const n=localStorage.getItem("access_token");return await(await fetch(`${gt}/api/ip-image/save`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({generated_image_url:t,prompt:e})})).json()}catch(n){throw console.error("IP:",n),n}},Ow=async(t="ip_image")=>{try{const e=localStorage.getItem("access_token");return await(await fetch(`${gt}/api/gemini/usage-stats?type=${t}`,{headers:{Authorization:`Bearer ${e}`}})).json()}catch(e){throw console.error(":",e),e}};function ipe(){const t=qi(),e=A.useRef(null),n=A.useRef(null),[r,i]=A.useState(null),[a,s]=A.useState(null),[l,c]=A.useState(""),[d,h]=A.useState(!1),[p,b]=A.useState(null),[y,x]=A.useState(""),[w,E]=A.useState(null),[T,C]=A.useState(!1),[N,P]=A.useState(!0),[k,j]=A.useState(null),[D,H]=A.useState(!0),[Y,X]=A.useState("1:1"),[z,K]=A.useState(!1),ce=[{value:"1:1",label:" (1:1)"},{value:"16:9",label:" (16:9)"},{value:"9:16",label:" (9:16)"},{value:"4:3",label:" (4:3)"},{value:"3:4",label:" (3:4)"}];A.useEffect(()=>{W(),R(),te()},[]);const te=()=>{const oe=typeof window<"u"&&typeof window.wx<"u"&&typeof window.wx.miniProgram<"u",$=typeof window<"u"&&window.__wxjs_environment==="miniprogram",me=(navigator.userAgent||"").toLowerCase().indexOf("miniprogram")>-1;K(oe||$||me)},W=async()=>{try{P(!0);const oe=await E6();oe.status==="success"&&oe.has_saved&&(E(oe.data),b(oe.data.generated_image_url),c(oe.data.prompt||""))}catch(oe){console.error("IP:",oe)}finally{P(!1)}},R=async()=>{try{H(!0);const oe=await Ow("ip_image");console.log(" [IPImageGenerator] :",oe),oe.status==="success"?j(oe.data):(console.error(" [IPImageGenerator] API:",oe),j({quota:{available:0,total_purchased:0},total_count:0}))}catch(oe){console.error(" [IPImageGenerator] :",oe),j({quota:{available:0,total_purchased:0},total_count:0})}finally{H(!1)}},B=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),re=()=>{z&&typeof window<"u"&&window.wx&&window.wx.miniProgram?window.wx.miniProgram.navigateTo({url:"/pages/payment/payment"}):t("/payment")},le=oe=>{const $=oe.target.files[0];if(!$)return;if(!$.type.startsWith("image/")){x("");return}if($.size>10*1024*1024){x("10MB");return}x(""),i($);const ie=new FileReader;ie.onload=me=>{s(me.target.result)},ie.readAsDataURL($)},M=async()=>{if(!r){x("");return}if(!l.trim()){x("");return}try{h(!0),x("");const oe=await epe(r,l,Y);oe.status==="success"&&oe.image_url?(b(oe.image_url),R()):x(oe.message||"")}catch(oe){console.error(":",oe),x("")}finally{h(!1)}},U=()=>{i(null),s(null),c(""),b(null),x(""),e.current&&(e.current.value=""),n.current&&(n.current.value="")},Q=()=>{if(!p)return;const oe=document.createElement("a");oe.href=p,oe.download=`ip-image-${Date.now()}.png`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe)},I=async()=>{if(!p){x("");return}try{C(!0),x("");const oe=await rpe(p,l);oe.status==="success"?(E(oe.data),alert("IP")):x(oe.message||"")}catch(oe){console.error(":",oe),x("")}finally{C(!1)}};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:f.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[f.jsxs("div",{className:"mb-6",children:[f.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[f.jsx(fl,{className:"w-5 h-5 mr-2"}),""]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"IP"}),f.jsx("p",{className:"text-gray-600 mt-2",children:"AIIP"})]}),!D&&k&&f.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-gradient-to-r from-green-50 to-emerald-50 rounded-md border border-green-200",children:[f.jsx("span",{className:"text-xs text-gray-600",children:""}),f.jsxs("span",{className:"text-lg font-bold text-green-600",children:[k.quota.available,""]})]}),f.jsxs("button",{onClick:re,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-1 rounded-md shadow-sm hover:shadow-md hover:from-orange-600 hover:to-red-600 transition-all flex items-center gap-1.5",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsx("span",{className:"text-sm font-semibold",children:""})]})]})]}),!D&&k&&f.jsxs("div",{className:"md:hidden mt-4 flex items-center justify-end gap-2",children:[f.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-gradient-to-r from-green-50 to-emerald-50 rounded-md border border-green-200",children:[f.jsx("span",{className:"text-xs text-gray-600",children:""}),f.jsxs("span",{className:"text-base font-bold text-green-600",children:[k.quota.available,""]})]}),f.jsxs("button",{onClick:re,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-3 py-1 rounded-md shadow-sm active:scale-95 transition-all flex items-center gap-1",children:[f.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsx("span",{className:"text-xs font-semibold",children:""})]})]})]}),f.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:""}),a?f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:a,alt:"",className:"w-full h-64 object-cover rounded-xl border-2 border-gray-200"}),f.jsx("button",{onClick:U,className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition-colors shadow-lg",children:f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):f.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-500 transition-colors",children:[f.jsx(Qo,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),f.jsx("p",{className:"text-gray-600 mb-4",children:""}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[f.jsxs("button",{onClick:()=>e.current?.click(),className:"flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-md",children:[f.jsx(Qo,{className:"w-5 h-5 mr-2"}),""]}),B()&&f.jsxs("button",{onClick:()=>n.current?.click(),className:"flex items-center justify-center px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors shadow-md",children:[f.jsx($H,{className:"w-5 h-5 mr-2"}),""]})]})]}),f.jsx("input",{ref:e,type:"file",accept:"image/*",onChange:le,className:"hidden"}),f.jsx("input",{ref:n,type:"file",accept:"image/*",capture:"environment",onChange:le,className:"hidden"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:""}),f.jsx("textarea",{value:l,onChange:oe=>c(oe.target.value),placeholder:"...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:"5",maxLength:"500"}),f.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[l.length,"/500 "]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:""}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:ce.map(oe=>f.jsx("button",{type:"button",onClick:()=>X(oe.value),className:`px-4 py-2 rounded-lg border-2 font-medium transition-all ${Y===oe.value?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-blue-400"}`,children:oe.label},oe.value))})]}),y&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:f.jsx("p",{className:"text-sm text-red-600",children:y})}),f.jsx("button",{onClick:M,disabled:!r||!l.trim()||d,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 font-semibold shadow-lg hover:shadow-xl",children:d?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),f.jsx("span",{children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(Tr,{className:"w-6 h-6"}),f.jsx("span",{children:"IP"})]})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:""}),N?f.jsx("div",{className:"h-full min-h-[400px] border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mb-4"}),f.jsx("p",{className:"text-gray-400",children:"..."})]})}):p?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:p,alt:"IP",className:"w-full h-auto rounded-xl shadow-lg border-2 border-purple-200"}),w&&p===w.generated_image_url&&f.jsxs("div",{className:"absolute top-4 right-4 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-medium shadow-lg flex items-center",children:[f.jsx(ZN,{className:"w-4 h-4 mr-1"}),""]})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[f.jsx("button",{onClick:Q,className:"py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium shadow-md",children:""}),f.jsx("button",{onClick:I,disabled:T,className:"py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium shadow-md disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:T?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),""]}):f.jsxs(f.Fragment,{children:[f.jsx(ZN,{className:"w-5 h-5 mr-1"}),""]})}),f.jsx("button",{onClick:U,className:"py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium shadow-md",children:""})]})]}):f.jsx("div",{className:"h-full min-h-[400px] border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Tr,{className:"w-20 h-20 mx-auto text-gray-300 mb-4"}),f.jsx("p",{className:"text-gray-400",children:"IP"}),w&&f.jsxs("p",{className:"text-sm text-blue-600 mt-2",children:[" ",new Date(w.updated_at).toLocaleString("zh-CN")]})]})})]})]})}),f.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-md p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("span",{className:"text-blue-600 font-bold",children:""}),f.jsx("p",{children:""})]}),f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("span",{className:"text-blue-600 font-bold",children:""}),f.jsx("p",{children:""})]}),f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("span",{className:"text-blue-600 font-bold",children:""}),f.jsx("p",{children:"JPGPNG"})]}),f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("span",{className:"text-blue-600 font-bold",children:""}),f.jsx("p",{children:"10MB"})]})]})]})]})})}function ape(){const t=qi(),[e,n]=A.useState(""),[r,i]=A.useState(1),[a,s]=A.useState(!1),[l,c]=A.useState([]),[d,h]=A.useState(""),[p,b]=A.useState({current:0,total:0}),[y,x]=A.useState("9:16"),[w,E]=A.useState(null),[T,C]=A.useState(!0),[N,P]=A.useState(!0),[k,j]=A.useState(null),[D,H]=A.useState(!1),[Y,X]=A.useState(null),[z,K]=A.useState(!0),ce=[{value:"1:1",label:" (1:1)"},{value:"16:9",label:" (16:9)"},{value:"9:16",label:" (9:16)"},{value:"4:3",label:" (4:3)"},{value:"3:4",label:" (3:4)"}],te=()=>{D&&typeof window<"u"&&window.wx&&window.wx.miniProgram?window.wx.miniProgram.navigateTo({url:"/pages/payment/payment"}):t("/payment")};A.useEffect(()=>{const le=M=>{M.key==="Escape"&&k&&j(null)};return window.addEventListener("keydown",le),()=>window.removeEventListener("keydown",le)},[k]),A.useEffect(()=>{(()=>{const M=typeof window<"u"&&typeof window.wx<"u"&&typeof window.wx.miniProgram<"u",U=typeof window<"u"&&window.__wxjs_environment==="miniprogram",I=(navigator.userAgent||"").toLowerCase().indexOf("miniprogram")>-1;H(M||U||I)})()},[]),A.useEffect(()=>{(async()=>{try{P(!0);const M=await E6();M.status==="success"&&M.has_saved&&E(M.data)}catch(M){console.error("IP:",M)}finally{P(!1)}})()},[]),A.useEffect(()=>{(async()=>{try{K(!0);const M=await Ow("content_image");console.log(" [ContentImageGenerator] :",M),M.status==="success"?X(M.data):(console.error(" [ContentImageGenerator] API:",M),X({quota:{available:0,total_purchased:0},total_count:0}))}catch(M){console.error(" [ContentImageGenerator] :",M),X({quota:{available:0,total_purchased:0},total_count:0})}finally{K(!1)}})()},[]);const W=async()=>{if(!e.trim()){h("");return}try{s(!0),h(""),c([]),b({current:0,total:r});const le=[];for(let M=0;M<r;M++){b({current:M+1,total:r});const U={};T&&w&&(U.includeIpImage=!0,U.ipImageUrl=w.generated_image_url);const Q=await npe(e,M+1,U,y);Q.status==="success"&&Q.image_url?(le.push({id:M+1,url:Q.image_url}),c([...le])):console.error(` ${M+1} :`,Q.message)}if(le.length===0)h("");else{const M=await Ow("content_image");M.status==="success"&&X(M.data)}}catch(le){console.error(":",le),h("")}finally{s(!1),b({current:0,total:0})}},R=()=>{n(""),c([]),h(""),i(1)},B=(le,M)=>{const U=document.createElement("a");U.href=le,U.download=`content-image-${M}-${Date.now()}.png`,document.body.appendChild(U),U.click(),document.body.removeChild(U)},re=()=>{l.forEach((le,M)=>{setTimeout(()=>{B(le.url,M+1)},M*500)})};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[f.jsxs("div",{className:"mb-6",children:[f.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-4",children:[f.jsx(fl,{className:"w-5 h-5 mr-2"}),""]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:""}),f.jsx("p",{className:"text-gray-600 mt-2",children:"AI"})]}),!z&&Y&&f.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-gradient-to-r from-green-50 to-emerald-50 rounded-md border border-green-200",children:[f.jsx("span",{className:"text-xs text-gray-600",children:""}),f.jsxs("span",{className:"text-lg font-bold text-green-600",children:[Y.quota.available,""]})]}),f.jsxs("button",{onClick:te,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-1 rounded-md shadow-sm hover:shadow-md hover:from-orange-600 hover:to-red-600 transition-all flex items-center gap-1.5",children:[f.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsx("span",{className:"text-sm font-semibold",children:""})]})]})]}),!z&&Y&&f.jsxs("div",{className:"md:hidden mt-4 flex items-center justify-end gap-2",children:[f.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-gradient-to-r from-green-50 to-emerald-50 rounded-md border border-green-200",children:[f.jsx("span",{className:"text-xs text-gray-600",children:""}),f.jsxs("span",{className:"text-base font-bold text-green-600",children:[Y.quota.available,""]})]}),f.jsxs("button",{onClick:te,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-3 py-1 rounded-md shadow-sm active:scale-95 transition-all flex items-center gap-1",children:[f.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsx("span",{className:"text-xs font-semibold",children:""})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 sticky top-6",children:f.jsxs("div",{className:"space-y-6",children:[!N&&w&&f.jsxs("div",{className:"border border-purple-200 bg-purple-50 rounded-xl p-4",children:[f.jsxs("div",{className:"flex items-start space-x-3 mb-3",children:[f.jsx("img",{src:w.generated_image_url,alt:"IP",className:"w-16 h-16 rounded-lg object-cover shadow-md"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"IP"}),f.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 mt-1",children:w.prompt||"IP"})]})]}),f.jsxs("label",{className:"flex items-center cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:T,onChange:le=>C(le.target.checked),disabled:a,className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500 focus:ring-2"}),f.jsx("span",{className:"ml-3 text-sm font-medium text-gray-900",children:"IP"})]}),f.jsx("p",{className:"text-xs text-gray-500 mt-2 ml-8",children:"IP"})]}),N&&f.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 text-center",children:[f.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-gray-400"}),f.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"IP..."})]}),!N&&!w&&f.jsxs("div",{className:"border border-gray-200 bg-gray-50 rounded-xl p-4",children:[f.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[f.jsx(lz,{className:"w-5 h-5"}),f.jsx("span",{className:"text-sm",children:"IP"})]}),f.jsx("button",{onClick:()=>t("/ip-image-generator"),className:"mt-2 text-sm text-blue-600 hover:text-blue-700 font-medium",children:" "})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[f.jsx(Ko,{className:"w-5 h-5 inline mr-2"}),""]}),f.jsx("textarea",{value:e,onChange:le=>n(le.target.value),placeholder:`...

- 
- 
- `,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:"10",maxLength:"1000"}),f.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.length,"/1000 "]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:""}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:ce.map(le=>f.jsx("button",{type:"button",onClick:()=>x(le.value),disabled:a,className:`px-4 py-2 rounded-lg border-2 font-medium transition-all ${y===le.value?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-blue-400"} disabled:opacity-50 disabled:cursor-not-allowed`,children:le.label},le.value))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:""}),f.jsxs("select",{value:r,onChange:le=>i(parseInt(le.target.value)),disabled:a,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[f.jsx("option",{value:1,children:"1 "}),f.jsx("option",{value:2,disabled:!0,children:"2  ()"}),f.jsx("option",{value:3,disabled:!0,children:"3  ()"}),f.jsx("option",{value:4,disabled:!0,children:"4  ()"}),f.jsx("option",{value:5,disabled:!0,children:"5  ()"})]})]}),d&&f.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:f.jsx("p",{className:"text-sm text-red-600",children:d})}),f.jsx("button",{onClick:W,disabled:!e.trim()||a,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 font-semibold shadow-lg hover:shadow-xl",children:a?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),f.jsxs("span",{children:[" (",p.current,"/",p.total,")"]})]}):f.jsxs(f.Fragment,{children:[f.jsx(Tr,{className:"w-6 h-6"}),f.jsx("span",{children:""})]})}),l.length>0&&!a&&f.jsx("button",{onClick:R,className:"w-full py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:""})]})})}),f.jsx("div",{className:"lg:col-span-2",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[" ",l.length>0&&`(${l.length})`]}),l.length>0&&!D&&f.jsx("button",{onClick:re,className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-medium",children:""}),l.length>0&&D&&f.jsx("p",{className:"text-sm text-gray-600",children:""})]}),l.length>0?f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:l.map(le=>f.jsxs("div",{className:"relative group",children:[f.jsxs("div",{className:"relative overflow-hidden rounded-xl border-2 border-gray-200 hover:border-blue-400 transition-all cursor-pointer",onClick:()=>j(le),children:[f.jsx("img",{src:le.url,alt:` ${le.id}`,className:"w-full h-auto object-cover"}),f.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all flex items-center justify-center gap-3",children:[f.jsxs("button",{onClick:M=>{M.stopPropagation(),j(le)},className:"opacity-0 group-hover:opacity-100 transition-opacity px-4 py-2 bg-white text-gray-900 rounded-lg font-medium shadow-lg flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),""]}),!D&&f.jsxs("button",{onClick:M=>{M.stopPropagation(),B(le.url,le.id)},className:"opacity-0 group-hover:opacity-100 transition-opacity px-4 py-2 bg-green-600 text-white rounded-lg font-medium shadow-lg flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),""]})]})]}),f.jsxs("p",{className:"text-sm text-gray-600 mt-2 text-center",children:[" ",le.id]})]},le.id))}):f.jsx("div",{className:"h-[500px] border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center",children:f.jsxs("div",{className:"text-center",children:[f.jsx(Qo,{className:"w-20 h-20 mx-auto text-gray-300 mb-4"}),f.jsx("p",{className:"text-gray-400",children:""})]})})]})})]}),f.jsxs("div",{className:"mt-6 bg-white rounded-xl shadow-md p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("span",{className:"text-blue-600 font-bold",children:""}),f.jsx("p",{children:""})]}),f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("span",{className:"text-blue-600 font-bold",children:""}),f.jsx("p",{children:""})]}),f.jsxs("div",{className:"flex items-start space-x-2",children:[f.jsx("span",{className:"text-blue-600 font-bold",children:""}),f.jsx("p",{children:"1-5"})]})]})]}),k&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:()=>j(null),children:f.jsxs("div",{className:"relative max-w-6xl max-h-[95vh] w-full",children:[f.jsxs("button",{onClick:()=>j(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors flex items-center gap-2",children:[f.jsx("span",{className:"text-sm",children:"ESC "}),f.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]}),f.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden shadow-2xl",onClick:le=>le.stopPropagation(),children:[f.jsx("img",{src:k.url,alt:` ${k.id} `,className:"w-full h-auto object-contain max-h-[75vh]"}),f.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 border-t border-gray-200",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("p",{className:"text-sm font-semibold text-gray-900 mb-1",children:[" ",k.id]}),k.prompt&&f.jsx("p",{className:"text-xs text-gray-600",children:k.prompt})]}),!D&&f.jsxs("button",{onClick:()=>B(k.url,k.id),className:"ml-4 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all font-medium shadow-md hover:shadow-lg flex items-center gap-2",children:[f.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),""]}),D&&f.jsx("p",{className:"ml-4 text-sm text-gray-600",children:""})]})})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx("p",{className:"text-white text-sm opacity-75",children:" ESC "})})]})})]})})}function spe({title:t,titleId:e,...n},r){return A.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?A.createElement("title",{id:e},t):null,A.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const CP=A.forwardRef(spe);function ope(){const t=qi(),[e,n]=A.useState([]),[r,i]=A.useState(!0),[a,s]=A.useState(null),[l,c]=A.useState(""),[d,h]=A.useState(!1),[p,b]=A.useState(1),[y,x]=A.useState(1),[w,E]=A.useState(new Set),[T,C]=A.useState(null),[N,P]=A.useState(!1),[k,j]=A.useState(null),[D,H]=A.useState(null),[Y,X]=A.useState("content_image"),[z,K]=A.useState(""),[ce,te]=A.useState(!1),[W,R]=A.useState(!1);A.useEffect(()=>{(()=>{const J=typeof window<"u"&&typeof window.wx<"u"&&typeof window.wx.miniProgram<"u";R(J)})()},[]),A.useEffect(()=>{B(),re()},[p,l,d]);const B=async()=>{try{i(!0);const be=localStorage.getItem("access_token"),J=new URLSearchParams({page:p,page_size:12});l&&J.append("media_type",l),d&&J.append("is_favorite","true");const Be=await(await fetch(`${gt}/api/media-library/?${J}`,{headers:{Authorization:`Bearer ${be}`}})).json();Be.status==="success"&&(n(Be.data.items),x(Be.data.total_pages))}catch(be){console.error(":",be)}finally{i(!1)}},re=async()=>{try{const be=localStorage.getItem("access_token"),Oe=await(await fetch(`${gt}/api/media-library/stats/`,{headers:{Authorization:`Bearer ${be}`}})).json();Oe.status==="success"&&s(Oe.data)}catch(be){console.error(":",be)}},le=async be=>{try{const J=localStorage.getItem("access_token"),Be=await(await fetch(`${gt}/api/media-library/${be}/favorite/`,{method:"POST",headers:{Authorization:`Bearer ${J}`}})).json();Be.status==="success"&&(n(se=>se.map(ze=>ze.id===be?{...ze,is_favorite:Be.is_favorite}:ze)),re())}catch(J){console.error(":",J)}},M=async be=>{if(confirm(""))try{const J=localStorage.getItem("access_token");(await(await fetch(`${gt}/api/media-library/${be}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${J}`}})).json()).status==="success"&&(n(se=>se.filter(ze=>ze.id!==be)),re())}catch(J){console.error(":",J)}},U=async()=>{if(w.size===0){alert("");return}if(confirm(` ${w.size} `))try{const be=localStorage.getItem("access_token"),Oe=await(await fetch(`${gt}/api/media-library/batch-delete/`,{method:"POST",headers:{Authorization:`Bearer ${be}`,"Content-Type":"application/json"},body:JSON.stringify({media_ids:Array.from(w)})})).json();Oe.status==="success"&&(E(new Set),B(),re(),alert(Oe.message))}catch(be){console.error(":",be),alert("")}},Q=be=>{E(J=>{const Oe=new Set(J);return Oe.has(be)?Oe.delete(be):Oe.add(be),Oe})},I=()=>{w.size===e.length?E(new Set):E(new Set(e.map(be=>be.id)))},oe=(be,J)=>{const Oe=document.createElement("a");Oe.href=be,Oe.download=`media-${J}-${Date.now()}.png`,document.body.appendChild(Oe),Oe.click(),document.body.removeChild(Oe)},$=be=>{const J=be.target.files[0];if(!J)return;if(!J.type.startsWith("image/")){alert("");return}if(J.size>10*1024*1024){alert("10MB");return}j(J);const Oe=new FileReader;Oe.onload=Be=>{H(Be.target.result)},Oe.readAsDataURL(J)},ie=async()=>{if(!k){alert("");return}try{te(!0);const be=new FormData;be.append("image",k),be.append("media_type",Y),be.append("prompt",z);const J=localStorage.getItem("access_token"),Be=await(await fetch(`${gt}/api/media-library/upload/`,{method:"POST",headers:{Authorization:`Bearer ${J}`},body:be})).json();Be.status==="success"?(alert(""),P(!1),j(null),H(null),K(""),X("content_image"),B(),re()):alert(Be.message||"")}catch(be){console.error(":",be),alert("")}finally{te(!1)}},me=()=>{P(!1),j(null),H(null),K(""),X("content_image")};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-3 md:px-4 sm:px-6 lg:px-8 py-3 md:py-6",children:[f.jsxs("div",{className:"mb-4 md:mb-6",children:[f.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-3 md:mb-4",children:[f.jsx(fl,{className:"w-4 h-4 md:w-5 md:h-5 mr-1 md:mr-2"}),f.jsx("span",{className:"text-sm md:text-base",children:""})]}),f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl md:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:""}),f.jsx("p",{className:"text-xs md:text-base text-gray-600 mt-1 md:mt-2",children:""})]})})]}),a&&f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 mb-4 md:mb-6",children:[f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl p-2 md:p-4 shadow-md",children:[f.jsx("div",{className:"text-gray-600 text-xs md:text-sm mb-1",children:""}),f.jsx("div",{className:"text-lg md:text-2xl font-bold text-blue-600",children:a.total_count})]}),f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl p-2 md:p-4 shadow-md",children:[f.jsx("div",{className:"text-gray-600 text-xs md:text-sm mb-1",children:"IP"}),f.jsx("div",{className:"text-lg md:text-2xl font-bold text-purple-600",children:a.ip_image_count})]}),f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl p-2 md:p-4 shadow-md",children:[f.jsx("div",{className:"text-gray-600 text-xs md:text-sm mb-1",children:""}),f.jsx("div",{className:"text-lg md:text-2xl font-bold text-indigo-600",children:a.content_image_count})]}),f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl p-2 md:p-4 shadow-md",children:[f.jsx("div",{className:"text-gray-600 text-xs md:text-sm mb-1",children:""}),f.jsxs("div",{className:"text-lg md:text-2xl font-bold text-green-600",children:[a.total_size_mb," MB"]})]})]}),f.jsx("div",{className:"bg-white rounded-lg md:rounded-xl shadow-md p-2 md:p-4 mb-4 md:mb-6",children:f.jsxs("div",{className:"flex flex-col md:flex-row md:flex-wrap items-stretch md:items-center gap-2 md:gap-4",children:[f.jsxs("div",{className:"flex items-center gap-1 md:gap-2 flex-1 md:flex-initial",children:[f.jsx("button",{onClick:()=>c(""),className:`flex-1 md:flex-initial px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm rounded-lg transition-all ${l===""?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),f.jsx("button",{onClick:()=>c("ip_image"),className:`flex-1 md:flex-initial px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm rounded-lg transition-all ${l==="ip_image"?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"IP"}),f.jsx("button",{onClick:()=>c("content_image"),className:`flex-1 md:flex-initial px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm rounded-lg transition-all ${l==="content_image"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""})]}),f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsxs("button",{onClick:()=>h(!d),className:`px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm rounded-lg transition-all flex items-center gap-1 md:gap-2 ${d?"bg-red-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[f.jsx(qy,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{className:"hidden md:inline",children:""})]}),f.jsxs("button",{onClick:()=>P(!0),className:"px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all flex items-center gap-1 md:gap-2 shadow-md hover:shadow-lg",children:[f.jsx($y,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""})]}),w.size>0?f.jsxs(f.Fragment,{children:[f.jsxs("span",{className:"text-xs md:text-sm text-gray-600",children:[" ",w.size]}),f.jsxs("button",{onClick:U,className:"px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all flex items-center gap-1 md:gap-2",children:[f.jsx(Eu,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""})]})]}):null,f.jsx("button",{onClick:I,className:"px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-all ml-auto",children:w.size===e.length&&e.length>0?"":""})]})]})}),r?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.length>0?f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2 md:gap-4",children:e.map(be=>f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all relative group",children:[f.jsx("div",{className:"absolute top-1 left-1 md:top-2 md:left-2 z-10",children:f.jsx("input",{type:"checkbox",checked:w.has(be.id),onChange:()=>Q(be.id),className:"w-4 h-4 md:w-5 md:h-5 rounded cursor-pointer"})}),f.jsx("div",{className:"absolute top-1 right-1 md:top-2 md:right-2 z-10",children:f.jsx("span",{className:`px-1.5 py-0.5 md:px-2 md:py-1 text-[10px] md:text-xs rounded-full text-white ${be.media_type==="ip_image"?"bg-purple-600":"bg-indigo-600"}`,children:be.media_type_display})}),f.jsx("div",{className:"aspect-square cursor-pointer",onClick:()=>C(be),children:f.jsx("img",{src:be.url,alt:be.prompt,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"p-2 md:p-3",children:[f.jsx("p",{className:"text-xs md:text-sm text-gray-600 line-clamp-2 mb-1 md:mb-2",children:be.prompt||""}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-[10px] md:text-xs text-gray-500",children:be.created_at}),f.jsxs("div",{className:"flex items-center gap-1 md:gap-2",children:[f.jsx("button",{onClick:()=>le(be.id),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:be.is_favorite?f.jsx(CP,{className:"w-4 h-4 md:w-5 md:h-5 text-red-600"}):f.jsx(qy,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-400"})}),f.jsx("button",{onClick:()=>M(be.id),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:f.jsx(Eu,{className:"w-4 h-4 md:w-5 md:h-5 text-gray-400 hover:text-red-600"})})]})]})]})]},be.id))}):f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-md p-8 md:p-12 text-center",children:[f.jsx(Qo,{className:"w-12 h-12 md:w-16 md:h-16 mx-auto text-gray-300 mb-3 md:mb-4"}),f.jsx("p",{className:"text-sm md:text-base text-gray-500",children:""})]}),y>1&&f.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4 md:mt-6",children:[f.jsx("button",{onClick:()=>b(be=>Math.max(1,be-1)),disabled:p===1,className:"px-3 py-1.5 md:px-4 md:py-2 text-xs md:text-sm bg-white rounded-lg shadow-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:""}),f.jsxs("span",{className:"px-2 md:px-4 py-1.5 md:py-2 text-xs md:text-sm text-gray-600",children:[p," / ",y]}),f.jsx("button",{onClick:()=>b(be=>Math.min(y,be+1)),disabled:p===y,className:"px-3 py-1.5 md:px-4 md:py-2 text-xs md:text-sm bg-white rounded-lg shadow-md disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-colors",children:""})]}),T&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-4",onClick:()=>C(null),children:f.jsxs("div",{className:"relative max-w-4xl max-h-[90vh] w-full",children:[f.jsx("button",{onClick:()=>C(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors",children:f.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f.jsxs("div",{className:"bg-white rounded-2xl overflow-hidden",onClick:be=>be.stopPropagation(),children:[f.jsx("img",{src:T.url,alt:T.prompt,className:"w-full h-auto max-h-[70vh] object-contain"}),f.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50",children:f.jsxs("div",{className:"flex items-start justify-between mb-2",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("span",{className:`px-2 py-1 text-xs rounded-full text-white ${T.media_type==="ip_image"?"bg-purple-600":"bg-indigo-600"}`,children:T.media_type_display}),f.jsx("span",{className:"text-xs text-gray-500",children:T.created_at})]}),f.jsx("p",{className:"text-sm text-gray-700",children:T.prompt||""})]}),f.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[f.jsx("button",{onClick:()=>{le(T.id),C(be=>({...be,is_favorite:!be.is_favorite}))},className:"p-2 hover:bg-white rounded-lg transition-colors",children:T.is_favorite?f.jsx(CP,{className:"w-6 h-6 text-red-600"}):f.jsx(qy,{className:"w-6 h-6 text-gray-400"})}),!W&&f.jsx("button",{onClick:()=>oe(T.url,T.id),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all",children:""})]})]})})]})]})}),N&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:me,children:f.jsxs("div",{className:"bg-white rounded-2xl max-w-lg w-full p-6",onClick:be=>be.stopPropagation(),children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsx("h3",{className:"text-xl font-bold text-gray-900",children:""}),f.jsx("button",{onClick:me,className:"text-gray-400 hover:text-gray-600 transition-colors",children:f.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),D?f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx("img",{src:D,alt:"",className:"w-full h-64 object-contain rounded-xl bg-gray-100"}),f.jsx("button",{onClick:()=>{j(null),H(null)},className:"absolute top-2 right-2 p-2 bg-red-600 text-white rounded-full hover:bg-red-700 transition-colors",children:f.jsx(Eu,{className:"w-5 h-5"})})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>X("content_image"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${Y==="content_image"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:""}),f.jsx("button",{onClick:()=>X("ip_image"),className:`flex-1 px-4 py-2 rounded-lg transition-all ${Y==="ip_image"?"bg-purple-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"IP"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"/"}),f.jsx("textarea",{value:z,onChange:be=>K(be.target.value),placeholder:"...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:"3",maxLength:"500"}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[z.length,"/500 "]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:me,className:"flex-1 px-4 py-3 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition-colors font-semibold",children:""}),f.jsx("button",{onClick:ie,disabled:ce,className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 transition-all font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ce?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),f.jsx("span",{children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx($y,{className:"w-5 h-5"}),f.jsx("span",{children:""})]})})]})]}):f.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 transition-colors",children:[f.jsx("input",{type:"file",accept:"image/*",onChange:$,className:"hidden",id:"upload-input"}),f.jsxs("label",{htmlFor:"upload-input",className:"cursor-pointer",children:[f.jsx($y,{className:"w-16 h-16 mx-auto text-gray-400 mb-4"}),f.jsx("p",{className:"text-gray-600 mb-2",children:""}),f.jsx("p",{className:"text-sm text-gray-400",children:" JPGPNGWEBPGIF10MB"})]})]})]})})]})})}function lpe(){const t=qi(),[e]=dU(),[n,r]=A.useState(null),[i,a]=A.useState(""),[s,l]=A.useState(""),[c,d]=A.useState("zh-CN-YunxiNeural"),[h,p]=A.useState([]),[b,y]=A.useState(!1),[x,w]=A.useState(null),[E,T]=A.useState(!1),[C,N]=A.useState(null),[P,k]=A.useState([]),[j,D]=A.useState(!1),[H,Y]=A.useState(null),[X,z]=A.useState([]),[K,ce]=A.useState(!1),[te,W]=A.useState(null),[R,B]=A.useState(!1);A.useEffect(()=>{const ee=e.get("project");ee?re(ee):localStorage.getItem("video_draft")&&B(!0)},[e]);const re=async ee=>{try{const ye=localStorage.getItem("access_token"),De=await(await fetch(`${gt}/api/video/projects/${ee}/`,{headers:{Authorization:`Bearer ${ye}`}})).json();if(De.status==="success"){const Ue=De.data;r(Ue.id),a(Ue.subtitles||""),l(""),d(Ue.voice||"zh-CN-YunxiNeural"),p(Ue.scenes_data||[]),B(!1)}else alert("")}catch(ye){console.error(":",ye),alert("")}},le=()=>{const ee=localStorage.getItem("video_draft");if(!ee){alert("");return}try{const ye=JSON.parse(ee);a(ye.subtitles||""),l(ye.customSceneCount||""),p(ye.prompts||[]),B(!1),alert("")}catch(ye){console.error(":",ye),alert("")}},M=()=>{confirm("")&&(localStorage.removeItem("video_draft"),B(!1),alert(""))},U=async()=>{try{const ee=localStorage.getItem("access_token"),ye={title:"",subtitles:i,scenes_data:h,duration:3,voice:c,status:"draft"};let He;n?He=await fetch(`${gt}/api/video/projects/${n}/update/`,{method:"PUT",headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"},body:JSON.stringify(ye)}):He=await fetch(`${gt}/api/video/projects/create/`,{method:"POST",headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"},body:JSON.stringify(ye)});const De=await He.json();De.status==="success"?(n||(r(De.data.id),t(`/video-generator?project=${De.data.id}`,{replace:!0})),alert("")):alert(": "+(De.message||""))}catch(ee){console.error(":",ee),alert("")}},Q=async()=>{const ee=h.filter(ye=>!ye.image);if(ee.length>0){alert(`
 ${ee.length} `);return}try{T(!0);const ye=localStorage.getItem("access_token"),He={images:h.map(Ae=>({image_url:Ae.image,text:(Ae.assignedSubtitles||[]).join("")})),duration:3,voice:c};console.log(":",He);const De=await fetch(`${gt}/api/video/create/`,{method:"POST",headers:{Authorization:`Bearer ${ye}`,"Content-Type":"application/json"},body:JSON.stringify(He)}),Ue=await De.json();if(!De.ok){console.error(":",Ue),alert(`: ${Ue.message||""}`);return}if(console.log(":",Ue),!Ue.task_id){alert("ID");return}const Ge={title:i.split(`
`)[0].slice(0,50)||"",subtitles:i,scene_count:h.length,scenes_data:h,duration:3,voice:c,status:"processing",taskid:Ue.task_id};let nt=n,rt;n?rt=await fetch(`${gt}/api/video/projects/${n}/update/`,{method:"PUT",headers:{Authorization:`Bearer ${ye}`,"Content-Type":"application/json"},body:JSON.stringify(Ge)}):rt=await fetch(`${gt}/api/video/projects/create/`,{method:"POST",headers:{Authorization:`Bearer ${ye}`,"Content-Type":"application/json"},body:JSON.stringify(Ge)});const We=await rt.json();We.status==="success"?(nt=We.data.id,n||r(nt),alert(`ID: ${Ue.task_id}`),t("/video-projects")):alert(`: ${We.message||""}`)}catch(ye){console.error(":",ye),alert(`: ${ye.message}`)}finally{T(!1)}},I=async()=>{if(!i.trim()){alert("");return}try{y(!0);const ee=localStorage.getItem("access_token"),He=await(await fetch(`${gt}/api/video/generate-prompts/`,{method:"POST",headers:{Authorization:`Bearer ${ee}`,"Content-Type":"application/json"},body:JSON.stringify({subtitles:i})})).json();He.status==="success"?p(He.prompts.map((De,Ue)=>({id:Date.now()+Ue,text:De,image:null,isGenerating:!1,assignedSubtitles:[]}))):alert(He.message||"")}catch(ee){console.error(":",ee),alert("")}finally{y(!1)}},oe=async ee=>{const ye=h[ee];if(!ye.text.trim()){alert("");return}try{w(ee),p(nt=>nt.map((rt,We)=>We===ee?{...rt,isGenerating:!0}:rt));const He=localStorage.getItem("access_token"),De=new FormData;De.append("content",ye.text),De.append("image_index",1);const Ge=await(await fetch(`${gt}/api/ip-image/generate-v2`,{method:"POST",headers:{Authorization:`Bearer ${He}`},body:De})).json();Ge.status==="success"?p(nt=>nt.map((rt,We)=>We===ee?{...rt,image:Ge.image_url,isGenerating:!1}:rt)):(alert(Ge.message||""),p(nt=>nt.map((rt,We)=>We===ee?{...rt,isGenerating:!1}:rt)))}catch(He){console.error(":",He),alert(""),p(De=>De.map((Ue,Ge)=>Ge===ee?{...Ue,isGenerating:!1}:Ue))}finally{w(null)}},$=async ee=>{Y(ee),D(!0);try{ce(!0);const ye=localStorage.getItem("access_token"),De=await(await fetch(`${gt}/api/media-library/?page=1&page_size=50`,{headers:{Authorization:`Bearer ${ye}`}})).json();De.status==="success"&&z(De.data.items)}catch(ye){console.error(":",ye)}finally{ce(!1)}},ie=ee=>{H!==null&&p(ye=>ye.map((He,De)=>De===H?{...He,image:ee}:He)),D(!1),Y(null)},me=ee=>{p(ye=>ye.filter((He,De)=>De!==ee))},be=(ee,ye)=>{p(He=>He.map((De,Ue)=>Ue===ee?{...De,text:ye}:De))},J=()=>{p(ee=>[...ee,{id:Date.now(),text:"",image:null,isGenerating:!1,assignedSubtitles:[]}])},Oe=ee=>{N(ee)},Be=(ee,ye)=>{if(ee.preventDefault(),C===null||C===ye)return;const He=[...h],De=He[C];He.splice(C,1),He.splice(ye,0,De),p(He),N(ye)},se=()=>{N(null)},ze=()=>{const ee=i.trim();if(!ee)return[];const He=ee.split(/[\n]+/).map(De=>De.trim()).filter(De=>De.length>0);return k(He),He},Fe=()=>{const ee=ze();if(console.log(":",ee.length),console.log(":",ee),ee.length===0){alert("");return}const ye=[],He=s?parseInt(s):null;if(He&&He>0){if(He>ee.length){alert(`(${He})(${ee.length})`);return}const De=Math.floor(ee.length/He),Ue=ee.length%He;let Ge=0;for(let nt=0;nt<He;nt++){const rt=De+(nt<Ue?1:0),We=ee.slice(Ge,Ge+rt);console.log(` ${nt+1}: groupSize=${rt}, :`,We),ye.push({id:Date.now()+Ge+nt,text:We.join(""),image:null,isGenerating:!1,assignedSubtitles:We}),Ge+=rt}}else{let De=0;for(;De<ee.length;){const Ue=ee.length-De;let Ge;if(Ue<=2)Ge=Ue;else if(Ue===3)Ge=3;else if(Ue===4)Ge=4;else if(Ue===5)Ge=De===0?2:3;else if(Ue===6)Ge=3;else if(Ue===7)Ge=De===0?3:4;else{const rt=Math.ceil(Ue/3);Ge=Math.ceil(Ue/rt),Ge=Math.max(2,Math.min(4,Ge))}const nt=ee.slice(De,De+Ge);console.log(` ${ye.length+1}: groupSize=${Ge}, :`,nt),ye.push({id:Date.now()+De+ye.length,text:nt.join(""),image:null,isGenerating:!1,assignedSubtitles:nt}),De+=Ge}}console.log(":",ye.length),p(ye)},tt=(ee,ye)=>{p(He=>He.map((De,Ue)=>Ue===ee?{...De,assignedSubtitles:ye.split(`
`).filter(Ge=>Ge.trim())}:De))};return f.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-3 md:px-4 sm:px-6 lg:px-8 py-3 md:py-6",children:[f.jsxs("div",{className:"mb-4 md:mb-6",children:[f.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-3 md:mb-4",children:[f.jsx(fl,{className:"w-4 h-4 md:w-5 md:h-5 mr-1 md:mr-2"}),f.jsx("span",{className:"text-sm md:text-base",children:""})]}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl md:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:""}),f.jsx("p",{className:"text-xs md:text-base text-gray-600 mt-1 md:mt-2",children:"AI"})]})]}),R&&f.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg md:rounded-xl p-3 md:p-4 mb-4 md:mb-6 flex items-center justify-between gap-3",children:[f.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[f.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),f.jsx("span",{className:"text-xs md:text-sm text-blue-900",children:""})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:le,className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all text-xs md:text-sm font-semibold whitespace-nowrap",children:""}),f.jsx("button",{onClick:M,className:"px-3 py-1.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all text-xs md:text-sm whitespace-nowrap",children:""})]})]}),f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-md p-4 md:p-6 mb-4 md:mb-6",children:[f.jsx("label",{className:"block text-sm md:text-base font-semibold text-gray-700 mb-3",children:""}),f.jsx("textarea",{value:i,onChange:ee=>a(ee.target.value),placeholder:`...



`,className:"w-full px-3 md:px-4 py-2 md:py-3 border border-gray-300 rounded-lg md:rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none text-sm md:text-base",rows:"8"}),f.jsxs("div",{className:"mt-4 space-y-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("label",{className:"text-xs md:text-sm text-gray-700 font-medium whitespace-nowrap",children:""}),f.jsx("input",{type:"number",value:s,onChange:ee=>l(ee.target.value),placeholder:"",min:"1",className:"flex-1 max-w-xs px-3 py-1.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs md:text-sm"}),f.jsx("span",{className:"text-xs text-gray-500",children:""})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("label",{className:"text-xs md:text-sm text-gray-700 font-medium whitespace-nowrap",children:""}),f.jsxs("select",{value:c,onChange:ee=>d(ee.target.value),className:"flex-1 max-w-xs px-3 py-1.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-xs md:text-sm",children:[f.jsxs("optgroup",{label:"",children:[f.jsx("option",{value:"zh-CN-YunxiNeural",children:" - "}),f.jsx("option",{value:"zh-CN-YunjianNeural",children:" - "}),f.jsx("option",{value:"zh-CN-YunyangNeural",children:" - "}),f.jsx("option",{value:"zh-CN-YunzeNeural",children:" - "}),f.jsx("option",{value:"zh-CN-YunfengNeural",children:" - "}),f.jsx("option",{value:"zh-CN-YunhaoNeural",children:" - "})]}),f.jsxs("optgroup",{label:"",children:[f.jsx("option",{value:"zh-CN-XiaoxiaoNeural",children:" - "}),f.jsx("option",{value:"zh-CN-XiaoyiNeural",children:" - "}),f.jsx("option",{value:"zh-CN-XiaoxuanNeural",children:" - "}),f.jsx("option",{value:"zh-CN-XiaoyanNeural",children:" - "}),f.jsx("option",{value:"zh-CN-XiaomengNeural",children:" - "}),f.jsx("option",{value:"zh-CN-XiaomoNeural",children:" - "}),f.jsx("option",{value:"zh-CN-XiaohanNeural",children:" - "}),f.jsx("option",{value:"zh-CN-XiaoruiNeural",children:" - "})]})]})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("p",{className:"text-xs md:text-sm text-gray-500",children:[i.length," "]}),f.jsxs("div",{className:"flex gap-2 md:gap-3",children:[f.jsxs("button",{onClick:Fe,disabled:!i.trim(),className:"px-3 md:px-4 py-2 md:py-3 bg-green-600 text-white rounded-lg md:rounded-xl hover:bg-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-xs md:text-sm font-semibold shadow-md hover:shadow-lg",children:[f.jsx(FH,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""})]}),f.jsx("button",{onClick:I,disabled:b||!i.trim(),className:"px-4 md:px-6 py-2 md:py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg md:rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-xs md:text-sm font-semibold shadow-md hover:shadow-lg",children:b?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 md:h-5 md:w-5 border-b-2 border-white"}),f.jsx("span",{children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(Tr,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""})]})})]})]})]})]}),h.length>0&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between gap-2 mb-3 md:mb-4",children:[f.jsxs("h2",{className:"text-base md:text-lg font-semibold text-gray-900",children:[" (",h.length,")"]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("button",{onClick:U,className:"px-3 md:px-4 py-1.5 md:py-2 bg-gray-600 text-white rounded-lg md:rounded-xl hover:bg-gray-700 transition-all flex items-center gap-1 md:gap-2 text-xs md:text-sm font-semibold shadow-md hover:shadow-lg whitespace-nowrap",children:[f.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),f.jsx("span",{children:""})]}),f.jsx("button",{onClick:Q,disabled:h.some(ee=>!ee.image)||E,className:"px-3 md:px-6 py-1.5 md:py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg md:rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 md:gap-2 text-xs md:text-base font-semibold shadow-md hover:shadow-lg whitespace-nowrap",children:E?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 md:h-5 md:w-5 border-b-2 border-white"}),f.jsx("span",{children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(Tr,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""})]})})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:h.map((ee,ye)=>f.jsx("div",{draggable:!0,onDragStart:()=>Oe(ye),onDragOver:He=>Be(He,ye),onDragEnd:se,className:`bg-white rounded-lg md:rounded-xl shadow-md p-3 md:p-4 cursor-move transition-all ${C===ye?"opacity-50 scale-95":"opacity-100 scale-100"}`,children:f.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[f.jsxs("div",{className:"flex-shrink-0",children:[f.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full flex items-center justify-center font-bold text-xs md:text-sm mb-1",children:ye+1}),f.jsx("div",{className:"text-[10px] md:text-xs text-gray-400 text-center",children:""})]}),f.jsxs("div",{className:"flex-1 space-y-3",children:[f.jsx("div",{className:"flex flex-col gap-3",children:f.jsxs("div",{className:"flex flex-row md:flex-col gap-3",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-2",children:""}),f.jsx("textarea",{value:ee.text,onChange:He=>be(ye,He.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none text-xs md:text-sm",rows:"3"})]}),f.jsxs("div",{className:"w-32 md:w-full flex-shrink-0",children:[f.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-2",children:""}),ee.image?f.jsx("img",{src:ee.image,alt:` ${ye+1}`,onClick:()=>W(ee.image),className:"w-full h-24 md:h-40 object-cover rounded-lg cursor-pointer hover:opacity-90 transition-opacity"}):f.jsx("div",{className:"w-full h-24 md:h-40 bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300",children:f.jsx(Qo,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"})})]})]})}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx("button",{onClick:()=>oe(ye),disabled:ee.isGenerating||!ee.text.trim(),className:"flex-1 md:flex-initial px-3 md:px-4 py-1.5 md:py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-1 md:gap-2 text-xs md:text-sm font-semibold",children:ee.isGenerating?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-b-2 border-white"}),f.jsx("span",{children:"..."})]}):f.jsxs(f.Fragment,{children:[f.jsx(Tr,{className:"w-4 h-4"}),f.jsx("span",{children:""})]})}),f.jsxs("button",{onClick:()=>$(ye),className:"flex-1 md:flex-initial px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all flex items-center justify-center gap-1 md:gap-2 text-xs md:text-sm font-semibold",children:[f.jsx(Qo,{className:"w-4 h-4"}),f.jsx("span",{children:""})]}),f.jsxs("button",{onClick:()=>me(ye),className:"px-3 md:px-4 py-1.5 md:py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all flex items-center gap-1 md:gap-2 text-xs md:text-sm",children:[f.jsx(Eu,{className:"w-4 h-4"}),f.jsx("span",{className:"hidden md:inline",children:""})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs md:text-sm font-semibold text-gray-700 mb-2",children:""}),f.jsx("textarea",{value:(ee.assignedSubtitles||[]).join(`
`),onChange:He=>tt(ye,He.target.value),placeholder:"...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none text-xs md:text-sm",rows:"2"}),ee.assignedSubtitles&&ee.assignedSubtitles.length>0&&f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" ",ee.assignedSubtitles.length," "]})]})]})]})},ee.id))}),f.jsx("div",{className:"flex justify-center pt-2 mt-4",children:f.jsxs("button",{onClick:J,className:"px-4 md:px-6 py-2 md:py-3 bg-green-600 text-white rounded-lg md:rounded-xl hover:bg-green-700 transition-all flex items-center gap-2 text-sm md:text-base font-semibold shadow-md hover:shadow-lg",children:[f.jsx(Zd,{className:"w-5 h-5"}),f.jsx("span",{children:""})]})})]}),h.length===0&&!b&&f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-md p-8 md:p-12 text-center",children:[f.jsx(Tr,{className:"w-12 h-12 md:w-16 md:h-16 mx-auto text-gray-300 mb-3 md:mb-4"}),f.jsx("p",{className:"text-sm md:text-base text-gray-500",children:""})]}),te&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:()=>W(null),children:f.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[f.jsx("img",{src:te,alt:"",className:"max-w-full max-h-full object-contain rounded-lg",onClick:ee=>ee.stopPropagation()}),f.jsx("button",{onClick:()=>W(null),className:"absolute top-4 right-4 w-10 h-10 bg-white bg-opacity-20 hover:bg-opacity-30 text-white rounded-full flex items-center justify-center text-2xl font-bold transition-all",children:""})]})}),j&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:()=>D(!1),children:f.jsxs("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[80vh] overflow-hidden flex flex-col",onClick:ee=>ee.stopPropagation(),children:[f.jsx("div",{className:"p-4 md:p-6 border-b",children:f.jsx("h3",{className:"text-lg md:text-xl font-bold text-gray-900",children:""})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:K?f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):X.length>0?f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 md:gap-4",children:X.map(ee=>f.jsx("div",{onClick:()=>ie(ee.url),className:"aspect-square cursor-pointer rounded-lg overflow-hidden hover:ring-4 hover:ring-blue-500 transition-all",children:f.jsx("img",{src:ee.url,alt:ee.prompt,className:"w-full h-full object-cover"})},ee.id))}):f.jsxs("div",{className:"text-center py-12",children:[f.jsx(Qo,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),f.jsx("p",{className:"text-gray-500",children:""})]})}),f.jsx("div",{className:"p-4 md:p-6 border-t",children:f.jsx("button",{onClick:()=>D(!1),className:"w-full px-4 py-2 md:py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-semibold",children:""})})]})})]})})}function upe(){const t=qi(),[e,n]=A.useState([]),[r,i]=A.useState(!0),[a,s]=A.useState(!1),[l,c]=A.useState(null);A.useEffect(()=>{d()},[]);const d=async()=>{try{i(!0);const w=localStorage.getItem("access_token"),T=await(await fetch(`${gt}/api/video/projects/`,{headers:{Authorization:`Bearer ${w}`}})).json();T.status==="success"&&n(T.data)}catch(w){console.error(":",w)}finally{i(!1)}},h=async w=>{if(confirm(""))try{const E=localStorage.getItem("access_token"),C=await(await fetch(`${gt}/api/video/projects/${w}/delete/`,{method:"DELETE",headers:{Authorization:`Bearer ${E}`}})).json();C.status==="success"?d():alert(C.message||"")}catch(E){console.error(":",E),alert("")}},p=w=>new Date(w).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),b=w=>{c(w),s(!0)},y=()=>{s(!1),c(null)},x=w=>({draft:"bg-gray-100 text-gray-700",processing:"bg-yellow-100 text-yellow-700",completed:"bg-green-100 text-green-700",failed:"bg-red-100 text-red-700"})[w]||"bg-gray-100 text-gray-700";return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[f.jsxs("div",{className:"max-w-7xl mx-auto px-3 md:px-4 sm:px-6 lg:px-8 py-3 md:py-6",children:[f.jsxs("div",{className:"mb-4 md:mb-6",children:[f.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-3 md:mb-4",children:[f.jsx(fl,{className:"w-4 h-4 md:w-5 md:h-5 mr-1 md:mr-2"}),f.jsx("span",{className:"text-sm md:text-base",children:""})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-xl md:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:""}),f.jsx("p",{className:"text-xs md:text-base text-gray-600 mt-1 md:mt-2",children:""})]}),f.jsxs("button",{onClick:()=>t("/video-generator"),className:"px-4 md:px-6 py-2 md:py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg md:rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all flex items-center gap-2 text-sm md:text-base font-semibold shadow-md hover:shadow-lg",children:[f.jsx(Zd,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""})]})]})]}),r&&f.jsx("div",{className:"flex items-center justify-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),!r&&e.length>0&&f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:e.map(w=>f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-md hover:shadow-lg transition-all p-4 md:p-6",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 flex-1 mr-2",children:w.title}),f.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(w.status)}`,children:w.status_display})]}),f.jsxs("div",{className:"space-y-2 mb-4",children:[f.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600",children:[f.jsx(Ko,{className:"w-4 h-4 mr-2"}),f.jsxs("span",{children:[w.scene_count," "]})]}),f.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600",children:[f.jsx(GH,{className:"w-4 h-4 mr-2"}),f.jsx("span",{children:p(w.updated_at)})]})]}),f.jsxs("div",{className:"flex gap-2",children:[w.video_url?f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:()=>b(w.video_url),className:"flex-1 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all flex items-center justify-center gap-2 text-xs md:text-sm font-semibold",children:[f.jsx(dp,{className:"w-4 h-4"}),f.jsx("span",{children:""})]}),f.jsx("button",{onClick:()=>t(`/video-generator?project=${w.id}`),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center justify-center text-xs md:text-sm",children:f.jsx(Ko,{className:"w-4 h-4"})})]}):f.jsxs("button",{onClick:()=>t(`/video-generator?project=${w.id}`),className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all flex items-center justify-center gap-2 text-xs md:text-sm font-semibold",children:[f.jsx(dp,{className:"w-4 h-4"}),f.jsx("span",{children:""})]}),f.jsx("button",{onClick:()=>h(w.id),className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all flex items-center justify-center text-xs md:text-sm",children:f.jsx(Eu,{className:"w-4 h-4"})})]})]},w.id))}),!r&&e.length===0&&f.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-md p-8 md:p-12 text-center",children:[f.jsx(Ko,{className:"w-12 h-12 md:w-16 md:h-16 mx-auto text-gray-300 mb-3 md:mb-4"}),f.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2",children:""}),f.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-4",children:'""'}),f.jsxs("button",{onClick:()=>t("/video-generator"),className:"px-4 md:px-6 py-2 md:py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg md:rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all inline-flex items-center gap-2 text-sm md:text-base font-semibold",children:[f.jsx(Zd,{className:"w-4 h-4 md:w-5 md:h-5"}),f.jsx("span",{children:""})]})]})]}),a&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:y,children:f.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-4xl w-full",onClick:w=>w.stopPropagation(),children:[f.jsx("button",{onClick:y,className:"absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors",children:f.jsx(hz,{className:"w-8 h-8"})}),f.jsx("div",{className:"p-4",children:f.jsx("video",{src:l,controls:!0,autoPlay:!0,className:"w-full rounded-lg",style:{maxHeight:"70vh"},children:""})})]})})]})}function cpe(){const t=co(),[e,n]=A.useState("standard"),[r,i]=A.useState(""),[a,s]=A.useState([]),[l,c]=A.useState("zh-CN-XiaoxiaoNeural"),[d,h]=A.useState(0),[p,b]=A.useState(0),[y,x]=A.useState(!1),[w,E]=A.useState(null),[T,C]=A.useState(!1),[N,P]=A.useState(null),[k,j]=A.useState(null),[D,H]=A.useState([]),[Y,X]=A.useState(""),[z,K]=A.useState(""),[ce,te]=A.useState(0),[W,R]=A.useState(0),[B,re]=A.useState(!1),[le,M]=A.useState(null),[U,Q]=A.useState(!1),[I,oe]=A.useState(null),[$,ie]=A.useState(!1),[me,be]=A.useState(!1),[J,Oe]=A.useState(""),[Be,se]=A.useState(null),[ze,Fe]=A.useState(!1),[tt,ee]=A.useState(0),[ye,He]=A.useState(null),[De,Ue]=A.useState(null);A.useEffect(()=>{Ge()},[]),A.useEffect(()=>{nt()},[]);const Ge=async()=>{try{const _e=await(await fetch(`${gt}/api/tts/voices/`)).json();_e.status==="success"&&s(_e.voices)}catch(ue){console.error("Failed to fetch voices:",ue)}},nt=async()=>{try{const _e=await(await fetch(`${gt}/api/personal-voice/`)).json();_e.status==="success"&&(H(_e.voices),_e.voices.length>0&&!Y&&X(_e.voices[0].voice_id))}catch(ue){console.error("Failed to fetch personal voices:",ue)}},rt=[{label:"",voices:a.filter(ue=>ue.language==="zh-CN")},{label:"",voices:a.filter(ue=>ue.language==="zh-HK")},{label:"",voices:a.filter(ue=>ue.language==="zh-TW")},{label:"",voices:a.filter(ue=>ue.language==="en-US")},{label:"",voices:a.filter(ue=>ue.language==="en-GB")}].filter(ue=>ue.voices.length>0),We=async()=>{if(!r.trim()){alert("");return}x(!0),E(null),j(null);try{const _e=await(await fetch(`${gt}/api/tts/synthesize/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r,voice:l,rate:`${d}%`,pitch:`${p}%`})})).json();_e.status==="success"?(E(`${gt}${_e.audio_url}`),j({json:_e.subtitle_url,srt:_e.srt_url,vtt:_e.vtt_url}),alert("")):alert(_e.message||"")}catch(ue){console.error("Synthesis error:",ue),alert("")}finally{x(!1)}},Ae=async()=>{if(!z.trim()){alert("");return}if(!Y){alert("");return}re(!0),M(null);try{const _e=await(await fetch(`${gt}/api/personal-voice/synthesize/`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:z,voice_id:Y,rate:`${ce}%`,pitch:`${W}%`})})).json();_e.status==="success"?(M(`${gt}${_e.audio_url}`),alert("")):alert(_e.message||"")}catch(ue){console.error("Personal synthesis error:",ue),alert("")}finally{re(!1)}},ne=async()=>{if(!J){alert("");return}if(!Be){alert("");return}be(!0);try{const ue=new FormData;ue.append("voice_name",J),ue.append("voice_sample",Be);const Me=await(await fetch(`${gt}/api/personal-voice/create/`,{method:"POST",body:ue})).json();Me.status==="success"?(alert(""),Oe(""),se(null),Ue(null),ie(!1),nt()):alert(Me.message||"")}catch(ue){console.error("Create personal voice error:",ue),alert("")}finally{be(!1)}};A.useEffect(()=>{let ue;return ze?ue=setInterval(()=>{ee(_e=>_e+1)},1e3):ee(0),()=>clearInterval(ue)},[ze]);const we=async()=>{try{const ue=await navigator.mediaDevices.getUserMedia({audio:!0});let _e={mimeType:"audio/webm"};MediaRecorder.isTypeSupported("audio/webm")||(_e={mimeType:"audio/mp4"});const Me=new MediaRecorder(ue,_e),vt=[];Me.ondataavailable=lt=>{vt.push(lt.data)},Me.onstop=()=>{const lt=Me.mimeType||"audio/webm",Mt=new Blob(vt,{type:lt}),mn=new File([Mt],"sample_recording.webm",{type:lt}),Rn=URL.createObjectURL(Mt);se(mn),Ue(Rn),ue.getTracks().forEach(dr=>dr.stop())},Me.start(),He(Me),Fe(!0)}catch(ue){console.error("Failed to start recording:",ue),alert("")}},Le=()=>{ye&&ye.state!=="inactive"&&(ye.stop(),Fe(!1))},Ke=()=>{se(null),Ue(null),ee(0)},ot=ue=>{const _e=Math.floor(ue/60),Me=ue%60;return`${_e}:${Me.toString().padStart(2,"0")}`},Ot=async ue=>{if(confirm(""))try{const Me=await(await fetch(`${gt}/api/personal-voice/${ue}/delete/`,{method:"DELETE"})).json();Me.status==="success"?(alert(""),nt()):alert(Me.message||"")}catch(_e){console.error("Delete error:",_e),alert("")}},vr=ue=>{const _e=ue?le:w,Me=ue?I:N,vt=ue?oe:P,lt=ue?U:T,Mt=ue?Q:C;if(_e)if(Me)lt?(Me.pause(),Mt(!1)):(Me.play(),Mt(!0));else{const mn=new Audio(_e);mn.addEventListener("ended",()=>Mt(!1)),mn.addEventListener("error",()=>{alert(""),Mt(!1)}),vt(mn),mn.play(),Mt(!0)}},pe=ue=>{if(!ue)return;const _e=document.createElement("a");_e.href=ue,_e.download=`tts_${Date.now()}.mp3`,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),alert("")},ke=(ue,_e)=>{if(!ue)return;const Me=document.createElement("a");Me.href=`${gt}${ue}`,Me.download=`subtitle_${Date.now()}.${_e}`,document.body.appendChild(Me),Me.click(),document.body.removeChild(Me)};return A.useEffect(()=>()=>{N&&(N.pause(),N.remove()),I&&(I.pause(),I.remove())},[N,I]),f.jsx("div",{className:"min-h-screen bg-blue-100",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[f.jsx("div",{className:"flex items-center justify-between mb-6",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>t("dashboard"),className:"p-2 hover:bg-white/50 rounded-lg transition-colors",children:f.jsx(fl,{className:"w-6 h-6 text-gray-700"})}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI"}),f.jsx("p",{className:"text-sm text-gray-600",children:"Azure"})]})]})}),f.jsx("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:f.jsxs("div",{className:"flex border-b",children:[f.jsx("button",{onClick:()=>n("standard"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${e==="standard"?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900"}`,children:f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx(Yy,{className:"w-5 h-5"}),""]})}),f.jsx("button",{onClick:()=>n("personal"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${e==="personal"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50":"text-gray-600 hover:text-gray-900"}`,children:f.jsxs("div",{className:"flex items-center justify-center gap-2",children:[f.jsx(nC,{className:"w-5 h-5"}),""]})})]})}),e==="standard"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),f.jsx("textarea",{value:r,onChange:ue=>i(ue.target.value),placeholder:"...",className:"w-full h-40 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none resize-none",maxLength:5e3}),f.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[r.length," / 5000 "]})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),f.jsx("select",{value:l,onChange:ue=>c(ue.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 outline-none",children:rt.map(ue=>f.jsx("optgroup",{label:ue.label,children:ue.voices.map(_e=>f.jsx("option",{value:_e.id,children:_e.name},_e.id))},ue.label))})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[": ",d>0?`+${d}%`:`${d}%`]}),f.jsx("input",{type:"range",min:"-50",max:"50",step:"10",value:d,onChange:ue=>h(parseInt(ue.target.value)),className:"w-full"}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[f.jsx("span",{children:""}),f.jsx("span",{children:""}),f.jsx("span",{children:""})]})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[": ",p>0?`+${p}%`:`${p}%`]}),f.jsx("input",{type:"range",min:"-50",max:"50",step:"10",value:p,onChange:ue=>b(parseInt(ue.target.value)),className:"w-full"}),f.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[f.jsx("span",{children:""}),f.jsx("span",{children:""}),f.jsx("span",{children:""})]})]})]}),f.jsx("button",{onClick:We,disabled:y||!r.trim(),className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-4 rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:y?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Yy,{className:"w-5 h-5"}),""]})})]}),w&&f.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl shadow-sm p-6 border-2 border-green-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),f.jsxs("div",{className:"flex gap-3 mb-4",children:[f.jsx("button",{onClick:()=>vr(!1),className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:T?f.jsxs(f.Fragment,{children:[f.jsx(tC,{className:"w-5 h-5"}),""]}):f.jsxs(f.Fragment,{children:[f.jsx(dp,{className:"w-5 h-5"}),""]})}),f.jsxs("button",{onClick:()=>pe(w),className:"flex-1 bg-white border-2 border-blue-600 text-blue-600 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-colors flex items-center justify-center gap-2",children:[f.jsx(ud,{className:"w-5 h-5"}),""]})]}),k&&f.jsxs("div",{className:"border-t-2 border-green-200 pt-4",children:[f.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:""}),f.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[f.jsxs("button",{onClick:()=>ke(k.json,"json"),className:"bg-white border-2 border-gray-300 text-gray-700 py-2 px-3 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-1",children:[f.jsx(ud,{className:"w-4 h-4"}),"JSON"]}),f.jsxs("button",{onClick:()=>ke(k.srt,"srt"),className:"bg-white border-2 border-gray-300 text-gray-700 py-2 px-3 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-1",children:[f.jsx(ud,{className:"w-4 h-4"}),"SRT"]}),f.jsxs("button",{onClick:()=>ke(k.vtt,"vtt"),className:"bg-white border-2 border-gray-300 text-gray-700 py-2 px-3 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors flex items-center justify-center gap-1",children:[f.jsx(ud,{className:"w-4 h-4"}),"VTT"]})]}),f.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"OK"})]})]})]}),e==="personal"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl shadow-sm p-6 border-2 border-purple-200",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[f.jsx(Zd,{className:"w-6 h-6"}),""]}),f.jsx("button",{onClick:()=>ie(!$),className:"text-purple-600 hover:text-purple-700 font-medium",children:$?"":""})]}),$&&f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",value:J,onChange:ue=>Oe(ue.target.value),placeholder:"",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[" ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"10-60"}),Be?f.jsx("div",{className:"space-y-2",children:f.jsxs("div",{className:"p-4 bg-green-50 border-2 border-green-200 rounded-lg",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-sm font-semibold text-green-700",children:" "}),f.jsx("button",{type:"button",onClick:Ke,className:"text-red-600 hover:text-red-700 text-sm font-medium",children:""})]}),De&&f.jsx("audio",{controls:!0,className:"w-full mt-2",src:De})]})}):f.jsxs("div",{className:"space-y-2",children:[ze?f.jsxs("button",{type:"button",onClick:Le,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg font-semibold hover:bg-gray-700 transition-colors flex items-center justify-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-white animate-pulse"})," (",ot(tt),")"]}):f.jsxs("button",{type:"button",onClick:we,className:"w-full px-4 py-3 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-white rounded-full"}),""]}),f.jsx("div",{className:"text-center text-sm text-gray-500",children:""}),f.jsx("input",{type:"file",accept:"audio/*",onChange:ue=>se(ue.target.files?.[0]||null),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg text-sm"})]}),f.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:f.jsxs("p",{className:"text-xs text-blue-800",children:[" ",f.jsx("strong",{children:""}),"[]"]})})]}),f.jsx("button",{onClick:ne,disabled:me,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:me?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"...30-5"]}):f.jsxs(f.Fragment,{children:[f.jsx(Zd,{className:"w-5 h-5"}),""]})})]})]}),D.length>0?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),f.jsx("div",{className:"space-y-2",children:D.map(ue=>f.jsxs("div",{className:"flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-purple-300 transition-colors",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-900",children:ue.name}),f.jsxs("p",{className:"text-sm text-gray-500",children:[": ",ue.voice_talent_name," | : ",ue.company_name]})]}),f.jsx("button",{onClick:()=>Ot(ue.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:f.jsx(Eu,{className:"w-5 h-5"})})]},ue.id))})]}),f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),f.jsx("select",{value:Y,onChange:ue=>X(ue.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none",children:D.map(ue=>f.jsx("option",{value:ue.voice_id,children:ue.name},ue.voice_id))})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),f.jsx("textarea",{value:z,onChange:ue=>K(ue.target.value),placeholder:"...",className:"w-full h-32 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:ring-2 focus:ring-purple-200 outline-none resize-none",maxLength:5e3})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[": ",ce>0?`+${ce}%`:`${ce}%`]}),f.jsx("input",{type:"range",min:"-50",max:"50",step:"10",value:ce,onChange:ue=>te(parseInt(ue.target.value)),className:"w-full"})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[": ",W>0?`+${W}%`:`${W}%`]}),f.jsx("input",{type:"range",min:"-50",max:"50",step:"10",value:W,onChange:ue=>R(parseInt(ue.target.value)),className:"w-full"})]})]}),f.jsx("button",{onClick:Ae,disabled:B||!z.trim()||!Y,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-4 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:B?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"..."]}):f.jsxs(f.Fragment,{children:[f.jsx(Yy,{className:"w-5 h-5"}),""]})})]}),le&&f.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl shadow-sm p-6 border-2 border-purple-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:""}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:()=>vr(!0),className:"flex-1 bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:U?f.jsxs(f.Fragment,{children:[f.jsx(tC,{className:"w-5 h-5"}),""]}):f.jsxs(f.Fragment,{children:[f.jsx(dp,{className:"w-5 h-5"}),""]})}),f.jsxs("button",{onClick:()=>pe(le),className:"flex-1 bg-white border-2 border-purple-600 text-purple-600 py-3 rounded-lg font-semibold hover:bg-purple-50 transition-colors flex items-center justify-center gap-2",children:[f.jsx(ud,{className:"w-5 h-5"}),""]})]})]})]}):f.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[f.jsx(nC,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),f.jsx("p",{className:"text-gray-500",children:""})]})]}),f.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:""}),f.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-700 mb-1",children:""}),f.jsxs("ul",{className:"space-y-1 ml-4",children:[f.jsx("li",{children:" 20+"}),f.jsx("li",{children:" "})]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-700 mb-1",children:""}),f.jsxs("ul",{className:"space-y-1 ml-4",children:[f.jsx("li",{children:" 5-90"}),f.jsx("li",{children:" "}),f.jsx("li",{children:" "})]})]})]})]})]})})}function dpe(){return f.jsx(W7,{children:f.jsx(sU,{children:f.jsx("div",{className:"min-h-screen",children:f.jsxs(LF,{children:[f.jsx(qn,{path:"/",element:f.jsx(QN,{})}),f.jsx(qn,{path:"/home",element:f.jsx(QN,{})}),f.jsx(qn,{path:"/dashboard",element:f.jsx(Ur,{children:f.jsx(fz,{})})}),f.jsx(qn,{path:"/policies",element:f.jsx(Ur,{children:f.jsx(IH,{})})}),f.jsx(qn,{path:"/plan-analyzer",element:f.jsx(Ur,{children:f.jsx(dq,{})})}),f.jsx(qn,{path:"/plan-analyzer-2",element:f.jsx(Ur,{children:f.jsx(fq,{})})}),f.jsx(qn,{path:"/plan-management",element:f.jsx(Ur,{children:f.jsx(mq,{})})}),f.jsx(qn,{path:"/document/:id",element:f.jsx(Ur,{children:f.jsx(ZQ,{})})}),f.jsx(qn,{path:"/document/:id/content-editor",element:f.jsx(Ur,{children:f.jsx(Qme,{})})}),f.jsx(qn,{path:"/content-creator",element:f.jsx(Ur,{children:f.jsx(Zme,{})})}),f.jsx(qn,{path:"/ip-image-generator",element:f.jsx(Ur,{children:f.jsx(ipe,{})})}),f.jsx(qn,{path:"/content-image-generator",element:f.jsx(Ur,{children:f.jsx(ape,{})})}),f.jsx(qn,{path:"/media-library",element:f.jsx(Ur,{children:f.jsx(ope,{})})}),f.jsx(qn,{path:"/video-projects",element:f.jsx(Ur,{children:f.jsx(upe,{})})}),f.jsx(qn,{path:"/video-generator",element:f.jsx(Ur,{children:f.jsx(lpe,{})})}),f.jsx(qn,{path:"/text-to-speech",element:f.jsx(Ur,{children:f.jsx(cpe,{})})}),f.jsx(qn,{path:"*",element:f.jsx(RF,{to:"/",replace:!0})})]})})})})}YB.createRoot(document.getElementById("root")).render(f.jsx(A.StrictMode,{children:f.jsx(dpe,{})}));
