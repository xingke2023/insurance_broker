# md5.json 提取分析

## 数据来源

- **文件**：md5.json (1.1 MB)
- **Projection**：Projection 3（policyOptions: ['Withdrawal', 'Realization']）
- **投资假设**：当前假设情景（无Low/High后缀）

## md5 vs md4 的差异

### 提取方式对比

| 特性 | md4.json | md5.json |
|------|----------|----------|
| Projection | Projection 1 (Withdrawal) | Projection 3 (Withdrawal + Realization) |
| 提取方式 | 固定金额提取（每年2,000） | 非保证金额提取（金额浮动） |
| 提取开始年份 | 第5年 | 第5年 |
| 提取结束年份 | 第119年 | 第9年 |
| 提取总额（至第80年） | 152,000 | 12,023 |
| 名义金额字段 | ✓ 有 (colAfterWDNotionalAmount) | ✗ 无 |

### 字段映射对比

| 输出字段 | md4.json | md5.json |
|---------|----------|----------|
| 该年提取 | colCurrentTotalWithdrawalAmount<br>（固定2,000） | colNonGuaranteedWithdraw<br>（浮动金额） |
| 累计提取 | colAccumulatedTotalWithdrawalAmount | colAccumulatedNonGuaranteedWithdrawal |
| 名义金额 | colAfterWDNotionalAmount | - |
| 保证现金价值 | colGuaranteedCashValue | colGuaranteedCashValue |
| 非保证价值 | colNonGuaranteedSurrender | colNonGuaranteedSurrender<br>（B+C） |
| 总退保价值 | colTotalSurrender | colTotalSurrender |

## 第80年数据对比

### md4.json（固定提取）

| 项目 | 数值 |
|------|------|
| 该年提取款项 | 2,000 |
| 累计提取款项 | 152,000 |
| 名义金额 | 18,774 |
| 保证现金价值 | 30,493 |
| 非保证退保价值 | 3,135,922 |
| **总退保价值** | **3,166,415** |
| **总价值**（已提取+剩余） | **3,318,415** |

### md5.json（Realization提取）

| 项目 | 数值 |
|------|------|
| 该年非保证提取 | 0 |
| 累计非保证提取 | 12,023 |
| 名义金额 | - |
| 保证现金价值 | 81,211 |
| 非保证金额B+C | 5,556,154 |
| **总退保价值** | **5,637,364** |
| **总价值**（已提取+剩余） | **5,649,387** |

### 差异分析

| 项目 | md4 | md5 | 差异 | 比例 |
|------|-----|-----|------|------|
| 累计提取 | 152,000 | 12,023 | -139,977 | -92.1% |
| 保证价值 | 30,493 | 81,211 | +50,718 | +166.3% |
| 非保证价值 | 3,135,922 | 5,556,154 | +2,420,232 | +77.2% |
| 总退保价值 | 3,166,415 | 5,637,364 | +2,470,949 | +78.0% |
| **总价值** | **3,318,415** | **5,649,387** | **+2,330,972** | **+70.2%** |

**关键发现**：
- md5的提取方式更保守（仅提取12,023 vs 152,000）
- md5保留了更多价值在保单中（5,649,387 vs 3,318,415）
- md5的总价值高出70.2%

## 提取时间表对比

### md4.json - 固定提取（前10年）

| 年度 | 该年提取 | 累计提取 | 退保价值 |
|------|---------|---------|----------|
| 5 | 2,000 | 2,000 | 28,594 |
| 6 | 2,000 | 4,000 | 44,737 |
| 7 | 2,000 | 6,000 | 47,913 |
| 8 | 2,000 | 8,000 | 51,296 |
| 9 | 2,000 | 10,000 | 52,816 |
| 10 | 2,000 | 12,000 | 53,803 |

**特点**：
- 每年提取固定金额2,000
- 从第5年持续到第119年
- 累计提取230,000（115年）

### md5.json - Realization提取（前10年）

| 年度 | 该年提取 | 累计提取 | 退保价值 |
|------|---------|---------|----------|
| 5 | 1,809 | 1,809 | 28,784 |
| 6 | 2,403 | 4,212 | 45,628 |
| 7 | 2,501 | 6,714 | 48,510 |
| 8 | 2,661 | 9,374 | 51,448 |
| 9 | 2,649 | 12,023 | 52,087 |
| 10 | 0 | 12,023 | 54,552 |

**特点**：
- 提取金额浮动（1,809 - 2,661）
- 仅从第5年到第9年（5年）
- 第10年开始停止提取
- 累计提取12,023（5年）

## Realization功能说明

### 什么是Realization？

"Realization"（实现）是一种提取策略，允许保单持有人：
- 提取部分非保证价值
- 提取金额基于当前投资表现
- 通常在早期年份进行
- 提取后保单继续累积价值

### 优势

1. **灵活性**：提取金额根据投资表现调整
2. **保值能力强**：提取后仍保留大部分价值
3. **长期收益高**：停止提取后价值继续增长

### md5的Realization策略

- **提取期**：第5-9年（5年）
- **提取总额**：12,023
- **提取比例**：约占累计保费的24%
- **停止条件**：第10年自动停止

## 输出字段说明

### md5_withdrawal.json格式

```json
{
  "withdrawal_realization": [
    {
      "policy_year": 80,                   // 保单年度
      "premiums_paid": 50000,              // 累计已缴保费
      "non_guaranteed_withdrawal": 0,      // 该年非保证提取款项
      "accumulated_ng_withdrawal": 12023,  // 累计非保证提取
      "guaranteed": 81211,                 // 保证现金价值
      "non_guaranteed_bc": 5556154,        // 非保证金额B+C
      "total": 5637364                     // 总额
    }
  ]
}
```

### 字段关系

```
总额 = 保证现金价值 + 非保证金额B+C
5,637,364 = 81,211 + 5,556,154 = 5,637,365 ✓（差1为四舍五入）
```

## 使用程序

### 提取md5数据

```bash
python3 transform_md5_withdrawal.py md5.json output.json
```

### 对比md4和md5

```bash
# 提取md4数据
python3 transform_withdrawal.py md4.json md4_withdrawal.json

# 提取md5数据
python3 transform_md5_withdrawal.py md5.json md5_withdrawal.json

# 查看对比
python3 compare_withdrawals.py
```

## 适用场景

### md4方式（固定提取）适合

- 需要稳定持续的现金流
- 退休收入补充
- 长期年金需求
- 预算规划清晰

### md5方式（Realization）适合

- 短期资金需求
- 早期提取部分收益
- 追求长期价值最大化
- 灵活的财务规划

## 总结

| 方面 | md4（固定提取） | md5（Realization） | 推荐 |
|------|----------------|-------------------|------|
| 提取总额 | 大（152,000） | 小（12,023） | - |
| 提取期限 | 长（115年） | 短（5年） | - |
| 第80年总价值 | 3,318,415 | 5,649,387 | md5 |
| 现金流稳定性 | 高 | 低 | md4 |
| 长期收益 | 低 | 高 | md5 |
| 适合场景 | 退休收入 | 财富累积 | - |

**结论**：
- md5的Realization策略更适合长期财富累积
- md4的固定提取策略更适合需要稳定现金流的情况
- 第80年时，md5的总价值比md4高出70%

## 验证结果

✅ 程序成功提取md5数据
✅ 第80年数据验证通过
✅ 保证 + 非保证B+C = 总额（关系正确）
✅ 提取时间表符合Realization模式

---

**文件生成**：
- `transform_md5_withdrawal.py` - md5专用提取程序
- `md5_withdrawal.json` - 提取的数据（120年）
- `MD5_ANALYSIS.md` - 本分析文档
