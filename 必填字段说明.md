# 创建个人语音必填字段说明

## 📋 当前必填字段

根据最新的CosyVoice实现，创建个人语音时的必填字段已大幅简化：

### ✅ 必填字段

1. **语音名称** (`voice_name`) - **必填**
   - 给你的专属语音起个名字
   - 例如："我的声音"、"张三的声音"

2. **语音样本** (`voice_sample`) - **必填**
   - 上传或录制一段音频文件
   - 推荐时长：10-60秒
   - 支持格式：WAV, MP3, M4A等
   - 内容：朗读任意文字，保证音质清晰

### 🔧 可选字段

3. **姓名** (`voice_talent_name`) - 可选
   - 用于显示和标识
   - 不填写将显示为"未命名"

4. **公司名称** (`company_name`) - 可选
   - 用于显示和标识
   - 不填写将显示为"个人"

## ❌ 已移除字段

使用CosyVoice后，以下字段**不再需要**：

- ~~同意声明文本~~ - Azure专用，CosyVoice不需要
- ~~同意声明音频~~ - Azure专用，CosyVoice不需要
- ~~consent_text~~ - 后端不再处理
- ~~consent_audio~~ - 后端不再处理

## 🎯 API调用示例

### 最简单的调用（只填必填项）

```bash
curl -X POST https://hongkong.xingke888.com/api/personal-voice/create/ \
  -F "voice_name=我的声音" \
  -F "voice_sample=@/path/to/audio.mp3"
```

### 完整的调用（包含可选项）

```bash
curl -X POST https://hongkong.xingke888.com/api/personal-voice/create/ \
  -F "voice_name=我的专属语音" \
  -F "voice_talent_name=张三" \
  -F "company_name=我的公司" \
  -F "voice_sample=@/path/to/audio.mp3"
```

### 使用公网URL（不上传文件）

```bash
curl -X POST https://hongkong.xingke888.com/api/personal-voice/create/ \
  -F "voice_name=测试语音" \
  -F "audio_url=https://example.com/audio.wav"
```

## 🔄 前端表单简化建议

当前前端表单包含很多Azure时代的遗留字段。建议简化为：

```jsx
<form>
  {/* 必填 */}
  <input
    type="text"
    name="voice_name"
    placeholder="语音名称 *"
    required
  />

  {/* 可选 */}
  <input
    type="text"
    name="voice_talent_name"
    placeholder="姓名（可选）"
  />

  {/* 可选 */}
  <input
    type="text"
    name="company_name"
    placeholder="公司名称（可选）"
  />

  {/* 必填：上传或录音 */}
  <div>
    <button onClick={startRecording}>录音</button>
    <span>或</span>
    <input
      type="file"
      name="voice_sample"
      accept="audio/*"
      required
    />
  </div>

  <button type="submit">创建语音</button>
</form>
```

## 📝 后端验证逻辑

```python
# 后端只验证这两个必填项
if not voice_name:
    return error("语音名称不能为空")

if not voice_sample_file and not audio_url:
    return error("请上传语音样本或提供音频URL")

# 可选字段自动设置默认值
voice_talent_name = voice_talent_name or '未命名'
company_name = company_name or '个人'
```

## ✨ 优势

1. **用户体验更好** - 只需填2个字段（名称+音频）
2. **操作更简单** - 不需要录制同意声明
3. **成功率更高** - 没有Azure的严格验证
4. **时间更短** - 减少了一半的表单项

## 🎬 推荐录音内容

### 中文朗读文本示例

```
大家好，我是[你的名字]。今天天气不错，
心情也很好。我喜欢在阳光明媚的日子里
出去走走，感受大自然的美好。希望每个人
都能拥有这样轻松愉快的时光。
```

### 英文朗读文本示例

```
Hello, my name is [your name]. Today is a beautiful day,
and I'm feeling great. I love going for walks on sunny days
and enjoying the beauty of nature. I hope everyone can have
such peaceful and joyful moments.
```

## ⚠️ 注意事项

1. 音频必须是**公网可访问的URL**（http/https）
2. 系统会自动将上传的文件转换为公网URL
3. 音频会自动转换为16kHz单声道WAV格式
4. 创建过程可能需要30秒-5分钟，请耐心等待
